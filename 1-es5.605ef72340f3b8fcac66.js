function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(t);if(e){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{LAq7:function(t,e,n){"use strict";var i,r,o,a,s,c,l,u;n.r(e),n.d(e,"BuilderModule",(function(){return lh}));var h=n("ofXK"),p=n("tyNb"),d=n("fXoL"),f={TEXT_MENU_ID:2,PHOTO_MENU_ID:5,UPLOAD_MENU_ID:6,VECTOR_MENU_ID:7,BG_MENU_ID:8,ELEMENTS_MENU_ID:12},g=[{id:0,label:"Template",icon:"text_fields",type:"text"},{id:1,label:"Layouts",icon:"view_comfy",type:"text"},{id:2,label:"Text",icon:"text_fields",type:"text"},{id:5,label:"Photo",icon:"image_search"},{id:7,label:"Vectors",icon:"design_services"},{id:12,label:"Elements",icon:"signal_cellular_null",type:"text"},{id:f.BG_MENU_ID,label:"Background",icon:"wallpaper"},{id:9,label:"Upload",icon:"cloud_upload"},{id:10,label:"Stickers",icon:"star_rate"},{id:11,label:"Gif",icon:"gif"},{id:8,label:"Icons",icon:"insert_emoticon"}],b=function(t){return t[t.SINGLE_SELECT=0]="SINGLE_SELECT",t[t.FONT_WEIGHT_BOLD=1]="FONT_WEIGHT_BOLD",t[t.TOGGABLE=2]="TOGGABLE",t[t.FONT_STYLE_ITALIC=3]="FONT_STYLE_ITALIC",t}({}),v=function(t){return t[t.CANVAS=0]="CANVAS",t[t.BACKGROUND=1]="BACKGROUND",t[t.PHOTO=2]="PHOTO",t[t.ANY=3]="ANY",t[t.TEXT=4]="TEXT",t[t.VECTOR=5]="VECTOR",t[t.GROUP=6]="GROUP",t[t.MULTIPLE_SELECTION=7]="MULTIPLE_SELECTION",t[t.LINE=8]="LINE",t}({}),m={2:[{tag:"label",text:"Enter your text",elementId:"my-first-element",id:"xzkljasf214assaf",type:"image",toolbarOptions:[0,1,3,4,6,7,8,10,11],searchKeywords:[],canvasElement:{tag:"div",type:"text",attribute:{},style:{"font-size":"24px","font-family":"monospace","text-align":"center",position:"absolute",cursor:"move","user-select":"none",width:"320px",height:"68px"},children:[{tag:"label",innerText:"Double click to type",style:{cursor:"move"}}]},imageUrl:"/assets/images/pickers/add-text.png"}],3:[{tag:"button",text:"Submit",children:[],style:{padding:"10px 18px",position:"absolute"}}],4:[{tag:"a",text:"My link",children:[],style:{padding:"10px 18px",position:"absolute"}}],5:[]},y=n("0/lk");Node.prototype.forEach=Array.prototype.forEach;var x=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"cloneShallow",value:function(t){return Array.isArray(t)?_toConsumableArray(t):Object.assign({},t)}},{key:"cloneDeep",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"getElementsAsArray",value:function(t){return Array.from(t)}}]),t}(),C=function(){function t(e){_classCallCheck(this,t),this.eventer=e}return _createClass(t,[{key:"dragStart",value:function(t,e){t.dataTransfer.setData("pickerItem",JSON.stringify(this.buildData(t,e)))}},{key:"onClick",value:function(t,e){this.eventer.send({type:y.a.CANVAS_ADD_ITEM,value:x.cloneDeep({item:e.canvasElement})})}},{key:"buildData",value:function(t,e){var n=t.target.getBoundingClientRect();return{left:t.clientX-n.left,top:t.clientY-n.top,item:e}}}]),t}(),S=n("LRne"),O=n("D0XW"),E=n("7o/Q"),w=n("WMd4");function k(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.a,i=(e=t)instanceof Date&&!isNaN(+e)?+t-n.now():Math.abs(t);return function(t){return t.lift(new T(i,n))}}var T=function(){function t(e,n){_classCallCheck(this,t),this.delay=e,this.scheduler=n}return _createClass(t,[{key:"call",value:function(t,e){return e.subscribe(new _(t,this.delay,this.scheduler))}}]),t}(),_=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,r){var o;return _classCallCheck(this,n),(o=e.call(this,t)).delay=i,o.scheduler=r,o.queue=[],o.active=!1,o.errored=!1,o}return _createClass(n,[{key:"_schedule",value:function(t){this.active=!0,this.destination.add(t.schedule(n.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}},{key:"scheduleNotification",value:function(t){if(!0!==this.errored){var e=this.scheduler,n=new P(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}}},{key:"_next",value:function(t){this.scheduleNotification(w.a.createNext(t))}},{key:"_error",value:function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(w.a.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){for(var e=t.source,n=e.queue,i=t.scheduler,r=t.destination;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(r);if(n.length>0){var o=Math.max(0,n[0].time-i.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1}}]),n}(E.a),P=function t(e,n){_classCallCheck(this,t),this.time=e,this.notification=n},I=function t(e){_classCallCheck(this,t),this.canvasElement=e},M=function t(e,n,i,r){_classCallCheck(this,t),this.resizable=!0,this.increaseZIndex=!0,this.tag=e,this.attribute=n,this.style=i,this.children=r},z=function t(){_classCallCheck(this,t),this.width=0,this.height=0,this.rotate=0,this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1},R={Z_INDEX:"z-index",COLOR:"color",BG:"background",BG_COLOR:"background-color",BG_IMAGE:"background-image",LETTER_SPACING:"letter-spacing",LINE_HEIGHT:"line-height",BG_SIZE:"background-size",BG_POSITION:"background-position",OVERFLOW:"overflow",OVERFLOW_HIDDEN:"hidden",FONT_FAMILY:"font-family",FONT_ITALIC:"font-style",FONT_SIZE:"font-size",FONT_WEIGHT:"font-weight",WIDTH:"width",HEIGHT:"height",TRANSFORM:"transform",TRANSLATE:"translate",ROTATE:"rotate",TRANSLATE_X:"translateX",TRANSLATE_Y:"translateY",SCALE_X:"scaleX",SCALE_Y:"scaleY",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TEXT_ALIGN:"text-align",OPACITY:"opacity",POSITION:"position"},D={OVERFLOW_HIDDEN:"hidden",FONT_WEIGHT_BOLD:"bold",FONT_WEIGHT_NORMAL:"normal",FONT_ITALIC:"italic",FONT_STYLE_NORMAL:"normal",BG_SIZE_COVER:"cover",GB_POSITION_CENTER:"center",TEXT_ALIGN_LEFT:"left",TEXT_ALIGN_CENTER:"center",TEXT_ALIGN_JUSTIFY:"justify",TEXT_ALIGN_RIGHT:"right",COLOR_TRANSPARENT:"transparent",COLOR_BLACK:"black",POSITION_ABSOLUTE:"absolute",NONE:"none"},N=[R.WIDTH,R.HEIGHT,R.TOP,R.FONT_SIZE,R.LEFT,R.LETTER_SPACING],A=(_defineProperty(i={},R.OPACITY,1),_defineProperty(i,R.POSITION,D.POSITION_ABSOLUTE),_defineProperty(i,R.BG,D.COLOR_TRANSPARENT),_defineProperty(i,"user-select","none"),i),L=Object.assign({},A,(_defineProperty(r={},R.FONT_SIZE,"35px"),_defineProperty(r,R.FONT_FAMILY,"monospace"),_defineProperty(r,R.TEXT_ALIGN,"center"),_defineProperty(r,R.WIDTH,"320px"),_defineProperty(r,R.LETTER_SPACING,"0px"),_defineProperty(r,R.LINE_HEIGHT,1.5),_defineProperty(r,R.FONT_ITALIC,D.FONT_STYLE_NORMAL),_defineProperty(r,R.FONT_WEIGHT,D.FONT_WEIGHT_NORMAL),_defineProperty(r,R.COLOR,D.COLOR_BLACK),r)),B=Object.assign({},A,(_defineProperty(o={},R.TEXT_ALIGN,[D.TEXT_ALIGN_CENTER]),_defineProperty(o,R.WIDTH,"200px"),_defineProperty(o,R.HEIGHT,"200px"),o)),j={width:"100%",height:"100%","object-fit":"cover"},G={cursor:"move","max-width":"100%","max-height":"100%"},H={src:"",class:"large-photo-wrapper"};function F(){var t=x.cloneDeep(H),e=x.cloneDeep(G),n=x.cloneDeep(B),i=new M("img",t,e,[]),r=new M("div",{},n,[i]);return r.dimention=X(),new I(r)}function X(){var t=new z;return t.width=320,t.height=40,t}var U,W,Y=[{id:"FbN2z3bEaSs",thumb:"https://images.unsplash.com/photo-1500485035595-cbe6f645feb1?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1500485035595-cbe6f645feb1?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4e3,height:6e3},{id:"A-NVHPka9Rk",thumb:"https://images.unsplash.com/photo-1494783367193-149034c05e8f?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1494783367193-149034c05e8f?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5472,height:3648},{id:"3l3RwQdHRHg",thumb:"https://images.unsplash.com/photo-1491466424936-e304919aada7?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1491466424936-e304919aada7?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4017,height:2683},{id:"txtWlEUyW2Y",thumb:"https://images.unsplash.com/photo-1500322969630-a26ab6eb64cc?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1500322969630-a26ab6eb64cc?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:6e3,height:4e3},{id:"EPy0gBJzzZU",thumb:"https://images.unsplash.com/reserve/bOvf94dPRxWu0u3QsPjF_tree.jpg?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/reserve/bOvf94dPRxWu0u3QsPjF_tree.jpg?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4928,height:3264},{id:"PH0HYjsf2n8",thumb:"https://images.unsplash.com/photo-1472213984618-c79aaec7fef0?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1472213984618-c79aaec7fef0?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5034,height:5269},{id:"_WR6tUIAJe8",thumb:"https://images.unsplash.com/photo-1502318217862-aa4e294ba657?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1502318217862-aa4e294ba657?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:2143,height:3e3},{id:"-98y5HIFDs8",thumb:"https://images.unsplash.com/photo-1504714146340-959ca07e1f38?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1504714146340-959ca07e1f38?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3400,height:2720},{id:"50HS3AzJsvQ",thumb:"https://images.unsplash.com/photo-1484402628941-0bb40fc029e7?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1484402628941-0bb40fc029e7?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3e3,height:4500},{id:"_RBcxo9AU-U",thumb:"https://images.unsplash.com/photo-1472214103451-9374bd1c798e?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1472214103451-9374bd1c798e?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:7932,height:5291},{id:"Ni4NgA64TFQ",thumb:"https://images.unsplash.com/photo-1419064642531-e575728395f2?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1419064642531-e575728395f2?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5966,height:3978},{id:"WymR2nYtj5M",thumb:"https://images.unsplash.com/photo-1446038236174-69712e24d137?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1446038236174-69712e24d137?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4016,height:6016},{id:"_tBeFVZPlPY",thumb:"https://images.unsplash.com/photo-1541890289-b86df5bafd81?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1541890289-b86df5bafd81?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4384,height:3012},{id:"UzHQOxVxqgw",thumb:"https://images.unsplash.com/photo-1431620828042-54af7f3a9e28?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1431620828042-54af7f3a9e28?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:7e3,height:4700},{id:"IX7lpZDGHPc",thumb:"https://images.unsplash.com/photo-1538939859956-a6631d70277c?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1538939859956-a6631d70277c?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5760,height:3840},{id:"1EYMue_AwDw",thumb:"https://images.unsplash.com/photo-1454372182658-c712e4c5a1db?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1454372182658-c712e4c5a1db?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:7360,height:4912},{id:"1kf69eE7VR4",thumb:"https://images.unsplash.com/photo-1521747116042-5a810fda9664?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1521747116042-5a810fda9664?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:6e3,height:4e3},{id:"koy6FlCCy5s",thumb:"https://images.unsplash.com/photo-1490750967868-88aa4486c946?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1490750967868-88aa4486c946?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:7952,height:5304},{id:"zNN6ubHmruI",thumb:"https://images.unsplash.com/photo-1476610182048-b716b8518aae?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1476610182048-b716b8518aae?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:7952,height:4811},{id:"Uszp5Gkg0AI",thumb:"https://images.unsplash.com/photo-1413752362258-7af2a667b590?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1413752362258-7af2a667b590?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4928,height:3264}],q=[{id:"zGzXsJUBQfs",thumb:"https://images.unsplash.com/photo-1558981806-ec527fa84c39?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1558981806-ec527fa84c39?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3e3,height:2e3},{id:"QMDap1TAu0g",thumb:"https://images.unsplash.com/photo-1487088678257-3a541e6e3922?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1487088678257-3a541e6e3922?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4032,height:3024},{id:"0ZPSX_mQ3xI",thumb:"https://images.unsplash.com/photo-1528459801416-a9e53bbf4e17?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1528459801416-a9e53bbf4e17?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5041,height:7113},{id:"DbwYNr8RPbg",thumb:"https://images.unsplash.com/photo-1522441815192-d9f04eb0615c?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1522441815192-d9f04eb0615c?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4433,height:7880},{id:"wuc-KEIBrdE",thumb:"https://images.unsplash.com/photo-1516617442634-75371039cb3a?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1516617442634-75371039cb3a?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3216,height:4832},{id:"h0Vxgz5tyXA",thumb:"https://images.unsplash.com/32/Mc8kW4x9Q3aRR3RkP5Im_IMG_4417.jpg?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/32/Mc8kW4x9Q3aRR3RkP5Im_IMG_4417.jpg?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5760,height:3840},{id:"yI3weKNBRTc",thumb:"https://images.unsplash.com/photo-1533035353720-f1c6a75cd8ab?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1533035353720-f1c6a75cd8ab?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5304,height:7952},{id:"vC8wj_Kphak",thumb:"https://images.unsplash.com/photo-1487147264018-f937fba0c817?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1487147264018-f937fba0c817?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3456,height:5184},{id:"0tgMnMIYQ9Y",thumb:"https://images.unsplash.com/photo-1533628635777-112b2239b1c7?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1533628635777-112b2239b1c7?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3e3,height:2002},{id:"Hyu76loQLdk",thumb:"https://images.unsplash.com/photo-1509114397022-ed747cca3f65?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1509114397022-ed747cca3f65?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3024,height:4032},{id:"sYbVbxSmdVQ",thumb:"https://images.unsplash.com/photo-1558980664-4d79c6e77b93?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1558980664-4d79c6e77b93?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:7952,height:5304},{id:"RnCPiXixooY",thumb:"https://images.unsplash.com/photo-1500462918059-b1a0cb512f1d?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1500462918059-b1a0cb512f1d?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3223,height:4834},{id:"EWDvHNNfUmQ",thumb:"https://images.unsplash.com/photo-1495195129352-aeb325a55b65?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1495195129352-aeb325a55b65?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:6144,height:4069},{id:"Xaanw0s0pMk",thumb:"https://images.unsplash.com/photo-1513151233558-d860c5398176?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1513151233558-d860c5398176?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4290,height:2860},{id:"5J1bHRX1fNw",thumb:"https://images.unsplash.com/photo-1531315630201-bb15abeb1653?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1531315630201-bb15abeb1653?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3036,height:4048},{id:"5hvn-2WW6rY",thumb:"https://images.unsplash.com/photo-1476820865390-c52aeebb9891?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1476820865390-c52aeebb9891?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4554,height:3039},{id:"G9i_plbfDgk",thumb:"https://images.unsplash.com/photo-1478760329108-5c3ed9d495a0?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1478760329108-5c3ed9d495a0?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4e3,height:3e3},{id:"4Zaq5xY5M_c",thumb:"https://images.unsplash.com/photo-1531685250784-7569952593d2?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1531685250784-7569952593d2?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4032,height:3024},{id:"XXpbdU_31Sg",thumb:"https://images.unsplash.com/photo-1524055988636-436cfa46e59e?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1524055988636-436cfa46e59e?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:2741,height:3657},{id:"62vi3TG5EDg",thumb:"https://images.unsplash.com/photo-1519751138087-5bf79df62d5b?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1519751138087-5bf79df62d5b?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5616,height:3744}],V=[{id:2025158,thumb:"https://cdn.pixabay.com/photo/2017/01/31/15/37/evergreen-2025158_150.png",imageUrl:"https://pixabay.com/get/54e0d7464b57a414f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:984,thumbWidth:150,thumbHeight:76},{id:1297082,thumb:"https://cdn.pixabay.com/photo/2016/03/31/22/33/landscape-1297082_150.png",imageUrl:"https://pixabay.com/get/57e2dc444a5aae14f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:1081,thumbWidth:150,thumbHeight:84},{id:1296789,thumb:"https://cdn.pixabay.com/photo/2016/03/31/22/01/art-1296789_150.png",imageUrl:"https://pixabay.com/get/57e2dc454d5aa514f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:1920,thumbWidth:150,thumbHeight:150},{id:1597029,thumb:"https://cdn.pixabay.com/photo/2016/08/16/03/24/forest-1597029_150.png",imageUrl:"https://pixabay.com/get/57e5dc444a50a514f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:960,thumbWidth:150,thumbHeight:75},{id:310140,thumb:"https://cdn.pixabay.com/photo/2014/04/03/10/20/waterfall-310140_150.png",imageUrl:"https://pixabay.com/get/55e1d5424e52b108f5d08460962c357a1c3cd6e74e5074407d2a7fd79544c4_1280.png",width:1874,height:1920,thumbWidth:147,thumbHeight:150},{id:32248,thumb:"https://cdn.pixabay.com/photo/2012/04/13/12/43/country-32248_150.png",imageUrl:"https://pixabay.com/get/55e2d747424fad0bffd8992cc32a33771637dcf852547841702b78d69e4c_1280.png",width:1920,height:1408,thumbWidth:150,thumbHeight:109},{id:310139,thumb:"https://cdn.pixabay.com/photo/2014/04/03/10/20/pond-310139_150.png",imageUrl:"https://pixabay.com/get/55e1d542495bb108f5d08460962c357a1c3cd6e74e5074407d2a7fd79544c4_1280.png",width:1920,height:1389,thumbWidth:150,thumbHeight:108},{id:307957,thumb:"https://cdn.pixabay.com/photo/2014/04/02/17/06/owl-307957_150.png",imageUrl:"https://pixabay.com/get/55e0d24a4f55b108f5d08460962c357a1c3cd6e74e5074407d2a7fd79544c4_1280.png",width:1920,height:1382,thumbWidth:150,thumbHeight:107},{id:3046592,thumb:"https://cdn.pixabay.com/photo/2017/12/29/02/15/pond-3046592_150.png",imageUrl:"https://pixabay.com/get/55e0d1454f5bae14f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:1226,thumbWidth:150,thumbHeight:95},{id:575621,thumb:"https://cdn.pixabay.com/photo/2014/12/21/23/35/hill-575621_150.png",imageUrl:"https://pixabay.com/get/53e7d0454853b108f5d08460962c357a1c3cd6e74e5074407d2a7fd79544c4_1280.png",width:1920,height:960,thumbWidth:150,thumbHeight:75},{id:2707595,thumb:"https://cdn.pixabay.com/photo/2017/09/02/15/24/sunset-2707595_150.png",imageUrl:"https://pixabay.com/get/54e7d5444f5ba914f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:1080,thumbWidth:150,thumbHeight:84},{id:1293888,thumb:"https://cdn.pixabay.com/photo/2016/03/31/17/46/asian-1293888_150.png",imageUrl:"https://pixabay.com/get/57e2dc40425aa414f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:1920,thumbWidth:150,thumbHeight:150},{id:152642,thumb:"https://cdn.pixabay.com/photo/2013/07/12/17/56/snowflakes-152642_150.png",imageUrl:"https://pixabay.com/get/57e5d7454e50b108f5d08460962c357a1c3cd6e74e5074407d2a7fd79544c4_1280.png",width:1920,height:1287,thumbWidth:150,thumbHeight:100},{id:2300041,thumb:"https://cdn.pixabay.com/photo/2017/05/10/06/26/palm-tree-2300041_150.png",imageUrl:"https://pixabay.com/get/54e3d5434a56ad14f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:1623,thumbWidth:150,thumbHeight:126},{id:152720,thumb:"https://cdn.pixabay.com/photo/2013/07/12/17/58/arctic-152720_150.png",imageUrl:"https://pixabay.com/get/57e5d7444852b108f5d08460962c357a1c3cd6e74e5074407d2a7fd79544c4_1280.png",width:1920,height:960,thumbWidth:150,thumbHeight:75},{id:1670419,thumb:"https://cdn.pixabay.com/photo/2016/09/14/20/48/landmark-1670419_150.png",imageUrl:"https://pixabay.com/get/57e6d2434e53a514f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1919,height:1920,thumbWidth:150,thumbHeight:150},{id:37404,thumb:"https://cdn.pixabay.com/photo/2012/04/18/15/54/spring-37404_150.png",imageUrl:"https://pixabay.com/get/55e7d1434e4fad0bffd8992cc32a33771637dcf852547841702b78d69e4c_1280.png",width:1920,height:1920,thumbWidth:150,thumbHeight:150},{id:2976428,thumb:"https://cdn.pixabay.com/photo/2017/11/25/09/32/sunset-2976428_150.png",imageUrl:"https://pixabay.com/get/54e9d2454e50a414f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:1323,thumbWidth:150,thumbHeight:103},{id:2636594,thumb:"https://cdn.pixabay.com/photo/2017/08/13/09/20/tower-2636594_150.png",imageUrl:"https://pixabay.com/get/54e6d6454f5ba814f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1926,height:1920,thumbWidth:150,thumbHeight:149},{id:310145,thumb:"https://cdn.pixabay.com/photo/2014/04/03/10/20/stream-310145_150.png",imageUrl:"https://pixabay.com/get/55e1d5424e57b108f5d08460962c357a1c3cd6e74e5074407d2a7fd79544c4_1280.png",width:1920,height:1691,thumbWidth:150,thumbHeight:131}],Q=n("zScf"),K=((U=function(){function t(e){_classCallCheck(this,t),this.httpService=e,this.rows=[[],[]],this.GET_IMAGES="/api/images",this.PAGE=0,this.LIMIT="20",this.withMock=!0,this.isLoading=!0,this.query="",this.EXTRA_DELAY=1e3,this.query="scenery",this.getPhotos()}return _createClass(t,[{key:"resetPage",value:function(t){this.query=t,this.rows=[[],[]],this.PAGE=0}},{key:"getPhotos",value:function(){var t=this;this.isLoading=!0,this.PAGE+=1;var e={params:{page:""+this.PAGE,limit:this.LIMIT,query:this.query,source:"unsplash"}};this.withMock?this.mock().pipe(k(500)).subscribe((function(e){t.processPhotos(e)})):this.httpService.get(this.GET_IMAGES,e).pipe(k(this.EXTRA_DELAY)).subscribe((function(e){t.processPhotos(e)}))}},{key:"processPhotos",value:function(t){var e=this,n=!0;t.forEach((function(t){var i,r,o,a,s,c=(i=x.cloneDeep(H),r=x.cloneDeep(j),o=x.cloneDeep(B),a=new M("img",i,r,[]),(s=new M("div",{},o,[a])).dimention=X(),new I(s));c.id=t.id,c.imageUrl=t.thumb,c.canvasElement.children[0].attribute.src=t.imageUrl,c.canvasElement.dimention.width=t.width,c.canvasElement.dimention.height=t.height,c.canvasElement.type=v.PHOTO,c.canvasElement.increaseZIndex=!1,n?e.rows[0].push(c):e.rows[1].push(c),n=!n})),this.isLoading=!1}},{key:"mock",value:function(){return Object(S.a)(Y)}}]),t}()).\u0275fac=function(t){return new(t||U)(d.Xb(Q.a))},U.\u0275prov=d.Kb({token:U,factory:U.\u0275fac,providedIn:"root"}),U),J=n("3Pt+"),$=n("bTqV"),Z=((W=function(){function t(){_classCallCheck(this,t),this.placeholder="Search",this.minQueryLength=2,this.value="",this.searchQuery=new d.n,this.searchValueChange=new d.n,this.query=""}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"doSearch",value:function(){this.query.length>=this.minQueryLength&&this.searchQuery.emit(this.query)}},{key:"onChange",value:function(){this.query.length>=this.minQueryLength&&this.searchValueChange.emit(this.query.trim().toLowerCase())}}]),t}()).\u0275fac=function(t){return new(t||W)},W.\u0275cmp=d.Ib({type:W,selectors:[["app-search-box"]],inputs:{placeholder:"placeholder",minQueryLength:"minQueryLength",value:"value"},outputs:{searchQuery:"searchQuery",searchValueChange:"searchValueChange"},decls:6,vars:3,consts:[[1,"search-box"],["type","search","autofocus","",3,"placeholder","ngModel","ngModelChange","keydown.enter"],[1,"search-box-button"],["mat-icon-button","",3,"disabled","click"],[1,"material-icons"]],template:function(t,e){1&t&&(d.Tb(0,"div",0),d.Tb(1,"input",1),d.bc("ngModelChange",(function(t){return e.query=t}))("ngModelChange",(function(){return e.onChange()}))("keydown.enter",(function(){return e.doSearch()})),d.Sb(),d.Tb(2,"div",2),d.Tb(3,"button",3),d.bc("click",(function(){return e.doSearch()})),d.Tb(4,"i",4),d.zc(5,"search"),d.Sb(),d.Sb(),d.Sb(),d.Sb()),2&t&&(d.Bb(1),d.jc("placeholder",e.placeholder)("ngModel",e.query),d.Bb(2),d.jc("disabled",(null==e.query?null:e.query.length)<e.minQueryLength))},directives:[J.a,J.d,J.e,$.a],styles:[".search-box[_ngcontent-%COMP%]{display:flex;align-items:center}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:30px;padding:20px 17px;border:1px solid grey;border-right:0;background:#fff;outline:none;border-top-left-radius:4px;border-bottom-left-radius:4px}.search-box-button[_ngcontent-%COMP%]{background:#fff;border-top-right-radius:4px;border-bottom-right-radius:4px;border:1px solid grey;border-left:0;color:#000}"]}),W),tt=["photoContainer"];function et(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"li",10),d.bc("dragstart",(function(t){d.sc(n);var i=e.$implicit;return d.ec(2).dragStart(t,i)}))("click",(function(t){d.sc(n);var i=e.$implicit;return d.ec(2).onClick(t,i)})),d.Pb(2,"img",11),d.Sb(),d.Qb()}if(2&t){var i=e.$implicit;d.Bb(2),d.jc("src",i.imageUrl,d.tc),d.Cb("id",i.id)}}function nt(t,e){if(1&t&&(d.Tb(0,"ul",8),d.yc(1,et,3,2,"ng-container",9),d.Sb()),2&t){var n=e.$implicit;d.Bb(1),d.jc("ngForOf",n)}}var it,rt=((it=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,i)).imageService=t,r.eventer=i,r.items=[],r.rows=[[],[]],r.scrollTimer=null,r}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(t){}},{key:"onNewSearch",value:function(t){this.imageService.resetPage(t),this.getNextSet()}},{key:"getNextSet",value:function(){this.imageService.getPhotos()}},{key:"onScroll",value:function(t){var e=this;this.imageService.isLoading||(null!==this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout((function(){var t=e.photoContainer.nativeElement;t.scrollTop+t.offsetHeight+50>t.scrollHeight&&e.imageService.getPhotos()}),50))}}]),n}(C)).\u0275fac=function(t){return new(t||it)(d.Ob(K),d.Ob(y.b))},it.\u0275cmp=d.Ib({type:it,selectors:[["app-image-picker"]],viewQuery:function(t,e){var n;1&t&&d.vc(tt,!0),2&t&&d.nc(n=d.cc())&&(e.photoContainer=n.first)},features:[d.yb,d.zb()],decls:9,vars:4,consts:[[1,"search-box-wrapper"],[3,"placeholder","searchQuery"],[1,"images-container",3,"scroll"],["photoContainer",""],[1,"d-flex"],["class","picker-item",4,"ngFor","ngForOf"],[1,"w-100","text-center","spinner","my-4"],[1,"spinner-border"],[1,"picker-item"],[4,"ngFor","ngForOf"],["draggable","",1,"image-li",3,"dragstart","click"],[2,"width","100%",3,"src"]],template:function(t,e){1&t&&(d.Tb(0,"div"),d.Tb(1,"div",0),d.Tb(2,"app-search-box",1),d.bc("searchQuery",(function(t){return e.onNewSearch(t)})),d.Sb(),d.Sb(),d.Tb(3,"div",2,3),d.bc("scroll",(function(t){return e.onScroll(t)})),d.Tb(5,"div",4),d.yc(6,nt,2,1,"ul",5),d.Sb(),d.Tb(7,"div",6),d.Pb(8,"div",7),d.Sb(),d.Sb(),d.Sb()),2&t&&(d.Bb(2),d.jc("placeholder","Search photos"),d.Bb(4),d.jc("ngForOf",e.imageService.rows),d.Bb(1),d.Fb("invisible",!e.imageService.isLoading))},directives:[Z,h.j],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}[_nghost-%COMP%]{padding:10px 15px 0}.search-box-wrapper[_ngcontent-%COMP%]{margin:0 15px 15px}.images-container[_ngcontent-%COMP%]{overflow-y:auto;padding:0 14px 10px;height:calc(100vh - 177px)}.picker-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.picker-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1px;margin:3px;border-radius:3px;display:flex;align-items:center;cursor:move}.picker-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{box-shadow:0 0 4px 1px #d3d3d3;transition:box-shadow .3s}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]{width:calc(100% - 3px)}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:3px}"]}),it),ot=function t(e,n){_classCallCheck(this,t),this.type=at.IMAGE,this.toolbarOptions=e,this.canvasElement=n},at=function(t){return t[t.TEXT=0]="TEXT",t[t.IMAGE=1]="IMAGE",t}({}),st=[0,1,3,4,6,7,8,10,11],ct=_defineProperty({outline:"none"},R.WIDTH,"100%"),lt={class:"users-editable-content"};function ut(){var t,e=x.cloneDeep(lt),n=x.cloneDeep(ct),i=x.cloneDeep(L),r=new M("label",e,n,[]),o=new M("div",{},i,[r]);return o.type=v.TEXT,o.resizable=!1,o.dimention=((t=new z).width=320,t.height=40,t),new ot(st,o)}var ht,pt=n("ZbMF"),dt=((ht=function(){function t(e){_classCallCheck(this,t),this.fontService=e,this.list=[],this.tempp=[{resizable:!1,increaseZIndex:!0,tag:"div",attribute:{},style:{"font-size":"49px","font-family":"Bebas Neue","text-align":"center",position:"absolute","user-select":"none",width:"158px","letter-spacing":"11px",transform:"matrix(1.74,0,0,1.74,171.04,44.01) translate(0px, 41.09195402298849px)","z-index":20},children:[{resizable:!0,increaseZIndex:!0,tag:"label",attribute:{class:"users-editable-content"},style:{outline:"none",width:"100%"},children:[],innerText:"CALVIN"}],type:4,dimention:{width:320,height:40,rotate:0,translateX:0,translateY:0,scaleX:1,scaleY:1}},{resizable:!1,increaseZIndex:!0,tag:"div",attribute:{},style:{"font-size":"49px","font-family":"Bebas Neue","text-align":"center",position:"absolute","user-select":"none",width:"158px","letter-spacing":"10px",transform:"matrix(1.74,0,0,1.74,171,140.45) translate(0px, 41.0919540229885px)","z-index":23},children:[{resizable:!0,increaseZIndex:!0,tag:"label",attribute:{class:"users-editable-content"},style:{outline:"none",width:"100%"},children:[],innerText:"HARRIS"}],type:4,dimention:{width:320,height:40,rotate:0,translateX:0,translateY:0,scaleX:1,scaleY:1}},{resizable:!0,increaseZIndex:!0,tag:"div",attribute:{},style:{position:"absolute",cursor:"move","user-select":"none",width:"275px",transform:"matrix(1,0,0,1,112.6,240.5) translate(0px, 71.5px)","z-index":24},children:[{resizable:!0,increaseZIndex:!0,tag:"hr",attribute:{},style:{"border-color":"black","border-top":"1px solid","border-style":"solid"},children:[]}],type:8},{resizable:!1,increaseZIndex:!0,tag:"div",attribute:{},style:{"font-size":"24px","font-family":"Josefin Sans","text-align":"center",position:"absolute","user-select":"none",width:"275px","letter-spacing":"33px",transform:"matrix(1,0,0,1,112.6,304) translate(0px, 71.5px)","z-index":25},children:[{resizable:!0,increaseZIndex:!0,tag:"label",attribute:{class:"users-editable-content"},style:{outline:"none",width:"100%"},children:[],innerText:"SUMMER\n"}],type:4,dimention:{width:320,height:40,rotate:0,translateX:0,translateY:0,scaleX:1,scaleY:1}}],this.init()}return _createClass(t,[{key:"init",value:function(){for(var t=0;t<2;t++)this.buildTextPickerItem(this.fontService.customTextFonts[t]);this.buildImageTypeText()}},{key:"buildImageTypeText",value:function(){var t=ut();t.type=at.IMAGE,t.imageUrl="/assets/images/pickers/calvin-harris.png",t.canvasElement=new M("div",{},{position:"absolute",width:"200px",height:"300px"},this.tempp),this.list.push(t)}},{key:"buildTextPickerItem",value:function(t){var e=ut();e.fontSize=t.fontSize,e.fontFamily=t.family,e.type=at.TEXT,e.innerText=t.innerText,e.canvasElement.children[0].innerText="Double click to edit",e.canvasElement.style[R.FONT_SIZE]=t.fontSize,e.canvasElement.style[R.FONT_FAMILY]=t.family,this.list.push(e)}}]),t}()).\u0275fac=function(t){return new(t||ht)(d.Xb(pt.a))},ht.\u0275prov=d.Kb({token:ht,factory:ht.\u0275fac,providedIn:"root"}),ht);function ft(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"li",7),d.bc("dragstart",(function(t){d.sc(n);var e=d.ec().$implicit;return d.ec().dragStart(t,e)}))("click",(function(t){d.sc(n);var e=d.ec().$implicit;return d.ec().onClick(t,e)})),d.Pb(2,"img",8),d.Sb(),d.Qb()}if(2&t){var i=d.ec().$implicit;d.Bb(2),d.jc("src",i.imageUrl,d.tc),d.Cb("id",i.id)}}function gt(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"li",9),d.bc("dragstart",(function(t){d.sc(n);var e=d.ec().$implicit;return d.ec().dragStart(t,e)}))("click",(function(t){d.sc(n);var e=d.ec().$implicit;return d.ec().onClick(t,e)})),d.Tb(2,"p"),d.zc(3),d.Sb(),d.Sb(),d.Qb()}if(2&t){var i=d.ec().$implicit;d.Bb(2),d.xc("font-family",i.fontFamily)("font-size",i.fontSize),d.Bb(1),d.Ac(i.innerText)}}function bt(t,e){if(1&t&&(d.Rb(0),d.yc(1,ft,3,2,"ng-container",6),d.yc(2,gt,4,5,"ng-container",6),d.Qb()),2&t){var n=e.$implicit,i=d.ec();d.Bb(1),d.jc("ngIf",n.type===i.TextPickerTypes.IMAGE),d.Bb(1),d.jc("ngIf",n.type===i.TextPickerTypes.TEXT)}}var vt,mt,yt=((mt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,i)).textPickerService=t,r.eventer=i,r.TextPickerTypes=at,r.items=[],r}return _createClass(n,[{key:"ngOnInit",value:function(){}}]),n}(C)).\u0275fac=function(t){return new(t||mt)(d.Ob(dt),d.Ob(y.b))},mt.\u0275cmp=d.Ib({type:mt,selectors:[["app-text-picker"]],features:[d.yb],decls:6,vars:2,consts:[[1,"text-picker-container"],[1,"search-box-wrapper"],[3,"placeholder"],[1,"text-container"],[1,"picker-item"],[4,"ngFor","ngForOf"],[4,"ngIf"],["draggable","true",1,"image-li",3,"dragstart","click"],[2,"width","100%",3,"src"],["draggable","true",1,"text-li","custom-text-li",3,"dragstart","click"]],template:function(t,e){1&t&&(d.Tb(0,"div",0),d.Tb(1,"div",1),d.Pb(2,"app-search-box",2),d.Sb(),d.Tb(3,"div",3),d.Tb(4,"ul",4),d.yc(5,bt,3,2,"ng-container",5),d.Sb(),d.Sb(),d.Sb()),2&t&&(d.Bb(2),d.jc("placeholder","Search for text"),d.Bb(3),d.jc("ngForOf",e.textPickerService.list))},directives:[Z,h.j,h.k],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}[_nghost-%COMP%]{padding:10px 15px 0}.search-box-wrapper[_ngcontent-%COMP%]{margin:0 15px 15px}.text-container[_ngcontent-%COMP%]{overflow-y:auto;padding:0 8px 10px;height:calc(100vh - 177px)}.picker-item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.picker-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px;margin:7px;border-radius:3px;display:flex;align-items:center;cursor:-webkit-grab;cursor:grab;box-shadow:0 0 2px #f5f5f5}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]{width:calc(50% - 14px);padding:0}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.picker-item[_ngcontent-%COMP%]   .custom-text-li[_ngcontent-%COMP%]{width:calc(100% - 7px);padding:7px 10px;background-color:#d3d3d3;color:#484848;transition:background-color .2s}.picker-item[_ngcontent-%COMP%]   .custom-text-li[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.custom-li-item[_ngcontent-%COMP%]{height:120px;text-align:center;display:inline-grid;font-size:30px;text-transform:uppercase;font-family:fantasy;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"]}),mt),xt=((vt=function(){function t(e){_classCallCheck(this,t),this.httpService=e,this.vectors=[],this.GET_IMAGES="/api/images/vectors",this.PAGE=0,this.LIMIT="20",this.withMock=!0,this.isLoading=!0,this.query="",this.EXTRA_DELAY=10,this.query="scenery",this.getPhotos()}return _createClass(t,[{key:"resetPage",value:function(t){this.query=t,this.vectors=[],this.PAGE=0}},{key:"getPhotos",value:function(){var t=this;this.isLoading=!0,this.PAGE+=1;var e={params:{page:""+this.PAGE,limit:this.LIMIT,query:this.query,source:"unsplash"}};this.withMock?this.mock().pipe(k(500)).subscribe((function(e){t.processPhotos(e)})):this.httpService.get(this.GET_IMAGES,e).pipe(k(this.EXTRA_DELAY)).subscribe((function(e){t.processPhotos(e)}))}},{key:"processPhotos",value:function(t){var e=this;t.forEach((function(t){var n=F();n.id=t.id,n.imageUrl=t.thumb,n.canvasElement.children[0].attribute.src=t.imageUrl,n.canvasElement.type=v.VECTOR,n.canvasElement.increaseZIndex=!0,e.updateWidth(n.canvasElement,t.thumbWidth,t.thumbHeight),e.vectors.push(n)})),this.isLoading=!1}},{key:"updateWidth",value:function(t,e,n){t.style.width=1.5*e+"px",t.style.height=1.5*n+"px"}},{key:"mock",value:function(){return Object(S.a)(V)}}]),t}()).\u0275fac=function(t){return new(t||vt)(d.Xb(Q.a))},vt.\u0275prov=d.Kb({token:vt,factory:vt.\u0275fac,providedIn:"root"}),vt),Ct=["photoContainer"];function St(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"li",9),d.bc("dragstart",(function(t){d.sc(n);var i=e.$implicit;return d.ec().dragStart(t,i)}))("click",(function(t){d.sc(n);var i=e.$implicit;return d.ec().onClick(t,i)})),d.Pb(2,"img",10),d.Sb(),d.Qb()}if(2&t){var i=e.$implicit;d.Bb(2),d.jc("src",i.imageUrl,d.tc),d.Cb("id",i.id)}}var Ot,Et,wt,kt=((wt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,i)).vectorService=t,r.eventer=i,r.scrollTimer=null,r}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(t){}},{key:"onNewSearch",value:function(t){this.vectorService.resetPage(t),this.getNextSet()}},{key:"getNextSet",value:function(){this.vectorService.getPhotos()}},{key:"onScroll",value:function(t){var e=this;this.vectorService.isLoading||(null!==this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout((function(){var t=e.photoContainer.nativeElement;t.scrollTop+t.offsetHeight+50>t.scrollHeight&&e.vectorService.getPhotos()}),50))}}]),n}(C)).\u0275fac=function(t){return new(t||wt)(d.Ob(xt),d.Ob(y.b))},wt.\u0275cmp=d.Ib({type:wt,selectors:[["app-vector-picker"]],viewQuery:function(t,e){var n;1&t&&d.vc(Ct,!0),2&t&&d.nc(n=d.cc())&&(e.photoContainer=n.first)},features:[d.yb,d.zb()],decls:10,vars:4,consts:[[1,"search-box-wrapper"],[3,"placeholder","searchQuery"],[1,"images-container",3,"scroll"],["photoContainer",""],[1,"d-flex"],[1,"picker-item"],[4,"ngFor","ngForOf"],[1,"w-100","text-center","spinner","my-4"],[1,"spinner-border"],["draggable","",1,"image-li",3,"dragstart","click"],[3,"src"]],template:function(t,e){1&t&&(d.Tb(0,"div"),d.Tb(1,"div",0),d.Tb(2,"app-search-box",1),d.bc("searchQuery",(function(t){return e.onNewSearch(t)})),d.Sb(),d.Sb(),d.Tb(3,"div",2,3),d.bc("scroll",(function(t){return e.onScroll(t)})),d.Tb(5,"div",4),d.Tb(6,"ul",5),d.yc(7,St,3,2,"ng-container",6),d.Sb(),d.Sb(),d.Tb(8,"div",7),d.Pb(9,"div",8),d.Sb(),d.Sb(),d.Sb()),2&t&&(d.Bb(2),d.jc("placeholder","Search photos"),d.Bb(5),d.jc("ngForOf",e.vectorService.vectors),d.Bb(1),d.Fb("invisible",!e.vectorService.isLoading))},directives:[Z,h.j],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}[_nghost-%COMP%]{padding:10px 15px 0}.search-box-wrapper[_ngcontent-%COMP%]{margin:0 15px 15px}.images-container[_ngcontent-%COMP%]{overflow-y:auto;padding:0 8px 10px;height:calc(100vh - 165px)}.picker-item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.picker-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1px;margin:7px;border-radius:3px;cursor:pointer;height:130px}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]{width:calc(50% - 14px);height:130px;display:flex;align-items:center;justify-content:center}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:3px;max-height:100%;max-width:100%}"]}),wt),Tt=((Et=function(){function t(e){_classCallCheck(this,t),this.httpService=e,this.backgrounds=[],this.GET_IMAGES="/api/images",this.PAGE=0,this.LIMIT="20",this.withMock=!0,this.isLoading=!0,this.query="",this.EXTRA_DELAY=10,this.getPhotos()}return _createClass(t,[{key:"resetPage",value:function(t){this.query=t,this.backgrounds=[],this.PAGE=0}},{key:"getPhotos",value:function(){var t=this;this.isLoading=!0,this.PAGE+=1;var e={params:{page:""+this.PAGE,limit:this.LIMIT,query:(this.query+" background").trim(),source:"unsplash"}};this.withMock?this.mock().pipe(k(500)).subscribe((function(e){t.processPhotos(e)})):this.httpService.get(this.GET_IMAGES,e).pipe(k(this.EXTRA_DELAY)).subscribe((function(e){t.processPhotos(e)}))}},{key:"processPhotos",value:function(t){var e=this;t.forEach((function(t){var n=F();n.id=t.id,n.imageUrl=t.thumb,n.canvasElement.type=v.BACKGROUND,n.canvasElement.style=_defineProperty({},R.BG,"url('".concat(t.imageUrl,"') center/cover")),e.backgrounds.push(n)})),this.isLoading=!1}},{key:"updateWidth",value:function(t,e,n){t.style.width=1.5*e+"px",t.style.height=1.5*n+"px"}},{key:"mock",value:function(){return Object(S.a)(q)}}]),t}()).\u0275fac=function(t){return new(t||Et)(d.Xb(Q.a))},Et.\u0275prov=d.Kb({token:Et,factory:Et.\u0275fac,providedIn:"root"}),Et),_t=((Ot=function(){function t(e){_classCallCheck(this,t),this.elementRef=e,this.appClickOutside=new d.n}return _createClass(t,[{key:"onMouseEnter",value:function(t){this.srcElement&&this.srcElement.contains(t)||this.elementRef.nativeElement.contains(t)||this.appClickOutside.emit(!0)}}]),t}()).\u0275fac=function(t){return new(t||Ot)(d.Ob(d.l))},Ot.\u0275dir=d.Jb({type:Ot,selectors:[["","appClickOutside",""]],hostBindings:function(t,e){1&t&&d.bc("mousedown",(function(t){return e.onMouseEnter(t.target)}),!1,d.qc)},inputs:{srcElement:"srcElement"},outputs:{appClickOutside:"appClickOutside"}}),Ot),Pt=n("XNiG"),It=n("xgIS"),Mt=n("/uUt"),zt=n("Kj3r");function Rt(t,e){(function(t){return"string"==typeof t&&t.includes(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&t.includes("%")}(t);return t=360===e?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:t=360===e?(t<0?t%e+e:t%e)/parseFloat(String(e)):t%e/parseFloat(String(e))}function Dt(t){return Math.min(1,Math.max(0,t))}function Nt(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function At(t){return t<=1?100*Number(t)+"%":t}function Lt(t){return 1===t.length?"0"+t:String(t)}function Bt(t,e,n){t=Rt(t,255),e=Rt(e,255),n=Rt(n,255);var i=Math.max(t,e,n),r=Math.min(t,e,n),o=0,a=0,s=(i+r)/2;if(i===r)a=0,o=0;else{var c=i-r;switch(a=s>.5?c/(2-i-r):c/(i+r),i){case t:o=(e-n)/c+(e<n?6:0);break;case e:o=(n-t)/c+2;break;case n:o=(t-e)/c+4}o/=6}return{h:o,s:a,l:s}}function jt(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*n*(e-t):n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Gt(t,e,n){t=Rt(t,255),e=Rt(e,255),n=Rt(n,255);var i=Math.max(t,e,n),r=Math.min(t,e,n),o=0,a=i,s=i-r,c=0===i?0:s/i;if(i===r)o=0;else{switch(i){case t:o=(e-n)/s+(e<n?6:0);break;case e:o=(n-t)/s+2;break;case n:o=(t-e)/s+4}o/=6}return{h:o,s:c,v:a}}function Ht(t,e,n,i){var r=[Lt(Math.round(t).toString(16)),Lt(Math.round(e).toString(16)),Lt(Math.round(n).toString(16))];return i&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function Ft(t){return Xt(t)/255}function Xt(t){return parseInt(t,16)}var Ut={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Wt="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",Yt="[\\s|\\(]+("+Wt+")[,|\\s]+("+Wt+")[,|\\s]+("+Wt+")\\s*\\)?",qt="[\\s|\\(]+("+Wt+")[,|\\s]+("+Wt+")[,|\\s]+("+Wt+")[,|\\s]+("+Wt+")\\s*\\)?",Vt={CSS_UNIT:new RegExp(Wt),rgb:new RegExp("rgb"+Yt),rgba:new RegExp("rgba"+qt),hsl:new RegExp("hsl"+Yt),hsla:new RegExp("hsla"+qt),hsv:new RegExp("hsv"+Yt),hsva:new RegExp("hsva"+qt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Qt(t){return Boolean(Vt.CSS_UNIT.exec(String(t)))}var Kt=function(){function t(e,n){var i;if(void 0===e&&(e=""),void 0===n&&(n={}),e instanceof t)return e;"number"==typeof e&&(e=function(t){return{r:t>>16,g:(65280&t)>>8,b:255&t}}(e)),this.originalInput=e;var r=function(t){var e,n,i={r:0,g:0,b:0},r=1,o=null,a=null,s=null,c=!1,l=!1;return"string"==typeof t&&(t=function(t){if(0===(t=t.trim().toLowerCase()).length)return!1;var e=!1;if(Ut[t])t=Ut[t],e=!0;else if("transparent"===t)return{r:0,g:0,b:0,a:0,format:"name"};var n=Vt.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=Vt.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Vt.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=Vt.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Vt.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=Vt.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Vt.hex8.exec(t))?{r:Xt(n[1]),g:Xt(n[2]),b:Xt(n[3]),a:Ft(n[4]),format:e?"name":"hex8"}:(n=Vt.hex6.exec(t))?{r:Xt(n[1]),g:Xt(n[2]),b:Xt(n[3]),format:e?"name":"hex"}:(n=Vt.hex4.exec(t))?{r:Xt(n[1]+n[1]),g:Xt(n[2]+n[2]),b:Xt(n[3]+n[3]),a:Ft(n[4]+n[4]),format:e?"name":"hex8"}:!!(n=Vt.hex3.exec(t))&&{r:Xt(n[1]+n[1]),g:Xt(n[2]+n[2]),b:Xt(n[3]+n[3]),format:e?"name":"hex"}}(t)),"object"==typeof t&&(Qt(t.r)&&Qt(t.g)&&Qt(t.b)?(e=t.g,n=t.b,i={r:255*Rt(t.r,255),g:255*Rt(e,255),b:255*Rt(n,255)},c=!0,l="%"===String(t.r).substr(-1)?"prgb":"rgb"):Qt(t.h)&&Qt(t.s)&&Qt(t.v)?(o=At(t.s),a=At(t.v),i=function(t,e,n){t=6*Rt(t,360),e=Rt(e,100),n=Rt(n,100);var i=Math.floor(t),r=t-i,o=n*(1-e),a=n*(1-r*e),s=n*(1-(1-r)*e),c=i%6;return{r:255*[n,a,o,o,s,n][c],g:255*[s,n,n,a,o,o][c],b:255*[o,o,s,n,n,a][c]}}(t.h,o,a),c=!0,l="hsv"):Qt(t.h)&&Qt(t.s)&&Qt(t.l)&&(o=At(t.s),s=At(t.l),i=function(t,e,n){var i,r,o;if(t=Rt(t,360),e=Rt(e,100),n=Rt(n,100),0===e)r=n,o=n,i=n;else{var a=n<.5?n*(1+e):n+e-n*e,s=2*n-a;i=jt(s,a,t+1/3),r=jt(s,a,t),o=jt(s,a,t-1/3)}return{r:255*i,g:255*r,b:255*o}}(t.h,o,s),c=!0,l="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(r=t.a)),r=Nt(r),{ok:c,format:t.format||l,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:r}}(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(i=n.format)&&void 0!==i?i:r.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},t.prototype.getLuminance=function(){var t=this.toRgb(),e=t.r/255,n=t.g/255,i=t.b/255;return.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(t){return this.a=Nt(t),this.roundA=Math.round(100*this.a)/100,this},t.prototype.toHsv=function(){var t=Gt(this.r,this.g,this.b);return{h:360*t.h,s:t.s,v:t.v,a:this.a}},t.prototype.toHsvString=function(){var t=Gt(this.r,this.g,this.b),e=Math.round(360*t.h),n=Math.round(100*t.s),i=Math.round(100*t.v);return 1===this.a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this.roundA+")"},t.prototype.toHsl=function(){var t=Bt(this.r,this.g,this.b);return{h:360*t.h,s:t.s,l:t.l,a:this.a}},t.prototype.toHslString=function(){var t=Bt(this.r,this.g,this.b),e=Math.round(360*t.h),n=Math.round(100*t.s),i=Math.round(100*t.l);return 1===this.a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this.roundA+")"},t.prototype.toHex=function(t){return void 0===t&&(t=!1),Ht(this.r,this.g,this.b,t)},t.prototype.toHexString=function(t){return void 0===t&&(t=!1),"#"+this.toHex(t)},t.prototype.toHex8=function(t){return void 0===t&&(t=!1),function(t,e,n,i,r){var o,a=[Lt(Math.round(t).toString(16)),Lt(Math.round(e).toString(16)),Lt(Math.round(n).toString(16)),Lt((o=i,Math.round(255*parseFloat(o)).toString(16)))];return r&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this.r,this.g,this.b,this.a,t)},t.prototype.toHex8String=function(t){return void 0===t&&(t=!1),"#"+this.toHex8(t)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var t=Math.round(this.r),e=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb("+t+", "+e+", "+n+")":"rgba("+t+", "+e+", "+n+", "+this.roundA+")"},t.prototype.toPercentageRgb=function(){var t=function(t){return Math.round(100*Rt(t,255))+"%"};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var t=function(t){return Math.round(100*Rt(t,255))};return 1===this.a?"rgb("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%)":"rgba("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%, "+this.roundA+")"},t.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var t="#"+Ht(this.r,this.g,this.b,!1),e=0,n=Object.entries(Ut);e<n.length;e++){var i=n[e];if(t===i[1])return i[0]}return!1},t.prototype.toString=function(t){var e=Boolean(t);t=null!=t?t:this.format;var n=!1;return e||!(this.a<1&&this.a>=0)||!t.startsWith("hex")&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this.a?this.toName():this.toRgbString()},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=Dt(n.l),new t(n)},t.prototype.brighten=function(e){void 0===e&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-e/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-e/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-e/100*255))),new t(n)},t.prototype.darken=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=Dt(n.l),new t(n)},t.prototype.tint=function(t){return void 0===t&&(t=10),this.mix("white",t)},t.prototype.shade=function(t){return void 0===t&&(t=10),this.mix("black",t)},t.prototype.desaturate=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=Dt(n.s),new t(n)},t.prototype.saturate=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=Dt(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,new t(n)},t.prototype.mix=function(e,n){void 0===n&&(n=50);var i=this.toRgb(),r=new t(e).toRgb(),o=n/100;return new t({r:(r.r-i.r)*o+i.r,g:(r.g-i.g)*o+i.g,b:(r.b-i.b)*o+i.b,a:(r.a-i.a)*o+i.a})},t.prototype.analogous=function(e,n){void 0===e&&(e=6),void 0===n&&(n=30);var i=this.toHsl(),r=360/n,o=[this];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,o.push(new t(i));return o},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){void 0===e&&(e=6);for(var n=this.toHsv(),i=n.h,r=n.s,o=n.v,a=[],s=1/e;e--;)a.push(new t({h:i,s:r,v:o})),o=(o+s)%1;return a},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),i=n.h,r=[this],o=360/e,a=1;a<e;a++)r.push(new t({h:(i+a*o)%360,s:n.s,l:n.l}));return r},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function Jt(t,e){if(1&t){var n=d.Ub();d.Tb(0,"span",3),d.bc("mousedown",(function(t){return d.sc(n),d.ec().handleMousedown(t)})),d.zc(1),d.Sb()}if(2&t){var i=d.ec();d.jc("ngStyle",i.labelStyle),d.Bb(1),d.Bc(" ",i.label," ")}}function $t(t,e){if(1&t&&(d.Tb(0,"div",2),d.Pb(1,"div",3),d.Sb()),2&t){var n=d.ec();d.xc("left",n.left)("top",n.top),d.Bb(1),d.jc("ngStyle",n.pointer)}}var Zt,te,ee,ne,ie,re,oe={},ae=((re=function(){function t(){_classCallCheck(this,t),this.white="transparent",this.size=8,this.grey="rgba(0,0,0,.08)"}return _createClass(t,[{key:"ngOnInit",value:function(){var t=function(t,e,n){var i="".concat(t,"-").concat(e,"-").concat(n);if(oe[i])return oe[i];var r=function(t,e,n){if("undefined"==typeof document)return null;var i=document.createElement("canvas");i.width=2*n,i.height=2*n;var r=i.getContext("2d");return r?(r.fillStyle=t,r.fillRect(0,0,i.width,i.height),r.fillStyle=e,r.fillRect(0,0,n,n),r.translate(n,n),r.fillRect(0,0,n,n),i.toDataURL()):null}(t,e,n);return r?(oe[i]=r,r):null}(this.white,this.grey,this.size);this.gridStyles={borderRadius:this.borderRadius,boxShadow:this.boxShadow,background:"url(".concat(t,") center left")}}}]),t}()).\u0275fac=function(t){return new(t||re)},re.\u0275cmp=d.Ib({type:re,selectors:[["color-checkboard"]],inputs:{white:"white",size:"size",grey:"grey",boxShadow:"boxShadow",borderRadius:"borderRadius"},decls:1,vars:1,consts:[[1,"grid",3,"ngStyle"]],template:function(t,e){1&t&&d.Pb(0,"div",0),2&t&&d.jc("ngStyle",e.gridStyles)},directives:[h.l],styles:[".grid[_ngcontent-%COMP%] {\n    top: 0px;\n    right: 0px;\n    bottom: 0px;\n    left: 0px;\n    position: absolute;\n  }"],changeDetection:0}),re),se=((ie=function t(){_classCallCheck(this,t)}).\u0275mod=d.Mb({type:ie}),ie.\u0275inj=d.Lb({factory:function(t){return new(t||ie)},imports:[[h.c]]}),ie),ce=((ne=function(){function t(e){_classCallCheck(this,t),this.el=e,this.coordinatesChange=new Pt.a,this.mousechange=new Pt.a,this.mouseListening=!1}return _createClass(t,[{key:"mousemove",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.mouseListening&&(t.preventDefault(),this.mousechange.next({$event:t,x:e,y:n,isTouch:i}))}},{key:"mouseup",value:function(){this.mouseListening=!1}},{key:"mousedown",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.preventDefault(),this.mouseListening=!0,this.mousechange.next({$event:t,x:e,y:n,isTouch:i})}},{key:"ngOnInit",value:function(){var t=this;this.sub=this.mousechange.pipe(Object(Mt.a)((function(t,e){return t.x===e.x&&t.y===e.y}))).subscribe((function(e){return t.handleChange(e.x,e.y,e.$event,e.isTouch)}))}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe()}},{key:"handleChange",value:function(t,e,n,i){var r=this.el.nativeElement.clientWidth,o=this.el.nativeElement.clientHeight,a=t-(this.el.nativeElement.getBoundingClientRect().left+window.pageXOffset),s=e-this.el.nativeElement.getBoundingClientRect().top;i||(s-=window.pageYOffset),this.coordinatesChange.next({x:t,y:e,top:s,left:a,containerWidth:r,containerHeight:o,$event:n})}}]),t}()).\u0275fac=function(t){return new(t||ne)(d.Ob(d.l))},ne.\u0275dir=d.Jb({type:ne,selectors:[["","ngx-color-coordinates",""]],hostBindings:function(t,e){1&t&&d.bc("mousemove",(function(t){return e.mousemove(t,t.pageX,t.pageY)}),!1,d.rc)("touchmove",(function(t){return e.mousemove(t,t.touches[0].clientX,t.touches[0].clientY,!0)}),!1,d.rc)("mouseup",(function(){return e.mouseup()}),!1,d.rc)("touchend",(function(){return e.mouseup()}),!1,d.rc)("mousedown",(function(t){return e.mousedown(t,t.pageX,t.pageY)}))("touchstart",(function(t){return e.mousedown(t,t.touches[0].clientX,t.touches[0].clientY,!0)}))},outputs:{coordinatesChange:"coordinatesChange"}}),ne),le=((ee=function t(){_classCallCheck(this,t)}).\u0275mod=d.Mb({type:ee}),ee.\u0275inj=d.Lb({factory:function(t){return new(t||ee)}}),ee),ue=((te=function(){function t(){_classCallCheck(this,t),this.direction="horizontal",this.onChange=new d.n}return _createClass(t,[{key:"ngOnChanges",value:function(){"vertical"===this.direction?(this.pointerLeft=0,this.pointerTop=100*this.rgb.a,this.gradient={background:"linear-gradient(to bottom, rgba(".concat(this.rgb.r,",").concat(this.rgb.g,",").concat(this.rgb.b,", 0) 0%,\n          rgba(").concat(this.rgb.r,",").concat(this.rgb.g,",").concat(this.rgb.b,", 1) 100%)")}):(this.gradient={background:"linear-gradient(to right, rgba(".concat(this.rgb.r,",").concat(this.rgb.g,",").concat(this.rgb.b,", 0) 0%,\n          rgba(").concat(this.rgb.r,",").concat(this.rgb.g,",").concat(this.rgb.b,", 1) 100%)")},this.pointerLeft=100*this.rgb.a)}},{key:"handleChange",value:function(t){var e,n,i,r=t.top,o=t.left,a=t.containerHeight,s=t.containerWidth,c=t.$event;if("vertical"===this.direction?(n=r<0?0:r>a?1:Math.round(100*r/a)/100,this.hsl.a!==n&&(e={h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:n,source:"rgb"})):(i=o<0?0:o>s?1:Math.round(100*o/s)/100,this.hsl.a!==i&&(e={h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:i,source:"rgb"})),!e)return null;this.onChange.emit({data:e,$event:c})}}]),t}()).\u0275fac=function(t){return new(t||te)},te.\u0275cmp=d.Ib({type:te,selectors:[["color-alpha"]],inputs:{direction:"direction",hsl:"hsl",rgb:"rgb",pointer:"pointer",shadow:"shadow",radius:"radius"},outputs:{onChange:"onChange"},features:[d.zb()],decls:7,vars:15,consts:[[1,"alpha"],[1,"alpha-checkboard"],[1,"alpha-gradient",3,"ngStyle"],["ngx-color-coordinates","",3,"coordinatesChange"],[1,"alpha-pointer"],[1,"alpha-slider",3,"ngStyle"]],template:function(t,e){1&t&&(d.Tb(0,"div",0),d.Tb(1,"div",1),d.Pb(2,"color-checkboard"),d.Sb(),d.Pb(3,"div",2),d.Tb(4,"div",3),d.bc("coordinatesChange",(function(t){return e.handleChange(t)})),d.Tb(5,"div",4),d.Pb(6,"div",5),d.Sb(),d.Sb(),d.Sb()),2&t&&(d.xc("border-radius",e.radius),d.Bb(3),d.xc("box-shadow",e.shadow)("border-radius",e.radius),d.jc("ngStyle",e.gradient),d.Bb(1),d.Eb("alpha-container color-alpha-",e.direction,""),d.Bb(1),d.xc("left",e.pointerLeft,"%")("top",e.pointerTop,"%"),d.Bb(1),d.jc("ngStyle",e.pointer))},directives:[ae,h.l,ce],styles:[".alpha[_ngcontent-%COMP%] {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n    }\n    .alpha-checkboard[_ngcontent-%COMP%] {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      overflow: hidden;\n    }\n    .alpha-gradient[_ngcontent-%COMP%] {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n    }\n    .alpha-container[_ngcontent-%COMP%] {\n      position: relative;\n      height: 100%;\n      margin: 0 3px;\n    }\n    .alpha-pointer[_ngcontent-%COMP%] {\n      position: absolute;\n    }\n    .alpha-slider[_ngcontent-%COMP%] {\n      width: 4px;\n      border-radius: 1px;\n      height: 8px;\n      box-shadow: 0 0 2px rgba(0, 0, 0, .6);\n      background: #fff;\n      margin-top: 1px;\n      transform: translateX(-2px);\n    },"],changeDetection:0}),te),he=((Zt=function t(){_classCallCheck(this,t)}).\u0275mod=d.Mb({type:Zt}),Zt.\u0275inj=d.Lb({factory:function(t){return new(t||Zt)},imports:[[h.c,se,le]]}),Zt);function pe(t){var e=0,n=0;return["r","g","b","a","h","s","l","v"].forEach((function(i){t[i]&&(e+=1,isNaN(t[i])||(n+=1),"s"===i||"l"===i)&&/^\d+%$/.test(t[i])&&(n+=1)})),e===n&&t}function de(t,e){var n=new Kt(t.hex?t.hex:t),i=n.toHsl(),r=n.toHsv(),o=n.toRgb(),a=n.toHex();return 0===i.s&&(i.h=e||0,r.h=e||0),{hsl:i,hex:"000000"===a&&0===o.a?"transparent":n.toHexString(),rgb:o,hsv:r,oldHue:t.h||e||i.h,source:t.source}}var fe,ge,be,ve,me,ye,xe,Ce=((xe=function(){function t(){_classCallCheck(this,t),this.color={h:250,s:.5,l:.2,a:1},this.onChange=new d.n,this.onChangeComplete=new d.n,this.onSwatchHover=new d.n}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.changes=this.onChange.pipe(Object(zt.a)(100)).subscribe((function(e){return t.onChangeComplete.emit(e)})),this.setState(de(this.color,0)),this.currentColor=this.hex}},{key:"ngOnChanges",value:function(){this.setState(de(this.color,this.oldHue))}},{key:"ngOnDestroy",value:function(){this.changes.unsubscribe()}},{key:"setState",value:function(t){this.oldHue=t.oldHue,this.hsl=t.hsl,this.hsv=t.hsv,this.rgb=t.rgb,this.hex=t.hex,this.source=t.source,this.afterValidChange()}},{key:"handleChange",value:function(t,e){if(pe(t)){var n=de(t,t.h||this.oldHue);this.setState(n),this.onChange.emit({color:n,$event:e}),this.afterValidChange()}}},{key:"afterValidChange",value:function(){}},{key:"handleSwatchHover",value:function(t,e){if(pe(t)){var n=de(t,t.h||this.oldHue);this.setState(n),this.onSwatchHover.emit({color:n,$event:e})}}}]),t}()).\u0275fac=function(t){return new(t||xe)},xe.\u0275cmp=d.Ib({type:xe,selectors:[["color-wrap"]],inputs:{color:"color",className:"className"},outputs:{onChange:"onChange",onChangeComplete:"onChangeComplete",onSwatchHover:"onSwatchHover"},features:[d.zb()],decls:0,vars:0,template:function(t,e){},encapsulation:2}),xe),Se=((ye=function(){function t(){_classCallCheck(this,t),this.placeholder="",this.onChange=new d.n,this.focus=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.wrapStyle=this.style&&this.style.wrap?this.style.wrap:{},this.inputStyle=this.style&&this.style.input?this.style.input:{},this.labelStyle=this.style&&this.style.label?this.style.label:{},this.dragLabel&&(this.labelStyle.cursor="ew-resize")}},{key:"handleFocus",value:function(t){this.focus=!0}},{key:"handleFocusOut",value:function(t){this.focus=!1,this.currentValue=this.blurValue}},{key:"handleKeydown",value:function(t){var e=String(t.target.value),n=e.indexOf("%")>-1,i=Number(e.replace(/%/g,""));if(!isNaN(i)){var r=this.arrowOffset||1;38===t.keyCode&&(this.onChange.emit(this.label?{data:_defineProperty({},this.label,i+r),$event:t}:{data:i+r,$event:t}),this.currentValue=n?"".concat(i+r,"%"):i+r),40===t.keyCode&&(this.onChange.emit(this.label?{data:_defineProperty({},this.label,i-r),$event:t}:{data:i-r,$event:t}),this.currentValue=n?"".concat(i-r,"%"):i-r)}}},{key:"handleKeyup",value:function(t){40!==t.keyCode&&38!==t.keyCode&&this.onChange.emit(this.label?{data:_defineProperty({},this.label,t.target.value),$event:t}:{data:t.target.value,$event:t})}},{key:"ngOnChanges",value:function(){this.focus||(this.currentValue=String(this.value).toUpperCase()),this.blurValue=String(this.value).toUpperCase()}},{key:"ngOnDestroy",value:function(){this.unsubscribe()}},{key:"subscribe",value:function(){var t=this;this.mousemove=Object(It.a)(document,"mousemove").subscribe((function(e){return t.handleDrag(e)})),this.mouseup=Object(It.a)(document,"mouseup").subscribe((function(){return t.unsubscribe()}))}},{key:"unsubscribe",value:function(){this.mousemove&&this.mousemove.unsubscribe(),this.mouseup&&this.mouseup.unsubscribe()}},{key:"handleMousedown",value:function(t){this.dragLabel&&(t.preventDefault(),this.handleDrag(t),this.subscribe())}},{key:"handleDrag",value:function(t){if(this.dragLabel){var e=Math.round(this.value+t.movementX);e>=0&&e<=this.dragMax&&this.onChange.emit({data:_defineProperty({},this.label,e),$event:t})}}}]),t}()).\u0275fac=function(t){return new(t||ye)},ye.\u0275cmp=d.Ib({type:ye,selectors:[["color-editable-input"]],inputs:{placeholder:"placeholder",style:"style",label:"label",value:"value",arrowOffset:"arrowOffset",dragLabel:"dragLabel",dragMax:"dragMax"},outputs:{onChange:"onChange"},features:[d.zb()],decls:3,vars:5,consts:[[1,"wrap",3,"ngStyle"],["spellCheck","false",3,"ngStyle","value","placeholder","keydown","keyup","focus","focusout"],[3,"ngStyle","mousedown",4,"ngIf"],[3,"ngStyle","mousedown"]],template:function(t,e){1&t&&(d.Tb(0,"div",0),d.Tb(1,"input",1),d.bc("keydown",(function(t){return e.handleKeydown(t)}))("keyup",(function(t){return e.handleKeyup(t)}))("focus",(function(t){return e.handleFocus(t)}))("focusout",(function(t){return e.handleFocusOut(t)})),d.Sb(),d.yc(2,Jt,2,2,"span",2),d.Sb()),2&t&&(d.jc("ngStyle",e.wrapStyle),d.Bb(1),d.jc("ngStyle",e.inputStyle)("value",e.currentValue)("placeholder",e.placeholder),d.Bb(1),d.jc("ngIf",e.label))},directives:[h.l,h.k],styles:["[_nghost-%COMP%] {\n      display: flex;\n    }\n    .wrap[_ngcontent-%COMP%] {\n      position: relative;\n    }"],changeDetection:0}),ye),Oe=((me=function t(){_classCallCheck(this,t)}).\u0275mod=d.Mb({type:me}),me.\u0275inj=d.Lb({factory:function(t){return new(t||me)},imports:[[h.c]]}),me),Ee=((ve=function(){function t(){_classCallCheck(this,t),this.hidePointer=!1,this.direction="horizontal",this.onChange=new d.n,this.left="0px",this.top=""}return _createClass(t,[{key:"ngOnChanges",value:function(){"horizontal"===this.direction?this.left="".concat(100*this.hsl.h/360,"%"):this.top="".concat(-100*this.hsl.h/360+100,"%")}},{key:"handleChange",value:function(t){var e,n,i,r=t.top,o=t.left,a=t.containerHeight,s=t.containerWidth,c=t.$event;if("vertical"===this.direction?(n=r<0?359:r>a?0:360*(-100*r/a+100)/100,this.hsl.h!==n&&(e={h:n,s:this.hsl.s,l:this.hsl.l,a:this.hsl.a,source:"rgb"})):(i=o<0?0:o>s?359:100*o/s*360/100,this.hsl.h!==i&&(e={h:i,s:this.hsl.s,l:this.hsl.l,a:this.hsl.a,source:"rgb"})),!e)return null;this.onChange.emit({data:e,$event:c})}}]),t}()).\u0275fac=function(t){return new(t||ve)},ve.\u0275cmp=d.Ib({type:ve,selectors:[["color-hue"]],inputs:{hidePointer:"hidePointer",direction:"direction",hsl:"hsl",pointer:"pointer",radius:"radius",shadow:"shadow"},outputs:{onChange:"onChange"},features:[d.zb()],decls:3,vars:8,consts:[["ngx-color-coordinates","",1,"color-hue-container",3,"coordinatesChange"],["class","color-hue-pointer",3,"left","top",4,"ngIf"],[1,"color-hue-pointer"],[1,"color-hue-slider",3,"ngStyle"]],template:function(t,e){1&t&&(d.Tb(0,"div"),d.Tb(1,"div",0),d.bc("coordinatesChange",(function(t){return e.handleChange(t)})),d.yc(2,$t,2,5,"div",1),d.Sb(),d.Sb()),2&t&&(d.Eb("color-hue color-hue-",e.direction,""),d.xc("border-radius",e.radius,"px")("box-shadow",e.shadow),d.Bb(2),d.jc("ngIf",!e.hidePointer))},directives:[ce,h.k,h.l],styles:[".color-hue[_ngcontent-%COMP%] {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n    }\n    .color-hue-container[_ngcontent-%COMP%] {\n      margin: 0 2px;\n      position: relative;\n      height: 100%;\n    }\n    .color-hue-pointer[_ngcontent-%COMP%] {\n      position: absolute;\n    }\n    .color-hue-slider[_ngcontent-%COMP%] {\n      margin-top: 1px;\n      width: 4px;\n      border-radius: 1px;\n      height: 8px;\n      box-shadow: 0 0 2px rgba(0, 0, 0, .6);\n      background: #fff;\n      transform: translateX(-2px);\n    }\n    .color-hue-horizontal[_ngcontent-%COMP%] {\n      background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n        33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n    }\n    .color-hue-vertical[_ngcontent-%COMP%] {\n      background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n        #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n    }"],changeDetection:0}),ve),we=((be=function t(){_classCallCheck(this,t)}).\u0275mod=d.Mb({type:be}),be.\u0275inj=d.Lb({factory:function(t){return new(t||be)},imports:[[h.c,le]]}),be),ke=((ge=function(){function t(){_classCallCheck(this,t),this.onChange=new d.n}return _createClass(t,[{key:"ngOnChanges",value:function(){this.background="hsl(".concat(this.hsl.h,", 100%, 50%)"),this.pointerTop=-100*this.hsv.v+1+100+"%",this.pointerLeft=100*this.hsv.s+"%"}},{key:"handleChange",value:function(t){var e=t.top,n=t.left,i=t.containerHeight,r=t.containerWidth,o=t.$event;n<0?n=0:n>r?n=r:e<0?e=0:e>i&&(e=i);var a=-e/i+1;a=(a=a>0?a:0)>1?1:a,this.onChange.emit({data:{h:this.hsl.h,s:n/r,v:a,a:this.hsl.a,source:"hsva"},$event:o})}}]),t}()).\u0275fac=function(t){return new(t||ge)},ge.\u0275cmp=d.Ib({type:ge,selectors:[["color-saturation"]],inputs:{hsl:"hsl",hsv:"hsv",radius:"radius",pointer:"pointer",circle:"circle"},outputs:{onChange:"onChange"},features:[d.zb()],decls:5,vars:8,consts:[["ngx-color-coordinates","",1,"color-saturation",3,"coordinatesChange"],[1,"saturation-white"],[1,"saturation-black"],[1,"saturation-pointer",3,"ngStyle"],[1,"saturation-circle",3,"ngStyle"]],template:function(t,e){1&t&&(d.Tb(0,"div",0),d.bc("coordinatesChange",(function(t){return e.handleChange(t)})),d.Tb(1,"div",1),d.Pb(2,"div",2),d.Tb(3,"div",3),d.Pb(4,"div",4),d.Sb(),d.Sb(),d.Sb()),2&t&&(d.xc("background",e.background,d.Hb),d.Bb(3),d.xc("top",e.pointerTop)("left",e.pointerLeft),d.jc("ngStyle",e.pointer),d.Bb(1),d.jc("ngStyle",e.circle))},directives:[ce,h.l],styles:[".saturation-white[_ngcontent-%COMP%] {\n      background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n    }\n    .saturation-black[_ngcontent-%COMP%] {\n      background: linear-gradient(to top, #000, rgba(0,0,0,0));\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n    }\n    .color-saturation[_ngcontent-%COMP%] {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n    }\n    .saturation-pointer[_ngcontent-%COMP%] {\n      position: absolute;\n      cursor: default;\n    }\n    .saturation-circle[_ngcontent-%COMP%] {\n      width: 4px;\n      height: 4px;\n      box-shadow: 0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3), 0 0 1px 2px rgba(0,0,0,.4);\n      border-radius: 50%;\n      cursor: hand;\n      transform: translate(-2px, -4px);\n    }"],changeDetection:0}),ge),Te=((fe=function t(){_classCallCheck(this,t)}).\u0275mod=d.Mb({type:fe}),fe.\u0275inj=d.Lb({factory:function(t){return new(t||fe)},imports:[[h.c,le]]}),fe),_e=function(t,e){return{input:t,label:e}};function Pe(t,e){if(1&t){var n=d.Ub();d.Tb(0,"div",11),d.Tb(1,"color-editable-input",12),d.bc("onChange",(function(t){return d.sc(n),d.ec().handleChange(t)})),d.Sb(),d.Sb()}if(2&t){var i=d.ec();d.Bb(1),d.wc(d.mc(3,_e,i.input,i.label)),d.jc("value",i.hex)}}function Ie(t,e){if(1&t){var n=d.Ub();d.Tb(0,"color-editable-input",17),d.bc("onChange",(function(t){return d.sc(n),d.ec(2).handleChange(t)})),d.Sb()}if(2&t){var i=d.ec(2);d.wc(d.mc(4,_e,i.input,i.label)),d.jc("value",i.rgb.a)("arrowOffset",.01)}}function Me(t,e){if(1&t){var n=d.Ub();d.Tb(0,"div",11),d.Tb(1,"color-editable-input",13),d.bc("onChange",(function(t){return d.sc(n),d.ec().handleChange(t)})),d.Sb(),d.Sb(),d.Tb(2,"div",11),d.Tb(3,"color-editable-input",14),d.bc("onChange",(function(t){return d.sc(n),d.ec().handleChange(t)})),d.Sb(),d.Sb(),d.Tb(4,"div",11),d.Tb(5,"color-editable-input",15),d.bc("onChange",(function(t){return d.sc(n),d.ec().handleChange(t)})),d.Sb(),d.Sb(),d.Tb(6,"div",11),d.yc(7,Ie,1,7,"color-editable-input",16),d.Sb()}if(2&t){var i=d.ec();d.Bb(1),d.wc(d.mc(10,_e,i.input,i.label)),d.jc("value",i.rgb.r),d.Bb(2),d.wc(d.mc(13,_e,i.input,i.label)),d.jc("value",i.rgb.g),d.Bb(2),d.wc(d.mc(16,_e,i.input,i.label)),d.jc("value",i.rgb.b),d.Bb(2),d.jc("ngIf",!i.disableAlpha)}}function ze(t,e){if(1&t){var n=d.Ub();d.Tb(0,"color-editable-input",17),d.bc("onChange",(function(t){return d.sc(n),d.ec(2).handleChange(t)})),d.Sb()}if(2&t){var i=d.ec(2);d.wc(d.mc(4,_e,i.input,i.label)),d.jc("value",i.hsl.a)("arrowOffset",.01)}}function Re(t,e){if(1&t){var n=d.Ub();d.Tb(0,"div",11),d.Tb(1,"color-editable-input",18),d.bc("onChange",(function(t){return d.sc(n),d.ec().handleChange(t)})),d.Sb(),d.Sb(),d.Tb(2,"div",11),d.Tb(3,"color-editable-input",19),d.bc("onChange",(function(t){return d.sc(n),d.ec().handleChange(t)})),d.Sb(),d.Sb(),d.Tb(4,"div",11),d.Tb(5,"color-editable-input",20),d.bc("onChange",(function(t){return d.sc(n),d.ec().handleChange(t)})),d.Sb(),d.Sb(),d.Tb(6,"div",11),d.yc(7,ze,1,7,"color-editable-input",16),d.Sb()}if(2&t){var i=d.ec();d.Bb(1),d.wc(d.mc(10,_e,i.input,i.label)),d.jc("value",i.round(i.hsl.h)),d.Bb(2),d.wc(d.mc(13,_e,i.input,i.label)),d.jc("value",i.round(100*i.hsl.s)+"%"),d.Bb(2),d.wc(d.mc(16,_e,i.input,i.label)),d.jc("value",i.round(100*i.hsl.l)+"%"),d.Bb(2),d.jc("ngIf",!i.disableAlpha)}}function De(t,e){if(1&t){var n=d.Ub();d.Tb(0,"div",12),d.Tb(1,"color-alpha",13),d.bc("onChange",(function(t){return d.sc(n),d.ec().handleValueChange(t)})),d.Sb(),d.Sb()}if(2&t){var i=d.ec();d.Bb(1),d.jc("radius",2)("rgb",i.rgb)("hsl",i.hsl)("pointer",i.pointer)}}var Ne,Ae,Le,Be=((Le=function(){function t(){_classCallCheck(this,t),this.onChange=new d.n,this.view="",this.input={fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px","text-align":"center"},this.label={"text-transform":"uppercase",fontSize:"11px","line-height":"11px",color:"#969696","text-align":"center",display:"block",marginTop:"12px"}}return _createClass(t,[{key:"ngOnInit",value:function(){1===this.hsl.a&&"hex"!==this.view?this.view="hex":"rgb"!==this.view&&"hsl"!==this.view&&(this.view="rgb")}},{key:"toggleViews",value:function(){"hex"===this.view?this.view="rgb":"rgb"===this.view?this.view="hsl":"hsl"===this.view&&(this.view=1===this.hsl.a?"hex":"rgb")}},{key:"round",value:function(t){return Math.round(t)}},{key:"handleChange",value:function(t){var e=t.data,n=t.$event;if(e.hex){if(new Kt(e.hex).isValid){var i=new Kt(e.hex);this.onChange.emit({data:{hex:this.disableAlpha?i.toHex():i.toHex8(),source:"hex"},$event:n})}}else if(e.r||e.g||e.b)this.onChange.emit({data:{r:e.r||this.rgb.r,g:e.g||this.rgb.g,b:e.b||this.rgb.b,source:"rgb"},$event:n});else if(e.a)e.a<0?e.a=0:e.a>1&&(e.a=1),this.disableAlpha&&(e.a=1),this.onChange.emit({data:{h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},$event:n});else if(e.h||e.s||e.l){var r=e.s&&e.s.replace("%",""),o=e.l&&e.l.replace("%","");this.onChange.emit({data:{h:e.h||this.hsl.h,s:Number(r||this.hsl.s),l:Number(o||this.hsl.l),source:"hsl"},$event:n})}}}]),t}()).\u0275fac=function(t){return new(t||Le)},Le.\u0275cmp=d.Ib({type:Le,selectors:[["color-chrome-fields"]],inputs:{disableAlpha:"disableAlpha",hsl:"hsl",rgb:"rgb",hex:"hex"},outputs:{onChange:"onChange"},decls:13,vars:3,consts:[[1,"chrome-wrap"],[1,"chrome-fields"],[3,"ngIf"],[1,"chrome-toggle"],[1,"chrome-icon",3,"click"],["icon",""],["viewBox","0 0 24 24",1,"chrome-toggle-svg"],["fill","#333","d","M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"],["iconUp",""],["fill","#333","d","M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15Z"],["iconDown",""],[1,"chrome-field"],["label","hex",3,"value","onChange"],["label","r",3,"value","onChange"],["label","g",3,"value","onChange"],["label","b",3,"value","onChange"],["label","a",3,"style","value","arrowOffset","onChange",4,"ngIf"],["label","a",3,"value","arrowOffset","onChange"],["label","h",3,"value","onChange"],["label","s",3,"value","onChange"],["label","l",3,"value","onChange"]],template:function(t,e){1&t&&(d.Tb(0,"div",0),d.Tb(1,"div",1),d.yc(2,Pe,2,6,"ng-template",2),d.yc(3,Me,8,19,"ng-template",2),d.yc(4,Re,8,19,"ng-template",2),d.Sb(),d.Tb(5,"div",3),d.Tb(6,"div",4,5),d.bc("click",(function(){return e.toggleViews()})),d.dc(),d.Tb(8,"svg",6),d.Pb(9,"path",7,8),d.Pb(11,"path",9,10),d.Sb(),d.Sb(),d.Sb(),d.Sb()),2&t&&(d.Bb(2),d.jc("ngIf","hex"===e.view),d.Bb(1),d.jc("ngIf","rgb"===e.view),d.Bb(1),d.jc("ngIf","hsl"===e.view))},directives:[h.k,Se],styles:[".chrome-wrap[_ngcontent-%COMP%] {\n        padding-top: 16px;\n        display: flex;\n      }\n      .chrome-fields[_ngcontent-%COMP%] {\n        flex: 1;\n        display: flex;\n        margin-left: -6px;\n      }\n      .chrome-field[_ngcontent-%COMP%] {\n        padding-left: 6px;\n        width: 100%;\n      }\n      .chrome-toggle[_ngcontent-%COMP%] {\n        width: 32px;\n        text-align: right;\n        position: relative;\n      }\n      .chrome-icon[_ngcontent-%COMP%] {\n        margin-right: -4px;\n        margin-top: 12px;\n        cursor: pointer;\n        position: relative;\n      }\n      .chrome-toggle-svg[_ngcontent-%COMP%] {\n        width: 24px;\n        height: 24px;\n        border: 1px transparent solid;\n        border-radius: 5px;\n      }\n      .chrome-toggle-svg[_ngcontent-%COMP%]:hover {\n        background: #eee;\n      }"],changeDetection:0}),Le),je=((Ae=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.call(this)).disableAlpha=!1,t.circle={width:"12px",height:"12px",borderRadius:"6px",boxShadow:"rgb(255, 255, 255) 0px 0px 0px 1px inset",transform:"translate(-6px, -8px)"},t.pointer={width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -2px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"},t}return _createClass(n,[{key:"afterValidChange",value:function(){this.activeBackground="rgba(".concat(this.rgb.r,", ").concat(this.rgb.g,", ").concat(this.rgb.b,", ").concat(this.disableAlpha?1:this.rgb.a,")")}},{key:"handleValueChange",value:function(t){var e=t.data,n=t.$event;this.handleChange(e,n)}}]),n}(Ce)).\u0275fac=function(t){return new(t||Ae)},Ae.\u0275cmp=d.Ib({type:Ae,selectors:[["color-chrome"]],inputs:{disableAlpha:"disableAlpha"},features:[d.yb],decls:14,vars:16,consts:[[1,"saturation"],[3,"hsl","hsv","circle","onChange"],[1,"chrome-body"],[1,"chrome-controls"],[1,"chrome-color"],[1,"chrome-swatch"],[1,"chrome-active"],[1,"chrome-toggles"],[1,"chrome-hue"],[3,"radius","hsl","pointer","onChange"],["class","chrome-alpha",4,"ngIf"],[3,"rgb","hsl","hex","disableAlpha","onChange"],[1,"chrome-alpha"],[3,"radius","rgb","hsl","pointer","onChange"]],template:function(t,e){1&t&&(d.Tb(0,"div"),d.Tb(1,"div",0),d.Tb(2,"color-saturation",1),d.bc("onChange",(function(t){return e.handleValueChange(t)})),d.Sb(),d.Sb(),d.Tb(3,"div",2),d.Tb(4,"div",3),d.Tb(5,"div",4),d.Tb(6,"div",5),d.Pb(7,"div",6),d.Pb(8,"color-checkboard"),d.Sb(),d.Sb(),d.Tb(9,"div",7),d.Tb(10,"div",8),d.Tb(11,"color-hue",9),d.bc("onChange",(function(t){return e.handleValueChange(t)})),d.Sb(),d.Sb(),d.yc(12,De,2,4,"div",10),d.Sb(),d.Sb(),d.Tb(13,"color-chrome-fields",11),d.bc("onChange",(function(t){return e.handleValueChange(t)})),d.Sb(),d.Sb(),d.Sb()),2&t&&(d.Eb("chrome-picker ",e.className,""),d.Bb(2),d.jc("hsl",e.hsl)("hsv",e.hsv)("circle",e.circle),d.Bb(5),d.xc("background",e.activeBackground,d.Hb),d.Bb(4),d.jc("radius",2)("hsl",e.hsl)("pointer",e.pointer),d.Bb(1),d.jc("ngIf",!e.disableAlpha),d.Bb(1),d.jc("rgb",e.rgb)("hsl",e.hsl)("hex",e.hex)("disableAlpha",e.disableAlpha))},directives:[ke,ae,Ee,h.k,Be,ue],styles:[".chrome-picker[_ngcontent-%COMP%] {\n        background: #fff;\n        border-radius: 2px;\n        box-shadow: 0 0 2px rgba(0, 0, 0, 0.3), 0 4px 8px rgba(0, 0, 0, 0.3);\n        box-sizing: initial;\n        width: 225px;\n        font-family: 'Menlo';\n      }\n      .chrome-controls[_ngcontent-%COMP%] {\n        display: flex;\n      }\n      .chrome-color[_ngcontent-%COMP%] {\n        width: 42px;\n      }\n      .chrome-body[_ngcontent-%COMP%] {\n        padding: 14px 14px 12px;\n      }\n      .chrome-active[_ngcontent-%COMP%] {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        border-radius: 20px;\n        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.1);\n        z-index: 2;\n      }\n      .chrome-swatch[_ngcontent-%COMP%] {\n        width: 28px;\n        height: 28px;\n        border-radius: 15px;\n        position: relative;\n        overflow: hidden;\n      }\n      .saturation[_ngcontent-%COMP%] {\n        width: 100%;\n        padding-bottom: 55%;\n        position: relative;\n        border-radius: 2px 2px 0 0;\n        overflow: hidden;\n      }\n      .chrome-toggles[_ngcontent-%COMP%] {\n        flex: 1;\n      }\n      .chrome-hue[_ngcontent-%COMP%] {\n        height: 10px;\n        position: relative;\n        margin-bottom: 8px;\n      }\n      .chrome-alpha[_ngcontent-%COMP%] {\n        height: 10px;\n        position: relative;\n      }"],changeDetection:0}),Ae),Ge=((Ne=function t(){_classCallCheck(this,t)}).\u0275mod=d.Mb({type:Ne}),Ne.\u0275inj=d.Lb({factory:function(t){return new(t||Ne)},imports:[[h.c,he,se,Oe,we,Te]]}),Ne),He=["toolbarNewColorPicker"];function Fe(t,e){if(1&t&&(d.Tb(0,"h5",18),d.zc(1),d.Sb()),2&t){var n=d.ec(3);d.Bb(1),d.Ac(n.heading)}}function Xe(t,e){if(1&t){var n=d.Ub();d.Tb(0,"div",19),d.Tb(1,"color-chrome",20),d.bc("onChangeComplete",(function(t){return d.sc(n),d.ec(3).unsavedColor=t.color})),d.Sb(),d.Tb(2,"div",21),d.Tb(3,"button",22),d.bc("click",(function(t){d.sc(n);var e=d.ec(3);return t.stopPropagation(),e.showColorPicker=!1})),d.zc(4,"Cancel"),d.Sb(),d.Tb(5,"button",23),d.bc("click",(function(t){return d.sc(n),d.ec(3).onPick(t)})),d.zc(6,"Save"),d.Sb(),d.Sb(),d.Sb()}}function Ue(t,e){if(1&t){var n=d.Ub();d.Tb(0,"div",24),d.bc("mouseenter",(function(){d.sc(n);var t=e.$implicit;return d.ec(3).onHover(t)}))("click",(function(){d.sc(n);var t=e.$implicit;return d.ec(3).onClick(t)})),d.Sb()}if(2&t){var i=e.$implicit,r=d.ec(3);d.xc("background-color",i),d.Fb("selected-color",i===r.selectedColor)}}function We(t,e){if(1&t){var n=d.Ub();d.Tb(0,"div",24),d.bc("mouseenter",(function(){d.sc(n);var t=e.$implicit;return d.ec(3).onHover(t)}))("click",(function(){d.sc(n);var t=e.$implicit;return d.ec(3).onClick(t)})),d.Sb()}if(2&t){var i=e.$implicit,r=d.ec(3);d.xc("background-color",i),d.Fb("selected-color",i===r.selectedColor)}}function Ye(t,e){if(1&t){var n=d.Ub();d.Tb(0,"div",8),d.bc("appClickOutside",(function(){return d.sc(n),d.ec(2).close()})),d.yc(1,Fe,2,1,"h5",9),d.Tb(2,"div",10),d.Tb(3,"h5"),d.zc(4,"My Colors"),d.Sb(),d.Tb(5,"button",11),d.bc("click",(function(){return d.sc(n),d.ec(2).showColorPicker=!0})),d.zc(6,"+ Add"),d.Sb(),d.yc(7,Xe,7,0,"div",12),d.Sb(),d.Tb(8,"div",13),d.yc(9,Ue,1,4,"div",14),d.Sb(),d.Tb(10,"div",15),d.Tb(11,"h5"),d.zc(12,"Standard Colors"),d.Sb(),d.Sb(),d.Tb(13,"div",16),d.Tb(14,"div",17),d.bc("click",(function(){d.sc(n);var t=d.ec(2);return t.onClick(t.CSS_PROPERTY_VALUES.COLOR_TRANSPARENT)})),d.zc(15," Transparent "),d.Sb(),d.yc(16,We,1,4,"div",14),d.Sb(),d.Sb()}if(2&t){var i=d.ec(2),r=d.oc(1);d.jc("srcElement",r),d.Bb(1),d.jc("ngIf",i.heading),d.Bb(6),d.jc("ngIf",i.showColorPicker),d.Bb(2),d.jc("ngForOf",i.customColors),d.Bb(5),d.Fb("selected-color",i.CSS_PROPERTY_VALUES.COLOR_TRANSPARENT===i.selectedColor),d.Bb(2),d.jc("ngForOf",i.standeardColors)}}function qe(t,e){if(1&t){var n=d.Ub();d.Tb(0,"div",2),d.bc("appClickOutside",(function(){return d.sc(n),d.ec().toggleOptions()})),d.Pb(1,"div",3,4),d.yc(3,Ye,17,7,"div",5),d.Tb(4,"button",6),d.bc("click",(function(){return d.sc(n),d.ec().toggleOptions()})),d.Tb(5,"span",7),d.zc(6,"\xd7"),d.Sb(),d.Sb(),d.Sb()}if(2&t){var i=d.ec(),r=d.oc(1);d.jc("srcElement",i.externalSourseElement||r),d.Bb(3),d.jc("ngIf",i.showDropdown)}}var Ve,Qe=["*"],Ke=((Ve=function(){function t(){_classCallCheck(this,t),this.showDropdown=!1,this.selectedColor="",this.CSS_PROPERTY_VALUES=D,this.customColors=[],this.standeardColors=["#000000","#323232","#646464","#7d7d7d","#afafaf","#e1e1e1","#ffffff","#820000","#b40000","#e60000","#ff0000","#ff3232","#ff6464","#ff7d7d","#823400","#b44800","#e65c00","#ff6600","#ff8532","#ffa364","#ffb27d","#828200","#b4b400","#e6e600","#ffff00","#ffff32","#ffff64","#ffff7d","#003300","#008000","#00cc00","#00e600","#4dff4d","#80ff80","#b3ffb3","#001a4d","#003cb3","#0000ff","#0055ff","#4d88ff","#80b3ff","#b3d1ff","#003333","#006666","#00cccc","#00ffff","#33ffff","#80ffff","#b3ffff","#4d004d","#660066","#ac39ac","#bf40bf","#cc66cc","#d98cd9","#df9fdf","#660029","#b30047","#e6005c","#ff0066","#ff3385","#ff66a3","#ff99c2"],this.showColorPicker=!1,this.selectedOption={},this.colorHover=new d.n,this.colorSelect=new d.n}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){}},{key:"openColorPicker",value:function(t){this.selectedOption=t,this.showColorPicker=!0}},{key:"onPick",value:function(t){t.stopPropagation(),this.showColorPicker=!1;var e=this.unsavedColor.rgb;this.customColors.push("rgba(".concat(e.r,",").concat(e.g,",").concat(e.b,",").concat(e.a,")"))}},{key:"open",value:function(){var t=this;setTimeout((function(){t.showDropdown=!0}))}},{key:"onHover",value:function(t){}},{key:"onClick",value:function(t){this.colorSelect.emit(t)}},{key:"close",value:function(){this.showDropdown=!1,this.showColorPicker=!1}},{key:"toggleOptions",value:function(){this.showDropdown=!this.showDropdown,this.showColorPicker=!1}}]),t}()).\u0275fac=function(t){return new(t||Ve)},Ve.\u0275cmp=d.Ib({type:Ve,selectors:[["app-color-picker"]],viewQuery:function(t,e){var n;1&t&&d.vc(He,!0),2&t&&d.nc(n=d.cc())&&(e.toolbarNewColorPicker=n.first)},inputs:{externalSourseElement:"externalSourseElement",heading:"heading"},outputs:{colorHover:"colorHover",colorSelect:"colorSelect"},ngContentSelectors:Qe,decls:4,vars:1,consts:[["srcElement",""],["class","left-raiser-container color-picker-content",3,"srcElement","appClickOutside",4,"ngIf"],[1,"left-raiser-container","color-picker-content",3,"srcElement","appClickOutside"],["id","toolbarNewColorPicker"],["toolbarNewColorPicker",""],["class","color-picker","id","colorPalette",3,"srcElement","appClickOutside",4,"ngIf"],["type","button","aria-label","Close",1,"close","close-button",3,"click"],["aria-hidden","true"],["id","colorPalette",1,"color-picker",3,"srcElement","appClickOutside"],["class","color-picker-heading",4,"ngIf"],[1,"my-color-header","position-relative"],["type","button",1,"btn","btn-outline-info","btn-sm",3,"click"],["class","color-sketch",4,"ngIf"],[1,"color-pallete-container","justify-content-start"],["class","color-pallete",3,"background-color","selected-color","mouseenter","click",4,"ngFor","ngForOf"],[1,"standard-color-header"],[1,"mt-3","color-pallete-container"],[1,"color-pallete","transparent-color-pallete",3,"click"],[1,"color-picker-heading"],[1,"color-sketch"],[3,"onChangeComplete"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-secondary","btn-sm","mr-2",3,"click"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"color-pallete",3,"mouseenter","click"]],template:function(t,e){1&t&&(d.ic(),d.Tb(0,"div",null,0),d.hc(2),d.Sb(),d.yc(3,qe,7,2,"div",1)),2&t&&(d.Bb(3),d.jc("ngIf",e.showDropdown))},directives:[h.k,_t,h.j,je],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.color-picker[_ngcontent-%COMP%]{color:#484848;width:100%;height:calc(100vh - 60px);padding:0 20px;overflow-y:auto}.color-pallete-container[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.color-pallete[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:.15em;cursor:pointer;margin:5px;transition:all .15s;overflow:hidden;box-shadow:0 0 2px 0 grey;transition:box-shadow .3s}.color-pallete[_ngcontent-%COMP%]:hover{box-shadow:0 0 2px 1px grey}.color-pallete.add-color-pallete[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px}.color-sketch[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;border-radius:2px;box-shadow:0 0 2px rgba(0,0,0,.3),0 4px 8px rgba(0,0,0,.3);padding:10px;background:#fff}.color-sketch[_ngcontent-%COMP%]     .chrome-picker{border-radius:0;box-shadow:0 0 0}.my-color-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.my-color-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:.813rem}.standard-color-header[_ngcontent-%COMP%]{margin-top:2rem;border-top:1px solid #d3d3d3;padding-top:20px}.standard-color-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:.813rem}.close-button[_ngcontent-%COMP%]{position:absolute;right:7px;top:3px}.color-picker-heading[_ngcontent-%COMP%]{border-bottom:1px solid silver;margin-bottom:20px;padding-bottom:5px}.transparent-color-pallete[_ngcontent-%COMP%]{background-color:transparent;margin:5px;width:calc(100% - 15px);box-sizing:content-box;display:flex;justify-content:center;align-items:center}"]}),Ve),Je=["photoContainer"],$e=function(t){return{"background-image":t}};function Ze(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"li",15),d.bc("dragstart",(function(t){d.sc(n);var i=e.$implicit;return d.ec().dragStart(t,i)}))("click",(function(t){d.sc(n);var i=e.$implicit;return d.ec().onClick(t,i)})),d.Sb(),d.Qb()}if(2&t){var i=e.$implicit;d.Bb(1),d.jc("ngStyle",d.lc(1,$e,"url("+i.imageUrl+")"))}}var tn,en=((tn=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,i)).backgroundService=t,r.eventer=i,r.items=[],r.rows=[[],[]],r.scrollTimer=null,r}return _createClass(n,[{key:"ngOnChanges",value:function(t){}},{key:"onNewSearch",value:function(t){this.backgroundService.resetPage(t),this.getNextSet()}},{key:"getNextSet",value:function(){this.backgroundService.getPhotos()}},{key:"onColorSelect",value:function(t){var e=new M("div",{},{},[]);e.type=v.BACKGROUND,e.style[R.BG]=t,this.onClick(null,{canvasElement:e})}},{key:"onScroll",value:function(t){var e=this;this.backgroundService.isLoading||(null!==this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout((function(){var t=e.photoContainer.nativeElement;t.scrollTop+t.offsetHeight+50>t.scrollHeight&&e.backgroundService.getPhotos()}),50))}}]),n}(C)).\u0275fac=function(t){return new(t||tn)(d.Ob(Tt),d.Ob(y.b))},tn.\u0275cmp=d.Ib({type:tn,selectors:[["app-background-picker"]],viewQuery:function(t,e){var n;1&t&&d.vc(Je,!0),2&t&&d.nc(n=d.cc())&&(e.photoContainer=n.first)},features:[d.yb,d.zb()],decls:19,vars:5,consts:[[1,"search-box-wrapper"],[3,"placeholder","searchQuery"],[1,"images-container",3,"scroll"],["photoContainer",""],[1,"d-flex"],[1,"picker-item"],[1,"image-li","custom-li","bg-color-selctor",3,"click"],["colorSelector",""],[1,"material-icons"],["heading","Select Background Color",3,"externalSourseElement","colorSelect"],["backgroundPicker",""],[1,"image-li","custom-li",3,"click"],[4,"ngFor","ngForOf"],[1,"w-100","text-center","spinner","my-4"],[1,"spinner-border"],["draggable","",1,"image-li",3,"ngStyle","dragstart","click"]],template:function(t,e){if(1&t){var n=d.Ub();d.Tb(0,"div"),d.Tb(1,"div",0),d.Tb(2,"app-search-box",1),d.bc("searchQuery",(function(t){return e.onNewSearch(t)})),d.Sb(),d.Sb(),d.Tb(3,"div",2,3),d.bc("scroll",(function(t){return e.onScroll(t)})),d.Tb(5,"div",4),d.Tb(6,"ul",5),d.Tb(7,"li",6,7),d.bc("click",(function(){return d.sc(n),d.oc(13).open()})),d.Tb(9,"i",8),d.zc(10,"format_paint"),d.Sb(),d.zc(11," Select Color "),d.Sb(),d.Tb(12,"app-color-picker",9,10),d.bc("colorSelect",(function(t){return e.onColorSelect(t)})),d.Sb(),d.Tb(14,"li",11),d.bc("click",(function(){return e.onColorSelect("transparent")})),d.zc(15," Transparent "),d.Sb(),d.yc(16,Ze,2,3,"ng-container",12),d.Sb(),d.Sb(),d.Tb(17,"div",13),d.Pb(18,"div",14),d.Sb(),d.Sb(),d.Sb()}if(2&t){var i=d.oc(8);d.Bb(2),d.jc("placeholder","Search Backgrounds"),d.Bb(10),d.jc("externalSourseElement",i),d.Bb(4),d.jc("ngForOf",e.backgroundService.backgrounds),d.Bb(1),d.Fb("invisible",!e.backgroundService.isLoading)}},directives:[Z,Ke,h.j,h.l],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}[_nghost-%COMP%]{padding:10px 15px 0}.search-box-wrapper[_ngcontent-%COMP%]{margin:0 15px 15px}.images-container[_ngcontent-%COMP%]{overflow-y:auto;padding:0 8px 10px;height:calc(100vh - 165px)}.picker-item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.picker-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1px;margin:3px;border-radius:3px;cursor:pointer;height:130px;background-position:50%}.picker-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{box-shadow:0 0 4px 1px #d3d3d3;transition:box-shadow .3s}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]{width:calc(50% - 12px);height:130px;background-size:cover;-webkit-user-drag:element}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:3px;max-height:100%;max-width:100%}.picker-item[_ngcontent-%COMP%]   .custom-li[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center}.bg-color-selctor[_ngcontent-%COMP%]{background-image:linear-gradient(rgba(10,10,10,.4),rgba(10,10,10,.4)),url(bg-color-selector.0ab769dd1bfb2c82a131.png);background-size:cover}"]}),tn),nn={position:"absolute",cursor:"move","user-select":"none",width:"200px"},rn={"border-color":"black"},on=[{style:"solid",image:"/assets/images/pickers/solid-line.png",border:"1px"},{style:"dotted",image:"/assets/images/pickers/dotted-line.png",border:"1px"},{style:"dashed",image:"/assets/images/pickers/dashed-line.png",border:"1px"},{style:"double",image:"/assets/images/pickers/double-line.png",border:"4px"}];function an(){var t=x.cloneDeep(rn),e=x.cloneDeep(nn),n=new M("hr",{},t,[]),i=new M("div",{},e,[n]);return i.type=v.LINE,on.map((function(t){var e=x.cloneDeep(i);return e.children[0].style["border-top"]="".concat(t.border," solid"),e.children[0].style["border-style"]=t.style,{imageUrl:t.image,backgroundSize:"fixed",canvasElement:e}}))}var sn,cn=((sn=function(){function t(e){_classCallCheck(this,t),this.httpService=e,this.elements=[],this.GET_IMAGES="/api/images",this.PAGE=0,this.LIMIT="20",this.withMock=!1,this.isLoading=!0,this.query="",this.EXTRA_DELAY=10,this.addLineItems()}return _createClass(t,[{key:"addLineItems",value:function(){var t={label:"Lines",values:an()};this.elements.push(t)}},{key:"addBoxItems",value:function(){var t={label:"Boxes",values:an()};this.elements.push(t)}},{key:"resetPage",value:function(t){this.query=t,this.elements=[],this.PAGE=0}},{key:"getPhotos",value:function(){var t=this;this.isLoading=!0,this.PAGE+=1;var e={params:{page:""+this.PAGE,limit:this.LIMIT,query:(this.query+" background").trim(),source:"unsplash"}};this.withMock?this.mock().pipe(k(500)).subscribe((function(e){t.processPhotos(e)})):this.httpService.get(this.GET_IMAGES,e).pipe(k(this.EXTRA_DELAY)).subscribe((function(e){t.processPhotos(e)}))}},{key:"processPhotos",value:function(t){var e=this;t.forEach((function(t){var n=F();n.id=t.id,n.imageUrl=t.thumb,n.canvasElement.type=v.BACKGROUND,n.canvasElement.style=_defineProperty({},R.BG,"url('".concat(t.imageUrl,"') center/cover")),e.elements.push(n)})),this.isLoading=!1}},{key:"mock",value:function(){return Object(S.a)(Y)}}]),t}()).\u0275fac=function(t){return new(t||sn)(d.Xb(Q.a))},sn.\u0275prov=d.Kb({token:sn,factory:sn.\u0275fac,providedIn:"root"}),sn),ln=function(t){return{"background-image":t}};function un(t,e){if(1&t){var n=d.Ub();d.Tb(0,"li",5),d.bc("dragstart",(function(t){d.sc(n);var i=e.$implicit;return d.ec(2).dragStart(t,i)}))("click",(function(t){d.sc(n);var i=e.$implicit;return d.ec(2).onClick(t,i)})),d.Sb()}2&t&&d.jc("ngStyle",d.lc(1,ln,"url("+e.$implicit.imageUrl+")"))}function hn(t,e){if(1&t&&(d.Tb(0,"div",2),d.Tb(1,"p"),d.zc(2),d.Sb(),d.Tb(3,"div",3),d.Tb(4,"ul"),d.yc(5,un,1,3,"li",4),d.Sb(),d.Sb(),d.Sb()),2&t){var n=e.$implicit;d.Bb(2),d.Ac(n.label),d.Bb(3),d.jc("ngForOf",n.values)}}var pn,dn=((pn=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var r;return _classCallCheck(this,n),(r=e.call(this,t)).eventService=t,r.elementService=i,r}return _createClass(n,[{key:"ngOnInit",value:function(){}}]),n}(C)).\u0275fac=function(t){return new(t||pn)(d.Ob(y.b),d.Ob(cn))},pn.\u0275cmp=d.Ib({type:pn,selectors:[["app-elements-picker"]],features:[d.yb],decls:2,vars:1,consts:[[1,"elements-picker-container"],["class","element-container",4,"ngFor","ngForOf"],[1,"element-container"],[1,"element-content"],["class","image-li","draggable","",3,"ngStyle","dragstart","click",4,"ngFor","ngForOf"],["draggable","",1,"image-li",3,"ngStyle","dragstart","click"]],template:function(t,e){1&t&&(d.Tb(0,"div",0),d.yc(1,hn,6,2,"div",1),d.Sb()),2&t&&(d.Bb(1),d.jc("ngForOf",e.elementService.elements))},directives:[h.j,h.l],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.elements-picker-container[_ngcontent-%COMP%]{padding:20px;height:100%;overflow-y:auto}.element-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;flex-wrap:wrap}.image-li[_ngcontent-%COMP%]{cursor:pointer;width:calc(50% - 6px);height:130px;margin:3px;background-size:contain;background-position:50%;display:flex;align-items:center;border:1px solid grey;border-radius:3px;-webkit-user-drag:element}"]}),pn),fn=["itemsRef"];function gn(t,e){if(1&t){var n=d.Ub();d.Tb(0,"div",4),d.bc("click",(function(){return d.sc(n),d.ec().onClose()})),d.Tb(1,"i",5),d.zc(2,"arrow_left"),d.Sb(),d.Sb()}}function bn(t,e){1&t&&(d.Rb(0),d.Pb(1,"app-image-picker"),d.Qb())}function vn(t,e){1&t&&(d.Rb(0),d.Pb(1,"app-text-picker"),d.Qb())}function mn(t,e){1&t&&(d.Rb(0),d.Pb(1,"app-vector-picker"),d.Qb())}function yn(t,e){1&t&&(d.Rb(0),d.Pb(1,"app-background-picker"),d.Qb())}function xn(t,e){1&t&&(d.Rb(0),d.Pb(1,"app-elements-picker"),d.Qb())}var Cn,Sn=((Cn=function(){function t(){_classCallCheck(this,t),this.showPicker=!1,this.showPickerChange=new d.n,this.closePicker=new d.n,this.items=[],this.isLoading=!0,this.LEFT_MENU_CONST=f}return _createClass(t,[{key:"onClose",value:function(){this.showPickerChange.emit(!1)}},{key:"loadItems",value:function(){var t=this;this.items=[],setTimeout((function(){t.items=m[t.picker.id],t.isLoading=!1}),100)}},{key:"ngOnChanges",value:function(t){t.picker&&this.picker&&(this.isLoading=!0,this.loadItems())}},{key:"dragStart",value:function(t,e){var n=t.target.getBoundingClientRect();t.dataTransfer.setData("pickerItem",JSON.stringify({left:t.clientX-n.left,top:t.clientY-n.top,item:e}))}},{key:"visuliseItems",value:function(){var t=this;this.items.forEach((function(e){var n=document.createElement(e.tag);n.draggable=!0,n.ondragstart=function(t){var e=t.target.getBoundingClientRect();t.dataTransfer.setData("pickerItem",JSON.stringify({id:t.target.id,left:t.clientX-e.left,top:t.clientY-e.top}))},n.id="myIddd",n.innerText=e.text,Object.keys(e.style).forEach((function(t){n.style[t]=e.style[t]})),t.itemsRef.nativeElement.appendChild(n)}))}}]),t}()).\u0275fac=function(t){return new(t||Cn)},Cn.\u0275cmp=d.Ib({type:Cn,selectors:[["app-picker"]],viewQuery:function(t,e){var n;1&t&&d.vc(fn,!0),2&t&&d.nc(n=d.cc())&&(e.itemsRef=n.first)},inputs:{picker:"picker",showPicker:"showPicker"},outputs:{showPickerChange:"showPickerChange",closePicker:"closePicker"},features:[d.zb()],decls:8,vars:9,consts:[[1,"picker"],["class","picker-close",3,"click",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"picker-close",3,"click"],[1,"material-icons"]],template:function(t,e){1&t&&(d.Tb(0,"div",0),d.yc(1,gn,3,0,"div",1),d.Rb(2,2),d.yc(3,bn,2,0,"ng-container",3),d.yc(4,vn,2,0,"ng-container",3),d.yc(5,mn,2,0,"ng-container",3),d.yc(6,yn,2,0,"ng-container",3),d.yc(7,xn,2,0,"ng-container",3),d.Qb(),d.Sb()),2&t&&(d.Fb("show-picker",e.showPicker),d.Bb(1),d.jc("ngIf",e.showPicker),d.Bb(1),d.jc("ngSwitch",null==e.picker?null:e.picker.id),d.Bb(1),d.jc("ngSwitchCase",e.LEFT_MENU_CONST.PHOTO_MENU_ID),d.Bb(1),d.jc("ngSwitchCase",e.LEFT_MENU_CONST.TEXT_MENU_ID),d.Bb(1),d.jc("ngSwitchCase",e.LEFT_MENU_CONST.VECTOR_MENU_ID),d.Bb(1),d.jc("ngSwitchCase",e.LEFT_MENU_CONST.BG_MENU_ID),d.Bb(1),d.jc("ngSwitchCase",e.LEFT_MENU_CONST.ELEMENTS_MENU_ID))},directives:[h.k,h.m,h.n,rt,yt,kt,en,dn],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#484848}.picker-close[_ngcontent-%COMP%]{right:-15px;position:absolute;top:45%;z-index:1;width:15px;height:50px;border-top-right-radius:4px;border-bottom-right-radius:4px;background-color:rgba(49,66,90,.89);display:flex;justify-content:center;align-items:center;cursor:pointer}.picker[_ngcontent-%COMP%]{width:0;transition:width .4s ease-in;position:relative;height:calc(100vh - 60px);background:rgba(49,66,90,.89);color:#fff}.picker.show-picker[_ngcontent-%COMP%]{width:310px}"]}),Cn),On=n("NFeN");function En(t,e){if(1&t){var n=d.Ub();d.Tb(0,"li",4),d.bc("click",(function(){d.sc(n);var t=e.$implicit,i=e.index;return d.ec().selectPicker(t,i)})),d.Tb(1,"mat-icon",5),d.zc(2),d.Sb(),d.Tb(3,"span"),d.zc(4),d.Sb(),d.Sb()}if(2&t){var i=e.$implicit,r=e.index,o=d.ec();d.Fb("selected",r===o.selectedItemIndex&&o.showPicker),d.Bb(2),d.Ac(i.icon),d.Bb(2),d.Ac(i.label)}}for(var wn,kn,Tn,_n=((wn=function(){function t(){_classCallCheck(this,t),this.items=g,this.showPicker=!1,this.selectedPicker=null}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"selectPicker",value:function(t,e){this.showPicker=!0,this.selectedItemIndex!==e&&(this.selectedItemIndex=e,this.selectedPicker=t)}}]),t}()).\u0275fac=function(t){return new(t||wn)},wn.\u0275cmp=d.Ib({type:wn,selectors:[["app-pickers"]],decls:5,vars:3,consts:[[1,"pickers-container","position-relative"],[1,"pickers"],[3,"selected","click",4,"ngFor","ngForOf"],[3,"picker","showPicker","showPickerChange"],[3,"click"],["aria-hidden","false","aria-label","item.label"]],template:function(t,e){1&t&&(d.Tb(0,"div",0),d.Tb(1,"div",1),d.Tb(2,"ul"),d.yc(3,En,5,4,"li",2),d.Sb(),d.Sb(),d.Tb(4,"app-picker",3),d.bc("showPickerChange",(function(t){return e.showPicker=t})),d.Sb(),d.Sb()),2&t&&(d.Bb(3),d.jc("ngForOf",e.items),d.Bb(1),d.jc("picker",e.selectedPicker)("showPicker",e.showPicker))},directives:[h.j,Sn,On.a],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.pickers-container[_ngcontent-%COMP%]{display:flex}.picker-close[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-10px}.pickers[_ngcontent-%COMP%]{position:relative;top:0;color:#fff;font-size:.625rem;width:74px;height:calc(100vh - 60px);background-color:#31425a;box-shadow:2px 0 0 #a9a9a9;overflow-y:auto}.pickers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0}.pickers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:center;padding:10px;cursor:pointer;display:flex;flex-direction:column;align-items:center;transition:background-color .25s ease-in-out}.pickers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:25px;width:25px}.pickers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:2px}.pickers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:#3072b9;border-radius:3px}.pickers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#eaeaea}"]}),wn),Pn=n("pLZG"),In=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"setInitialWidthAndHeight",value:function(e,n){t.getImageRatio(e.width,e.height,n.dimention.width,n.dimention.height,n)}},{key:"getImageRatio",value:function(t,e,n,i,r){for(;n>t||i>e;)n/=2,i/=2;r.dimention.width=n,r.dimention.height=i}}]),t}(),Mn=((kn=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"getTransformValue",value:function(t,e){switch(e){case"rotate":var n=this.matchReg(t,this.TRANSFORM_ROTATE);return n&&parseFloat(n);case"translate":return this.getTranslateValue(t)}}},{key:"getTranslateValue",value:function(t){var e=this.matchReg(t,this.TRANSFORM_TRANSLATE);return e?{x:parseFloat(e.split(",")[0]),y:parseFloat(e.split(",")[1])}:{x:0,y:0}}},{key:"matchReg",value:function(t,e){var n=t&&t.match(e);return n&&n[0]}},{key:"updateTransformValue",value:function(t,e,n){if(t[R.TRANSFORM]&&t[R.TRANSFORM]!==D.NONE){var i=n.split("(")[0];t[R.TRANSFORM]=t[R.TRANSFORM].includes(i)?t[R.TRANSFORM].replace(new RegExp(i+"(.*)"),n):t[R.TRANSFORM]+" ".concat(n)}else t[R.TRANSFORM]=n}},{key:"getMatrixValue",value:function(t,e){var n=this.getComputedStyle(t,R.TRANSFORM);console.log(n);var i=n.split("(")[1];return console.log(i),(i=(i=i.split(")")[0]).split(","))?e===R.TRANSFORM?i.map((function(t){return parseFloat(t)})):6===i.length?this.MATRIX_2D_LOCATION[e].map((function(t){return parseFloat(i[t])})):this.MATRIX_3D_LOCATION[e].map((function(t){return parseFloat(i[t])})):[0,0]}},{key:"getRotationValue",value:function(t){var e=this.getMatrixValue(t,R.TRANSFORM);return Math.round(Math.atan2(e[1],e[0])*(180/Math.PI))}},{key:"toText",value:function(t){return JSON.stringify(t)}},{key:"getComputedStyle",value:function(t,e){return window.getComputedStyle(t)[e]}},{key:"setMatrixValue",value:function(t,e,n){return(6===t.length?this.MATRIX_2D_LOCATION[e]:this.MATRIX_3D_LOCATION[e]).forEach((function(e,i){t[e]=n[i]})),t}},{key:"matrixToCssText",value:function(t){return"matrix(".concat(t.join(),")")}}]),t}()).TRANSFORM_ROTATE=/(?<=rotate\()(.*)(?=\s*deg\))/,kn.TRANSFORM_TRANSLATE=/(?<=translate\()(.*)(?=\s*\))/,kn.matrixPattern=/-?\d+\.?\d*/g,kn.MATRIX_2D_LOCATION=_defineProperty({},R.TRANSLATE,[4,5]),kn.MATRIX_3D_LOCATION=_defineProperty({},R.TRANSLATE,[12,13]),kn),zn=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"buildDom",value:function(t){var e=document.createElement(t.tag);if(this.addElementStyle(e,t.style),this.addInnerText(e,t.innerText),this.addAttributes(e,t.attribute),t.children)for(var n=0;n<t.children.length;n++)e.appendChild(this.buildDom(t.children[n]));return e}},{key:"addDimention",value:function(t,e){e.dimention&&this.applyDimention(t,e,e.dimention)}},{key:"addAttributes",value:function(t,e){e&&Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}},{key:"addElementStyle",value:function(t,e){e&&Object.keys(e).forEach((function(n){t.style[n]=e[n]}))}},{key:"addInnerText",value:function(t,e){e&&(t.innerText=e)}},{key:"print",value:function(t){var e=window.open("","_blank","top=0,left=0,height=100%,width=auto");e.document.open(),e.document.write('\n      <html>\n        <head>\n          <title>Print tab</title>\n          <style>\n          //........Customized style.......\n          </style>\n        </head>\n    <body onload="window.print();window.close()">'.concat(t,"</body>\n      </html>")),e.document.close()}},{key:"setInitialNodeLocation",value:function(t,e,n){t.clientX&&t.clientY&&e.left&&e.top&&(e.item.canvasElement.style[R.TRANSFORM]="translate(".concat(t.clientX-n.left-e.left,"px, ").concat(t.clientY-n.top-e.top,"px)"))}},{key:"setDuplicateNodeLocation",value:function(t){var e=Mn.getTransformValue(t.style[R.TRANSFORM],"translate"),n=e.x,i=e.y;Mn.updateTransformValue(t.style,"translate","translate(".concat(n+20,"px, ").concat(i+20,"px)"))}},{key:"setGroupNodeLocation",value:function(t,e,n){var i=document.getElementsByClassName("moveable-control-box")[0],r=Mn.getMatrixValue(i,R.TRANSLATE),o=i.getBoundingClientRect(),a=n.getBoundingClientRect(),s=1e4,c=1e4,l=-1e4,u=-1e4;t.forEach((function(t,n){var i=t.getBoundingClientRect();s>i.top&&(s=i.top),c>i.left&&(c=i.left),l<i.right&&(l=i.right),u<i.bottom&&(u=i.bottom);var o=Mn.getMatrixValue(t,R.TRANSFORM),a=Mn.getMatrixValue(t,R.TRANSLATE),h=Mn.setMatrixValue(o,R.TRANSLATE,[a[0]-r[0],a[1]-r[1]]);e.children[n].style[R.TRANSFORM]=Mn.matrixToCssText(h)}));var h=o.left-a.left,p=o.top-a.top;e.style[R.WIDTH]=l-c+"px",e.style[R.HEIGHT]=u-s+"px",e.style[R.TRANSFORM]="".concat(R.TRANSLATE,"(").concat(h,"px, ").concat(p,"px)")}},{key:"setUnGroupNodeLocation",value:function(t,e){}},{key:"applyCss",value:function(t,e,n,i){var r=this;Object.keys(n).forEach((function(o){var a=r._getStyleValue(o,n[o]);t.style[o]=a,i&&(e.style[o]=a)}))}},{key:"_getStyleValue",value:function(t,e){return e||0===e?"string"==typeof e&&e.endsWith("px")?e:N.includes(t)?e+"px":e:""}},{key:"applyDimention",value:function(t,e,n,i){var r;this.applyCss(t,e,(_defineProperty(r={},R.WIDTH,n.width),_defineProperty(r,R.HEIGHT,n.height),_defineProperty(r,R.LEFT,n.translateX),_defineProperty(r,R.TOP,n.translateY),r),i),t.style[R.TRANSFORM]=this.dimentionCss(n),i&&(e.dimention=x.cloneDeep(n))}},{key:"dimentionCss",value:function(t){return"".concat(R.ROTATE,"(").concat(t.rotate,"deg) ")+"".concat(R.SCALE_X,"(").concat(t.scaleX,") ")+"".concat(R.SCALE_Y,"(").concat(t.scaleY,") ")}},{key:"setElementId",value:function(t,e){var n=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"getUuid",value:function(){var t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))}}]),t}().getUuid();this.addAttributes(t,{id:n})}},{key:"getClonedStylesAsText",value:function(t){return t.map((function(t){return Mn.toText(x.cloneDeep(t.style))}))}}]),t}(),Rn=(_defineProperty(a={},v.TEXT,["e","w"]),_defineProperty(a,v.PHOTO,["e","w","n","s","sw","se","ne","nw"]),_defineProperty(a,v.GROUP,["sw","se","ne","nw"]),_defineProperty(a,v.MULTIPLE_SELECTION,["sw","se","ne","nw"]),_defineProperty(a,v.LINE,["e","w"]),a),Dn=(_defineProperty(s={},v.TEXT,!1),_defineProperty(s,v.PHOTO,!1),_defineProperty(s,v.GROUP,!0),_defineProperty(s,v.MULTIPLE_SELECTION,!0),_defineProperty(s,v.VECTOR,!0),s),Nn=(_defineProperty(c={},v.TEXT,!0),_defineProperty(c,v.PHOTO,!0),_defineProperty(c,v.GROUP,!1),_defineProperty(c,v.MULTIPLE_SELECTION,!1),_defineProperty(c,v.LINE,!0),_defineProperty(c,v.VECTOR,!0),c),An={elementId:"my-first-element",id:"jfaslj12o4u12oi",currentZindex:1,zIndex:(l={},_defineProperty(l,v.PHOTO,500),_defineProperty(l,v.ANY,5e3),l),canvasElement:{type:v.BACKGROUND,tag:"div",locked:!1,innerText:"",resizable:!1,increaseZIndex:!1,ratio:{x:"0",y:"0"},dimention:{width:500,height:500,rotate:0,translateX:0,translateY:0,scaleX:1,scaleY:1},style:{width:"500px",height:"500px",position:"relative",background:"white","-webkit-print-color-adjust":"exact",overflow:"hidden"},attribute:{class:"canvas-template"},children:[]}},Ln=function(t){return t[t.ADD=0]="ADD",t[t.DELETE=1]="DELETE",t[t.STYLE=2]="STYLE",t}({}),Bn=((Tn=function(){function t(){_classCallCheck(this,t),this.list=[],this.index=-1,this.length=0}return _createClass(t,[{key:"init",value:function(t,e){this.parentCanvasElement=e,this.parentNode=t}},{key:"add",value:function(t){this.index++,this.list[this.index]=t,this.length=this.index+1}},{key:"undo",value:function(){this.index>=0&&(this.applyChange(this.list[this.index],!0),this.index--)}},{key:"redo",value:function(){this.index<this.length-1&&(this.index++,this.applyChange(this.list[this.index],!1))}},{key:"applyChange",value:function(t,e){var n=t.type;switch(e&&[Ln.ADD,Ln.DELETE].includes(n)&&(n=n===Ln.ADD?Ln.DELETE:Ln.ADD),n){case Ln.ADD:this.addItem(t);break;case Ln.DELETE:this.removeItem(t);break;case Ln.STYLE:this.applyStyles(t,e)}}},{key:"applyStyles",value:function(t,e){var n=e?t.oldStyle:t.newStyle;t.canvasElements.forEach((function(e,i){var r=JSON.parse(n[i]);Object.keys(r).forEach((function(n){t.nodes[i].style[n]=r[n],e.style[n]=r[n]}))}))}},{key:"addItem",value:function(t){var e=this;t.canvasElements.forEach((function(n,i){e.parentCanvasElement.children.push(n),e.parentNode.appendChild(t.nodes[i])}))}},{key:"removeItem",value:function(t){t.nodes.forEach((function(t){return t.remove()})),this.parentCanvasElement.children=this.parentCanvasElement.children.filter((function(e){return!t.canvasElements.includes(e)}))}},{key:"getOriginalItemStyle",value:function(t){return t.style}}]),t}()).\u0275fac=function(t){return new(t||Tn)},Tn.\u0275prov=d.Kb({token:Tn,factory:Tn.\u0275fac,providedIn:"root"}),Tn),jn=function(t){return t[t.FONT_FAMILY=0]="FONT_FAMILY",t[t.COLOR=1]="COLOR",t[t.BACKGROUND_COLOR=2]="BACKGROUND_COLOR",t[t.FONT_SIZE=3]="FONT_SIZE",t[t.OPACITY=4]="OPACITY",t[t.LETTER_SPACING=5]="LETTER_SPACING",t[t.FONT_WEIGHT_BOLD=6]="FONT_WEIGHT_BOLD",t[t.FONT_STYLE_ITALIC=7]="FONT_STYLE_ITALIC",t[t.DELETE=8]="DELETE",t[t.RENAME_ME=9]="RENAME_ME",t[t.TEXT_ALIGNMENT=10]="TEXT_ALIGNMENT",t[t.LOCK=11]="LOCK",t[t.UNDO_REDO=12]="UNDO_REDO",t[t.DUPLICATE=13]="DUPLICATE",t[t.GROUP_UNGROUP=14]="GROUP_UNGROUP",t[t.FLIP_HORIZONTAL=15]="FLIP_HORIZONTAL",t[t.FLIP_VERTICAL=16]="FLIP_VERTICAL",t}({}),Gn=(_defineProperty(u={},v.BACKGROUND,[jn.BACKGROUND_COLOR]),_defineProperty(u,v.PHOTO,[jn.OPACITY,jn.DELETE,jn.LOCK,jn.DUPLICATE,jn.FLIP_HORIZONTAL,jn.FLIP_VERTICAL]),_defineProperty(u,v.VECTOR,[jn.BACKGROUND_COLOR,jn.OPACITY,jn.DELETE,jn.LOCK,jn.DUPLICATE,jn.FLIP_HORIZONTAL,jn.FLIP_VERTICAL]),_defineProperty(u,v.TEXT,[jn.BACKGROUND_COLOR,jn.FONT_FAMILY,jn.COLOR,jn.FONT_SIZE,jn.OPACITY,jn.LETTER_SPACING,jn.FONT_WEIGHT_BOLD,jn.FONT_STYLE_ITALIC,jn.DELETE,jn.TEXT_ALIGNMENT,jn.LOCK,jn.DUPLICATE]),_defineProperty(u,v.MULTIPLE_SELECTION,[jn.BACKGROUND_COLOR,jn.FONT_FAMILY,jn.FONT_SIZE,jn.COLOR,jn.OPACITY,jn.DELETE,jn.LOCK,jn.DUPLICATE]),_defineProperty(u,v.GROUP,[jn.BACKGROUND_COLOR,jn.COLOR,jn.OPACITY,jn.DELETE,jn.DUPLICATE,jn.LOCK,jn.GROUP_UNGROUP]),_defineProperty(u,v.LINE,[jn.BACKGROUND_COLOR,jn.COLOR,jn.OPACITY,jn.DELETE,jn.DUPLICATE,jn.LOCK,jn.GROUP_UNGROUP]),u),Hn=[],Fn=5;Fn<150;Fn++)Hn.push({label:Fn+"",value:Fn+"px"});var Xn,Un=n("Qu3c"),Wn=((Xn=function(){function t(){_classCallCheck(this,t),this.subject=new Pt.a}return _createClass(t,[{key:"send",value:function(){this.subject.next()}},{key:"get",value:function(){return this.subject.asObservable()}}]),t}()).\u0275fac=function(t){return new(t||Xn)},Xn.\u0275prov=d.Kb({token:Xn,factory:Xn.\u0275fac,providedIn:"root"}),Xn),Yn=n("vxfF");function qn(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"li",11),d.bc("click",(function(){d.sc(n);var t=e.$implicit;return d.ec(2).onSelect(t)})),d.zc(2),d.Sb(),d.Qb()}if(2&t){var i=e.$implicit,r=d.ec(2);d.Bb(1),d.xc("font-family",i.value),d.Fb("selected",i.value===r.selectedFont),d.Bb(1),d.Bc(" ",i.label," ")}}function Vn(t,e){if(1&t){var n=d.Ub();d.Tb(0,"div",3),d.bc("appClickOutside",(function(){return d.sc(n),d.ec().toggleOptions()})),d.Tb(1,"div"),d.Tb(2,"div",4),d.Tb(3,"app-search-box",5),d.bc("searchValueChange",(function(t){return d.sc(n),d.ec().filterResult(t)})),d.Sb(),d.Sb(),d.Tb(4,"div",6),d.Tb(5,"cdk-virtual-scroll-viewport",7),d.Tb(6,"ul"),d.Tb(7,"li",8),d.Tb(8,"button",9),d.zc(9,"+ Add your font"),d.Sb(),d.Sb(),d.yc(10,qn,3,5,"ng-container",10),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb()}if(2&t){var i=d.ec(),r=d.oc(1);d.jc("srcElement",r),d.Bb(3),d.jc("minQueryLength",0),d.Bb(7),d.jc("cdkVirtualForOf",i.filteredOptions)}}var Qn,Kn=((Qn=function(){function t(e,n){_classCallCheck(this,t),this.fontService=e,this.resizeEventer=n,this.fontHover=new d.n,this.fontSelect=new d.n,this.revertFontSelect=new d.n,this.isVisible=!1,this.options=[],this.filteredOptions=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.options=this.fontService.getFonts()}},{key:"onSelect",value:function(t){this.fontSelect.emit(t),this.resizeEventer.send()}},{key:"onHover",value:function(t){this.fontHover.emit(t)}},{key:"onCloseWithoutSelect",value:function(){this.revertFontSelect.emit()}},{key:"toggleOptions",value:function(){this.isVisible=!this.isVisible,this.isVisible&&(this.filteredOptions=this.options)}},{key:"filterResult",value:function(t){this.filteredOptions=this.options.filter((function(e){return e.value.toLowerCase().includes(t)}))}}]),t}()).\u0275fac=function(t){return new(t||Qn)(d.Ob(pt.a),d.Ob(Wn))},Qn.\u0275cmp=d.Ib({type:Qn,selectors:[["app-font-family"]],inputs:{selectedFont:"selectedFont",disabled:"disabled"},outputs:{fontHover:"fontHover",fontSelect:"fontSelect",revertFontSelect:"revertFontSelect"},decls:5,vars:3,consts:[["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-light","dropdown-toggle","btn-sm","font-family-button",3,"disabled","click"],["buttonSource",""],["class","left-raiser-container",3,"srcElement","appClickOutside",4,"ngIf"],[1,"left-raiser-container",3,"srcElement","appClickOutside"],[1,"mb-4","search-box-container"],[3,"minQueryLength","searchValueChange"],[1,"font-container"],["itemSize","38"],[1,"add-your-font"],["type","button",1,"btn","btn-primary","btn-sm"],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"click"]],template:function(t,e){1&t&&(d.Tb(0,"button",0,1),d.bc("click",(function(){return e.toggleOptions()})),d.Tb(2,"span"),d.zc(3),d.Sb(),d.Sb(),d.yc(4,Vn,11,3,"div",2)),2&t&&(d.jc("disabled",e.disabled),d.Bb(3),d.Ac(e.selectedFont),d.Bb(1),d.jc("ngIf",e.isVisible))},directives:[h.k,_t,Z,Yn.d,Yn.a,Yn.c],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.font-family-button[_ngcontent-%COMP%]{display:flex;align-items:center}.font-family-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:80px;text-align:left;overflow:hidden;text-overflow:ellipsis}.search-box-container[_ngcontent-%COMP%]{width:100%;padding:0 20px}.font-container[_ngcontent-%COMP%]{font-size:1rem}.font-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0 20px}.font-container[_ngcontent-%COMP%]   .cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:calc(100vh - 170px)}.font-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:7px}.font-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#add8e6;border-radius:3px}.font-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover:not(.selected){background-color:#f0f0f0}.add-your-font[_ngcontent-%COMP%]{padding:0 0 7px!important}.add-your-font[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.add-your-font[_ngcontent-%COMP%]:hover{background-color:inherit!important}"]}),Qn);function Jn(t,e){if(1&t){var n=d.Ub();d.Tb(0,"li",9),d.bc("click",(function(){d.sc(n);var t=e.$implicit;return d.ec(2).onValueChange(t.value)})),d.zc(1),d.Sb()}if(2&t){var i=e.$implicit;d.Bb(1),d.Bc(" ",i.label," ")}}function $n(t,e){if(1&t){var n=d.Ub();d.Tb(0,"div",7),d.bc("appClickOutside",(function(){return d.sc(n),d.ec().toggleOptions()})),d.Tb(1,"ul"),d.yc(2,Jn,2,1,"li",8),d.Sb(),d.Sb()}if(2&t){var i=d.ec(),r=d.oc(4);d.jc("srcElement",r),d.Bb(2),d.jc("ngForOf",i.AVAILABLE_FONT_SIZE)}}var Zn,ti=((Zn=function(){function t(e){_classCallCheck(this,t),this.resizeEventer=e,this.valueChange=new d.n,this.AVAILABLE_FONT_SIZE=[],this.showOptions=!1;for(var n=5;n<150;n++)this.AVAILABLE_FONT_SIZE.push({label:n,value:n})}return _createClass(t,[{key:"ngOnChanges",value:function(t){this.value=parseInt(this.selectedValue,10)}},{key:"onInputChange",value:function(){this.onValueChange(this.value)}},{key:"onValueChange",value:function(t){this.valueChange.emit(t),this.resizeEventer.send()}},{key:"toggleOptions",value:function(){this.showOptions=!this.showOptions}}]),t}()).\u0275fac=function(t){return new(t||Zn)(d.Ob(Wn))},Zn.\u0275cmp=d.Ib({type:Zn,selectors:[["app-font-size"]],inputs:{selectedValue:"selectedValue",disabled:"disabled"},outputs:{valueChange:"valueChange"},features:[d.zb()],decls:7,vars:4,consts:[[1,"input-group","input-group-sm"],["type","number",1,"form-control","font-size-input",3,"ngModel","disabled","ngModelChange","change"],["fontSizeInput",""],[1,"input-group-append"],["fontSizeButton",""],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-light","dropdown-toggle",3,"disabled","click"],["class","font-size-dropdown",3,"srcElement","appClickOutside",4,"ngIf"],[1,"font-size-dropdown",3,"srcElement","appClickOutside"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"]],template:function(t,e){1&t&&(d.Tb(0,"div",0),d.Tb(1,"input",1,2),d.bc("ngModelChange",(function(t){return e.value=t}))("change",(function(){return e.onInputChange()})),d.Sb(),d.Tb(3,"div",3,4),d.Tb(5,"button",5),d.bc("click",(function(){return e.toggleOptions()})),d.Sb(),d.Sb(),d.yc(6,$n,3,2,"div",6),d.Sb()),2&t&&(d.Bb(1),d.jc("ngModel",e.value)("disabled",e.disabled),d.Bb(4),d.jc("disabled",e.disabled),d.Bb(1),d.jc("ngIf",e.showOptions))},directives:[J.f,J.a,J.d,J.e,h.k,_t,h.j],styles:[".font-size-input[_ngcontent-%COMP%]{width:60px}.font-size-dropdown[_ngcontent-%COMP%]{position:absolute;left:2px;top:100%;width:82px;height:200px;overflow-y:auto;background-color:#fff;box-shadow:0 0 2px #000;cursor:pointer}.font-size-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}"]}),Zn);function ei(t,e){if(1&t){var n=d.Ub();d.Tb(0,"button",7),d.bc("click",(function(){d.sc(n);var t=e.$implicit,i=d.ec(2);return i.sendEvent(i.CSS_PROPERTIES.TEXT_ALIGN,t.cssValue)})),d.Tb(1,"i",2),d.zc(2),d.Sb(),d.Sb()}if(2&t){var i=e.$implicit,r=d.ec(2);d.Fb("active",r.initialStyles[r.CSS_PROPERTIES.TEXT_ALIGN]===i.cssValue),d.Bb(2),d.Ac(i.icon)}}function ni(t,e){if(1&t){var n=d.Ub();d.Tb(0,"div",4),d.bc("appClickOutside",(function(){return d.sc(n),d.ec().toggle()})),d.Tb(1,"div",5),d.yc(2,ei,3,3,"button",6),d.Sb(),d.Sb()}if(2&t){var i=d.ec(),r=d.oc(1);d.jc("srcElement",r),d.Bb(2),d.jc("ngForOf",i.availableOtions)}}var ii,ri=((ii=function(){function t(){_classCallCheck(this,t),this.initialStyles={},this.styleChange=new d.n,this.isVisible=!1,this.CSS_PROPERTIES=R,this.availableOtions=[{icon:"format_align_left",cssValue:"left"},{icon:"format_align_center",cssValue:"center"},{icon:"format_align_justify",cssValue:"justify"},{icon:"format_align_right",cssValue:"right"}]}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"toggle",value:function(){this.isVisible=!this.isVisible}},{key:"sendEvent",value:function(t,e){this.styleChange.emit(_defineProperty({},t,e))}}]),t}()).\u0275fac=function(t){return new(t||ii)},ii.\u0275cmp=d.Ib({type:ii,selectors:[["app-text-alignment"]],inputs:{disabled:"disabled",initialStyles:"initialStyles"},outputs:{styleChange:"styleChange"},decls:6,vars:2,consts:[["myButton",""],["mat-icon-button","","matTooltip","Unlock Element","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],[1,"material-icons"],["class","toolbar-item-drop",3,"srcElement","appClickOutside",4,"ngIf"],[1,"toolbar-item-drop",3,"srcElement","appClickOutside"],["role","group","aria-label","Basic example",1,"btn-group","btn-group-lg","w-100"],["type","button","class","btn btn-light",3,"active","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-light",3,"click"]],template:function(t,e){1&t&&(d.Tb(0,"section",null,0),d.Tb(2,"button",1),d.bc("click",(function(){return e.toggle()})),d.Tb(3,"i",2),d.zc(4,"subject"),d.Sb(),d.Sb(),d.Sb(),d.yc(5,ni,3,2,"div",3)),2&t&&(d.Bb(2),d.jc("disabled",e.disabled),d.Bb(3),d.jc("ngIf",e.isVisible))},directives:[$.a,Un.a,h.k,_t,h.j],styles:[""]}),ii),oi=n("5RNC");function ai(t,e){if(1&t){var n=d.Ub();d.Tb(0,"section",4),d.bc("appClickOutside",(function(){return d.sc(n),d.ec().isOpacitySelectorOpen=!1})),d.Tb(1,"span"),d.zc(2,"Transparency"),d.Sb(),d.Tb(3,"mat-slider",5),d.bc("ngModelChange",(function(t){return d.sc(n),d.ec().selectedValue=t}))("change",(function(t){return d.sc(n),d.ec().onSliderStop(t)}))("input",(function(t){return d.sc(n),d.ec().onValueChange(t)})),d.Sb(),d.Sb()}if(2&t){var i=d.ec(),r=d.oc(1);d.jc("srcElement",r),d.Bb(3),d.jc("ngModel",i.selectedValue)("thumbLabel",!0)("step",1)}}var si,ci,li=((ci=function(){function t(){_classCallCheck(this,t),this.selectedOpacity=1,this.slideChange=new d.n,this.slideStop=new d.n,this.closeSlider=new d.n,this.selectedValue=100,this.isOpacitySelectorOpen=!1}return _createClass(t,[{key:"ngOnChanges",value:function(t){this.selectedValue=this.selectedOpacity?Math.floor(100*this.selectedOpacity):100}},{key:"onValueChange",value:function(t){t&&this.slideChange.emit(t.value/100)}},{key:"onSliderStop",value:function(t){t&&this.slideStop.emit(t.value/100)}}]),t}()).\u0275fac=function(t){return new(t||ci)},ci.\u0275cmp=d.Ib({type:ci,selectors:[["app-slider"]],inputs:{selectedOpacity:"selectedOpacity",disabled:"disabled"},outputs:{slideChange:"slideChange",slideStop:"slideStop",closeSlider:"closeSlider"},features:[d.zb()],decls:6,vars:2,consts:[["opacityButton",""],["mat-icon-button","","matTooltip","Change Opacity","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],[1,"material-icons"],["class","my-slider toolbar-item-drop py-0",3,"srcElement","appClickOutside",4,"ngIf"],[1,"my-slider","toolbar-item-drop","py-0",3,"srcElement","appClickOutside"],[1,"mat-primary",3,"ngModel","thumbLabel","step","ngModelChange","change","input"]],template:function(t,e){1&t&&(d.Tb(0,"section",null,0),d.Tb(2,"button",1),d.bc("click",(function(){return e.isOpacitySelectorOpen=!e.isOpacitySelectorOpen})),d.Tb(3,"i",2),d.zc(4,"opacity"),d.Sb(),d.Sb(),d.Sb(),d.yc(5,ai,4,4,"section",3)),2&t&&(d.Bb(2),d.jc("disabled",e.disabled),d.Bb(3),d.jc("ngIf",e.isOpacitySelectorOpen))},directives:[$.a,Un.a,h.k,_t,oi.a,J.d,J.e],styles:[".mat-icon-button[_ngcontent-%COMP%], .toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.my-slider[_ngcontent-%COMP%]{display:flex;align-items:center}.my-slider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:20px}"]}),ci),ui=((si=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"transform",value:function(t){return t&&t.includes("px")?t.split("px")[0]:t}}]),t}()).\u0275fac=function(t){return new(t||si)},si.\u0275pipe=d.Nb({name:"removePx",type:si,pure:!0}),si);function hi(t,e){if(1&t){var n=d.Ub();d.Tb(0,"section",4),d.bc("appClickOutside",(function(){return d.sc(n),d.ec().toggle()})),d.Tb(1,"div"),d.Tb(2,"p"),d.zc(3,"Letter Spacing"),d.Sb(),d.Tb(4,"div",5),d.Tb(5,"mat-slider",6),d.bc("input",(function(t){return d.sc(n),d.ec().onLetterSpacing(t)}))("change",(function(t){return d.sc(n),d.ec().onLetterSpacing(t,!0)})),d.fc(6,"removePx"),d.Sb(),d.Tb(7,"span"),d.zc(8),d.fc(9,"removePx"),d.Sb(),d.Sb(),d.Sb(),d.Tb(10,"div"),d.Tb(11,"p"),d.zc(12,"Line Height"),d.Sb(),d.Tb(13,"div",5),d.Tb(14,"mat-slider",6),d.bc("input",(function(t){return d.sc(n),d.ec().onLineHeight(t)}))("change",(function(t){return d.sc(n),d.ec().onLineHeight(t,!0)})),d.Sb(),d.Tb(15,"span"),d.zc(16),d.Sb(),d.Sb(),d.Sb(),d.Sb()}if(2&t){var i=d.ec(),r=d.oc(1);d.jc("srcElement",r),d.Bb(5),d.jc("thumbLabel",!0)("step",1)("min",-10)("max",50)("value",d.gc(6,13,i.initialStyles[i.CSS_PROPERTIES.LETTER_SPACING])||0),d.Bb(3),d.Ac(d.gc(9,15,i.initialStyles[i.CSS_PROPERTIES.LETTER_SPACING])||0),d.Bb(6),d.jc("thumbLabel",!0)("step",1)("min",-10)("max",50)("value",i.getLineHeight()),d.Bb(2),d.Ac(i.getLineHeight())}}var pi,di=((pi=function(){function t(e){_classCallCheck(this,t),this.resizeEventer=e,this.initialStyles={},this.styleChange=new d.n,this.styleChangeEnd=new d.n,this.CSS_PROPERTIES=R,this.isVisible=!1,this.LINE_HEIGHT=1.5}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"toggle",value:function(){this.isVisible=!this.isVisible}},{key:"onLetterSpacing",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.sendEvent(R.LETTER_SPACING,t.value,e)}},{key:"onLineHeight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.sendEvent(R.LINE_HEIGHT,this.LINE_HEIGHT+t.value/10,e)}},{key:"sendEvent",value:function(t,e,n){n?this.styleChangeEnd.emit(_defineProperty({},t,e)):this.styleChange.emit(_defineProperty({},t,e)),this.resizeEventer.send()}},{key:"getLineHeight",value:function(){return this.initialStyles&&this.initialStyles[R.LINE_HEIGHT]?Math.floor(10*(this.initialStyles[R.LINE_HEIGHT]-this.LINE_HEIGHT)):0}}]),t}()).\u0275fac=function(t){return new(t||pi)(d.Ob(Wn))},pi.\u0275cmp=d.Ib({type:pi,selectors:[["app-letter-spacing"]],inputs:{disabled:"disabled",initialStyles:"initialStyles"},outputs:{styleChange:"styleChange",styleChangeEnd:"styleChangeEnd"},decls:6,vars:2,consts:[["spacingButton",""],["mat-icon-button","","matTooltip","Letter Spacing","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],[1,"material-icons"],["class","toolbar-item-drop letter-spacing",3,"srcElement","appClickOutside",4,"ngIf"],[1,"toolbar-item-drop","letter-spacing",3,"srcElement","appClickOutside"],[1,"letter-spacing-content"],[1,"mat-primary",3,"thumbLabel","step","min","max","value","input","change"]],template:function(t,e){1&t&&(d.Tb(0,"section",null,0),d.Tb(2,"button",1),d.bc("click",(function(){return e.toggle()})),d.Tb(3,"i",2),d.zc(4,"text_rotation_none"),d.Sb(),d.Sb(),d.Sb(),d.yc(5,hi,17,17,"section",3)),2&t&&(d.Bb(2),d.jc("disabled",e.disabled),d.Bb(3),d.jc("ngIf",e.isVisible))},directives:[$.a,Un.a,h.k,_t,oi.a],pipes:[ui],styles:[".letter-spacing-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;cursor:pointer}.letter-spacing-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:50px;text-align:right}"]}),pi);function fi(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"div",5),d.Tb(2,"app-font-family",9),d.bc("fontSelect",(function(t){return d.sc(n),d.ec().onFontFamilySelect(t)})),d.Sb(),d.Sb(),d.Qb()}if(2&t){var i=d.ec();d.Bb(2),d.jc("selectedFont",i.styles[i.CSS_PROPS.FONT_FAMILY])("disabled",i.isLocked)}}function gi(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"div",5),d.Tb(2,"app-font-size",10),d.bc("valueChange",(function(t){return d.sc(n),d.ec().onFontSizeSelect(t)})),d.Sb(),d.Sb(),d.Qb()}if(2&t){var i=d.ec();d.Bb(2),d.jc("disabled",i.isLocked)("selectedValue",i.styles[i.CSS_PROPS.FONT_SIZE])}}function bi(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"div",5),d.Tb(2,"button",11),d.bc("click",(function(){return d.sc(n),d.ec().onBoldClick()})),d.Tb(3,"i",7),d.zc(4,"format_bold"),d.Sb(),d.Sb(),d.Sb(),d.Qb()}if(2&t){var i=d.ec();d.Bb(2),d.Fb("icon-pressed",i.styles[i.CSS_PROPS.FONT_WEIGHT]===i.CSS_PROP_VALUES.FONT_WEIGHT_BOLD),d.jc("disabled",i.isLocked)}}function vi(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"div",5),d.Tb(2,"button",12),d.bc("click",(function(){return d.sc(n),d.ec().onItalicClick()})),d.Tb(3,"i",7),d.zc(4,"format_italic"),d.Sb(),d.Sb(),d.Sb(),d.Qb()}if(2&t){var i=d.ec();d.Bb(2),d.Fb("icon-pressed",i.styles[i.CSS_PROPS.FONT_ITALIC]===i.CSS_PROP_VALUES.FONT_ITALIC),d.jc("disabled",i.isLocked)}}function mi(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"div",5),d.Tb(2,"app-color-picker",13,14),d.bc("colorSelect",(function(t){return d.sc(n),d.ec().onBGColorSelect(t)})),d.Tb(4,"button",15),d.bc("click",(function(){return d.sc(n),d.oc(3).open()})),d.Tb(5,"i",7),d.zc(6,"format_paint"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Qb()}if(2&t){var i=d.ec();d.Bb(4),d.Fb("disabled",i.isLocked)}}function yi(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"div",5),d.Tb(2,"app-color-picker",16,14),d.bc("colorSelect",(function(t){return d.sc(n),d.ec().onColorSelect(t)})),d.Tb(4,"button",17),d.bc("click",(function(){return d.sc(n),d.oc(3).open()})),d.Tb(5,"i",7),d.zc(6,"color_lens"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Qb()}if(2&t){var i=d.ec();d.Bb(4),d.Fb("disabled",i.isLocked)}}function xi(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"div",5),d.Tb(2,"app-text-alignment",18),d.bc("styleChange",(function(t){return d.sc(n),d.ec().updateCss(t)})),d.Sb(),d.Sb(),d.Qb()}if(2&t){var i=d.ec();d.Bb(2),d.jc("disabled",i.isLocked)("initialStyles",i.styles)}}function Ci(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"div",5),d.Tb(2,"app-slider",19),d.bc("slideChange",(function(t){return d.sc(n),d.ec().updateOpacity(t,!1)}))("slideStop",(function(t){return d.sc(n),d.ec().updateOpacity(t,!0)})),d.Sb(),d.Sb(),d.Qb()}if(2&t){var i=d.ec();d.Bb(2),d.jc("disabled",i.isLocked)("selectedOpacity",i.styles[i.CSS_PROPS.OPACITY])}}function Si(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"div",5),d.Tb(2,"button",20),d.bc("click",(function(){return d.sc(n),d.ec().onFlip(-1,1)})),d.Tb(3,"i",21),d.zc(4,"unfold_less"),d.Sb(),d.Sb(),d.Sb(),d.Qb()}if(2&t){var i=d.ec();d.Bb(2),d.jc("disabled",i.isLocked)}}function Oi(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"div",5),d.Tb(2,"button",22),d.bc("click",(function(){return d.sc(n),d.ec().onFlip(1,-1)})),d.Tb(3,"i",7),d.zc(4,"unfold_less"),d.Sb(),d.Sb(),d.Sb(),d.Qb()}if(2&t){var i=d.ec();d.Bb(2),d.jc("disabled",i.isLocked)}}function Ei(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"div",5),d.Tb(2,"app-letter-spacing",23),d.bc("styleChange",(function(t){return d.sc(n),d.ec().updateCss(t,!1)}))("styleChangeEnd",(function(t){return d.sc(n),d.ec().updateCss(t,!0)})),d.Sb(),d.Sb(),d.Qb()}if(2&t){var i=d.ec();d.Bb(2),d.jc("disabled",i.isLocked)("initialStyles",i.styles)}}function wi(t,e){if(1&t){var n=d.Ub();d.Tb(0,"div",5),d.Tb(1,"button",24),d.bc("click",(function(){return d.sc(n),d.ec().groupItem()})),d.Tb(2,"i",7),d.zc(3,"group_work"),d.Sb(),d.Sb(),d.Sb()}if(2&t){var i=d.ec();d.Bb(1),d.Fb("icon-pressed",i.isGroupedItems),d.jc("matTooltip",i.isGroupedItems?"Ungroup":"Group")}}function ki(t,e){1&t&&(d.Tb(0,"i",7),d.zc(1,"lock"),d.Sb())}function Ti(t,e){1&t&&(d.Tb(0,"i",7),d.zc(1,"lock_open"),d.Sb())}function _i(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"div",5),d.Tb(2,"button",24),d.bc("click",(function(){return d.sc(n),d.ec().lockItem()})),d.yc(3,ki,2,0,"i",25),d.yc(4,Ti,2,0,"i",25),d.Sb(),d.Sb(),d.Qb()}if(2&t){var i=d.ec();d.Bb(2),d.Fb("icon-pressed",i.isLocked),d.jc("matTooltip",i.isLocked?"Unlock Eelement":"Lock Element"),d.Bb(1),d.jc("ngIf",i.isLocked),d.Bb(1),d.jc("ngIf",!i.isLocked)}}function Pi(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"div",5),d.Tb(2,"button",26),d.bc("click",(function(){return d.sc(n),d.ec().duplicate()})),d.Tb(3,"i",7),d.zc(4,"file_copy"),d.Sb(),d.Sb(),d.Sb(),d.Qb()}}function Ii(t,e){if(1&t){var n=d.Ub();d.Rb(0),d.Tb(1,"div",5),d.Tb(2,"button",27),d.bc("click",(function(){return d.sc(n),d.ec().removeItem()})),d.Tb(3,"i",7),d.zc(4,"delete"),d.Sb(),d.Sb(),d.Sb(),d.Qb()}if(2&t){var i=d.ec();d.Bb(2),d.jc("disabled",i.isLocked)}}var Mi,zi=((Mi=function(){function t(e,n){_classCallCheck(this,t),this.eventerService=e,this.undoService=n,this.options=[],this.selectedNodes=[],this.selectedCanvasElements=[],this.removeSelectedItem=new d.n,this.duplicateSelectedItem=new d.n,this.groupSelectedItem=new d.n,this.unGroupSelectedItem=new d.n,this.clearSelectedElements=new d.n,this.filterConfig=[],this.FILTER_TYPES=b,this.AVA_TOOLBAR_OPTIONS=jn,this.avaToolbarOptions={},this.CSS_PROPS=R,this.CSS_PROP_VALUES=D,this.initialOpacity=0,this.styles={},this.isGroupUngroupVisible=!1}return _createClass(t,[{key:"ngOnChanges",value:function(t){t.selectedCanvasElements&&(this.selectedCanvasElements&&this.selectedCanvasElements.length?this.init():(this.updateToolbarConfig(),this.isGroupUngroupVisible=!1))}},{key:"ngOnInit",value:function(){}},{key:"init",value:function(){this.selectedCanvasElements.length>1?this.updateToolbarConfig(v.MULTIPLE_SELECTION):(this.fistCanvasElement=this.selectedCanvasElements[0],this.firstNode=this.selectedNodes[0],this.styles=this.getOriginalItemStyle(),this.updateToolbarConfig()),this.updateLock(),this.updateGroupItemFlag()}},{key:"updateLock",value:function(){this.isLocked=!this.selectedCanvasElements.some((function(t){return!t.locked}))}},{key:"updateGroupItemFlag",value:function(){this.isGroupUngroupVisible=this.fistCanvasElement.type===v.GROUP||this.selectedCanvasElements.length>1,this.isGroupedItems=this.fistCanvasElement.type===v.GROUP&&1===this.selectedCanvasElements.length}},{key:"getOriginalItemStyle",value:function(){return this.fistCanvasElement.style}},{key:"updateToolbarConfig",value:function(t){var e=this.selectedCanvasElements?this.selectedCanvasElements.map((function(t){return t.type})):[];t&&e.push(t);for(var n=Gn[e[0]]||[],i=1;i<e.length;i++)n=(Gn[e[i]]||[]).filter((function(t){return n.includes(t)}));var r={};n.forEach((function(t){r[t]=!0})),this.avaToolbarOptions=r}},{key:"onFontFamilySelect",value:function(t){this.updateCss(_defineProperty({},R.FONT_FAMILY,t.value))}},{key:"onFontSizeSelect",value:function(t){this.updateCss(_defineProperty({},R.FONT_SIZE,t))}},{key:"onCloseWithoutSelect",value:function(t){var e=this.getOriginalItemStyle();this.applyNodeChanges(t,e[t.cssField]),this.changeSelectedValue(t,e[t.cssField])}},{key:"changeSelectedValue",value:function(t,e){t.selectedValue=t.id===jn.FONT_SIZE?parseInt(e,10):e}},{key:"applySelectedItemChanes",value:function(t,e){this.getOriginalItemStyle()[t.cssField]=e}},{key:"applyNodeChanges",value:function(t,e){this.selectedNodes[0].style[t.cssField]=e}},{key:"onBoldClick",value:function(){this.updateCss(_defineProperty({},R.FONT_WEIGHT,this.styles[R.FONT_WEIGHT]===D.FONT_WEIGHT_BOLD?D.FONT_WEIGHT_NORMAL:D.FONT_WEIGHT_BOLD))}},{key:"updateCss",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=zn.getClonedStylesAsText(this.selectedCanvasElements);this.selectedNodes.forEach((function(i,r){e.selectedCanvasElements[r].locked||zn.applyCss(i,e.selectedCanvasElements[r],t,n)})),n&&this.undoService.add({canvasElements:this.selectedCanvasElements,nodes:this.selectedNodes,type:Ln.STYLE,oldStyle:i,newStyle:zn.getClonedStylesAsText(this.selectedCanvasElements)})}},{key:"onFlip",value:function(t,e){var n=Mn.getComputedStyle(this.firstNode,R.TRANSFORM);this.updateCss(_defineProperty({},R.TRANSFORM,n&&n!==D.NONE?"".concat(n," scale(").concat(t,", ").concat(e,")"):"scale(".concat(t,", ").concat(e,")")))}},{key:"onItalicClick",value:function(){this.updateCss(_defineProperty({},R.FONT_ITALIC,this.styles[R.FONT_ITALIC]===D.FONT_ITALIC?D.FONT_STYLE_NORMAL:D.FONT_ITALIC))}},{key:"removeItem",value:function(){this.removeSelectedItem.emit(this.getSelectedItems())}},{key:"groupItem",value:function(){this.isGroupedItems?this.unGroupSelectedItem.emit(this.getSelectedItems()):this.groupSelectedItem.emit(this.getSelectedItems())}},{key:"lockItem",value:function(){var t=this;this.isLocked=!this.isLocked,this.selectedCanvasElements.forEach((function(e){e.locked=t.isLocked})),this.eventerService.send({type:y.a.UPDATE_DIRECTION_HANLDES})}},{key:"onColorSelect",value:function(t){this.updateCss(_defineProperty({},R.COLOR,t))}},{key:"onBGColorSelect",value:function(t){this.updateCss(_defineProperty({},R.BG_COLOR,t))}},{key:"onTextAlign",value:function(t){this.updateCss(_defineProperty({},R.TEXT_ALIGN,t))}},{key:"onCssChange",value:function(t,e){}},{key:"updateOpacity",value:function(t,e){this.updateCss(_defineProperty({},R.OPACITY,t),e)}},{key:"undoItem",value:function(){this.clearSelectedElements.emit(),this.undoService.undo()}},{key:"redoItem",value:function(){this.clearSelectedElements.emit(),this.undoService.redo()}},{key:"duplicate",value:function(){this.duplicateSelectedItem.emit(this.getSelectedItems())}},{key:"getSelectedItems",value:function(){return{nodes:this.selectedNodes,canvasElements:this.selectedCanvasElements}}}]),t}()).\u0275fac=function(t){return new(t||Mi)(d.Ob(y.b),d.Ob(Bn))},Mi.\u0275cmp=d.Ib({type:Mi,selectors:[["app-toolbar"]],inputs:{options:"options",selectedNodes:"selectedNodes",selectedCanvasElements:"selectedCanvasElements"},outputs:{removeSelectedItem:"removeSelectedItem",duplicateSelectedItem:"duplicateSelectedItem",groupSelectedItem:"groupSelectedItem",unGroupSelectedItem:"unGroupSelectedItem",clearSelectedElements:"clearSelectedElements"},features:[d.zb()],decls:26,vars:17,consts:[[1,"toolbar-items"],[1,"ml-2","d-flex","toolbar-items-left"],[4,"ngIf"],[1,"toolbar-items-right"],["class","toolbar-item",4,"ngIf"],[1,"toolbar-item"],["mat-icon-button","","matTooltip","Undo","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],[1,"material-icons"],["mat-icon-button","","matTooltip","Redo","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],[3,"selectedFont","disabled","fontSelect"],[3,"disabled","selectedValue","valueChange"],["mat-icon-button","","matTooltip","Text Bold","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],["mat-icon-button","","matTooltip","Text Italic","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],["heading","Select Background Color",3,"colorSelect"],["backgroundPicker",""],["mat-icon-button","","matTooltip","Background Color","matTooltipPosition","above",1,"toolbar-icon-size",3,"click"],["heading","Select Text Color",3,"colorSelect"],["mat-icon-button","","matTooltip","Text Color","matTooltipPosition","above",1,"toolbar-icon-size",3,"click"],[3,"disabled","initialStyles","styleChange"],[3,"disabled","selectedOpacity","slideChange","slideStop"],["mat-icon-button","","matTooltip","Flip Horizontally","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],[1,"material-icons","rotate-90"],["mat-icon-button","","matTooltip","Flip Vertically","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],[3,"disabled","initialStyles","styleChange","styleChangeEnd"],["mat-icon-button","","matTooltipPosition","above",1,"toolbar-icon-size",3,"matTooltip","click"],["class","material-icons",4,"ngIf"],["mat-icon-button","","matTooltip","Duplicate Item","matTooltipPosition","above",1,"toolbar-icon-size",3,"click"],["mat-icon-button","","matTooltip","Delete Element","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"]],template:function(t,e){1&t&&(d.Pb(0,"div"),d.Tb(1,"div",0),d.Tb(2,"div",1),d.yc(3,fi,3,2,"ng-container",2),d.yc(4,gi,3,2,"ng-container",2),d.yc(5,bi,5,3,"ng-container",2),d.yc(6,vi,5,3,"ng-container",2),d.yc(7,mi,7,2,"ng-container",2),d.yc(8,yi,7,2,"ng-container",2),d.yc(9,xi,3,2,"ng-container",2),d.yc(10,Ci,3,2,"ng-container",2),d.yc(11,Si,5,1,"ng-container",2),d.yc(12,Oi,5,1,"ng-container",2),d.yc(13,Ei,3,2,"ng-container",2),d.Sb(),d.Tb(14,"div",3),d.yc(15,wi,4,3,"div",4),d.yc(16,_i,5,5,"ng-container",2),d.yc(17,Pi,5,0,"ng-container",2),d.yc(18,Ii,5,1,"ng-container",2),d.Tb(19,"div",5),d.Tb(20,"button",6),d.bc("click",(function(){return e.undoItem()})),d.Tb(21,"i",7),d.zc(22,"undo"),d.Sb(),d.Sb(),d.Tb(23,"button",8),d.bc("click",(function(){return e.redoItem()})),d.Tb(24,"i",7),d.zc(25,"redo"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb()),2&t&&(d.Bb(3),d.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.FONT_FAMILY]),d.Bb(1),d.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.FONT_SIZE]),d.Bb(1),d.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.FONT_WEIGHT_BOLD]),d.Bb(1),d.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.FONT_STYLE_ITALIC]),d.Bb(1),d.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.BACKGROUND_COLOR]),d.Bb(1),d.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.COLOR]),d.Bb(1),d.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.TEXT_ALIGNMENT]),d.Bb(1),d.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.OPACITY]),d.Bb(1),d.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.FLIP_HORIZONTAL]),d.Bb(1),d.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.FLIP_VERTICAL]),d.Bb(1),d.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.LETTER_SPACING]),d.Bb(2),d.jc("ngIf",e.isGroupUngroupVisible),d.Bb(1),d.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.LOCK]),d.Bb(1),d.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.DUPLICATE]),d.Bb(1),d.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.DELETE]),d.Bb(2),d.jc("disabled",-1===e.undoService.index),d.Bb(3),d.jc("disabled",e.undoService.index+1===e.undoService.length))},directives:[h.k,$.a,Un.a,Kn,ti,Ke,ri,li,di],styles:[".toolbar-icon-size{width:32px;line-height:32px;height:32px}.toolbar-items{position:relative;display:flex;justify-content:space-between;height:100%;align-items:center;font-size:.813rem}.toolbar-items-left{margin-left:1rem;display:flex;align-items:center}.toolbar-items-right{margin-right:1rem;display:flex;align-items:center}.toolbar-item{position:relative;margin:0 3px}.toolbar-input{padding:7px 13px;border:1px solid #f0f0f0}.toolbar-input:focus{outline:1px solid #f0f0f0}input[type=number]{width:60px}.toolbar-icons{display:flex;border:1px solid #f0f0f0;border-radius:3px;cursor:pointer;padding:2px;color:#484848}.pinched-item{box-shadow:inset 0 0 3px;background-color:#d3d3d3}.toolbar-icons:hover:not(.toolbar-icons-selected){background:#f0f0f0}.toolbar-bg-color{border:1px solid silver;border-radius:2px;padding:15px;cursor:pointer}.toolbar-item-drop{position:absolute;left:0;top:calc(100% + 10px);background:#fff;box-shadow:0 0 2px grey;padding:10px 20px;border-radius:3px}"],encapsulation:2}),Mi),Ri=["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"];function Di(t){return void 0===t}var Ni,Ai=((Ni=function(){function t(){this._eventHandler={},this.options={}}var e=t.prototype;return e.trigger=function(t,e){void 0===e&&(e={});var n=this._eventHandler[t]||[],i=n.length>0;if(!i)return!0;n=n.concat(),e.eventType=t;var r=!1,o=[e],a=0;e.stop=function(){r=!0},e.currentTarget=this;for(var s=arguments.length,c=new Array(s>2?s-2:0),l=2;l<s;l++)c[l-2]=arguments[l];for(c.length>=1&&(o=o.concat(c)),a=0;n[a];a++)n[a].apply(this,o);return!r},e.once=function(t,e){if("object"==typeof t&&Di(e)){var n,i=t;for(n in i)this.once(n,i[n]);return this}if("string"==typeof t&&"function"==typeof e){var r=this;this.on(t,(function n(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];e.apply(r,o),r.off(t,n)}))}return this},e.hasOn=function(t){return!!this._eventHandler[t]},e.on=function(t,e){if("object"==typeof t&&Di(e)){var n,i=t;for(n in i)this.on(n,i[n]);return this}if("string"==typeof t&&"function"==typeof e){var r=this._eventHandler[t];Di(r)&&(this._eventHandler[t]=[],r=this._eventHandler[t]),r.push(e)}return this},e.off=function(t,e){if(Di(t))return this._eventHandler={},this;if(Di(e)){if("string"==typeof t)return this._eventHandler[t]=void 0,this;var n,i=t;for(n in i)this.off(n,i[n]);return this}var r,o,a=this._eventHandler[t];if(a)for(r=0;void 0!==(o=a[r]);r++)if(o===e){a=a.splice(r,1);break}return this},t}()).VERSION="2.1.2",Ni);function Li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map((function(e){return e.split(" ").map((function(e){return e?""+t+e:""})).join(" ")})).join(" ")}function Bi(t,e){return function(n){n&&(t[e]=n)}}function ji(t,e,n){return function(i){i&&(t[e][n]=i)}}function Gi(t,e){return function(n){var i=n.prototype;t.forEach((function(t){e(i,t)}))}}function Hi(t,e){return void 0===e&&(e={}),function(n,i){t.forEach((function(t){var r=e[t]||t;n[r]||(n[r]=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=(e=this[i])[t].apply(e,n);return o===this[i]?this:o})}))}}var Fi=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,i=this.values,r=n.indexOf(t),o=-1===r?n.length:r;n[o]=t,i[o]=e},t}(),Xi=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),Ui="function"==typeof Map,Wi=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}(),Yi=function(){function t(t,e,n,i,r,o,a,s){this.prevList=t,this.list=e,this.added=n,this.removed=i,this.changed=r,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,e){var n=[],i=[];return t.forEach((function(t){var e=t[0],r=t[1],o=new Wi;n[e]=o,i[r]=o})),n.forEach((function(t,e){t.connect(n[e-1])})),t.filter((function(t,n){return!e[n]})).map((function(t,e){var r=t[0],o=t[1];if(r===o)return[0,0];var a=n[r],s=i[o-1],c=a.getIndex();return a.disconnect(),s?a.connect(s,s.next):a.connect(void 0,n[0]),[c,a.getIndex()]}))}(this.changedBeforeAdded,this.fixed),e=this.changed,n=[];this.cacheOrdered=t.filter((function(t,i){var r=e[i];if(t[0]!==t[1])return n.push([r[0],r[1]]),!0})),this.cachePureChanged=n},t}();function qi(t,e,n){var i=Ui?Map:n?Xi:Fi,r=n||function(t){return t},o=[],a=[],s=[],c=t.map(r),l=e.map(r),u=new i,h=new i,p=[],d=[],f={},g=[],b=0,v=0;return c.forEach((function(t,e){u.set(t,e)})),l.forEach((function(t,e){h.set(t,e)})),c.forEach((function(t,e){var n=h.get(t);void 0===n?(++v,a.push(e)):f[n]=v})),l.forEach((function(t,e){var n=u.get(t);void 0===n?(o.push(e),++b):(s.push([n,e]),p.push([n-(v=f[e]||0),e-b]),d.push(e===n),n!==e&&g.push([n,e]))})),a.reverse(),new Yi(t,e,o,a,g,s,p,d)}var Vi=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),n=qi(this.list,e,this.findKeyCallback);return this.list=e,n},t}(),Qi=("undefined"!=typeof document&&document,['"',"'",'\\"',"\\'"]);function Ki(t){return void 0===t}function Ji(t){return t&&"object"==typeof t}function $i(t){return Array.isArray(t)}function Zi(t){return"string"==typeof t}function tr(t,e,n,i){for(var r=n;r<i;++r){var o=e[r].trim();if(o===t)return r;var a=r;if("("===o?a=tr(")",e,r+1,i):Qi.indexOf(o)>-1&&(a=tr(o,e,r+1,i)),-1===a)break;r=a}return-1}function er(t,e){for(var n=new RegExp("(\\s*"+(e||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),i=t.split(n).filter(Boolean),r=i.length,o=[],a=[],s=0;s<r;++s){var c=i[s].trim(),l=s;if("("===c)l=tr(")",i,s+1,r);else{if(")"===c)throw new Error("invalid format");if(Qi.indexOf(c)>-1)l=tr(c,i,s+1,r);else if(c===e){a.length&&(o.push(a.join("")),a=[]);continue}}-1===l&&(l=r-1),a.push(i.slice(s,l+1).join("")),s=l}return a.length&&o.push(a.join("")),o}function nr(t){return er(t,"")}function ir(t){return er(t,",")}function rr(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function or(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);return e?{prefix:e[1],unit:e[3],value:parseFloat(e[2])}:{prefix:"",unit:"",value:NaN}}function ar(t){return t.replace(/[\s-_]([a-z])/g,(function(t,e){return e.toUpperCase()}))}function sr(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,(function(t,n,i){return""+n+e+i.toLowerCase()}))}function cr(){return Date.now?Date.now():(new Date).getTime()}function lr(t,e,n){void 0===n&&(n=-1);for(var i=t.length,r=0;r<i;++r)if(e(t[r],r,t))return r;return n}function ur(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function hr(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function pr(t,e,n,i){t.addEventListener(e,n,i)}function dr(t,e,n){t.removeEventListener(e,n)}var fr=function(t,e){return(fr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function gr(t,e){function n(){this.constructor=t}fr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var br=function(){return(br=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function vr(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function mr(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function yr(t,e){var n=Object.keys(t),i=Object.keys(e),r=qi(n,i,(function(t){return t})),o={},a={},s={};return r.added.forEach((function(t){var n=i[t];o[n]=e[n]})),r.removed.forEach((function(e){var i=n[e];a[i]=t[i]})),r.maintained.forEach((function(i){var r=n[i[0]];t[r]!==e[r]&&(s[r]=[t[r],e[r]])})),{added:o,removed:a,changed:s}}function xr(t){t.forEach((function(t){t()}))}function Cr(t){var e=0;return t.map((function(t){return null==t?"$compat"+ ++e:""+t}))}function Sr(t,e,n,i){return Zi(t)?new Pr("text_"+t,e,n,i,null,{}):new("string"==typeof t.type?Ir:t.type.prototype.render?Dr:zr)(t.type,e,n,i,t.ref,t.props)}function Or(t){var e=[];return t.forEach((function(t){e=e.concat($i(t)?Or(t):t)})),e}function Er(t){var e=t.className,n=vr(t,["className"]);return null!=e&&(n.class=e),delete n.style,delete n.children,n}function wr(t,e){if(!e)return t;for(var n in e)Ki(t[n])&&(t[n]=e[n]);return t}function kr(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=e||{},o=r.key,a=r.ref,s=vr(r,["key","ref"]);return{type:t,key:o,ref:a,props:br(br({},s),{children:Or(n).filter((function(t){return null!=t&&!1!==t}))})}}var Tr=function(){function t(t,e,n,i,r,o){void 0===o&&(o={}),this.type=t,this.key=e,this.index=n,this.container=i,this.ref=r,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,n,i){if(this.base&&!Zi(e)&&!i&&!this._should(e.props,n))return!1;this.original=e,this._setState(n);var r=this.props;return Zi(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?r:{},n),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function _r(t){var e={},n={};for(var i in t)0===i.indexOf("on")?n[i.replace("on","").toLowerCase()]=t[i]:e[i]=t[i];return{attributes:e,events:n}}var Pr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}gr(e,t);var n=e.prototype;return n._render=function(t){var e=this,n=!this.base;return n&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push((function(){n?e._mounted():e._updated()})),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(Tr),Ir=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events={},e}gr(e,t);var n=e.prototype;return n.addEventListener=function(t,e){var n=this.events;n[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,n[t])},n.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},n._should=function(t){return mr(this.props,t)},n._render=function(t,e){var n=this,i=!this.base;i&&(this.base=document.createElement(this.type)),Br(this,this._providers,this.props.children,t,null);var r=this.base,o=_r(e),a=o.attributes,s=o.events,c=_r(this.props),l=c.attributes,u=c.events;return function(t,e,n){var i=yr(t,e),r=i.added,o=i.removed,a=i.changed;for(var s in r)n.setAttribute(s,r[s]);for(var s in a)n.setAttribute(s,a[s][1]);for(var s in o)n.removeAttribute(s)}(Er(a),Er(l),r),function(t,e,n){var i=yr(t,e),r=i.added,o=i.removed,a=i.changed;for(var s in o)n.removeEventListener(s);for(var s in r)n.addEventListener(s,r[s]);for(var s in a)n.removeEventListener(s),n.addEventListener(s,a[s][1]);for(var s in o)n.removeEventListener(s)}(s,u,this),function(t,e,n){var i=n.style,r=yr(t,e),o=r.added,a=r.removed,s=r.changed;for(var c in o){var l=sr(c,"-");i.setProperty?i.setProperty(l,o[c]):i[l]=o[c]}for(var c in s)l=sr(c,"-"),i.setProperty?i.setProperty(l,s[c][1]):i[l]=s[c][1];for(var c in a)l=sr(c,"-"),i.removeProperty?i.removeProperty(l):i[l]=""}(e.style||{},this.props.style||{},r),t.push((function(){i?n._mounted():n._updated()})),!0},n._unmount=function(){var t=this.events,e=this.base;for(var n in t)e.removeEventListener(n,t[n]);this._providers.forEach((function(t){t._unmount()})),this.events={},e.parentNode.removeChild(e)},e}(Tr);function Mr(t){if(!t)return null;if(t instanceof Node)return t;var e=t._provider._providers;return e.length?Mr(e[0].base):null}var zr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}gr(e,t);var n=e.prototype;return n._render=function(t){var e=this.type(this.props);return Br(this,this._providers,e?[e]:[],t),!0},n._unmount=function(){this._providers.forEach((function(t){t._unmount()}))},e}(Tr),Rr=function(t){function e(e){var n=t.call(this,"container","container",0,null)||this;return n.base=e,n}gr(e,t);var n=e.prototype;return n._render=function(){return!0},n._unmount=function(){},e}(Tr),Dr=function(t){function e(e,n,i,r,o,a){return void 0===a&&(a={}),t.call(this,e,n,i,r,o,wr(a,e.defaultProps))||this}gr(e,t);var n=e.prototype;return n._should=function(t,e){return this.base.shouldComponentUpdate(wr(t,this.type.defaultProps),e||this.base.state)},n._render=function(t,e,n){var i=this;this.props=wr(this.props,this.type.defaultProps);var r=!this.base;r?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var o=this.base,a=o.state,s=o.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),Br(this,this._providers,s?[s]:[],t,n,null),t.push((function(){r?(i._mounted(),o.componentDidMount()):(i._updated(),o.componentDidUpdate(e,a))}))},n._setState=function(t){t&&(this.base.state=t)},n._unmount=function(){this._providers.forEach((function(t){t._unmount()})),this.base.componentWillUnmount()},e}(Tr),Nr=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,n){var i=[],r=this._provider;Br(r.container,[r],[r.original],i,br(br({},this.state),t),n)&&(e&&i.push(e),xr(i))},e.forceUpdate=function(t){this.setState(this.state,t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},t}(),Ar=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gr(e,t),e.prototype.shouldComponentUpdate=function(t,e){return mr(this.props,t)||mr(this.state,e)},e}(Nr),Lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}gr(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.element,n=t.container;this._portalProvider=new Rr(n),jr(e,n,this._portalProvider)},n.componentDidUpdate=function(){var t=this.props;jr(t.element,t.container,this._portalProvider)},n.componentWillUnmount=function(){jr(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(Ar);function Br(t,e,n,i,r,o){var a=function(t,e,n){var i=n.map((function(t){return Zi(t)?null:t.key})),r=qi(Cr(e.map((function(t){return t.key}))),Cr(i),(function(t){return t}));r.removed.forEach((function(t){e.splice(t,1)[0]._unmount()})),r.ordered.forEach((function(t){var n=t[1],i=e.splice(t[0],1)[0];e.splice(n,0,i);var r=Mr(i.base),o=Mr(e[n+1]&&e[n+1].base);r&&r.parentNode.insertBefore(r,o)})),r.added.forEach((function(r){e.splice(r,0,Sr(n[r],i[r],r,t))}));var o=r.maintained.filter((function(r){var o=r[1],a=n[o],s=e[o];return(Zi(a)?"text_"+a:a.type)!==s.type?(s._unmount(),e.splice(o,1,Sr(a,i[o],o,t)),!0):(s.index=o,!1)}));return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}(r.added,o.map((function(t){return t[1]})))}(t,e,n),s=e.filter((function(t,e){return t._update(i,n[e],r,o)})),c=function t(e){if(!e)return null;var n=e.base;return n instanceof Node?n:t(e.container)}(t);return c&&a.reverse().forEach((function(n){var i=e[n],r=Mr(i.base);if(r&&c!==r&&!r.parentNode){var o=function(t,e){for(var n=t._providers,i=n.length,r=e.index+1;r<i;++r){var o=Mr(n[r].base);if(o)return o}return null}(t,i);c.insertBefore(r,o)}})),s.length>0}function jr(t,e,n){void 0===n&&(n=e.__REACT_COMPAT__);var i=!!n;return n||(n=new Rr(e)),function(t,e,n){var i=[];Br(t,t._providers,e,i,void 0),xr(i)}(n,t?[t]:[]),i||(e.__REACT_COMPAT__=n),n}function Gr(t,e,n){var i=e.__REACT_COMPAT__;t&&!i&&(e.innerHTML=""),jr(t,e,i),n&&n()}var Hr,Fr=("undefined"!=typeof window&&window||{}).navigator,Xr=[{criteria:"PhantomJS",identity:"PhantomJS"},{criteria:/Whale/,identity:"Whale",versionSearch:"Whale"},{criteria:/Edge/,identity:"Edge",versionSearch:"Edge"},{criteria:/MSIE|Trident|Windows Phone/,identity:"IE",versionSearch:"IEMobile|MSIE|rv"},{criteria:/MiuiBrowser/,identity:"MIUI Browser",versionSearch:"MiuiBrowser"},{criteria:/SamsungBrowser/,identity:"Samsung Internet",versionSearch:"SamsungBrowser"},{criteria:/SAMSUNG /,identity:"Samsung Internet",versionSearch:"Version"},{criteria:/Chrome|CriOS/,identity:"Chrome"},{criteria:/Android/,identity:"Android Browser",versionSearch:"Version"},{criteria:/iPhone|iPad/,identity:"Safari",versionSearch:"Version"},{criteria:"Apple",identity:"Safari",versionSearch:"Version"},{criteria:"Firefox",identity:"Firefox"}],Ur=[{criteria:/Windows Phone/,identity:"Windows Phone",versionSearch:"Windows Phone"},{criteria:"Windows 2000",identity:"Window",versionAlias:"5.0"},{criteria:/Windows NT/,identity:"Window",versionSearch:"Windows NT"},{criteria:/iPhone|iPad/,identity:"iOS",versionSearch:"iPhone OS|CPU OS"},{criteria:"Mac",versionSearch:"OS X",identity:"MAC"},{criteria:/Android/,identity:"Android"},{criteria:/Tizen/,identity:"Tizen"},{criteria:/Web0S/,identity:"WebOS"}],Wr=[{criteria:/iPhone|iPad/,browserVersionSearch:"Version",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],Yr={version:"-1",name:"unknown"},qr={version:"-1",name:"unknown"};function Vr(t,e){for(var n=[],i=0;i<t.length;i++)e(t[i])&&n.push(t[i]);return n}function Qr(t,e){return e&&e.test?!!e.test(t):t.indexOf(e)>-1}function Kr(t,e){var n=Vr(t,(function(t){return Qr(Hr,t.criteria)}))[0];return n&&n.identity||e.name}function Jr(t,e){return Vr(t,(function(t){var n=t.criteria,i=new RegExp(t.identity,"i").test(e);return!!(n?i&&Qr(Hr,n):i)}))[0]}function $r(t,e){var n=Yr.version,i=new RegExp("(".concat(t,")"),"i").exec(e);if(!i)return n;var r=i.index;return r>-1&&(n=e.substring(r+i[0].length+1).split(" ")[0].replace(/_/g,".").replace(/;|\)/g,"")),n}function Zr(t){if(t)return $r(function(t){var e=Jr(Xr,t);return e||(e={criteria:t,versionSearch:t,identity:t}),e}(t).versionSearch||t,Hr)}function to(t){var e,n=function(t){return Jr(Ur,t)}(t)||{},i=qr.version;if(t){if(n.versionAlias)return n.versionAlias;var r=new RegExp("(".concat(n.versionSearch||t,")\\s([\\d_\\.]+|\\d_0)"),"i");return r.exec(Hr)&&(e=r.exec(Hr)[2].replace(/_/g,".").replace(/;|\)/g,"")),e||i}}function eo(){var t=Kr(Ur,qr);return{name:t,version:to(t)}}function no(){var t,e=Kr(Xr,Yr);return{name:e,version:Zr(e),webview:function(e,n){for(var i=0;i<e.length;i++)if(t=$r((r=e[i]).browserVersionSearch,Hr),Qr(Hr,r.webviewToken)||Qr(t,r.webviewBrowserVersion))return!0;var r;return!1}(Vr(Wr,(function(t){return Qr(Hr,t.criteria)})))}}function io(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fr.userAgent;!function(t){Hr=t}(t);var e={os:eo(),browser:no(),isMobile:-1!==Hr.indexOf("Mobi")};return e.browser.name=e.browser.name.toLowerCase(),e.os.name=e.os.name.toLowerCase(),e.os.version=e.os.version.toLowerCase(),"ios"===e.os.name&&e.browser.webview&&(e.browser.version="-1"),e}io.VERSION="#__VERSION__#";var ro=io,oo=function(t,e){return(oo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},ao=function(){return(ao=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},so=function(){return(so=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function co(t){return 180*(e=[t[0].clientX,t[0].clientY],n=[t[1].clientX,t[1].clientY],((i=Math.atan2(n[1]-e[1],n[0]-e[0]))>=0?i:i+2*Math.PI)/Math.PI);var e,n,i}function lo(t,e,n,i){var r=vo(t),o=vo(e),a=vo(i);return ho(mo(i[0],yo(r,a)),mo(i[0],yo(o,a)),n[0])}function uo(t){return t.touches?go(t.touches):[bo(t)]}function ho(t,e,n){var i=t.clientX,r=t.clientY;return{clientX:i,clientY:r,deltaX:i-e.clientX,deltaY:r-e.clientY,distX:i-n.clientX,distY:r-n.clientY}}function po(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function fo(t,e,n){return t.map((function(t,i){return ho(t,e[i],n[i])}))}function go(t){for(var e=Math.min(t.length,2),n=[],i=0;i<e;++i)n.push(bo(t[i]));return n}function bo(t){return{clientX:t.clientX,clientY:t.clientY}}function vo(t){return 1===t.length?t[0]:{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function mo(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}}function yo(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}}var xo=["textarea","input"],Co=function(){function t(t,e){var n=this;void 0===e&&(e={}),this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.targets=[],this.prevTime=0,this.isDouble=!1,this.startRotate=0,this.onDragStart=function(t,e){if(void 0===e&&(e=!0),n.flag||!1!==t.cancelable){var i=n.options,r=i.container,o=i.pinchOutside,a=i.dragstart,s=i.preventRightClick,c=i.preventDefault,l=i.checkInput,u=n.isTouch;if(!n.flag){var h=document.activeElement,p=t.target,d=p.tagName.toLowerCase(),f=xo.indexOf(d)>-1,g=p.isContentEditable;if(f||g){if(l||h===p)return!1;if(h&&g&&h.isContentEditable&&h.contains(p))return!1}else(c||"touchstart"===t.type)&&h&&(h.isContentEditable||xo.indexOf(h.tagName)>-1)&&h.blur()}var b=0;if(!n.flag&&u&&o&&(b=setTimeout((function(){pr(r,"touchstart",n.onDragStart,{passive:!1})}))),n.flag&&u&&o&&dr(r,"touchstart",n.onDragStart),function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(b),!n.flag&&t.touches.length!==t.changedTouches.length)return;n.pinchFlag||n.onPinchStart(t)}if(!n.flag){var v=n.startClients[0]?n.startClients:uo(t);n.customDist=[0,0],n.flag=!0,n.isDrag=!1,n.startClients=v,n.prevClients=v,n.datas={},n.movement=0;var m=ho(v[0],n.prevClients[0],n.startClients[0]);if(s&&(3===t.which||2===t.button))return clearTimeout(b),n.initDrag(),!1;!1===(a&&a(so({type:"dragstart",datas:n.datas,inputEvent:t,isTrusted:e},m)))&&(clearTimeout(b),n.initDrag()),n.isDouble=cr()-n.prevTime<200,n.flag&&c&&t.preventDefault()}}},this.onDrag=function(t,e){if(n.flag){var i=uo(t);n.pinchFlag&&n.onPinch(t,i);var r=n.move([0,0],t,i);if(r&&(r.deltaX||r.deltaY)){var o=n.options.drag;o&&o(so({},r,{isScroll:!!e,inputEvent:t}))}}},this.onDragEnd=function(t){if(n.flag){var e=n.options,i=e.dragend;n.isTouch&&e.pinchOutside&&dr(e.container,"touchstart",n.onDragStart),n.pinchFlag&&n.onPinchEnd(t),n.flag=!1;var r=n.prevClients,o=n.startClients,a=n.pinchFlag?lo(r,r,o,n.startPinchClients):ho(r[0],r[0],o[0]),s=cr(),c=!n.isDrag&&n.isDouble;n.prevTime=n.isDrag||c?0:s,n.startClients=[],n.prevClients=[],i&&i(so({type:"dragend",datas:n.datas,isDouble:c,isDrag:n.isDrag,inputEvent:t},a))}};var i=[].concat(t);this.options=so({checkInput:!1,container:i.length>1?window:i[0],preventRightClick:!0,preventDefault:!0,pinchThreshold:0,events:["touch","mouse"]},e);var r=this.options,o=r.container,a=r.events;if(this.isTouch=a.indexOf("touch")>-1,this.isMouse=a.indexOf("mouse")>-1,this.customDist=[0,0],this.targets=i,this.isMouse&&(i.forEach((function(t){pr(t,"mousedown",n.onDragStart)})),pr(o,"mousemove",this.onDrag),pr(o,"mouseup",this.onDragEnd),pr(o,"contextmenu",this.onDragEnd)),this.isTouch){var s={passive:!1};i.forEach((function(t){pr(t,"touchstart",n.onDragStart,s)})),pr(o,"touchmove",this.onDrag,s),pr(o,"touchend",this.onDragEnd,s),pr(o,"touchcancel",this.onDragEnd,s)}}var e=t.prototype;return e.isDragging=function(){return this.isDrag},e.isFlag=function(){return this.flag},e.isPinchFlag=function(){return this.pinchFlag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(t,e,n,i){void 0===i&&(i=!0),this.flag&&(this.startClients.forEach((function(n){n.clientX-=t,n.clientY-=e})),this.prevClients.forEach((function(n){n.clientX-=t,n.clientY-=e})),i&&this.onDrag(n,!0))},e.move=function(t,e,n){var i=t[0],r=t[1];void 0===n&&(n=this.prevClients);var o=this.customDist,a=this.prevClients,s=this.startClients,c=this.pinchFlag?lo(n,a,s,this.startPinchClients):ho(n[0],a[0],s[0]);o[0]+=i,o[1]+=r,c.deltaX+=i,c.deltaY+=r;var l=c.deltaX,u=c.deltaY;return c.distX+=o[0],c.distY+=o[1],this.movement+=Math.sqrt(l*l+u*u),this.prevClients=n,this.isDrag=!0,so({type:"drag",datas:this.datas},c,{movement:this.movement,isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},e.onPinchStart=function(t){var e,n,i=this.options,r=i.pinchstart;if(!(this.isDrag&&this.movement>i.pinchThreshold)){var o=go(t.changedTouches);if(this.pinchFlag=!0,(e=this.startClients).push.apply(e,o),(n=this.prevClients).push.apply(n,o),this.startDistance=po(this.prevClients),this.startPinchClients=this.prevClients.slice(),r){var a=this.prevClients,s=vo(a),c=ho(s,s,s);this.startRotate=co(a),r(so({type:"pinchstart",datas:this.datas,angle:this.startRotate,touches:fo(a,a,a)},c,{inputEvent:t}))}}},e.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){this.isPinch=!0;var n=this.options.pinch;if(n){var i=this.prevClients,r=this.startClients,o=ho(vo(e),vo(i),vo(r)),a=co(e),s=po(e);n(so({type:"pinch",datas:this.datas,movement:this.movement,angle:a,rotation:a-this.startRotate,touches:fo(e,i,r),scale:s/this.startDistance,distance:s},o,{inputEvent:t}))}}},e.onPinchEnd=function(t){if(this.flag&&this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.options.pinchend;if(n){var i=this.prevClients,r=this.startClients,o=ho(vo(i),vo(i),vo(r));n(so({type:"pinchend",datas:this.datas,isPinch:e,touches:fo(i,i,r)},o,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}}},e.triggerDragStart=function(t){this.onDragStart(t,!1)},e.unset=function(){var t=this,e=this.targets,n=this.options.container;this.isMouse&&(e.forEach((function(e){dr(e,"mousedown",t.onDragStart)})),dr(n,"mousemove",this.onDrag),dr(n,"mouseup",this.onDragEnd),dr(n,"contextmenu",this.onDragEnd)),this.isTouch&&(e.forEach((function(e){dr(e,"touchstart",t.onDragStart)})),dr(n,"touchstart",this.onDragStart),dr(n,"touchmove",this.onDrag),dr(n,"touchend",this.onDragEnd),dr(n,"touchcancel",this.onDragEnd))},e.initDrag=function(){this.startClients=[],this.prevClients=[],this.flag=!1},t}(),So=function(t,e){return(So=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Oo(t){var e=t.container;return[e.scrollLeft,e.scrollTop]}var Eo,wo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startRect=null,e.startPos=[],e.prevTime=0,e.timer=0,e}!function(t,e){function n(){this.constructor=t}So(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.dragStart=function(t,e){var n=e.container.getBoundingClientRect(),i=n.top,r=n.left,o=n.width,a=n.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:i,left:r,width:o,height:a}},n.drag=function(t,e){var n=this,i=t.clientX,r=t.clientY,o=e.container,a=e.threshold,s=void 0===a?0:a,c=e.throttleTime,l=void 0===c?0:c,u=e.getScrollPosition,h=void 0===u?Oo:u,p=this.startRect,d=this.startPos,f=cr(),g=Math.max(l+this.prevTime-f,0),b=[0,0];if(p.top>r-s?(d[1]>p.top||r<d[1])&&(b[1]=-1):p.top+p.height<r+s&&(d[1]<p.top+p.height||r>d[1])&&(b[1]=1),p.left>i-s?(d[0]>p.left||i<d[0])&&(b[0]=-1):p.left+p.width<i+s&&(d[0]<p.left+p.width||i>d[0])&&(b[0]=1),clearTimeout(this.timer),!b[0]&&!b[1])return!1;if(g>0)return this.timer=window.setTimeout((function(){n.drag(t,e)}),g),!1;this.prevTime=f;var v=h({container:o,direction:b});this.trigger("scroll",{container:o,direction:b,inputEvent:t});var m=h({container:o,direction:b}),y=m[0]-v[0],x=m[1]-v[1];return!(!y&&!x||(this.trigger("move",{offsetX:b[0]?y:0,offsetY:b[1]?x:0,inputEvent:t}),l&&(this.timer=window.setTimeout((function(){n.drag(t,e)}),l)),0))},n.dragEnd=function(){clearTimeout(this.timer)},e}(Ai),ko=function(t,e){return(ko=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},To="function"==typeof Map?void 0:(Eo=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++Eo)});function _o(t,e){return qi(t,e,To)}var Po=function(t){function e(e){return void 0===e&&(e=[]),t.call(this,e,To)||this}return function(t,e){function n(){this.constructor=t}ko(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Vi),Io=function(t,e){return(Io=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Mo(t,e){function n(){this.constructor=t}Io(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var zo=function(){return(zo=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function Ro(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+e+'deg);transform-origin: 16px 16px"></path></svg>'}var Do=ro(("undefined"!=typeof navigator&&navigator||{}).userAgent||""),No=Do.os.name.indexOf("ios")>-1||Do.browser.name.indexOf("safari")>-1,Ao="moveable-",Lo="\n{\n\tposition: fixed;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --zoom: 1;\n    --zoompx: 1px;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    width: calc(14 * var(--zoompx));\n    height: calc(14 * var(--zoompx));\n    margin-top: calc(-7 * var(--zoompx));\n    margin-left: calc(-7 * var(--zoompx));\n    border: calc(2 * var(--zoompx)) solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n    height: 1px;\n    width: var(--zoompx);\n    height: var(--zoompx);\n\tbackground: #4af;\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top: var(--zoompx) dashed #4af;\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left: var(--zoompx) dashed #4af;\n}\n.line.dashed:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #4af;\n    font-size: 12px;\n    font-weight: bold;\n}\n.line.dashed.horizontal:before, .line.gap.horizontal:before {\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 5px;\n}\n.line.dashed.vertical:before, .line.gap.vertical:before {\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.line.rotation-line {\n\theight: 40px;\n    width: 1px;\n    transform-origin: 50% calc(100% - 0.5px);\n    top: -40px;\n    width: var(--zoompx);\n    height: calc(40 * var(--zoompx));\n    top: calc(-40 * var(--zoompx));\n    transform-origin: 50% calc(100% - 0.5 * var(--zoompx));\n}\n.line.rotation-line .control {\n\tborder-color: #4af;\n\tbackground:#fff;\n    cursor: alias;\n    left: 50%;\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n    width: calc(2 * var(--zoompx));\n}\n.line.horizontal.bold {\n    height: 2px;\n    height: calc(2 * var(--zoompx));\n}\n\n.line.gap {\n    background: #f55;\n}\n.line.gap:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n    width: calc(12 * var(--zoompx));\n    height: calc(12 * var(--zoompx));\n    margin-top: calc(-6 * var(--zoompx));\n    margin-left: calc(-6 * var(--zoompx));\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+function(t){var e=Ro(1,t),n=Ro(2,t),i=45*Math.round(t/45)%180,r=135===i?"nwse-resize":45===i?"nesw-resize":90===i?"ew-resize":"ns-resize";return"cursor:"+r+";cursor: url('"+e+"') 16 16, "+r+";cursor: -webkit-image-set(url('"+e+"') 1x, url('"+n+"') 2x) 16 16, "+r+";"}(t)+"\n}\n"})).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n"+(No?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n",Bo=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],jo=Math.pow(10,10),Go=-jo,Ho=["nw","ne","sw","se","n","w","s","e"],Fo={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},Xo={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Uo=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging"];function Wo(t,e,n,i,r,o){for(var a=0;a<r;++a){var s=n+a*r,c=i+a*r;t[s]+=t[c]*o,e[s]+=e[c]*o}}function Yo(t,e,n,i,r){for(var o=0;o<r;++o){var a=n+o*r,s=i+o*r,c=t[a],l=e[a];t[a]=t[s],t[s]=c,e[a]=e[s],e[s]=l}}function qo(t,e,n,i,r){for(var o=0;o<i;++o){var a=n+o*i;t[a]/=r,e[a]/=r}}function Vo(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var i=t.slice(),r=0;r<n;++r)i[r*n+e-1]=0,i[(e-1)*n+r]=0;return i[(e-1)*(n+1)]=1,i}function Qo(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),i=sa(e),r=0;r<e;++r){var o=e*r+r;if(0===n[o])for(var a=r+1;a<e;++a)if(n[e*r+a]){Yo(n,i,r,a,e);break}if(!n[o])return[];for(qo(n,i,r,e,n[o]),a=0;a<e;++a){var s=n[a+r*e];0!==s&&r!==a&&Wo(n,i,a,r,e,-s)}}return i}function Ko(t,e){var n=Math.atan2(e[1]-t[1],e[0]-t[0]);return n>=0?n:n+2*Math.PI}function Jo(t,e){for(var n=t.slice(),i=t.length;i<e-1;++i)n[i]=0;return n[e-1]=1,n}function $o(t,e,n){if(void 0===e&&(e=Math.sqrt(t.length)),e===n)return t;for(var i=sa(n),r=Math.min(e,n),o=0;o<r-1;++o){for(var a=0;a<r-1;++a)i[o*n+a]=t[o*e+a];i[(o+1)*n-1]=t[(o+1)*e-1],i[(n-1)*n+o]=t[(e-1)*e+o]}return i[n*n-1]=t[e*e-1],i}function Zo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=sa(t);return e.forEach((function(e){i=ta(i,e,t)})),i}function ta(t,e,n){void 0===n&&(n=Math.sqrt(t.length));var i=[],r=t.length/n,o=e.length/r;if(!r)return e;if(!o)return t;for(var a=0;a<n;++a)for(var s=0;s<o;++s){i[s*n+a]=0;for(var c=0;c<r;++c)i[s*n+a]+=t[c*n+a]*e[s*r+c]}return i}function ea(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length,i=0,r=n-1;r>=0;--r)i+=t[r];return n?i/n:0}function na(t,e){for(var n=Math.min(t.length,e.length),i=t.slice(),r=0;r<n;++r)i[r]=i[r]+e[r];return i}function ia(t,e){for(var n=Math.min(t.length,e.length),i=t.slice(),r=0;r<n;++r)i[r]=i[r]-e[r];return i}function ra(t,e,n){void 0===n&&(n=e.length);var i=ta(t,e,n),r=i[n-1];return i.map((function(t){return t/r}))}function oa(t,e){return ra(aa(e,3),Jo(t,3))}function aa(t,e){var n=Math.cos(t),i=Math.sin(t),r=sa(e);return r[0]=n,r[1]=i,r[e]=-i,r[e+1]=n,r}function sa(t){for(var e=t*t,n=[],i=0;i<e;++i)n[i]=i%(t+1)?0:1;return n}function ca(t,e){for(var n=sa(e),i=Math.min(t.length,e-1),r=0;r<i;++r)n[(e+1)*r]=t[r];return n}function la(t,e){for(var n=sa(e),i=Math.min(t.length,e-1),r=0;r<i;++r)n[e*(e-1)+r]=t[r];return n}function ua(t,e,n,i,r,o,a,s){var c=t[0],l=t[1],u=e[0],h=e[1],p=n[0],d=n[1],f=i[0],g=i[1],b=r[0],v=r[1],m=o[0],y=o[1],x=a[0],C=a[1],S=s[0],O=s[1],E=Qo([c,0,u,0,p,0,f,0,l,0,h,0,d,0,g,0,1,0,1,0,1,0,1,0,0,c,0,u,0,p,0,f,0,l,0,h,0,d,0,g,0,1,0,1,0,1,0,1,-b*c,-v*c,-m*u,-y*u,-x*p,-C*p,-S*f,-O*f,-b*l,-v*l,-m*h,-y*h,-x*d,-C*d,-S*g,-O*g],8);if(!E.length)return[];var w=ta(E,[b,v,m,y,x,C,S,O],8);return w[8]=1,$o(function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],i=0;i<e;++i)for(var r=0;r<e;++r)n[r*e+i]=t[e*i+r];return n}(w),3,4)}function ha(t,e){var n=e.datas,i=t.state,r=i.matrix,o=i.beforeMatrix,a=i.is3d,s=i.left,c=i.top,l=i.origin,u=i.offsetMatrix,h=i.targetMatrix,p=i.transformOrigin,d=a?4:3;n.is3d=a,n.matrix=r,n.targetMatrix=h,n.beforeMatrix=o,n.offsetMatrix=u,n.transformOrigin=p,n.inverseMatrix=Qo(r,d),n.inverseBeforeMatrix=Qo(o,d),n.absoluteOrigin=Jo(na([s,c],l),d),n.startDragBeforeDist=ra(n.inverseBeforeMatrix,n.absoluteOrigin,d),n.startDragDist=ra(n.inverseMatrix,n.absoluteOrigin,d)}function pa(t,e){var n=t.datas,i=n.startDragBeforeDist,r=n.startDragDist,o=n.is3d?4:3;return ia(ra(e?n.inverseBeforeMatrix:n.inverseMatrix,na(n.absoluteOrigin,[t.distX,t.distY]),o),e?i:r)}function da(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function fa(t,e){return da(e).map((function(e){return t[e]}))}function ga(t,e){var n=fa(t,e);return[ea.apply(void 0,n.map((function(t){return t[0]}))),ea.apply(void 0,n.map((function(t){return t[1]})))]}function ba(t,e){return ga(t,e.map((function(t){return-t})))}function va(t,e,n,i,r,o){var a=ba(za(e,n,i,r),o);return[t[0]-a[0],t[1]-a[1]]}function ma(t,e,n,i){return ta(t,Oa(e,i,n),i)}function ya(t,e){var n=t.transformOrigin,i=t.is3d?4:3;return ma(t.offsetMatrix,ta(t.targetMatrix,ca(e,i),i),n,i)}function xa(t,e){return ba(Ya(t.state),e)}function Ca(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Li.apply(void 0,[Ao].concat(t))}function Sa(){return sa(3)}function Oa(t,e,n){return Zo(e,la(n,e),t,la(n.map((function(t){return-t})),e))}function Ea(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function wa(t,e,n){for(var i=document.body,r=!t||n?t:t.parentElement,o=!1,a="relative";r&&r!==i;){e===r&&(o=!0);var s=ts(r),c=s.transform;if("static"!==(a=s.position)||c&&"none"!==c)break;r=r.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!r||r===i,offsetParent:r||i}}function ka(t,e,n,i){var r,o=t.tagName.toLowerCase(),a=t.offsetLeft,s=t.offsetTop;if(i){var c=(e||document.documentElement).getBoundingClientRect();a-=c.left,s-=c.top}var l,u,h=Ki(a),p=!h;return p||"svg"===o?u=(l=Ea(n).map((function(t){return parseFloat(t)}))).slice():(u=(l=No?function(t){return Ea(ts(t,":before")).map((function(e,n){var i=or(e);return i.value*function(t,e,n){return"%"===e?Pa(t.ownerSVGElement)[n?"width":"height"]/100:1}(t,i.unit,0===n)}))}(t):Ea(n).map((function(t){return parseFloat(t)}))).slice(),p=!0,"g"===o?(a=0,s=0):(a=(r=function(t,e){if(!t.getBBox)return[0,0];var n=t.getBBox(),i=Pa(t.ownerSVGElement),r=n.x-i.x,o=n.y-i.y;return[r,o,e[0]-r,e[1]-o]}(t,l))[0],s=r[1],l[0]=r[2],l[1]=r[3])),{isSVG:h,hasOffset:p,offset:[a,s],origin:l,targetOrigin:u}}function Ta(t,e,n){var i,r,o,a,s,c,l=t,u=[],h=!1,p=!1,d=3,f=wa(e,e,!0).offsetParent;for(n&&(h=t===e,n.length>10&&(p=!0,d=4),e=t.parentElement);l&&!h;){var g=ts(l),b=l.tagName.toLowerCase(),v=g.position,m="fixed"===v,y=(a=(c=g.transform)&&"none"!==c?Ji(c)?c:rr(c).value.split(/s*,\s*/g).map((function(t){return parseFloat(t)})):[1,0,0,1,0,0],void 0===(s=void 0)&&(s=6===a.length),s?[a[0],a[1],0,a[2],a[3],0,a[4],a[5],1]:a),x=y.length;if(!p&&16===x){p=!0,d=4;for(var C=u.length,S=0;S<C;++S)u[S]=$o(u[S],3,4)}p&&9===x&&(y=$o(y,3,4));var O=ka(l,e,g,m),E=O.hasOffset,w=O.isSVG,k=O.origin,T=O.targetOrigin,_=O.offset,P=_[0],I=_[1];"svg"===b&&o&&u.push(Ia(l,d),sa(d));var M=wa(l,e),z=M.offsetParent,R=M.isEnd;No&&E&&!w&&M.isStatic&&("relative"===v||"static"===v)&&(P-=z.offsetLeft,I-=z.offsetTop,h=h||R);var D=0,N=0;if(E&&f!==z&&(D=z.clientLeft,N=z.clientTop),u.push(Oa(y,d,k),la(E?[P-l.scrollLeft+D,I-l.scrollTop+N]:[l,k],d)),o||(o=y),i||(i=k),r||(r=T),h||m)break;l=z,h=R}return o||(o=sa(d)),i||(i=[0,0]),r||(r=[0,0]),{offsetContainer:f,matrixes:u,targetMatrix:o,transformOrigin:i,targetTransformOrigin:r,is3d:p}}function _a(t,e){return void 0===e&&(e=t.length>9),(e?"matrix3d":"matrix")+"("+(n=t,i=!e,void 0===i&&(i=9===n.length),i?[n[0],n[1],n[3],n[4],n[6],n[7]]:n).join(",")+")";var n,i}function Pa(t){var e=t.viewBox,n=e&&e.baseVal||{x:0,y:0,width:0,height:0};return{x:n.x,y:n.y,width:n.width||t.clientWidth,height:n.height||t.clientHeight}}function Ia(t,e){var n=t.clientWidth,i=t.clientHeight,r=Pa(t),o=r.width,a=r.height,s=n/o,c=i/a,l=t.preserveAspectRatio.baseVal,u=l.align,h=l.meetOrSlice,p=[0,0],d=[s,c],f=[0,0];if(1!==u){var g=(u-2)%3,b=Math.floor((u-2)/3);p[0]=o*g/2,p[1]=a*b/2;var v=2===h?Math.max(c,s):Math.min(s,c);d[0]=v,d[1]=v,f[0]=(n-o)/2*g,f[1]=(i-a)/2*b}var m=ca(d,e);return m[e*(e-1)]=f[0],m[e*(e-1)+1]=f[1],Oa(m,e,p)}function Ma(t,e,n){return ra(t,Jo(e,n),n)}function za(t,e,n,i){return[[0,0],[e,0],[0,n],[e,n]].map((function(e){return Ma(t,e,i)}))}function Ra(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]})),i=Math.min.apply(Math,e),r=Math.min.apply(Math,n),o=Math.max.apply(Math,e),a=Math.max.apply(Math,n);return{left:i,top:r,right:o,bottom:a,width:o-i,height:a-r}}function Da(t,e,n,i){return Ra(za(t,e,n,i))}function Na(t,e,n,i){var r=16===t.length?4:3,o=za(t,n,i,r),a=o[0],s=a[0],c=a[1],l=o[1],u=l[0],h=l[1],p=o[2],d=p[0],f=p[1],g=o[3],b=g[0],v=g[1],m=Ma(t,e,r),y=m[0],x=m[1],C=Math.min(s,u,d,b),S=Math.min(c,h,f,v),O=Math.max(s,u,d,b),E=Math.max(c,h,f,v);y=y-C||0,x=x-S||0;var w=[((s=s-C||0)+(u=u-C||0)+(d=d-C||0)+(b=b-C||0))/4,((c=c-S||0)+(h=h-S||0)+(f=f-S||0)+(v=v-S||0))/4],k=Ko(w,[s,c]),T=Ko(w,[u,h]);return[[C,S,O,E],[y,x],[[s,c],[u,h],[d,f],[b,v]],k<T&&T-k<Math.PI||k>T&&T-k<-Math.PI?1:-1]}function Aa(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function La(t,e){return Aa([e[0]-t[0],e[1]-t[1]])}function Ba(t,e,n){void 0===n&&(n=Ko(t,e));var i=La(t,e);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+n+"rad)",width:i+"px"}}function ja(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=e.length,r=e.reduce((function(t,e){return t+e[0]}),0)/i,o=e.reduce((function(t,e){return t+e[1]}),0)/i;return{transform:"translate("+r+"px, "+o+"px) rotate("+t+"rad)"}}function Ga(t,e,n,i){void 0===e&&(e=window.getComputedStyle(t)),void 0===i&&(i=n||"border-box"===e.boxSizing);var r=t.offsetWidth,o=t.offsetHeight,a=!Ki(r);if((n||i)&&a)return[r,o];if(!a&&"svg"!==t.tagName.toLowerCase()){var s=t.getBBox();return[s.width,s.height]}return r=t.clientWidth,o=t.clientHeight,n||i?[r+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0),o+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)]:[r-(parseFloat(e.paddingLeft)||0)-(parseFloat(e.paddingRight)||0),o-(parseFloat(e.paddingTop)||0)-(parseFloat(e.paddingBottom)||0)]}function Ha(t,e){return Ko(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Fa(t,e,n,i,r,o){var a,s,c,l,u,h=0,p=0,d=0,f=0,g=[0,0],b=[[0,0],[0,0],[0,0],[0,0]],v=Sa(),m=Sa(),y=Sa(),x=Sa(),C=Sa(),S=0,O=0,E=[0,0],w=1,k=1,T=!1,_="",P=[0,0],I={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},M={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},z={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},R=[0,0],D=0,N=o?o.beforeMatrix:void 0,A=o?o.rootMatrix:void 0,L=o?o.is3d?4:3:void 0;if(e){if(o)S=o.width,O=o.height;else{var B=ts(e);O=e.offsetHeight,Ki(S=e.offsetWidth)&&(S=(a=Ga(e,B,!0))[0],O=a[1])}var j;v=(s=function(t,e,n,i,r,o){var a=Ta(t,e,i),s=a.matrixes,c=a.is3d,l=a.targetMatrix,u=a.transformOrigin,h=a.targetTransformOrigin,p=Ta(a.offsetContainer,n,r),d=p.matrixes,f=p.is3d,g=f||c?4:3,b="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,v=e||document.body,m=i?$o(i,o,g):sa(g),y=l,x=r?$o(r,o,g):sa(g),C=i?$o(i,o,g):sa(g),S=sa(g),O=s.length,E=wa(v,v,!0).offsetParent;d.reverse(),s.reverse(),!c&&f&&(y=$o(y,3,4),s.forEach((function(t,e){s[e]=$o(t,3,4)}))),c&&!f&&d.forEach((function(t,e){d[e]=$o(t,3,4)})),r||d.forEach((function(t){x=ta(x,t,g)})),s.forEach((function(t,e){var n;O-2===e&&(C=m.slice()),O-1===e&&(S=m.slice()),Ji(t[g*(g-1)])&&(n=function(t,e,n,i,r,o){for(var a,s=Ga(t,void 0,!0),c=s[0],l=s[1],u=e.getBoundingClientRect(),h=t.getBoundingClientRect(),p=h.left-u.left+e.scrollLeft-(e.clientLeft||0),d=h.top-u.top+e.scrollTop-(e.clientTop||0),f=h.width,g=h.height,b=Zo(n,r,o),v=Da(b,c,l,n),m=v.left,y=v.top,x=v.width,C=v.height,S=Ma(b,i,n),O=ia(S,[m,y]),E=[p+O[0]*f/x,d+O[1]*g/C],w=[0,0],k=0;++k<10;){var T=Qo(r,n);a=ia(Ma(T,E,n),Ma(T,S,n)),w[0]=a[0],w[1]=a[1];var _=Da(Zo(n,r,la(w,n),o),c,l,n),P=_.left-p,I=_.top-d;if(Math.abs(P)<2&&Math.abs(I)<2)break;E[0]-=P,E[1]-=I}return w.map((function(t){return Math.round(t)}))}(t[g*(g-1)],E,g,t[g*(g-1)+1],m,s[e+1]),t[g*(g-1)]=n[0],t[g*(g-1)+1]=n[1]),m=ta(m,t,g)}));var w=!b&&c;y||(y=sa(w?4:3));var k=_a(b&&16===y.length?$o(y,4,3):y,w);return[x=Vo(x,g,g),C,S,m,y,k,u,h,c||f]}(e,n,r,N,A,L))[0],y=s[1],m=s[2],C=s[4],_=s[5],R=s[7],T=s[8],h=(l=(c=Na(x=s[3],E=s[6],S,O))[0])[0],p=l[1],d=l[2],f=l[3],g=c[1],b=c[2],w=c[3],k=(u=Na(m,na(E,function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i];return n[e-1]=0,n}(C,T?4:3)),S,O))[3],P=[(P=u[1])[0]+(j=u[0])[0]-h,P[1]+j[1]-p],I=Xa(e),M=Xa(wa(i,i,!0).offsetParent||document.body,!0),t&&(z=Xa(t)),D=Ha([b[0],b[1]],w)}return{rotation:D,targetClientRect:I,containerClientRect:M,moveableClientRect:z,beforeDirection:k,direction:w,target:e,left:h,top:p,right:d,bottom:f,pos1:b[0],pos2:b[1],pos3:b[2],pos4:b[3],width:S,height:O,rootMatrix:v,beforeMatrix:y,offsetMatrix:m,targetMatrix:C,matrix:x,targetTransform:_,is3d:T,beforeOrigin:P,origin:g,transformOrigin:E,targetOrigin:R}}function Xa(t,e){var n=t.getBoundingClientRect(),i={left:n.left,right:n.right,top:n.top,bottom:n.bottom,width:n.width,height:n.height};return e&&(i.clientLeft=t.clientLeft,i.clientTop=t.clientTop,i.clientWidth=t.clientWidth,i.clientHeight=t.clientHeight,i.scrollWidth=t.scrollWidth,i.scrollHeight=t.scrollHeight),i}function Ua(t){if(t){var e=t.getAttribute("data-direction");if(e){var n=[0,0];return e.indexOf("w")>-1&&(n[0]=-1),e.indexOf("e")>-1&&(n[0]=1),e.indexOf("n")>-1&&(n[1]=-1),e.indexOf("s")>-1&&(n[1]=1),n}}}function Wa(t,e){return[na(e,t[0]),na(e,t[1]),na(e,t[2]),na(e,t[3])]}function Ya(t){return Wa([t.pos1,t.pos2,t.pos3,t.pos4],[t.left,t.top])}function qa(t,e){return e?Math.round(t/e)*e:t}function Va(t,e){return t.forEach((function(n,i){t[i]=qa(t[i],e)})),t}function Qa(t,e){t[e]&&(t[e].unset(),t[e]=null)}function Ka(t,e,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Ja(t,e,n){var i=e.datas;i.datas||(i.datas={});var r=zo({},n,{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,datas:i.datas});return i.isStartEvent?i.lastEvent=r:i.isStartEvent=!0,r}function $a(t,e,n){var i=e.datas,r="isDrag"in n?n.isDrag:e.isDrag;return i.datas||(i.datas={}),zo({isDrag:r},n,{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:i.lastEvent,isDouble:e.isDouble,datas:i.datas})}function Za(t,e,n,i){return i&&fl.prototype.triggerEvent.call(t,e,n),t.triggerEvent(e,n)}function ts(t,e){return window.getComputedStyle(t,e)}function es(t,e,n){var i={},r={};return t.filter((function(t){var o=t.name;if(i[o]||!e.some((function(e){return t[e]})))return!1;if(!n&&t.ableGroup){if(r[t.ableGroup])return!1;r[t.ableGroup]=!0}return i[o]=!0,!0}))}function ns(t,e,n){return t*(e?n:1/n)}function is(t,e,n){return t*(e?1/n:n)}function rs(t,e){return t===e||null==t&&null==e}function os(t,e){var n=[],i=[];return t.forEach((function(r,o){var a=e(r,o,t),s=i.indexOf(a),c=n[s]||[];-1===s&&(i.push(a),n.push(c)),c.push(r)})),n}function as(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function ss(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(e)-Math.abs(t)})),t[0]}function cs(t,e,n){return ra(Qo(t,n),Jo(e,n),n)}function ls(t,e){var n;return n=cs(t.rootMatrix,[e.distX,e.distY],t.is3d?4:3),e.distX=n[0],e.distY=n[1],e}function us(t,e,n,i,r){return ia(Ma(t,na(n,e),r),i)}function hs(t,e,n){return[[e[0],e[0]*t[1]/t[0]],[e[1]*t[0]/t[1],e[1]]].filter((function(t){return t.every((function(t,i){return n?t<=e[i]:t>=e[i]}))}))[0]||t}function ps(t,e){var n=or(t),i=n.value;return"%"===n.unit?i*e/100:i}function ds(t,e,n){return n?t/e*100+"%":t+"px"}function fs(t,e,n,i,r){var o=t[n],a=o.direction,s=o.pos,c=o.vertical,l=o.sub,u=[i*Math.abs(o.horizontal),r*Math.abs(c)];a&&!l?a.split("").forEach((function(n){var i="n"===n||"s"===n;t.forEach((function(t,r){var o=t.direction,a=t.horizontal,s=t.vertical,c=t.pos;o&&-1!==o.indexOf(n)&&(e[r]=na(c,[i||!a?0:u[0],i&&s?u[1]:0]))}))})):e[n]=na(s,u)}function gs(t,e){var n=e.datas,i=t.state,r=i.moveableClientRect,o=i.pos1,a=ia(cs(i.rootMatrix,[e.clientX-r.left,e.clientY-r.top],i.is3d?4:3),o),s=pa({datas:n,distX:a[0],distY:a[1]});return[s[0],s[1]]}function bs(t){return Math.abs(t)<=1e-7?0:t}function vs(t,e,n,i,r,o,a){var s="Start"===r;if(!t.state.target||s&&i.indexOf("Control")>-1&&!o.isRequest&&t.areaElement===o.inputEvent.target)return!1;var c=""+n+i+r,l=""+n+i+"Condition",u="End"===r,h=r.indexOf("After")>-1,p=s&&(!t.targetDragger||!t.controlDragger||!t.targetDragger.isFlag()||!t.controlDragger.isFlag());p&&t.updateRect(r,!0,!1),""!==r||h||ls(t.state,o);var d=i.indexOf("Group")>-1,f=t[e].slice();if(o.isRequest){var g=o.requestAble;f.some((function(t){return t.name===g}))||f.push.apply(f,t.props.ables.filter((function(t){return t.name===g})))}if(!f.length)return!1;var b=f.filter((function(t){return t[c]})),v=o.datas,m=v.render||(v.render={}),y=zo({},o,{datas:m,originalDatas:v});p&&b.forEach((function(e){e.unset&&e.unset(t)}));var x=b.filter((function(e){var n=s&&e[l],i=e.name,r=v[i]||(v[i]={});return!(n&&!e[l](o,t))&&e[c](t,zo({},o,{datas:r,originalDatas:v}))})),C=x.length;if(s){if(b.length&&!C)return t.state.dragger=null,t.moveables&&t.moveables.forEach((function(t){t.state.dragger=null})),!1;!function(t,e,n){var i=Ja(t,n,{isPinch:!!n.isPinch}),r=e?"Group":"";e&&(i.targets=t.props.targets),Za(t,"onRender"+r+"Start",i)}(t,d,y)}else u?function(t,e,n){var i=Ja(t,n,{isPinch:!!n.sPinch,isDrag:n.isDrag}),r=e?"Group":"";e&&(i.targets=t.props.targets),Za(t,"onRender"+r+"End",i)}(t,d,y):h&&!C||function(t,e,n){var i=Ja(t,n,{isPinch:!!n.isPinch}),r=e?"Group":"";e&&(i.targets=t.props.targets),Za(t,"onRender"+r,i)}(t,d,y);if(u&&(t.state.dragger=null),t.isUnmounted)return!1;(!s&&C&&!a||u)&&(x.some((function(t){return t.updateRect}))&&!d?t.updateRect(r,!1,!1):t.updateRect(r,!0,!1),t.forceUpdate()),s||u||h||!C||vs(t,e,n,i,r+"After",o)}function ms(t,e,n){var i=t.controlBox.getElement(),r=[];r.push(i),t.props.dragArea||r.push(e);var o=function(e){var n=e.inputEvent.target;return n===t.areaElement||!t.isMoveableElement(n)||n.className.indexOf("moveable-area")>-1||n.className.indexOf("moveable-padding")>-1};return ys(t,r,"targetAbles",n,{dragstart:o,pinchstart:o})}function ys(t,e,n,i,r){void 0===r&&(r={});var o=t.props,a={container:window,pinchThreshold:o.pinchThreshold,pinchOutside:o.pinchOutside};return["drag","pinch"].forEach((function(e){["Start","","End"].forEach((function(o){var s=""+e+o.toLowerCase();a[s]=function(a){return!(r[s]&&!r[s](a))&&vs(t,n,e,i,o,a)}}))})),new Co(e,a)}var xs={name:"pinchable",updateRect:!0,props:{pinchable:Boolean},events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},pinchStart:function(t,e){var n=e.datas,i=e.targets,r=e.angle,o=t.props,a=o.pinchable;if(!a)return!1;var s="onPinch"+(i?"Group":"")+"Start",c="drag"+(i?"Group":"")+"ControlStart",l=(!0===a?t.controlAbles:o.ables.filter((function(t){return a.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[c]})),u=Ja(t,e,{});i&&(u.targets=i);var h=Za(t,s,u);n.isPinch=!1!==h,n.ables=l;var p=n.isPinch;return!!p&&(l.forEach((function(i){if(n[i.name+"Datas"]={},i[c]){var o=zo({},e,{datas:n[i.name+"Datas"],parentRotate:r,isPinch:!0});i[c](t,o)}})),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p)},pinch:function(t,e){var n=e.datas,i=e.inputEvent,r=e.targets,o=e.angle;if(n.isPinch){var a=e.distance*(1-1/e.scale),s=Ja(t,e,{});r&&(s.targets=r),Za(t,"onPinch"+(r?"Group":""),s);var c="drag"+(r?"Group":"")+"Control";return n.ables.forEach((function(r){r[c]&&r[c](t,zo({},e,{datas:n[r.name+"Datas"],inputEvent:i,parentDistance:a,parentRotate:o,isPinch:!0}))})),s}},pinchEnd:function(t,e){var n=e.datas,i=e.isPinch,r=e.inputEvent,o=e.targets;if(n.isPinch){var a="onPinch"+(o?"Group":"")+"End",s=$a(t,e,{isDrag:i});o&&(s.targets=o),Za(t,a,s);var c="drag"+(o?"Group":"")+"ControlEnd";return n.ables.forEach((function(o){o[c]&&o[c](t,zo({},e,{isDrag:i,datas:n[o.name+"Datas"],inputEvent:r,isPinch:!0}))})),i}},pinchGroupStart:function(t,e){return this.pinchStart(t,zo({},e,{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,zo({},e,{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,zo({},e,{targets:t.props.targets}))}};function Cs(t,e,n,i,r){var o=t.dragger.move(e,n),a=o.originalDatas||o.datas,s=a.draggable||(a.draggable={});return zo({},r?ls(t,o):o,{isDrag:!0,isPinch:!!i,parentEvent:!0,datas:s})}var Ss=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var e=t.prototype;return e.dragStart=function(t,e){return this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},zo({},this.move(t,e),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var n,i;return this.isFlag?(n=this.prevX+t[0],i=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],i=t[1],this.isFlag=!0),this.prevX=n,this.prevY=i,{type:"drag",clientX:n,clientY:i,inputEvent:e,isDrag:this.isDrag,distX:n-this.startX,distY:i-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentDragger:this}},t}();function Os(t,e,n,i,r,o){var a=!!n.match(/Start$/g),s=!!n.match(/End$/g),c=r.inputEvent,l=r.isPinch,u=r.datas,h=t.moveables.map((function(t,r){var h={};a?h=(new Ss).dragStart(i,c):(t.state.dragger||(t.state.dragger=u.childDraggers[r]),h=Cs(t.state,i,c,l,o));var p=e[n](t,zo({},h,{parentFlag:!0}));return s&&(t.state.dragger=null),p}));return a&&(u.childDraggers=t.moveables.map((function(t){return t.state.dragger}))),h}function Es(t,e,n,i,r,o){var a=e.name,s=i[a]||(i[a]=[]),c=!!n.match(/End$/g);return t.moveables.map((function(t,i){var a=s[i]||(s[i]={}),l="function"==typeof r?r(t,a):r,u=e[n](t,zo({},l,{datas:a,parentFlag:!0}));return u&&o&&o(t,a,u,i),c&&(t.state.dragger=null),u}))}function ws(t){return t.isRequest?("resizable"===t.requestAble||"scalable"===t.requestAble)&&t.parentDirection:ur(t.inputEvent.target,Ca("direction"))}function ks(t,e,n,i,r,o){var a=r[0],s=r[1],c=o[0],l=o[1],u=[],h=i?0:1,p="vertical"===e?"horizontal":"vertical",d=os(t.filter((function(t){return t.type===e})),(function(t){return t.element})).map((function(t){return t[0]})).filter((function(t){var e=t.pos;return e[h]<=l&&c<=e[h]+t.sizes[h]}));return d.forEach((function(t){var e=t.pos[i],r=e+t.sizes[i];d.forEach((function(t){var o=t.pos,c=t.sizes,l=t.element,h=o[i],f=h+c[i],g=0,b=0,v=!0;if(r<=h)a<(g=f-(b=r-h))-n&&(v=!1);else{if(!(f<=e))return;s>(g=h-(b=e-f))+n&&(v=!1)}if(v&&u.push({pos:"vertical"===p?[g,o[1]]:[o[0],g],element:l,sizes:c,size:0,type:p,gap:b,gapGuidelines:d}),r<=a&&s<=h){var m=(h+r-(s-a))/2;qa(a-(m-n),.1)>=0&&u.push({pos:"vertical"===p?[m,o[1]]:[o[0],m],element:l,sizes:c,size:0,type:p,gap:r-a,gapGuidelines:d})}}))})),u}function Ts(t,e,n,i,r){var o=function(t){var e=t.state,n=e.guidelines,i=e.containerClientRect,r=i.scrollHeight,o=i.scrollWidth,a=t.props,s=a.snapHorizontal,c=void 0===s||s,l=a.snapVertical,u=void 0===l||l,h=a.snapGap,p=void 0===h||h,d=a.verticalGuidelines,f=a.horizontalGuidelines,g=a.snapThreshold,b=void 0===g?5:g,v=n.slice();if(p){var m=Ra(Ya(t.state)),y=m.top,x=m.left,C=m.bottom,S=m.right,O=n.filter((function(t){return t.element}));v.push.apply(v,ks(O,"horizontal",b,0,[x,S],[y,C]).concat(ks(O,"vertical",b,1,[y,C],[x,S])))}return c&&f&&f.forEach((function(t){v.push({type:"horizontal",pos:[0,qa(t,.1)],size:o})})),u&&d&&d.forEach((function(t){v.push({type:"vertical",pos:[qa(t,.1),0],size:r})})),v}(t),a=t.props,s=a.snapElement,c=void 0===s||s,l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,i=0;i<n;++i){var r=t[i];if(!Ki(r))return r}return t[n]}(r,a.snapThreshold,5);return{vertical:Ps(o,"vertical",e,l,i,c),horizontal:Ps(o,"horizontal",n,l,i,c)}}function _s(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],i=n.guidelineInfos[0];return{isSnap:e,offset:i.offset,dist:i.dist,pos:n.pos,guideline:i.guideline}}function Ps(t,e,n,i,r,o){if(!t||!t.length)return{isSnap:!1,posInfos:[]};var a="vertical"===e?0:1,s=n.map((function(n){var s=t.map((function(t){var e=n-t.pos[a];return{offset:e,dist:Math.abs(e),guideline:t}})).filter((function(t){var n=t.guideline;return!(!o&&n.element||!r&&n.center||n.type!==e||t.dist>i)})).sort((function(t,e){return t.dist-e.dist}));return{pos:n,guidelineInfos:s}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist}));return{isSnap:s.length>0,posInfos:s}}function Is(t,e){return t.slice().sort((function(t,n){var i=t.sign[e],r=n.sign[e],o=n.offset[e],a=Math.abs(t.offset[e]),s=Math.abs(o);return i?r?t.isBound&&n.isBound?s-a:t.isBound?-1:n.isBound?1:t.isSnap&&n.isSnap?a-s:t.isSnap?-1:n.isSnap||a<1e-7?1:s<1e-7?-1:a-s:-1:1}))[0]}function Ms(t,e){var n=ea(e[0][0],e[1][0]),i=ea(e[0][1],e[1][1]);return{vertical:n<=t[0],horizontal:i<=t[1]}}function zs(t,e){var n,i,r=e[0],o=e[1],a=o[0]-r[0],s=o[1]-r[1];return Math.abs(a)<1e-7&&(a=0),Math.abs(s)<1e-7&&(s=0),a?s?(n=s/a*(t[0]-r[0])+r[1],i=t[1]):(n=r[1],i=t[1]):(n=r[0],i=t[0]),n-i}function Rs(t,e,n){void 0===n&&(n=1e-7);var i=zs(t[0],e)<=0;return t.slice(1).every((function(t){var r=zs(t,e);return r<=0===i||Math.abs(r)<=n}))}function Ds(t,e,n,i,r){return void 0===r&&(r=0),i&&e-r<=t||!i&&t<=n+r?{isBound:!0,offset:i?e-t:n-t}:{isBound:!1,offset:0}}function Ns(t,e,n,i,r){var o,a=t[0],s=t[1],c=e[0],l=e[1],u=bs(s[1]-a[1]),h=bs(s[0]-a[0]),p=bs(l[1]-c[1]);if(!bs(l[0]-c[0])){if(r&&!u)return{isBound:!1,offset:0};if(h)return Ds(u/h*(c[0]-a[0])+a[1],c[1],l[1],n,i);var d=c[0]-a[0];return{isBound:o=Math.abs(d)<=(i||0),offset:o?d:0}}return p||r&&!h?{isBound:!1,offset:0}:u?Ds((c[1]-a[1])/(u/h)+a[0],c[0],l[0],n,i):(d=c[1]-a[1],{isBound:o=Math.abs(d)<=(i||0),offset:o?d:0})}function As(t,e,n,i){return e.map((function(e){var r=e[0],o=function(t,e,n){var i=t.props.innerBounds;if(!i)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var r=i.left,o=i.top,a=i.width,s=i.height,c=[[r,o],[r,o+s]],l=[[r,o],[r+a,o]],u=[[r+a,o],[r+a,o+s]],h=[[r,o+s],[r+a,o+s]],p=Ms(n,e),d=p.horizontal,f=p.vertical;if(Rs([n,[r,o],[r+a,o],[r,o+s],[r+a,o+s]],e))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Ns(e,l,f),b=Ns(e,h,f),v=Ns(e,c,d),m=Ns(e,u,d),y=g.isBound&&b.isBound,x=g.isBound||b.isBound,C=v.isBound&&m.isBound,S=v.isBound||m.isBound,O=ss(g.offset,b.offset),E=ss(v.offset,m.offset),w=[0,0],k=!1,T=!1;return Math.abs(E)<Math.abs(O)?(w=[O,0],k=x,T=y):(w=[0,E],k=S,T=C),{isAllBound:T,isVerticalBound:x,isHorizontalBound:S,isBound:k,offset:w}}(t,[e[1],e[2]],n),a=o.isBound,s=o.offset,c=o.isVerticalBound,l=o.isHorizontalBound,u=pa({datas:i,distX:s[0],distY:s[1]}).map((function(t,e){return t*(r[e]?2/r[e]:0)}));return{sign:r,isBound:a,isVerticalBound:c,isHorizontalBound:l,isSnap:!1,offset:u}}))}function Ls(t,e,n){return function(t,e){var n=[],i=t[0],r=t[1];return i&&r?n.push([[0,2*r],t,[-i,r]],[[2*i,0],t,[i,-r]]):i?(n.push([[2*i,0],[i,1],[i,-1]]),e&&n.push([[0,-1],[i,-1],[-i,-1]],[[0,1],[i,1],[-i,1]])):r?(n.push([[0,2*r],[1,r],[-1,r]]),e&&n.push([[-1,0],[-1,r],[-1,-r]],[[1,0],[1,r],[1,-r]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}(e,n).map((function(e){var n=e[2];return[e[0],ga(t,e[1]),ga(t,n)]}))}function Bs(t,e,n,i){var r=i?t.map((function(t){return oa(t,i)})):t,o=[n].concat(e);return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].some((function(t,e){return!Rs(o,t)}))}function js(t,e,n){var i=t.props.bounds||{},r=i.left,o=i.top,a=i.right,s=i.bottom,c={left:void 0===r?-1/0:r,top:void 0===o?-1/0:o,right:void 0===a?1/0:a,bottom:void 0===s?1/0:s};return{vertical:Gs(c,e,!0),horizontal:Gs(c,n,!1)}}function Gs(t,e,n){var i=t[n?"left":"top"],r=t[n?"right":"bottom"],o=Math.min.apply(Math,e),a=Math.max.apply(Math,e);return i+1>o?{isBound:!0,offset:o-i,pos:i}:r-1<a?{isBound:!0,offset:a-r,pos:r}:{isBound:!1,offset:0,pos:0}}function Hs(t,e,n){return(n?t.map((function(t){return oa(t,n)})):t).some((function(t){return t[0]<e.left&&Math.abs(t[0]-e.left)>.1||t[0]>e.right&&Math.abs(t[0]-e.right)>.1||t[1]<e.top&&Math.abs(t[1]-e.top)>.1||t[1]>e.bottom&&Math.abs(t[1]-e.bottom)>.1}))}function Fs(t,e,n){var i=Ma(t,[e.clientLeft,e.clientTop],n);return[e.left+i[0],e.top+i[1]]}function Xs(t){var e=t.state;if(!e.guidelines||!e.guidelines.length){var n=t.props,i=n.horizontalGuidelines,r=n.verticalGuidelines,o=n.elementGuidelines,a=void 0===o?[]:o,s=n.snapCenter;if(n.innerBounds||n.bounds||(void 0===i?[]:i).length||(void 0===r?[]:r).length||a.length){var c=e.targetClientRect,l=c.top,u=c.left,h=e.rootMatrix,p=e.is3d?4:3,d=Fs(h,e.containerClientRect,p),f=d[0],g=d[1],b=Ya(e),v=ia([Math.min.apply(Math,b.map((function(t){return t[0]}))),Math.min.apply(Math,b.map((function(t){return t[1]})))],cs(h,[u-f,l-g],p)).map((function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e})),m=v[0],y=v[1],x=[];a.forEach((function(t){var e=t.getBoundingClientRect(),n=e.left-f,i=e.top-g,r=i+e.height,o=n+e.width,a=cs(h,[n,i],p),c=a[0],l=a[1],u=cs(h,[o,r],p),d=u[0],b=u[1],v=d-c,C=b-l,S=[v,C];x.push({type:"vertical",element:t,pos:[qa(c+m,.1),l],size:C,sizes:S}),x.push({type:"vertical",element:t,pos:[qa(d+m,.1),l],size:C,sizes:S}),x.push({type:"horizontal",element:t,pos:[c,qa(l+y,.1)],size:v,sizes:S}),x.push({type:"horizontal",element:t,pos:[c,qa(b+y,.1)],size:v,sizes:S}),s&&(x.push({type:"vertical",element:t,pos:[qa((c+d)/2+m,.1),l],size:C,sizes:S,center:!0}),x.push({type:"horizontal",element:t,pos:[c,qa((l+b)/2+y,.1)],size:v,sizes:S,center:!0}))})),e.guidelines=x,e.enableSnap=!0}}}function Us(t,e){var n=t.props,i=n.snappable,r=n.bounds,o=n.innerBounds,a=n.verticalGuidelines,s=n.horizontalGuidelines,c=t.state,l=c.guidelines;return!(!i||!c.enableSnap||e&&!0!==i&&i.indexOf(e)<0||!(r||o||l&&l.length||a&&a.length||s&&s.length))}function Ws(t,e,n,i,r){var o=function(t,e,n,i){var r=e[0]-t[0],o=e[1]-t[1];if(Math.abs(r)<1e-7&&(r=0),Math.abs(o)<1e-7&&(o=0),!r)return i?[0,0]:[0,n];if(!o)return i?[n,0]:[0,0];var a=o/r,s=t[1]-a*t[0];return i?[n,a*(e[0]+n)+s-e[1]]:[(e[1]+n-s)/a-e[0],n]}(t,e,n,i);if(!o)return[0,0];var a=pa({datas:r,distX:o[0],distY:o[1]});return[a[0],a[1]]}function Ys(t,e,n,i,r,o){var a=za(t,e,n,o?4:3);return Wa(a,ia(i,ba(a,r)))}function qs(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Vs(t,e){return t.isBound?t.offset:e.isSnap?_s(e).offset:0}function Qs(t,e,n,i){void 0===i&&(i=n);var r=js(t,i.map((function(t){return t[0]})),i.map((function(t){return t[1]}))),o=r.horizontal,a=r.vertical,s=e?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Ts(t,n.map((function(t){return t[0]})),n.map((function(t){return t[1]}))),c=s.horizontal,l=s.vertical,u=Vs(o,c),h=Vs(a,l),p=Math.abs(u),d=Math.abs(h);return{horizontal:{isBound:o.isBound,isSnap:c.isSnap,offset:u,dist:p},vertical:{isBound:a.isBound,isSnap:l.isSnap,offset:h,dist:d}}}function Ks(t){return t?t/Math.abs(t):0}function Js(t,e,n,i,r,o){var a=function(t,e){var n=[],i=[-t[0],-t[1]];return t[0]&&t[1]?(n.push([i,[t[0],-t[1]]],[i,[-t[0],t[1]]]),e&&n.push([i,t])):t[0]?e?n.push([i,[i[0],-1]],[i,[i[0],1]],[i,[t[0],-1]],[i,t],[i,[t[0],1]]):n.push([[i[0],-1],[t[0],-1]],[[i[0],0],[t[0],0]],[[i[0],1],[t[0],1]]):t[1]?e?n.push([i,[-1,i[1]]],[i,[1,i[1]]],[i,[-1,t[1]]],[i,[1,t[1]]],[i,t]):n.push([[-1,i[1]],[-1,t[1]]],[[0,i[1]],[0,t[1]]],[[1,i[1]],[1,t[1]]]):n.push([i,[1,0]],[i,[-1,0]],[i,[0,-1]],[i,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),n}(n,i),s=Ls(e,n,i),c=function(t,e,n,i,r,o){return n.map((function(n){var a=n[0],s=n[1],c=ga(e,a),l=ga(e,s),u=i?function(t,e,n,i){var r=function(t,e,n){var i=t.props.bounds||{},r=i.left,o=void 0===r?-1/0:r,a=i.top,s=void 0===a?-1/0:a,c=i.right,l=void 0===c?1/0:c,u=i.bottom,h=void 0===u?1/0:u,p=n[0],d=n[1],f=ia(n,e),g=f[0],b=f[1];Math.abs(g)<1e-7&&(g=0),Math.abs(b)<1e-7&&(b=0);var v=b>0,m=g>0,y={isBound:!1,offset:0,pos:0},x={isBound:!1,offset:0,pos:0};if(0===g&&0===b)return{vertical:y,horizontal:x};if(0===g)v?h<d&&(x.pos=h,x.offset=d-h):s>d&&(x.pos=s,x.offset=d-s);else if(0===b)m?l<p&&(y.pos=l,y.offset=p-l):o>p&&(y.pos=o,y.offset=p-o);else{var C=b/g,S=n[1]-C*p,O=0,E=0,w=!1;m&&l<=p?(O=C*l+S,E=l,w=!0):!m&&p<=o&&(O=C*o+S,E=o,w=!0),w&&(O<s||O>h)&&(w=!1),w||(v&&h<=d?(E=((O=h)-S)/C,w=!0):!v&&d<=s&&(E=((O=s)-S)/C,w=!0)),w&&(y.isBound=!0,y.pos=E,y.offset=p-E,x.isBound=!0,x.pos=O,x.offset=d-O)}return{vertical:y,horizontal:x}}(t,e,n),o=r.horizontal,a=r.vertical,s=i?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,n){var i=n[0],r=n[1],o=e[0],a=e[1],s=ia(n,e),c=s[0],l=s[1],u=l>0,h=c>0;c=bs(c),l=bs(l);var p={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===c&&0===l)return{vertical:p,horizontal:d};var f=Ts(t,c?[i]:[],l?[r]:[]),g=f.vertical,b=f.horizontal;g.posInfos.filter((function(t){var e=t.pos;return h?e>=o:e<=o})),b.posInfos.filter((function(t){var e=t.pos;return u?e>=a:e<=a})),g.isSnap=g.posInfos.length>0,b.isSnap=b.posInfos.length>0;var v=_s(g),m=v.isSnap,y=v.guideline,x=_s(b),C=x.isSnap,S=x.guideline,O=C?S.pos[1]:0,E=m?y.pos[0]:0;if(0===c)C&&(d.isSnap=!0,d.pos=S.pos[1],d.offset=r-d.pos);else if(0===l)m&&(p.isSnap=!0,p.pos=E,p.offset=i-E);else{var w=l/c,k=n[1]-w*i,T=0,_=0,P=!1;m?(T=w*(_=E)+k,P=!0):C&&(_=((T=O)-k)/w,P=!0),P&&(p.isSnap=!0,p.pos=_,p.offset=i-_,d.isSnap=!0,d.pos=T,d.offset=r-T)}return{vertical:p,horizontal:d}}(t,e,n),c=s.horizontal,l=s.vertical,u=qs(o,c),h=qs(a,l),p=Math.abs(u),d=Math.abs(h);return{horizontal:{isBound:o.isBound,isSnap:c.isSnap,offset:u,dist:p},vertical:{isBound:a.isBound,isSnap:l.isSnap,offset:h,dist:d}}}(t,c,l,r):Qs(t,r,[l]),h=u.horizontal,p=h.dist,d=h.offset,f=h.isBound,g=h.isSnap,b=u.vertical,v=b.dist,m=b.offset,y=b.isBound,x=b.isSnap,C=ia(s,a);if(!m&&!d)return{isBound:y||f,isSnap:x||g,sign:C,offset:[0,0]};var S=p<v,O=Ws(c,l,-(S?m:d),S,o).map((function(t,e){return t*(C[e]?2/C[e]:0)}));return{sign:C,isBound:S?y:f,isSnap:S?x:g,offset:O}}))}(t,e,a,i,r,o).concat(As(t,s,ga(e,[0,0]),o)),l=Is(c,0),u=Is(c,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:u.isBound,offset:u.offset[1]}}}function $s(t,e,n,i,r,o,a,s){for(var c=Ya(t.state),l=t.props.keepRatio,u=0,h=0,p=0;p<2;++p){var d=Js(t,e(u,h),r,l,a,s),f=d.width,g=d.height,b=f.isBound,v=g.isBound,m=f.offset,y=g.offset;if(1===p&&(b||(m=0),v||(y=0)),0===p&&a&&!b&&!v)return[0,0];if(l){var x=Math.abs(m)*(n?1/n:1),C=Math.abs(y)*(i?1/i:1);(b&&v?x<C:v||!b&&x<C)?m=n*y/i:y=i*m/n}u+=m,h+=y}if(r[0]&&r[1]){var S=function(t,e,n,i,r){var o=[-n[0],-n[1]],a=t.state,s=a.width,c=a.height,l=t.props.bounds,u=1/0,h=1/0;if(l){var p=l.left,d=void 0===p?-1/0:p,f=l.top,g=void 0===f?-1/0:f,b=l.right,v=void 0===b?1/0:b,m=l.bottom,y=void 0===m?1/0:m;[[n[0],-n[1]],[-n[0],n[1]]].forEach((function(t){var n=t[0]!==o[0],a=t[1]!==o[1],l=ga(e,t),p=Ks(t[1]-o[1]),f=Ks(t[0]-o[0]),b=360*Ko(i,l)/Math.PI;if(a){var m=l.slice();(Math.abs(b-360)<2||Math.abs(b-180)<2)&&(m[1]=i[1]);var x=Ws(i,m,(i[1]<l[1]?y:g)-l[1],!1,r)[1];isNaN(x)||(h=c+p*x)}if(n){m=l.slice(),(Math.abs(b-90)<2||Math.abs(b-270)<2)&&(m[0]=i[0]);var C=Ws(i,m,(i[0]<l[0]?v:d)-l[0],!0,r)[0];isNaN(C)||(u=s+f*C)}}))}return{maxWidth:u,maxHeight:h}}(t,c,r,o,s),O=S.maxWidth,E=S.maxHeight,w=function(t,e,n,i,r,o,a,s,c){var l=Qs(t,s,[ga(e,a)]),u=l.horizontal.offset,h=l.vertical.offset;if(h||u){var p=pa({datas:c,distX:-h,distY:-u}),d=p[1];return[Math.min(r||1/0,n+a[0]*p[0])-n,Math.min(o||1/0,i+a[1]*d)-i]}return[0,0]}(t,e(u,h),n+u,i+h,O,E,r,a,s);u+=m=w[0],h+=y=w[1]}return[u,h]}function Zs(t,e,n,i){if(!Us(t,"rotatable"))return i;var r=i*Math.PI/180,o=[e.pos1,e.pos2,e.pos3,e.pos4].map((function(t){return ia(t,n)})),a=o.map((function(t){return oa(t,r)})),s=function(t,e,n,i,r){var o=t.props.bounds,a=r*Math.PI/180;if(!o)return[];var s=o.left,c=o.top,l=o.right,u=o.bottom,h=(void 0===s?-1/0:s)-i[0],p=(void 0===l?1/0:l)-i[0],d=(void 0===c?-1/0:c)-i[1],f=(void 0===u?1/0:u)-i[1],g={left:h,top:d,right:p,bottom:f};if(!Hs(n,g,0))return[];var b=[];return[[h,0],[p,0],[d,1],[f,1]].forEach((function(t,i){var r=t[0],o=t[1];n.forEach((function(t){var n=Ko([0,0],t);b.push.apply(b,function(t,e,n){var i=Aa(t),r=Math.sqrt(i*i-e*e)||0;return[r,-r].sort((function(e,i){return Math.abs(e-t[n?0:1])-Math.abs(i-t[n?0:1])})).map((function(t){return Ko([0,0],n?[t,e]:[e,t])}))}(t,r,o).map((function(t){return a+t-n})).filter((function(t){return!Hs(e,g,t)})).map((function(t){return qa(180*t/Math.PI,1e-7)})))}))})),b}(t,o,a,n,i).concat(function(t,e,n,i,r){var o=t.props.innerBounds,a=r*Math.PI/180;if(!o)return[];var s=o.left,c=o.top,l=s-i[0],u=s+o.width-i[0],h=c-i[1],p=c+o.height-i[1],d=[[l,h],[u,h],[l,p],[u,p]],f=ga(n,[0,0]);if(!Bs(n,d,f,0))return[];var g=[],b=d.map((function(t){return[Aa(t),Ko([0,0],t)]}));return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach((function(t){var n=Ko([0,0],function(t){var e=t[0],n=t[1],i=n[0]-e[0],r=n[1]-e[1];if(!i)return[e[0],0];if(!r)return[0,e[1]];var o=r/i,a=-o*e[0]+e[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),i=function(t){var e=t[0],n=t[1],i=n[0]-e[0],r=n[1]-e[1];if(!i)return Math.abs(e[0]);if(!r)return Math.abs(e[1]);var o=r/i;return Math.abs((-o*e[0]+e[1])/Math.sqrt(Math.pow(o,2)+1))}(t);g.push.apply(g,b.filter((function(t){var e=t[0];return e&&i<=e})).map((function(t){var e=t[0],r=t[1],o=Math.acos(e?i/e:0);return[a+(r+o)-n,a+(r-o)-n]})).reduce((function(t,e){return t.push.apply(t,e),t}),[]).filter((function(t){return!Bs(e,d,f,t)})).map((function(t){return qa(180*t/Math.PI,1e-7)})))})),g}(t,o,a,n,i));return s.sort((function(t,e){return Math.abs(t-i)-Math.abs(e-i)})),s.length?s[0]:i}function tc(t){var e=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(t){var n=t.guideline;e.indexOf(n)>-1||e.push(n)}))})),e}function ec(t,e,n,i){var r=t-n,o=r<0?r+e:i;return{size:(r<0?0:r)-o,pos:o}}function nc(t,e,n,i){var r=[],o=os(t.filter((function(t){return t.element&&!t.gap})),(function(t){var n=t.element,o=t.pos,a=o[i],s=(Math.min(0,a-e)<0?-1:1)+"_"+o[i?0:1],c=function(t,e,i){var r=lr(t,(function(t){return n===t[0]&&a===t[1]}));return r>-1?t[r]:void 0}(r);return c?c[2]:(r.push([n,a,s]),s)}));return o.forEach((function(t){t.sort((function(t,r){return ec(t.pos[i],t.size,e,n).size-ec(r.pos[i],t.size,e,n).size||t.pos[i?0:1]-r.pos[i?0:1]}))})),o}function ic(t,e,n,i,r,o,a,s,c,l,u,h){var p=e[0],d=e[1],f=e[2],g=e[3];return as(t.map((function(t,e){var b=!0;return t.map((function(t,v){var m,y=t.pos,x=ec(y[l],t.size,i,r),C=x.pos,S=x.size;if(S<a)return null;var O=b;b=!1;var E=s&&O?parseFloat(S.toFixed(c)):0;return h.createElement("div",{className:Ca("line",p,"guideline","dashed"),"data-size":E>0?u(E):"",key:p+"LinkGuidline"+e+"-"+v,style:(m={},m[d]=n+C+"px",m[f]=-o+y[l?0:1]+"px",m[g]=S+"px",m)})}))})))}function rc(t,e,n,i,r,o){var a=e[0],s=e[1],c=e[2],l=e[3];return t.map((function(t,e){var u,h=t.pos;return o.createElement("div",{className:Ca("line",a,"guideline","target","bold",t.type),key:a+"TargetGuidline"+e,style:(u={},u[s]=n+"px",u[c]=-i+h+"px",u[l]=r+"px",u)})}))}function oc(t,e,n,i,r,o){var a=e[0],s=e[1],c=e[2],l=e[3];return t.map((function(t,e){var u,h=t.pos,p=t.size;return o.createElement("div",{className:Ca("line",a,"guideline",t.element?"bold":""),key:a+"Guidline"+e,style:(u={},u[s]=-n+h[r]+"px",u[c]=-i+h[r?0:1]+"px",u[l]=p+"px",u)})}))}function ac(t,e,n,i){var r=t.filter((function(t){return t.element&&t.gap&&t.type===e})),o="vertical"===e?[0,1]:[1,0],a=o[0],s=o[1];return as(r.map((function(t,e){var r=t.pos,o=t.gap,c=t.gapGuidelines,l=t.sizes,u=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(t)-Math.abs(e)})),t[0]}(r[s]+l[s]-n[s],r[s]-n[s]-i[s]),h=Math.min(l[s],i[s]);u>0&&u>h?u=2*(u-h/2):u<0&&u<-h&&(u=2*(u+h/2));var p=(u>0?0:i[s])+u/2;return function(t,e,n,i,r,o,a){var s=Math.abs(o),c=r[e]+(o>0?i[0]:0);return t.filter((function(t){return t.pos[e]<=n[e]})).sort((function(t,n){return n.pos[e]-t.pos[e]})).filter((function(t){var n=t.pos[e];return qa(n+t.sizes[e],1e-4)===qa(c-s,1e-4)&&(c=n,!0)})).map((function(t){var i=-n[e]+t.pos[e]+t.sizes[e];return zo({},t,{gap:o,renderPos:e?[a,i]:[i,a]})}))}(c,a,n,i,r,o,p).concat(function(t,e,n,i,r,o,a){var s=Math.abs(o),c=r[e]+(o<0?i[e]:0);return t.filter((function(t){return t.pos[e]>n[e]})).sort((function(t,n){return t.pos[e]-n.pos[e]})).filter((function(t){var n=t.sizes,i=t.pos[e];return qa(i,1e-4)===qa(c+s,1e-4)&&(c=i+n[e],!0)})).map((function(t){var i=-n[e]+t.pos[e]-s;return zo({},t,{gap:o,renderPos:e?[a,i]:[i,a]})}))}(c,a,n,i,r,o,p))})))}function sc(t,e,n,i,r,o){var a=i[0],s=i[1],c=i[2],l=i[3],u=t.props,h=u.snapDigit,p=void 0===h?0:h,d=u.isDisplaySnapDigit,f=void 0===d||d,g="vertical"===n?"horizontal":"vertical",b="vertical"===n?[0,1]:[1,0],v=b[0],m=b[1];return e.map((function(t,e){var n,i=t.renderPos,u=Math.abs(t.gap),h=f?parseFloat(u.toFixed(p)):0;return o.createElement("div",{className:Ca("line",a,"guideline","gap"),"data-size":h>0?r(h):"",key:g+"GapGuideline"+e,style:(n={},n[s]=i[v]+"px",n[c]=i[m]+"px",n[l]=u+"px",n)})}))}var cc={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 1;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,e){var n=t.state,i=n.top,r=n.left,o=n.pos1,a=n.pos2,s=n.pos3,c=n.pos4,l=n.snapRenderInfo,u=n.targetClientRect,h=n.containerClientRect,p=n.is3d,d=n.rootMatrix;if(!l||!Us(t,""))return[];var f=p?4:3,g=Math.min(o[0],a[0],s[0],c[0]),b=Math.min(o[1],a[1],s[1],c[1]),v=Fs(d,h,f),m=cs(d,[u.left-v[0],u.top-v[1]],f),y=m[0],x=m[1],C=t.props,S=C.snapThreshold,O=void 0===S?5:S,E=C.snapDigit,w=void 0===E?0:E,k=C.isDisplaySnapDigit,T=void 0===k||k,_=C.snapDistFormat,P=void 0===_?function(t){return t}:_,I=Ya(t.state),M=Ra(I),z=M.width,R=M.height,D=M.top,N=M.left,A=M.bottom,L=M.right,B=[],j=[],G=[],H=[],F=[];if(!l.request){if(l.direction&&F.push(function(t,e,n){var i=[];if(n[0]&&n[1])i=[n,[-n[0],n[1]],[n[0],-n[1]]].map((function(t){return ga(e,t)}));else if(n[0]||n[1])t.props.keepRatio?i=[[-1,-1],[-1,1],[1,-1],[1,1],n].map((function(t){return ga(e,t)})):(i=fa(e,n)).length>1&&i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]);else for(var r=[e[0],e[1],e[3],e[2],e[0]],o=0;o<4;++o)i.push(r[o]),i.push([(r[o][0]+r[o+1][0])/2,(r[o][1]+r[o+1][1])/2]);return Ts(t,i.map((function(t){return t[0]})),i.map((function(t){return t[1]})),!0,1)}(t,I,l.direction)),l.snap){var X=Ra(I);l.center&&(X.middle=(X.top+X.bottom)/2,X.center=(X.left+X.right)/2),F.push(function(t,e,n,i){var r=t.props.snapCenter&&!0,o=["left","right"],a=["top","bottom"];return r&&(o.push("center"),a.push("middle")),o=o.filter((function(t){return t in e})),a=a.filter((function(t){return t in e})),Ts(t,o.map((function(t){return e[t]})),a.map((function(t){return e[t]})),r,1)}(t,X))}F.forEach((function(t){var e=t.vertical.posInfos,n=t.horizontal.posInfos;B.push.apply(B,e.map((function(t){return{type:"snap",pos:t.pos}}))),j.push.apply(j,n.map((function(t){return{type:"snap",pos:t.pos}}))),G.push.apply(G,tc(e)),H.push.apply(H,tc(n))}))}!function(t,e,n,i,r){var o=js(t,e,n),a=o.vertical,s=o.horizontal,c=s.isBound,l=s.pos;a.isBound&&i.push({type:"bounds",pos:a.pos}),c&&r.push({type:"bounds",pos:l});var u=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),i=n.pos1,r=n.pos2,o=n.pos3,a=n.pos4,s=ga([i,r,o,a],[0,0]),c=e.left,l=e.top,u=e.width,h=e.height,p=[[c,l],[c,l+h]],d=[[c,l],[c+u,l]],f=[[c+u,l],[c+u,l+h]],g=[[c,l+h],[c+u,l+h]],b=[],v=[],m={top:!1,bottom:!1,left:!1,right:!1};return[[i,r],[r,a],[a,o],[o,i]].forEach((function(t){var e=Ms(s,t),n=e.horizontal,i=e.vertical,r=Ns(t,d,i,1,!0),o=Ns(t,g,i,1,!0),a=Ns(t,p,n,1,!0),y=Ns(t,f,n,1,!0);r.isBound&&!m.top&&(b.push(l),m.top=!0),o.isBound&&!m.bottom&&(b.push(l+h),m.bottom=!0),a.isBound&&!m.left&&(v.push(c),m.left=!0),y.isBound&&!m.right&&(v.push(c+u),m.right=!0)})),{horizontal:b,vertical:v}}(t),h=u.horizontal;u.vertical.forEach((function(t){lr(i,(function(e){return"bounds"===e.type&&e.pos===t}))>=0||i.push({type:"bounds",pos:t})})),h.forEach((function(t){lr(r,(function(e){return"bounds"===e.type&&e.pos===t}))>=0||r.push({type:"bounds",pos:t})}))}(t,[N,L],[D,A],B,j);var U=nc(H,y,z,0),W=nc(G,x,R,1),Y=["horizontal","left","top","width"],q=["vertical","top","left","height"],V=ac(G,"vertical",[r,i],[z,R]),Q=ac(H,"horizontal",[r,i],[z,R]),K=G.concat(H);return Za(t,"onSnap",{guidelines:K.filter((function(t){return!t.element})),elements:os(K.filter((function(t){return t.element})),(function(t){return t.element})),gaps:V.concat(Q)},!0),sc(t,V,"vertical",Y,P,e).concat(sc(t,Q,"horizontal",q,P,e),ic(U,Y,g,y,z,i,O,T,w,0,P,e),ic(W,q,b,x,R,r,O,T,w,1,P,e),rc(j,Y,g,i,z,e),rc(B,q,b,r,R,e),oc(H,Y,r,i,0,e),oc(G,q,i,r,1,e))},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Xs(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t){return ws(t)||fc(t)},dragControlStart:function(t,e){t.state.snapRenderInfo=null,Xs(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t,e){t.state.snapRenderInfo=null,Xs(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null}},lc={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,e){var n=t.state,i=n.dragInfo,r=n.beforeOrigin;if(!t.props.throttleDragRotate||!i)return[];var o=i.dist;if(!o[0]&&!o[1])return[];var a=Aa(o),s=Ko(o,[0,0]);return[e.createElement("div",{className:Ca("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:a+"px",transform:"translate("+r[0]+"px, "+r[1]+"px) rotate("+s+"rad)"}})]},dragStart:function(t,e){var n=e.datas,i=e.parentEvent,r=t.state,o=r.targetTransform,a=r.target;if(r.dragger)return!1;r.dragger=e.parentDragger||t.targetDragger;var s=window.getComputedStyle(a);n.datas={},n.left=parseFloat(s.left||"")||0,n.top=parseFloat(s.top||"")||0,n.bottom=parseFloat(s.bottom||"")||0,n.right=parseFloat(s.right||"")||0,n.transform=o,n.startTranslate=[0,0],ha(t,{datas:n}),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,function(t,e){e.absolutePoses=Ya(t.state)}(t,n);var c=Ja(t,e,{set:function(t){n.startTranslate=t}});return!1!==(i||Za(t,"onDragStart",c))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(r.dragger=null,n.isPinch=!1),!!n.isDrag&&c},drag:function(t,e){var n=e.datas,i=e.parentEvent,r=e.parentFlag,o=e.isPinch,a=e.isRequest,s=e.distX,c=e.distY,l=n.prevDist,u=n.prevBeforeDist,h=n.transform,p=n.startTranslate;if(n.isDrag){var d=t.props,f=d.parentMoveable,g=i?0:d.throttleDrag||0,b=i?0:d.throttleDragRotate||0,v=!1,m=0;if(!i&&b>0&&(s||c)){var y=d.startDragRotate||0,x=qa(y+180*Ko([0,0],[s,c])/Math.PI,b)-y,C=c*Math.abs(Math.cos((x-90)/180*Math.PI)),S=Aa([s*Math.abs(Math.cos(x/180*Math.PI)),C]);m=x*Math.PI/180,s=S*Math.cos(m),c=S*Math.sin(m)}if(!o&&!i&&!r&&(!b||s||c)){var O=function(t,e,n,i,r,o){if(!Us(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=Wa(o.absolutePoses,[e,n]),s=Ra(a),c=s.left,l=s.right,u=s.top,h=s.bottom,p=[[c,u],[l,u],[c,h],[l,h]];t.props.snapCenter&&p.push([(c+l)/2,(u+h)/2]);var d=Qs(t,r,p,a),f=d.vertical,g=d.horizontal,b=function(t,e,n){var i,r=As(t,Ls(e,[0,0],!1).map((function(t){var e=t[1],n=t[2];return[t[0].map((function(t){return 2*Math.abs(t)})),e,n]})),ga(e,[0,0]),n),o=Is(r,0),a=Is(r,1),s=0,c=0,l=o.isVerticalBound||a.isVerticalBound,u=o.isHorizontalBound||a.isHorizontalBound;return(l||u)&&(s=(i=function(t,e){var n=t.datas,i=n.absoluteOrigin,r=n.is3d?4:3;return ia(ra(n.matrix,na(n.startDragDist,[t.distX,t.distY]),r),i)}({datas:n,distX:-o.offset[0],distY:-a.offset[1]}))[0],c=i[1]),{vertical:{isBound:l,offset:s},horizontal:{isBound:u,offset:c}}}(t,a,o),v=b.vertical,m=b.horizontal,y=f.isSnap,x=g.isSnap,C=f.isBound||v.isBound,S=g.isBound||m.isBound,O=function(t,e,n,i,r){var o=e[0],a=e[1],s=n[0],c=n[1],l=i[0],u=i[1],h=r[0],p=r[1],d=-h,f=-p;if(t&&o&&a){d=0,f=0;var g=[];if(s&&c?g.push([0,p],[h,0]):s?g.push([h,0]):c?g.push([0,p]):l&&u?g.push([0,p],[h,0]):l?g.push([h,0]):u&&g.push([0,p]),g.length){g.sort((function(t,e){return Aa(ia([o,a],t))-Aa(ia([o,a],e))}));var b=g[0];if(b[0]&&Math.abs(o)>1e-7)d=-b[0],f=a*Math.abs(o+d)/Math.abs(o)-a;else if(b[1]&&Math.abs(a)>1e-7){var v=a;f=-b[1],d=o*Math.abs(a+f)/Math.abs(v)-o}if(t&&c&&s)if(Math.abs(d)>1e-7&&Math.abs(d)<Math.abs(h))d*=m=Math.abs(h)/Math.abs(d),f*=m;else if(Math.abs(f)>1e-7&&Math.abs(f)<Math.abs(p)){var m;d*=m=Math.abs(p)/Math.abs(f),f*=m}else d=ss(-h,d),f=ss(-p,f)}}else d=o||s?-h:0,f=a||c?-p:0;return[d,f]}(i,[e,n],[C,S],[y,x],[ss(f.offset,v.offset),ss(g.offset,m.offset)]);return[{isBound:C,isSnap:y,offset:O[0]},{isBound:S,isSnap:x,offset:O[1]}]}(t,s,c,b,a,n),E=O[0],w=O[1];v=E.isSnap||w.isSnap||E.isBound||w.isBound,s+=E.offset,c+=w.offset}n.passDeltaX=s-(n.passDistX||0),n.passDeltaY=c-(n.passDistY||0),n.passDistX=s,n.passDistY=c;var k=na(pa({datas:n,distX:s,distY:c},!0),p),T=na(pa({datas:n,distX:s,distY:c},!1),p);b||v||(Va(T,g),Va(k,g));var _=ia(k,p),P=ia(T,p),I=ia(P,l),M=ia(_,u);n.prevDist=P,n.prevBeforeDist=_;var z=n.left+_[0],R=n.top+_[1],D=n.right-_[0],N=n.bottom-_[1],A=h+" translate("+P[0]+"px, "+P[1]+"px)";if(t.state.dragInfo.dist=i?[0,0]:P,i||f||!I.every((function(t){return!t}))||!M.some((function(t){return!t}))){var L=Ja(t,e,{transform:A,dist:P,delta:I,translate:T,beforeDist:_,beforeDelta:M,beforeTranslate:k,left:z,top:R,right:D,bottom:N,isPinch:o});return!i&&Za(t,"onDrag",L),L}}},dragEnd:function(t,e){var n=e.parentEvent,i=e.datas,r=e.isDrag;if(t.state.dragger=null,t.state.dragInfo=null,i.isDrag)return i.isDrag=!1,!n&&Za(t,"onDragEnd",$a(t,e,{})),r},dragGroupStart:function(t,e){var n=e.datas,i=e.clientX,r=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var a=Os(t,this,"dragStart",[i||0,r||0],e,!1),s=Za(t,"onDragGroupStart",zo({},o,{targets:t.props.targets,events:a}));return n.isDrag=!1!==s,!!n.isDrag&&o},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,e),i=e.datas,r=Os(t,this,"drag",[i.passDeltaX,i.passDeltaY],e,!1);if(n){var o=zo({targets:t.props.targets,events:r},n);return Za(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var n=e.isDrag;if(e.datas.isDrag)return this.dragEnd(t,e),Os(t,this,"dragEnd",[0,0],e,!1),Za(t,"onDragGroupEnd",$a(t,e,{targets:t.props.targets})),n},request:function(t){var e={},n=t.getRect(),i=0,r=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(t){return"x"in t?i=t.x-n.left:"deltaX"in t&&(i+=t.deltaX),"y"in t?r=t.y-n.top:"deltaY"in t&&(r+=t.deltaY),{datas:e,distX:i,distY:r}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function uc(t,e,n,i,r,o){var a=Ma(t.state.rootMatrix,r,t.state.is3d?4:3),s=na([o.left,o.top],a);e.startAbsoluteOrigin=s,e.prevDeg=Ko(s,[n,i])/Math.PI*180,e.prevSnapDeg=e.prevDeg,e.startDeg=e.prevDeg,e.loop=0}function hc(t,e,n,i,r,o){var a=n.prevDeg,s=Zs(t,e,n.origin,i);return n.prevDeg=s,[s-a,s,o+s]}function pc(t,e,n,i,r,o,a,s){var c=n.prevDeg,l=n.prevSnapDeg,u=n.startDeg,h=n.loop;c>i&&c>270&&i<90?++n.loop:c<i&&c<90&&i>270&&--n.loop;var p=n.loop,d=360*h+l-u+o,f=360*p+i-u+o;n.prevDeg=f-360*p+u-o;var g=r*((f=qa(f,a))-o);return s&&(f=(g=Zs(t,e,n.origin,g))/r+o),n.prevSnapDeg=f-360*p+u-o,[r*(f-d),g,o+g]}function dc(t,e,n,i,r,o,a,s){return pc(t,e,n,Ko(n.startAbsoluteOrigin,[r,o])/Math.PI*180,i,a,s,!0)}function fc(t){return t.isRequest?"rotatable"===t.requestAble:ur(t.inputEvent.target,Ca("rotation"))}var gc={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},render:function(t,e){var n=t.props;if(!n.rotatable)return null;var i=t.state,r=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=(t||"top").split("-"),c=s[0],l=s[1],u=[i,r];"left"===c?u=[o,i]:"right"===c?u=[r,a]:"bottom"===c&&(u=[a,o]);var h=[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2],p=Ha(u,n);if(l){var d="top"===l||"left"===l,f="bottom"===c||"left"===c;h=u[d&&!f||!d&&f?0:1]}return[h,p]}(n.rotationPosition,i.renderPoses,i.direction),o=r[0],a=r[1];return e.createElement("div",{key:"rotation",className:Ca("line rotation-line"),style:{transform:"translate(-50%) translate("+o[0]+"px, "+o[1]+"px) rotate("+a+"rad)"}},e.createElement("div",{className:Ca("control","rotation")}))},dragControlCondition:fc,dragControlStart:function(t,e){var n=e.datas,i=e.clientX,r=e.clientY,o=e.parentRotate,a=e.parentFlag,s=e.isPinch,c=e.isRequest,l=t.state,u=l.left,h=l.top,p=l.origin,d=l.beforeOrigin,f=l.direction,g=l.beforeDirection,b=l.targetTransform;if(!c&&!l.target)return!1;var v=t.getRect();if(n.rect=v,n.transform=b,n.left=u,n.top=h,c||s||a){var m=o||0;n.beforeInfo={origin:v.beforeOrigin,prevDeg:m,startDeg:m,prevSnapDeg:m,loop:0},n.afterInfo={origin:v.origin,prevDeg:m,startDeg:m,prevSnapDeg:m,loop:0}}else{n.beforeInfo={origin:v.beforeOrigin},n.afterInfo={origin:v.origin};var y=Xa(t.controlBox.getElement());uc(t,n.beforeInfo,i,r,d,y),uc(t,n.afterInfo,i,r,p,y)}n.direction=f,n.beforeDirection=g,n.startRotate=0,n.datas={};var x=Ja(t,e,{set:function(t){n.startRotate=t}}),C=Za(t,"onRotateStart",x);return n.isRotate=!1!==C,t.state.snapRenderInfo={request:e.isRequest},!!n.isRotate&&x},dragControl:function(t,e){var n,i,r,o,a,s,c=e.datas,l=e.clientX,u=e.clientY,h=e.parentRotate,p=e.parentFlag,d=e.isPinch,f=c.direction,g=c.beforeDirection,b=c.beforeInfo,v=c.afterInfo,m=c.startRotate,y=c.rect;if(c.isRotate){var x,C,S,O,E,w,k=t.props,T=k.throttleRotate,_=void 0===T?0:T,P=k.parentMoveable;if(!p&&"parentDist"in e){var I=e.parentDist;x=(n=hc(t,y,v,I,0,m))[0],C=n[1],S=n[2],O=(i=hc(t,y,b,I,0,m))[0],E=i[1],w=i[2]}else d||p?(x=(r=pc(t,y,v,h,f,m,_))[0],C=r[1],S=r[2],O=(o=pc(t,y,b,h,f,m,_))[0],E=o[1],w=o[2]):(x=(a=dc(t,y,v,f,l,u,m,_))[0],C=a[1],S=a[2],O=(s=dc(t,y,b,g,l,u,m,_))[0],E=s[1],w=s[2]);if(x||O||P){var M=Ja(t,e,{delta:x,dist:C,rotate:S,beforeDist:E,beforeDelta:O,beforeRotate:w,transform:c.transform+" rotate("+C+"deg)",isPinch:!!d});return Za(t,"onRotate",M),M}}},dragControlEnd:function(t,e){var n=e.datas,i=e.isDrag;return!!n.isRotate&&(n.isRotate=!1,Za(t,"onRotateEnd",$a(t,e,{})),i)},dragGroupControlCondition:fc,dragGroupControlStart:function(t,e){var n=e.datas,i=e.inputEvent,r=t.state,o=r.left,a=r.top,s=r.beforeOrigin,c=this.dragControlStart(t,e);if(!c)return!1;c.set(n.beforeDirection*t.rotation);var l=Es(t,this,"dragControlStart",n,zo({},e,{parentRotate:0}),(function(t,e,n){var r=t.state,c=r.beforeOrigin,l=na(ia([r.left,r.top],[o,a]),ia(c,s));e.prevClient=l,n.dragStart=lc.dragStart(t,(new Ss).dragStart(l,i))})),u=Za(t,"onRotateGroupStart",zo({},c,{targets:t.props.targets,events:l}));return n.isRotate=!1!==u,!!n.isRotate&&c},dragGroupControl:function(t,e){var n=e.inputEvent,i=e.datas;if(i.isRotate){var r=this.dragControl(t,e);if(r){var o=i.beforeDirection,a=r.beforeDelta/180*Math.PI,s=Es(t,this,"dragControl",i,zo({},e,{parentRotate:r.beforeDist}),(function(t,i,r,s){var c=i.prevClient,l=c[0],u=c[1],h=oa([l,u],a*o),p=h[0],d=h[1],f=[p-l,d-u];i.prevClient=[p,d];var g=lc.drag(t,Cs(t.state,f,n,!!e.isPinch,!1));r.drag=g}));t.rotation=o*r.beforeRotate;var c=zo({targets:t.props.targets,events:s,set:function(e){t.rotation=e}},r);return Za(t,"onRotateGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,i=e.datas;if(i.isRotate)return this.dragControlEnd(t,e),Es(t,this,"dragControlEnd",i,e),Za(t,"onRotateGroupEnd",$a(t,e,{targets:t.props.targets})),n},request:function(t){var e={},n=0,i=t.getRotation();return{isControl:!0,requestStart:function(t){return{datas:e}},request:function(t){return"deltaRotate"in t?n+=t.deltaRotate:"rotate"in t&&(n=t.rotate-i),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function bc(t,e,n){var i=t.state,r=i.renderPoses,o=i.rotation,a=t.props.renderDirections,s=void 0===a?e:a,c=t.state.direction,l={};return s.forEach((function(t){l[t]=!0})),s.map((function(t){var e=Fo[t];if(!e||!l[t])return null;var i=qa(o/Math.PI*180,15)+Xo[t];return c<1&&(i=360-i),i%=180,n.createElement("div",{className:Ca("control","direction",t),"data-rotation":i,"data-direction":t,key:"direction-"+t,style:ja.apply(void 0,[o].concat(e.map((function(t){return r[t]}))))})}))}function vc(t,e){return bc(t,Ho,e)}function mc(t,e){return bc(t,["nw","ne","sw","se"],e)}var yc={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,e){var n=t.props;if(n.resizable)return n.edge?mc(t,e):vc(t,e)},dragControlCondition:ws,dragControlStart:function(t,e){var n,i=e.inputEvent,r=e.isPinch,o=e.datas,a=e.parentFlag,s=e.parentDirection||(r?[0,0]:Ua(i.target)),c=t.state,l=c.target,u=c.width,h=c.height;if(!s||!l)return!1;!r&&ha(t,{datas:o}),o.datas={},o.direction=s,o.startOffsetWidth=u,o.startOffsetHeight=h,o.prevWidth=0,o.prevHeight=0,n=function(t){var e=window.getComputedStyle(t);return[parseFloat(e.width),parseFloat(e.height)]}(l),o.startWidth=n[0],o.startHeight=n[1];var p=[Math.max(0,u-o.startWidth),Math.max(0,h-o.startHeight)];if(o.minSize=p,o.maxSize=[1/0,1/0],!a){var d=window.getComputedStyle(l);o.minSize=na([parseFloat(d.minWidth)||0,parseFloat(d.minHeight)||0],p),o.maxSize=na([parseFloat(d.maxWidth)||1/0,parseFloat(d.maxHeight)||1/0],p)}var f=t.props.transformOrigin||"% %";o.transformOrigin=f&&Zi(f)?f.split(" "):f,o.startDirection=function(t,e){if(!e[0]&&!e[1])return[0,0];var n=[-1,-1];return[e[0]?e[0]:-1*n[0],e[1]?e[1]:-1*n[1]]}(0,s),o.fixedPosition=xa(t,o.startDirection),o.fixedOriginalPosition=xa(t,s);var g=Ja(t,e,{direction:s,set:function(t){var e=t[1];o.startWidth=t[0],o.startHeight=e},setMin:function(t){o.minSize=t},setMax:function(t){o.maxSize=t},setOrigin:function(t){o.transformOrigin=t},dragStart:lc.dragStart(t,(new Ss).dragStart([0,0],i))});return!1!==Za(t,"onResizeStart",g)&&(o.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),!!o.isResize&&g},dragControl:function(t,e){var n,i=e.datas,r=e.distX,o=e.distY,a=e.parentFlag,s=e.isPinch,c=e.parentDistance,l=e.parentScale,u=e.inputEvent,h=e.dragClient,p=e.parentDist,d=e.isRequest,f=i.direction,g=i.transformOrigin;if(i.isResize){var b=i.startWidth,v=i.startHeight,m=i.startOffsetWidth,y=i.startOffsetHeight,x=i.prevWidth,C=i.prevHeight,S=i.minSize,O=i.maxSize,E=t.props,w=E.throttleResize,k=void 0===w?0:w,T=E.parentMoveable,_=f;f[0]||f[1]||(_=[1,1]);var P=t.props.keepRatio||e.parentKeepRatio,I=_[0]||!_[1],M=I?y/m:m/y,z=P||a?f:i.startDirection,R=h,D=0,N=0;if(h||(R=!a&&s?xa(t,[0,0]):P?i.fixedOriginalPosition:i.fixedPosition),p)D=p[0],N=p[1];else if(l)D=(l[0]-1)*m,N=(l[1]-1)*y;else if(s)c&&(D=c,N=c*y/m);else{var A=pa({datas:i,distX:r,distY:o});if(D=_[0]*A[0],N=_[1]*A[1],P&&m&&y){var L=Ko([0,0],A),B=Ko([0,0],_),j=Ko([0,0],[m,y]),G=Aa([D,N]),H=Math.cos(L-B)*G;_[0]?_[1]?(D=Math.cos(j)*H,N=Math.sin(j)*H):N=ns(D=H,I,M):D=is(N=H,I,M)}}var F=_[0]||P?Math.max(m+D,1e-7):m,X=_[1]||P?Math.max(y+N,1e-7):y;P&&m&&y&&(X=F*y/m);var U=[0,0];if(s||(U=function(t,e,n,i,r,o,a){if(!Us(t,"resizable"))return[0,0];var s=t.state,c=s.matrix,l=s.is3d;return $s(t,(function(t,o){return Ys(c,e+t,n+o,r,i,l)}),e,n,i,r,o,a)}(t,F,X,f,i.fixedOriginalPosition,d,i)),p&&(!p[0]&&(U[0]=0),!p[1]&&(U[1]=0)),P){_[0]&&_[1]&&U[0]&&U[1]&&(Math.abs(U[0])>Math.abs(U[1])?U[1]=0:U[0]=0);var W=!U[0]&&!U[1];W&&(I?F=qa(F,k):X=qa(X,k)),_[0]&&!_[1]||U[0]&&!U[1]||W&&I?X=ns(F+=U[0],I,M):(!_[0]&&_[1]||!U[0]&&U[1]||W&&!I)&&(F=is(X+=U[1],I,M))}else F+=U[0],X+=U[1],U[0]||(F=qa(F,k)),U[1]||(X=qa(X,k));F=(n=function(t,e,n,i){if(!i)return t.map((function(t,i){return Math.min(n[i],Math.max(t,e[i]))}));var r=t[0],o=t[1],a=hs(t,e,!1),s=a[0],c=a[1],l=hs(t,n,!0),u=l[0],h=l[1];return r<s||o<c?(r=s,o=c):(r>u||o>h)&&(r=u,o=h),[r,o]}([F,X],S,O,P))[0],X=n[1];var Y=[(D=(F=Math.round(F))-m)-x,(N=(X=Math.round(X))-y)-C];i.prevWidth=D,i.prevHeight=N;var q=function(t,e,n,i,r,o){var a=t.props.groupable,s=t.state,c=s.is3d?4:3,l=a?s.left:0,u=a?s.top:0;return ia(va(r,ma(s.offsetMatrix,s.targetMatrix,function(t,e,n,i,r,o){return void 0===i&&(i=e),void 0===r&&(r=n),void 0===o&&(o=[0,0]),t?t.map((function(t,a){var s=or(t),c=s.value,l=s.unit,u=a?r:i,h=a?n:e;return"%"===t||isNaN(c)?h*(u?o[a]/u:0):"%"!==l?c:h*c/100})):o}(o,e,n,s.width,s.height,s.transformOrigin),c),e,n,c,i),[l,u])}(t,F,X,z,R,g);if(T||!Y.every((function(t){return!t}))||!q.every((function(t){return!t}))){var V=Ja(t,e,{width:b+D,height:v+N,offsetWidth:F,offsetHeight:X,direction:f,dist:[D,N],delta:Y,isPinch:!!s,drag:lc.drag(t,Cs(t.state,q,u,!!s,!1))});return Za(t,"onResize",V),V}}},dragControlAfter:function(t,e){var n=e.datas;if(n.isResize){var i=t.state,r=i.width-(n.startOffsetWidth+n.prevWidth),o=i.height-(n.startOffsetHeight+n.prevHeight),a=Math.abs(r)>3,s=Math.abs(o)>3;return a&&(n.startWidth+=r,n.startOffsetWidth+=r,n.prevWidth+=r),s&&(n.startHeight+=o,n.startOffsetHeight+=o,n.prevHeight+=o),a||s?(this.dragControl(t,e),!0):void 0}},dragControlEnd:function(t,e){var n=e.datas,i=e.isDrag;return!!n.isResize&&(n.isResize=!1,Za(t,"onResizeEnd",$a(t,e,{})),i)},dragGroupControlCondition:ws,dragGroupControlStart:function(t,e){var n=e.datas,i=this.dragControlStart(t,e);if(!i)return!1;var r=i.direction,o=n.fixedOriginalPosition,a=Es(t,this,"dragControlStart",n,(function(n,i){var a=xa(n,r),s=ra(aa(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),c=s[1];return i.originalX=s[0],i.originalY=c,e})),s=zo({},i,{targets:t.props.targets,events:a}),c=Za(t,"onResizeGroupStart",s);return n.isResize=!1!==c,!!n.isResize&&i},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var i=this.dragControl(t,e);if(i){var r=i.offsetWidth,o=i.offsetHeight,a=i.dist,s=t.props.keepRatio,c=[r/(r-a[0]),o/(o-a[1])],l=n.fixedOriginalPosition,u=Es(t,this,"dragControl",n,(function(n,i){var r=ra(aa(t.rotation/180*Math.PI,3),[i.originalX*c[0],i.originalY*c[1],1],3);return zo({},e,{parentDist:null,parentScale:c,dragClient:na(l,[r[0],r[1]]),parentKeepRatio:s})})),h=zo({targets:t.props.targets,events:u},i);return Za(t,"onResizeGroup",h),h}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,i=e.datas;if(i.isResize)return this.dragControlEnd(t,e),Es(t,this,"dragControlEnd",i,e),Za(t,"onResizeGroupEnd",$a(t,e,{targets:t.props.targets})),n},request:function(t){var e={},n=0,i=0,r=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-r.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?i=t.offsetHeight-r.offsetHeight:"deltaHeight"in t&&(i+=t.deltaHeight),{datas:e,parentDist:[n,i]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},xc={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,e){var n=t.props;if(!n.resizable&&n.scalable)return n.edge?mc(t,e):vc(t,e)},dragControlCondition:ws,dragControlStart:function(t,e){var n=e.datas,i=e.isPinch,r=e.inputEvent,o=e.parentDirection||(i?[0,0]:Ua(r.target)),a=t.state,s=a.width,c=a.height,l=a.targetTransform;if(!o||!a.target)return!1;i||ha(t,{datas:n}),n.datas={},n.transform=l,n.prevDist=[1,1],n.direction=o,n.width=s,n.height=c,n.startScale=[1,1],n.fixedDirection=o.map((function(t){return-t})),n.fixedPosition=xa(t,o);var u=Ja(t,e,{direction:o,set:function(t){n.startScale=t},dragStart:lc.dragStart(t,(new Ss).dragStart([0,0],r))});return!1!==Za(t,"onScaleStart",u)&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),!!n.isScale&&u},dragControl:function(t,e){var n=e.datas,i=e.distX,r=e.distY,o=e.parentScale,a=e.parentDistance,s=e.isPinch,c=e.inputEvent,l=e.dragClient,u=e.parentDist,h=e.isRequest,p=n.prevDist,d=n.direction,f=n.width,g=n.height,b=n.transform,v=n.startScale;if(!n.isScale)return!1;var m=t.props,y=m.throttleScale,x=m.parentMoveable,C=d;d[0]||d[1]||(C=[1,1]);var S=t.props.keepRatio||e.parentKeepRatio,O=t.state,E=C[0]||!C[1],w=f*v[0],k=g*v[1],T=E?k/w:w/k,_=1,P=1,I=l;if(l||(I=!e.parentFlag&&s?xa(t,[0,0]):n.fixedPosition),u)_=(f+u[0])/f,P=(g+u[1])/g;else if(o)_=o[0],P=o[1];else if(s)a&&(_=(f+a)/f,P=(g+a*g/f)/g);else{var M=pa({datas:n,distX:i,distY:r}),z=C[0]*M[0],R=C[1]*M[1];if(S&&f&&g){var D=Ko([0,0],M),N=Ko([0,0],C),A=Ko([0,0],[w,k]),L=Aa([z,R]),B=Math.cos(D-N)*L;C[0]?C[1]?(z=Math.cos(A)*B,R=Math.sin(A)*B):R=ns(z=B,E,T):z=is(R=B,E,T)}_=(f+z)/f,P=(g+R)/g}0===(_=C[0]||S?_*v[0]:v[0])&&(_=1e-9*(p[0]>0?1:-1)),0===(P=C[1]||S?P*v[1]:v[1])&&(P=1e-9*(p[1]>0?1:-1));var j,G=[_/v[0],P/v[1]];if(!s&&t.props.groupable){var H=(O.snapRenderInfo||{}).direction;$i(H)&&(H[0]||H[1])&&(O.snapRenderInfo={direction:d,request:e.isRequest})}var F=[0,0];if(s||(F=function(t,e,n,i,r,o){var a=o.width,s=o.height;if(!Us(t,"scalable"))return[0,0];var c=o.is3d,l=$s(t,(function(t,r){return Ys(ya(o,na(e,[t/a,r/s])),a,s,i,n,c)}),a,s,n,i,r,o);return[l[0]/a,l[1]/s]}(t,G,d,n.fixedPosition,h,n)),S){C[0]&&C[1]&&F[0]&&F[1]&&(Math.abs(F[0])>Math.abs(F[1])?F[1]=0:F[0]=0);var X=!F[0]&&!F[1];if(X&&(E?G[0]=qa(G[0]*v[0],y)/v[0]:G[1]=qa(G[1]*v[1],y)/v[1]),C[0]&&!C[1]||F[0]&&!F[1]||X&&E){G[0]+=F[0];var U=ns(f*G[0]*v[0],E,T);G[1]=U/g/v[1]}else if(!C[0]&&C[1]||!F[0]&&F[1]||X&&!E){G[1]+=F[1];var W=is(g*G[1]*v[1],E,T);G[0]=W/f/v[0]}}else G[0]+=F[0],G[1]+=F[1],F[0]||(G[0]=qa(G[0]*v[0],y)/v[0]),F[1]||(G[1]=qa(G[1]*v[1],y)/v[1]);0===G[0]&&(G[0]=1e-9*(p[0]>0?1:-1)),0===G[1]&&(G[1]=1e-9*(p[1]>0?1:-1));var Y,q,V=[G[0]/p[0],G[1]/p[1]];j=[(Y=G)[0]*(q=v)[0],Y[1]*q[1]],n.prevDist=G;var Q=function(t,e,n,i){var r=t.state,o=r.width,a=r.height,s=r.is3d?4:3,c=t.props.groupable,l=c?r.left:0,u=c?r.top:0;return ia(va(i,ya(t.state,e),o,a,s,n),[l,u])}(t,V,d,I);if(_===p[0]&&P===p[1]&&Q.every((function(t){return!t}))&&!x)return!1;var K=Ja(t,e,{offsetWidth:f,offsetHeight:g,scale:j,direction:d,dist:G,delta:V,transform:b+" scale("+_+", "+P+")",isPinch:!!s,drag:lc.drag(t,Cs(t.state,Q,c,s,!1))});return Za(t,"onScale",K),K},dragControlEnd:function(t,e){var n=e.datas,i=e.isDrag;return!!n.isScale&&(n.isScale=!1,Za(t,"onScaleEnd",$a(t,e,{})),i)},dragGroupControlCondition:ws,dragGroupControlStart:function(t,e){var n=e.datas,i=this.dragControlStart(t,e);if(!i)return!1;var r=i.direction,o=n.fixedPosition;n.moveableScale=t.scale;var a=Es(t,this,"dragControlStart",n,(function(n,i){var a=xa(n,r),s=ra(aa(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),c=s[1];return i.originalX=s[0],i.originalY=c,e})),s=zo({},i,{targets:t.props.targets,events:a}),c=Za(t,"onScaleGroupStart",s);return n.isScale=!1!==c,!!n.isScale&&s},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){var i=this.dragControl(t,e);if(i){var r=n.moveableScale;t.scale=[i.scale[0]*r[0],i.scale[1]*r[1]];var o=t.props.keepRatio,a=i.dist,s=i.scale,c=n.fixedPosition,l=Es(t,this,"dragControl",n,(function(n,i){var r=ra(aa(t.rotation/180*Math.PI,3),[i.originalX*a[0],i.originalY*a[1],1],3);return zo({},e,{parentDist:null,parentScale:s,parentKeepRatio:o,dragClient:na(c,[r[0],r[1]])})})),u=zo({targets:t.props.targets,events:l},i);return Za(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,i=e.datas;if(i.isScale)return this.dragControlEnd(t,e),Es(t,this,"dragControlEnd",i,e),Za(t,"onScaleGroupEnd",$a(t,e,{targets:t.props.targets})),n},request:function(){var t={},e=0,n=0;return{isControl:!0,requestStart:function(e){return{datas:t,parentDirection:e.direction||[1,1]}},request:function(i){return{datas:t,parentDist:[e+=i.deltaWidth,n+=i.deltaHeight]}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Cc(t,e){return t.map((function(t,n){return(2*t+1*e[n])/3}))}function Sc(t,e,n){var i=Ko(t,e),r=Ko(t,n)-i;return r>=0?r:r+2*Math.PI}var Oc={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,e){var n=t.props;if(n.resizable||n.scalable||!n.warpable)return[];var i=t.state,r=i.pos1,o=i.pos2,a=i.pos3,s=i.pos4,c=Cc(r,o),l=Cc(o,r),u=Cc(r,a),h=Cc(a,r),p=Cc(a,s),d=Cc(s,a),f=Cc(o,s),g=Cc(s,o);return[e.createElement("div",{className:Ca("line"),key:"middeLine1",style:Ba(c,p)}),e.createElement("div",{className:Ca("line"),key:"middeLine2",style:Ba(l,d)}),e.createElement("div",{className:Ca("line"),key:"middeLine3",style:Ba(u,f)}),e.createElement("div",{className:Ca("line"),key:"middeLine4",style:Ba(h,g)})].concat(vc(t,e))},dragControlCondition:function(t){return!t.isRequest&&ur(t.inputEvent.target,Ca("direction"))},dragControlStart:function(t,e){var n=e.datas,i=t.props.target,r=Ua(e.inputEvent.target);if(!r||!i)return!1;var o=t.state,a=o.transformOrigin,s=o.is3d,c=o.targetTransform,l=o.targetMatrix,u=o.width,h=o.height,p=o.left,d=o.top;return n.datas={},n.targetTransform=c,n.warpTargetMatrix=s?l:$o(l,3,4),n.targetInverseMatrix=Vo(Qo(n.warpTargetMatrix,4),3,4),n.direction=r,n.left=p,n.top=d,ha(t,{datas:n}),n.poses=[[0,0],[u,0],[0,h],[u,h]].map((function(t){return ia(t,a)})),n.nextPoses=n.poses.map((function(t){return ra(n.warpTargetMatrix,[t[0],t[1],0,1],4)})),n.startMatrix=sa(4),n.prevMatrix=sa(4),n.absolutePoses=Ya(o),n.posIndexes=da(r),o.snapRenderInfo={request:e.isRequest,direction:r},!1!==Za(t,"onWarpStart",Ja(t,e,{set:function(t){n.startMatrix=t}}))&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,i=e.isRequest,r=e.distX,o=e.distY,a=n.targetInverseMatrix,s=n.prevMatrix,c=n.startMatrix,l=n.poses,u=n.posIndexes,h=n.absolutePoses;if(!n.isWarp)return!1;if(Us(t,"warpable")){var p=u.map((function(t){return h[t]}));p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var d=Qs(t,i,p.map((function(t){return[t[0]+r,t[1]+o]})));o-=d.horizontal.offset,r-=d.vertical.offset}var f=pa({datas:n,distX:r,distY:o},!0),g=n.nextPoses.slice();if(u.forEach((function(t){g[t]=na(g[t],f)})),!Bo.every((function(t){return e=t.map((function(t){return l[t]})),n=t.map((function(t){return g[t]})),i=Sc(e[0],e[1],e[2]),r=Sc(n[0],n[1],n[2]),!(i>=(o=Math.PI)&&r<=o||i<=o&&r>=o);var e,n,i,r,o})))return!1;var b=ua(l[0],l[2],l[1],l[3],g[0],g[2],g[1],g[3]);if(!b.length)return!1;var v=ta(a,b,4),m=n.targetTransform+" "+_a(v,!0),y=ta(Qo(s,4),v,4);return n.prevMatrix=v,Za(t,"onWarp",Ja(t,e,{delta:y,matrix:ta(c,v,4),multiply:ta,dist:v,transform:m})),!0},dragControlEnd:function(t,e){var n=e.datas,i=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,Za(t,"onWarpEnd",$a(t,e,{})),i)}},Ec=Ca("area"),wc=Ca("area-pieces"),kc=Ca("area-piece"),Tc=Ca("avoid");function _c(t){var e=t.areaElement,n=t.state,i=n.width,r=n.height;!function(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}(e,Tc),e.style.cssText+="left: 0px; top: 0px; width: "+i+"px; height: "+r+"px"}function Pc(t){return t.createElement("div",{key:"area_pieces",className:wc},t.createElement("div",{className:kc}),t.createElement("div",{className:kc}),t.createElement("div",{className:kc}),t.createElement("div",{className:kc}))}var Ic={name:"dragArea",props:{dragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,i=n.target,r=n.dragArea,o=t.state,a=o.width,s=o.height,c=o.renderPoses;if(n.groupable)return[e.createElement("div",{key:"area",ref:Bi(t,"areaElement"),className:Ec}),Pc(e)];if(!i||!r)return[];var l=ua([0,0],[a,0],[0,s],[a,s],c[0],c[1],c[2],c[3]),u=l.length?_a(l,!0):"none";return[e.createElement("div",{key:"area",ref:Bi(t,"areaElement"),className:Ec,style:{top:"0px",left:"0px",width:a+"px",height:s+"px",transformOrigin:"0 0",transform:u}}),Pc(e)]},dragStart:function(t,e){var n=e.datas,i=e.clientX,r=e.clientY,o=e.inputEvent;if(!o)return!1;n.isDragArea=!1,n.inputTarget=o.target;var a=t.areaElement,s=t.state,c=s.moveableClientRect,l=s.rootMatrix,u=s.is3d,h=c.left,p=c.top,d=Ra(s.renderPoses),f=d.left,g=d.top,b=d.width,v=d.height,m=cs(l,[i-h,r-p],u?4:3),y=m[0],x=m[1],C=[{left:f,top:g,width:b,height:(x-=g)-10},{left:f,top:g,width:(y-=f)-10,height:v},{left:f,top:g+x+10,width:b,height:v-x-10},{left:f+y+10,top:g,width:b-y-10,height:v}],S=[].slice.call(a.nextElementSibling.children);return C.forEach((function(t,e){S[e].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"})),hr(a,Tc),!0},drag:function(t,e){var n=e.datas;if(!e.inputEvent)return!1;n.isDragArea||(n.isDragArea=!0,_c(t))},dragEnd:function(t,e){if(!e.inputEvent)return!1;var n=e.inputEvent,i=e.datas.isDragArea;i||_c(t);var r=t.state.target,o=n.target;if(!i&&!t.isMoveableElement(o)){var a=r.contains(o);Za(t,"onClick",Ja(t,e,{isDouble:e.isDouble,inputTarget:o,isTarget:r===o,containsTarget:a}))}},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){var n=e.inputEvent,i=e.isDragArea,r=e.datas;if(!n)return!1;i||_c(t);var o=r.inputTarget,a=n.target;if(!i&&!t.isMoveableElement(a)&&o!==a){var s=t.props.targets,c=s.indexOf(a),l=c>-1,u=!1;-1===c&&(u=(c=lr(s,(function(t){return t.contains(a)})))>-1),Za(t,"onClickGroup",Ja(t,e,{isDouble:e.isDouble,targets:s,inputTarget:a,targetIndex:c,isTarget:l,containsTarget:u}))}}},Mc={name:"origin",props:{origin:Boolean},events:{},render:function(t,e){var n=t.state,i=n.beforeOrigin,r=n.rotation;return[e.createElement("div",{className:Ca("control","origin"),style:ja(r,i),key:"beforeOrigin"})]}};function zc(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var Rc={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragStart:function(t,e){var n=t.props.scrollContainer,i=void 0===n?t.getContainer():n,r=new wo;e.datas.dragScroll=r;var o=e.isControl?"controlDragger":"targetDragger",a=e.targets;r.on("scroll",(function(n){var i=Ja(t,e,{scrollContainer:n.container,direction:n.direction}),r=a?"onScrollGroup":"onScroll";a&&(i.targets=a),Za(t,r,i)})).on("move",(function(n){t[o].scrollBy(n.offsetX,n.offsetY,e.inputEvent,!1)})),r.dragStart(e,{container:i})},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var i=t.props,r=i.scrollContainer,o=void 0===r?t.getContainer():r,a=i.scrollThreshold,s=i.getScrollPosition,c=void 0===s?zc:s;return n.drag(e,{container:o,threshold:void 0===a?0:a,getScrollPosition:function(t){return c({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,zo({},e,{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,zo({},e,{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,zo({},e,{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,zo({},e,{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,zo({},e,{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,zo({},e,{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,zo({},e,{targets:t.props.targets}))}},Dc={name:"",props:{target:Object,dragTarget:Object,container:Object,rootContainer:Object,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"}},Nc=["nw","ne","se","sw"];function Ac(t,e){var n=t[0]+t[1],i=n>e?e/n:1;return t[0]*=i,t[1]=e-t[1]*i,t}var Lc=[1,2,5,6],Bc=[0,3,4,7],jc=[1,-1,-1,1],Gc=[1,1,-1,-1];function Hc(t,e,n,i,r,o,a,s,c){void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=i),void 0===c&&(c=r);var l=[],u=!1,h=t.map((function(t,h){var p=e[h],d=p.horizontal,f=p.vertical;if(f&&!u&&(u=!0,l.push("/")),u){var g=Math.max(0,1===f?t[1]-a:c-t[1]);return l.push(ds(g,r,n)),g}return g=Math.max(0,1===d?t[0]-o:s-t[0]),l.push(ds(g,i,n)),g}));return{styles:l,raws:h}}function Fc(t){for(var e=[0,0],n=[0,0],i=t.length,r=0;r<i;++r){var o=t[r];o.sub&&(o.horizontal&&(0===e[1]&&(e[0]=r),e[1]=r-e[0]+1,n[0]=r+1),o.vertical&&(0===n[1]&&(n[0]=r),n[1]=r-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function Xc(t,e,n,i,r){var o,a,s,c,l=t.indexOf("/"),u=(l>-1?t.slice(0,l):t).length,h=t.slice(0,u),p=t.slice(u+1),d=h[0],f=void 0===d?"0":d,g=h[1],b=void 0===g?f:g,v=h[2],m=h[3],y=p[0],x=void 0===y?f:y,C=p[1],S=void 0===C?x:C,O=p[2],E=void 0===O?x:O,w=p[3],k=void 0===w?S:w,T=[f,b,void 0===v?f:v,void 0===m?b:m].map((function(t){return ps(t,e)})),_=[x,S,E,k].map((function(t){return ps(t,n)})),P=T.slice(),I=_.slice();o=Ac([P[0],P[1]],e),P[0]=o[0],P[1]=o[1],a=Ac([P[3],P[2]],e),P[3]=a[0],P[2]=a[1],s=Ac([I[0],I[3]],n),I[0]=s[0],I[3]=s[1],c=Ac([I[1],I[2]],n),I[1]=c[0],I[2]=c[1];var M=P.slice(0,h.length),z=I.slice(0,p.length);return M.map((function(t,e){return{horizontal:jc[e],vertical:0,pos:[i+t,r+(-1===Gc[e]?n:0)],sub:!0,raw:T[e],direction:Nc[e]}})).concat(z.map((function(t,n){return{horizontal:0,vertical:Gc[n],pos:[i+(-1===jc[n]?e:0),r+t],sub:!0,raw:_[n],direction:Nc[n]}})))}function Uc(t,e,n,i,r){void 0===r&&(r=e.length);var o=Fc(t.slice(i)),a=o.horizontalRange,s=o.verticalRange,c=n-i,l=0;if(0===c)l=r;else if(c>0&&c<a[1])l=a[1]-c;else{if(!(c>=s[0]))return;l=s[0]+s[1]-c}t.splice(n,l),e.splice(n,l)}function Wc(t,e,n,i,r,o,a,s,c,l,u){void 0===l&&(l=0),void 0===u&&(u=0);var h=Fc(t.slice(n)),p=h.horizontalRange,d=h.verticalRange;if(i>-1)for(var f=1===jc[i]?o-l:s-o,g=p[1];g<=i;++g){var b=0;if(i===g?b=o:0===g?b=l+f:-1===jc[g]&&(b=s-(e[n][0]-l)),t.splice(n+g,0,{horizontal:jc[g],vertical:0,pos:[b,x=1===Gc[g]?u:c]}),e.splice(n+g,0,[b,x]),0===g)break}else if(r>-1){var v=1===Gc[r]?a-u:c-a;if(0===p[1]&&0===d[1]){var m=[l+v,u];t.push({horizontal:jc[0],vertical:0,pos:m}),e.push(m)}var y=d[0];for(g=d[1];g<=r;++g){var x=0;if(r===g?x=a:0===g?x=u+v:1===Gc[g]?x=e[n+y][1]:-1===Gc[g]&&(x=c-(e[n+y][1]-u)),t.push({horizontal:0,vertical:Gc[g],pos:[b=1===jc[g]?l:s,x]}),e.push([b,x]),0===g)break}}}function Yc(t,e){return void 0===e&&(e=t.map((function(t){return t.raw}))),{horizontals:t.map((function(t,n){return t.horizontal?e[n]:null})).filter((function(t){return null!=t})),verticals:t.map((function(t,n){return t.vertical?e[n]:null})).filter((function(t){return null!=t}))}}var qc=[[0,-1,"n"],[1,0,"e"]],Vc=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Qc(t,e,n){var i=t.props.clipRelative,r=t.state,o=r.width,a=r.height,s=e.type,c=e.poses,l="rect"===s,u="circle"===s;if("polygon"===s)return n.map((function(t){return ds(t[0],o,i)+" "+ds(t[1],a,i)}));if(l||"inset"===s){var h=n[1][1],p=n[3][0],d=n[7][0],f=n[5][1];if(l)return[h,p,f,d].map((function(t){return t+"px"}));var g=[h,o-p,a-f,d].map((function(t,e){return ds(t,e%2?o:a,i)}));if(n.length>8){var b=ia(n[4],n[0]),v=b[0],m=b[1];g.push.apply(g,["round"].concat(Hc(n.slice(8),c.slice(8),i,v,m,d,h,p,f).styles))}return g}if(u||"ellipse"===s){var y=n[0],x=ds(Math.abs(n[1][1]-y[1]),u?Math.sqrt((o*o+a*a)/2):a,i);return(g=u?[x]:[ds(Math.abs(n[2][0]-y[0]),o,i),x]).push("at",ds(y[0],o,i),ds(y[1],a,i)),g}}function Kc(t,e,n,i){var r=[i,(i+e)/2,e],o=[t,(t+n)/2,n];return Vc.map((function(t){var e=t[0],n=t[1],i=t[2],a=r[e+1],s=o[n+1];return{vertical:Math.abs(n),horizontal:Math.abs(e),direction:i,pos:[a,s]}}))}function Jc(t,e,n,i,r){var o,a,s,c,l,u,h,p=r;if(!p){var d=getComputedStyle(t),f=d.clipPath;p="none"!==f?f:d.clip}if(p&&"none"!==p&&"auto"!==p||(p=i)){var g=rr(p),b=g.prefix,v=void 0===b?p:b,m=g.value,y=void 0===m?"":m,x="circle"===v,C=" ";if("polygon"===v)return C=",",{type:v,clipText:p,poses:P=(T=ir(y||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(t){var i=t.split(" "),r=i[1];return{vertical:1,horizontal:1,pos:[ps(i[0],e),ps(r,n)]}})),splitter:C};if(x||"ellipse"===v){var S,O="",E="",w=0,k=0,T=nr(y);x?(O=void 0===(a=T[2])?"50%":a,E=void 0===(s=T[3])?"50%":s,w=ps(void 0===(o=T[0])?"50%":o,Math.sqrt((e*e+n*n)/2)),k=w):(S=void 0===(l=T[1])?"50%":l,O=void 0===(u=T[3])?"50%":u,E=void 0===(h=T[4])?"50%":h,w=ps(void 0===(c=T[0])?"50%":c,e),k=ps(S,n));var _=[ps(O,e),ps(E,n)],P=[{vertical:1,horizontal:1,pos:_,direction:"nesw"}].concat(qc.slice(0,x?1:2).map((function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[_[0]+t[0]*w,_[1]+t[1]*k]}})));return{type:v,clipText:p,radiusX:w,radiusY:k,left:_[0]-w,top:_[1]-k,poses:P,splitter:C}}if("inset"===v){var I=(T=nr(y||"0 0 0 0")).indexOf("round"),M=(I>-1?T.slice(0,I):T).length,z=T.slice(M+1),R=T.slice(0,M),D=R[0],N=R[1],A=void 0===N?D:N,L=R[2],B=R[3],j=void 0===B?A:B,G=[D,void 0===L?D:L].map((function(t){return ps(t,n)})),H=G[0],F=G[1],X=[j,A].map((function(t){return ps(t,e)})),U=e-(q=X[1]),W=n-F,Y=Xc(z,U-(V=X[0]),W-H,V,H);return{type:"inset",clipText:p,poses:P=Kc(H,U,W,V).concat(Y),top:H,left:V,right:U,bottom:W,radius:z,splitter:C}}if("rect"===v){C=",";var q,V,Q=(T=ir(y||"0px, "+e+"px, "+n+"px, 0px")).map((function(t,e){return or(t).value}));return{type:"rect",clipText:p,poses:P=Kc(H=Q[0],q=Q[1],F=Q[2],V=Q[3]),top:H,right:q,bottom:F,left:V,values:T,splitter:C}}}}var $c={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}"],render:function(t,e){var n=t.props,i=n.clipArea,r=n.zoom,o=t.state,a=o.target,s=o.matrix,c=o.is3d,l=o.left,u=o.top,h=o.pos1,p=o.pos2,d=o.pos3,f=o.pos4;if(!a)return[];var g=Jc(a,o.width,o.height,n.defaultClipPath||"inset",o.clipPathState||n.customClipPath);if(!g)return[];var b=c?4:3,v=g.type,m=g.poses.map((function(t){var e=Ma(s,t.pos,b);return[e[0]-l,e[1]-u]})),y=[],x=[],C="rect"===v,S="inset"===v,O="polygon"===v;if(C||S||O){var E=S?m.slice(0,8):m;x=E.map((function(t,n){var i=0===n?E[E.length-1]:E[n-1],r=Ko(i,t),o=La(i,t);return e.createElement("div",{key:"clipLine"+n,className:Ca("line","clip-line"),"data-clip-index":n,style:{width:o+"px",transform:"translate("+i[0]+"px, "+i[1]+"px) rotate("+r+"rad)"}})}))}if(y=m.map((function(t,n){return e.createElement("div",{key:"clipControl"+n,className:Ca("control","clip-control"),"data-clip-index":n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px)"}})})),S&&y.push.apply(y,m.slice(8).map((function(t,n){return e.createElement("div",{key:"clipRadiusControl"+n,className:Ca("control","clip-control","clip-radius"),"data-clip-index":8+n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px)"}})}))),"circle"===v||"ellipse"===v){var w=g.radiusX,k=g.radiusY,T=ia(Ma(s,[g.left,g.top],b),Ma(s,[0,0],b)),_=T[0],P=T[1],I="none";if(!i){for(var M=Math.max(10,w/5,k/5),z=[],R=0;R<=M;++R){var D=2*Math.PI/M*R;z.push([w+(w-r)*Math.cos(D),k+(k-r)*Math.sin(D)])}z.push([w,-2]),z.push([-2,-2]),z.push([-2,2*k+2]),z.push([2*w+2,2*k+2]),z.push([2*w+2,-2]),z.push([w,-2]),I="polygon("+z.map((function(t){return t[0]+"px "+t[1]+"px"})).join(", ")+")"}y.push(e.createElement("div",{key:"clipEllipse",className:Ca("clip-ellipse"),style:{width:2*w+"px",height:2*k+"px",clipPath:I,transform:"translate("+(-l+_)+"px, "+(-u+P)+"px) "+_a(s)}}))}if(i){var N=Ra([h,p,d,f].concat(m)),A=N.width,L=N.height,B=N.left,j=N.top;(O||C||S)&&(z=S?m.slice(0,8):m,y.push(e.createElement("div",{key:"clipArea",className:Ca("clip-area"),style:{width:A+"px",height:L+"px",transform:"translate("+B+"px, "+j+"px)",clipPath:"polygon("+z.map((function(t){return t[0]-B+"px "+(t[1]-j)+"px"})).join(", ")+")"}})))}return y.concat(x)},dragControlCondition:function(t){return t.inputEvent&&(t.inputEvent.target.className||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props.dragWithClip;return!(void 0===n||n)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,e)},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,i=t.props,r=e.inputEvent?e.inputEvent.target:null,o=r?r.className:"",a=e.datas,s=Jc(n.target,n.width,n.height,i.defaultClipPath||"inset",i.customClipPath);if(!s)return!1;var c=s.clipText;return!1===Za(t,"onClipStart",Ja(t,e,{clipType:s.type,clipStyle:c,poses:s.poses.map((function(t){return t.pos}))}))?(a.isClipStart=!1,!1):(a.isControl=o.indexOf("clip-control")>-1,a.isLine=o.indexOf("clip-line")>-1,a.isArea=o.indexOf("clip-area")>-1||o.indexOf("clip-ellipse")>-1,a.index=r?parseInt(r.getAttribute("data-clip-index"),10):-1,a.clipPath=s,a.isClipStart=!0,n.clipPathState=c,ha(t,e),!0)},dragControl:function(t,e){var n=e.datas,i=e.originalDatas;if(!n.isClipStart)return!1;var r=i&&i.draggable||{},o=n.isControl,a=n.isLine,s=n.isArea,c=n.index,l=n.clipPath;if(!l)return!1;var u=r.isDrag?r.prevDist:pa(e),h=u[0],p=u[1],d=t.state,f=!s&&!o&&!a,g=l.type,b=l.poses,v=l.splitter,m=b.map((function(t){return t.pos})),y=m.map((function(t){return t.slice()}));f&&(h=-h,p=-p);var x=!o||"nesw"===b[c].direction;o&&!x&&fs(b,y,c,h,p),x&&m.forEach((function(t,e){y[e]=na(t,[h,p])}));var C=Qc(t,l,y),S=g+"("+C.join(v)+")";return d.clipPathState=S,Za(t,"onClip",Ja(t,e,{clipEventType:"changed",clipType:g,poses:y,clipStyle:S,clipStyles:C,distX:h,distY:p})),!0},dragControlEnd:function(t,e){t.state.clipPathState="";var n=e.isDrag,i=e.datas,r=e.isDouble,o=i.isLine,a=i.isControl;return!!i.isClipStart&&(Za(t,"onClipEnd",$a(t,e,{})),r&&(a?function(t,e){var n=e.datas,i=n.clipPath,r=n.index,o=i.type,a=i.poses,s=i.splitter,c=a.map((function(t){return t.pos})),l=c.length;if("polygon"===o)a.splice(r,1),c.splice(r,1);else{if("inset"!==o)return;if(r<8)return;if(Uc(a,c,r,8,l),l===a.length)return}var u=Qc(t,i,c);Za(t,"onClip",Ja(t,e,{clipEventType:"removed",clipType:o,poses:c,clipStyles:u,clipStyle:o+"("+u.join(s)+")",distX:0,distY:0}))}(t,e):o&&function(t,e){var n=gs(t,e),i=n[0],r=n[1],o=e.datas,a=o.clipPath,s=o.index,c=a.type,l=a.poses,u=a.splitter,h=l.map((function(t){return t.pos}));if("polygon"===c)h.splice(s,0,[i,r]);else{if("inset"!==c)return;var p=Lc.indexOf(s),d=Bc.indexOf(s),f=l.length;if(Wc(l,h,8,p,d,i,r,h[4][0],h[4][1],h[0][0],h[0][1]),f===l.length)return}var g=Qc(t,a,h);Za(t,"onClip",Ja(t,e,{clipEventType:"added",clipType:c,poses:h,clipStyles:g,clipStyle:c+"("+g.join(u)+")",distX:0,distY:0}))}(t,e)),r||n)},unset:function(t){t.state.clipPathState=""}},Zc={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t){return t.isRequest?"originDraggable"===t.requestAble:ur(t.inputEvent.target,Ca("origin"))},dragControlStart:function(t,e){var n=e.inputEvent,i=e.datas;ha(t,e);var r=Ja(t,e,{dragStart:lc.dragStart(t,(new Ss).dragStart([0,0],n))}),o=Za(t,"onDragOriginStart",r);return i.startOrigin=t.state.transformOrigin,i.startTargetOrigin=t.state.targetOrigin,i.prevOrigin=[0,0],i.isDragOrigin=!0,!1===o?(i.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,i=e.inputEvent,r=e.isPinch,o=e.isRequest;if(!n.isDragOrigin)return!1;var a=pa(e),s=t.state,c=s.width,l=s.height,u=s.offsetMatrix,h=s.targetMatrix,p=t.props.originRelative,d=void 0===p||p,f=s.is3d?4:3,g=[a[0],a[1]];if(o){var b=e.distOrigin;(b[0]||b[1])&&(g=b)}var v=na(n.startOrigin,g),m=na(n.startTargetOrigin,g),y=ia(g,n.prevOrigin),x=ma(u,h,v,f),C=t.getRect(),S=Ra(za(x,c,l,f)),O=[C.left-S.left,C.top-S.top];n.prevOrigin=g;var E=Ja(t,e,{width:c,height:l,origin:v,dist:g,delta:y,transformOrigin:[ds(m[0],c,d),ds(m[1],l,d)].join(" "),drag:lc.drag(t,Cs(t.state,O,i,!!r,!1))});return Za(t,"onDragOrigin",E),E},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(Za(t,"onDragOriginEnd",$a(t,e,{})),!0)},dragGroupControlCondition:function(t){return this.dragControlCondition(t)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return!!n&&(t.transformOrigin=n.transformOrigin,!0)},request:function(t){var e={},n=t.getRect(),i=0,r=0,o=n.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?i=t.x-n.left:"deltaX"in t&&(i+=t.deltaX),"y"in t?r=t.y-n.top:"deltaY"in t&&(r+=t.deltaY)),{datas:e,distX:i,distY:r,distOrigin:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function tl(t,e,n,i){var r;if(i)r=i;else{var o=window.getComputedStyle(t);if(!o)return null;r=o.borderRadius||""}return!r||!i&&"0px"===r?null:Xc(nr(r),e,n,0,0)}function el(t,e,n,i,r,o){var a=t.state,s=a.width,c=a.height,l=Hc(o,r,t.props.roundRelative,s,c),u=l.styles,h=Yc(r,l.raws),p=h.horizontals,d=h.verticals,f=u.join(" ");a.borderRadiusState=f,Za(t,"onRound",Ja(t,e,{horizontals:p,verticals:d,borderRadius:f,width:s,height:c,delta:i,dist:n}))}var nl={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,e){var n=t.state,i=n.target,r=n.matrix,o=n.left,a=n.top;if(!i)return null;var s=n.is3d?4:3,c=tl(i,n.width,n.height,n.borderRadiusState);return c?c.map((function(t,n){var i=ia(Ma(r,t.pos,s),[o,a]);return e.createElement("div",{key:"borderRadiusControl"+n,className:Ca("control","border-radius"),"data-radius-index":n,style:{transform:"translate("+i[0]+"px, "+i[1]+"px)"}})})):null},dragControlCondition:function(t){if(!t.inputEvent||t.isRequest)return!1;var e=t.inputEvent.target.className||"";return e.indexOf("border-radius")>-1||e.indexOf("moveable-line")>-1&&e.indexOf("moveable-direction")>-1},dragControlStart:function(t,e){var n=e.datas,i=e.inputEvent.target,r=i.className||"",o=r.indexOf("border-radius")>-1,a=r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1,s=o?parseInt(i.getAttribute("data-radius-index"),10):-1,c=a?parseInt(i.getAttribute("data-line-index"),10):-1;if(!o&&!a)return!1;if(!1===Za(t,"onRoundStart",Ja(t,e,{})))return!1;n.lineIndex=c,n.controlIndex=s,n.isControl=o,n.isLine=a,ha(t,e);var l=t.props.roundRelative,u=t.state,h=u.target,p=u.width,d=u.height;n.isRound=!0,n.prevDist=[0,0];var f=tl(h,p,d)||[];return n.controlPoses=f,u.borderRadiusState=Hc(f.map((function(t){return t.pos})),f,l,p,d).styles.join(" "),!0},dragControl:function(t,e){var n=e.datas;if(!n.isRound||!n.isControl||!n.controlPoses.length)return!1;var i=n.controlIndex,r=n.controlPoses,o=r.map((function(t){return t.pos.slice()})),a=pa(e),s=a[0],c=a[1],l=[s,c],u=ia(l,n.prevDist);return fs(r,o,i,s,c),n.prevDist=[s,c],el(t,e,l,u,r,o),!0},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var i=e.datas,r=e.isDouble;if(!i.isRound)return!1;var o=n.width,a=n.height,s=i.isControl,c=i.controlIndex,l=i.isLine,u=i.lineIndex,h=i.controlPoses,p=h.map((function(t){return t.pos})),d=p.length;if(r){if(s)Uc(h,p,c,0);else if(l){var f=gs(t,e);!function(t,e,n,i,r,o,a){var s=Yc(t),c=s.horizontals.length,l=s.verticals.length,u=-1,h=-1;0===n?0===c?u=0:1===c&&(u=1):3===n&&(c<=2?u=2:c<=3&&(u=3)),2===n?0===l?h=0:l<4&&(h=3):1===n&&(l<=1?h=1:l<=2&&(h=2)),Wc(t,e,0,u,h,i,r,o,a)}(h,p,u,f[0],f[1],o,a)}d!==h.length&&el(t,e,[0,0],[0,0],h,p),Za(t,"onRoundEnd",$a(t,e,{}))}return n.borderRadiusState="",!0},unset:function(t){t.state.borderRadiusState=""}},il={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(t,e){var n=t.props.targets||[];t.moveables=[];var i=t.state,r={left:i.left,top:i.top};return n.map((function(n,i){return e.createElement(fl,{key:"moveable"+i,ref:ji(t,"moveables",i),target:n,origin:!1,parentMoveable:t,parentPosition:r})}))}},rl=[Dc,cc,xs,lc,gc,yc,xc,Oc,Rc,Ic,{name:"padding",props:{padding:Object},events:{},render:function(t,e){var n=t.props;if(n.dragArea)return[];var i=n.padding||{},r=i.left,o=i.top,a=void 0===o?0:o,s=i.right,c=void 0===s?0:s,l=i.bottom,u=void 0===l?0:l,h=t.state,p=h.renderPoses,d=[h.pos1,h.pos2,h.pos3,h.pos4],f=[];return(void 0===r?0:r)>0&&f.push([0,2]),a>0&&f.push([0,1]),c>0&&f.push([1,3]),u>0&&f.push([2,3]),f.map((function(t,n){var i=t[0],r=t[1],o=ua([0,0],[100,0],[0,100],[100,100],d[i],d[r],p[i],p[r]);if(o.length)return e.createElement("div",{key:"padding"+n,className:Ca("padding"),style:{transform:_a(o,!0)}})}))}},Mc,Zc,$c,nl,il],ol=rl.reduce((function(t,e){return zo({},t,e.events)}),{}),al=rl.reduce((function(t,e){return zo({},t,e.props)}),{}),sl=function(t){var e={};for(var n in t)e[t[n]]=n;return e}(ol),cl=Object.keys(sl),ll=Object.keys(al),ul={};rl.forEach((function(t){var e=t.css;e&&e.forEach((function(t){ul[t]=!0}))}));var hl=Object.keys(ul).join("\n"),pl=function(t,e){var n,i=function(t){var e,n="rCS"+function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0}(t).toString(36),i=0;return{className:n,inject:function(r,o){void 0===o&&(o={});var a,s=function(t){if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(r),c=0===i;return(s||c)&&(a=function(t,e,n,i){var r=document.createElement("style");r.setAttribute("type","text/css"),r.setAttribute("data-styled-id",t),n.nonce&&r.setAttribute("nonce",n.nonce);var o=e;return n.original||(o=e.replace(/([^}{]*){/gm,(function(e,n){return ir(n).map((function(e){return e.indexOf(":global")>-1?e.replace(/\:global/g,""):e.indexOf(":host")>-1?""+e.replace(/\:host/g,"."+t):"."+t+" "+e})).join(", ")+"{"}))),r.innerHTML=o,(i||document.head||document.body).appendChild(r),r}(n,t,o,s)),c&&(e=a),s||++i,{destroy:function(){s?(r.removeChild(a),a=null):(i>0&&--i,0===i&&e&&(e.parentNode.removeChild(e),e=null))}}}}}(e);return(n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function n(){this.constructor=t}oo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["className","cspNonce"]),o=i.className;return kr("div",ao({ref:Bi(this,"element"),"data-styled-id":o,className:n+" "+o},r))},e.prototype.componentDidMount=function(){this.injectResult=i.inject(this.element,{nonce:this.props.cspNonce})},e.prototype.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},e.prototype.getElement=function(){return this.element},e}(Nr)).injector=i,n}(0,function(t,e){return e.replace(/([^}{]*){/gm,(function(e,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"}))}(Ao,Lo+hl));function dl(t,e,n,i){var r=Ko(e,n),o=t?qa(r/Math.PI*180,15)%180:-1;return kr("div",{key:"line"+i,className:Ca("line","direction",t),"data-rotation":o,"data-line-index":i,"data-direction":t,style:Ba(e,n,r)})}var fl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={container:null,target:null,beforeMatrix:Sa(),matrix:Sa(),targetMatrix:Sa(),offsetMatrix:Sa(),targetTransform:"",is3d:!1,left:0,top:0,width:0,height:0,transformOrigin:[0,0],direction:1,beforeDirection:1,beforeOrigin:[0,0],origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],renderPoses:[[0,0],[0,0],[0,0],[0,0]],targetClientRect:{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},containerClientRect:{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},moveableClientRect:{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},rotation:0},e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isUnmounted=!1,e}Mo(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=this.state,n=t.edge,i=t.parentPosition,r=t.className,o=t.target,a=t.zoom,s=t.cspNonce;this.checkUpdate(),this.updateRenderPoses();var c=i||{left:0,top:0},l=c.left,u=c.top,h=e.left,p=e.top,d=e.direction,f=e.renderPoses,g=t.targets,b=(g&&g.length||o)&&e.target,v=this.isDragging(),m={};return this.getEnabledAbles().forEach((function(t){m["data-able-"+t.name.toLowerCase()]=!0})),kr(pl,zo({cspNonce:s,ref:Bi(this,"controlBox"),className:Ca("control-box",-1===d?"reverse":"",v?"dragging":"")+" "+r},m,{style:{position:"absolute",display:b?"block":"none",transform:"translate("+(h-l)+"px, "+(p-u)+"px) translateZ(50px)","--zoom":a,"--zoompx":a+"px"}}),this.renderAbles(),dl(n?"n":"",f[0],f[1],0),dl(n?"e":"",f[1],f[3],1),dl(n?"w":"",f[0],f[2],2),dl(n?"s":"",f[2],f[3],3))},n.componentDidMount=function(){this.controlBox.getElement();var t=this.props,e=t.parentMoveable,n=t.container;this.updateEvent(t),n||e||this.updateRect("End",!1,!0),this.updateCheckInput()},n.componentDidUpdate=function(t){this.updateEvent(t),this.updateCheckInput()},n.componentWillUnmount=function(){this.isUnmounted=!0,Qa(this,"targetDragger"),Qa(this,"controlDragger")},n.getContainer=function(){var t=this.props,e=t.parentMoveable;return t.container||e&&e.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(t){return t&&(t.getAttribute("class")||"").indexOf(Ao)>-1},n.dragStart=function(t){return this.targetDragger&&this.targetDragger.triggerDragStart(t),this},n.hitTest=function(t){var e;if(t instanceof Element){var n=t.getBoundingClientRect();e={left:n.left,top:n.top,width:n.width,height:n.height}}else e=zo({width:0,height:0},t);var i=this.state.targetClientRect,r=i.left,o=i.top,a=e.left,s=e.top,c=a+e.width,l=s+e.height,u=r+i.width,h=o+i.height,p=Math.max(r,a),d=Math.min(u,c),f=Math.max(o,s),g=Math.min(h,l);if(d<p||g<f)return 0;var b=(Math.min(u,c)-Math.max(a,r))*(Math.min(h,l)-Math.max(o,s));return Math.min(100,(d-p)*(g-f)/b*100)},n.isInside=function(t,e){var n,i,r,o,a,s,c,l=this.state,u=l.targetClientRect;return!!l.target&&(o=l.pos3,a=l.pos4,s=[Ka(n=[t-u.left,e-u.top],i=l.pos1,r=l.pos2),Ka(n,r,o),Ka(n,o,i)],c=[Ka(n,r,o),Ka(n,o,a),Ka(n,a,r)],!!(s.every((function(t){return t>=0}))||s.every((function(t){return t<=0}))||c.every((function(t){return t>=0}))||c.every((function(t){return t<=0}))))},n.updateRect=function(t,e,n){void 0===n&&(n=!0);var i=this.props,r=i.parentMoveable,o=this.state,a=o.target||this.props.target,s=this.getContainer(),c=r?r.props.rootContainer:i.rootContainer;this.updateState(Fa(this.controlBox&&this.controlBox.getElement(),a,s,s,c||s,e?o:void 0),!r&&n)},n.updateEvent=function(t){var e=this.controlBox.getElement(),n=this.targetAbles.length,i=this.controlAbles.length,r=this.props,o=r.dragTarget||r.target,a=r.dragArea,s=!n&&this.targetDragger||!a&&(t.dragTarget||t.target)!==o||t.dragArea!==a;s&&(Qa(this,"targetDragger"),this.updateState({dragger:null})),i||Qa(this,"controlDragger"),o&&n&&!this.targetDragger&&(this.targetDragger=ms(this,o,"")),!this.controlDragger&&i&&(this.controlDragger=ys(this,e,"controlAbles","Control")),s&&this.unsetAbles()},n.isDragging=function(){return!!this.targetDragger&&this.targetDragger.isFlag()||!!this.controlDragger&&this.controlDragger.isFlag()},n.updateTarget=function(t){this.updateRect(t,!0)},n.getRect=function(){var t=this.state,e=Ya(this.state),n=e[0],i=e[1],r=e[2],o=e[3],a=Ra(e),s=t.width,c=t.height,l=a.width,u=a.height,h=a.left,p=a.top,d=[t.left,t.top],f=na(d,t.origin);return{width:l,height:u,left:h,top:p,pos1:n,pos2:i,pos3:r,pos4:o,offsetWidth:s,offsetHeight:c,beforeOrigin:na(d,t.beforeOrigin),origin:f,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},n.getRotation=function(){var t=this.state,e=t.direction,n=Ko(t.pos1,t.pos2)/Math.PI*180;return(n=e>=0?n:180-n)>=0?n:360+n},n.request=function(t,e,n){void 0===e&&(e={});var i=this.props,r=i.groupable,o=i.ables.filter((function(e){return e.name===t}))[0];if(this.isDragging()||!o||!o.request)return{request:function(){return this},requestEnd:function(){return this}};var a=this,s=o.request(this),c=n||e.isInstant,l=s.isControl?"controlAbles":"targetAbles",u=(r?"Group":"")+(s.isControl?"Control":""),h={request:function(e){return vs(a,l,"drag",u,"",zo({},s.request(e),{requestAble:t,isRequest:!0}),c),this},requestEnd:function(){return vs(a,l,"drag",u,"End",zo({},s.requestEnd(),{requestAble:t,isRequest:!0}),c),this}};return vs(a,l,"drag",u,"Start",zo({},s.requestStart(e),{requestAble:t,isRequest:!0}),c),c?h.request(e).requestEnd():h},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var t=this.state,e=this.props,n=t.beforeOrigin,i=t.transformOrigin,r=t.matrix,o=t.pos1,a=t.pos2,s=t.pos3,c=t.pos4,l=e.padding||{},u=l.left,h=void 0===u?0:u,p=l.top,d=void 0===p?0:p,f=l.bottom,g=void 0===f?0:f,b=l.right,v=void 0===b?0:b,m=t.is3d?4:3,y=e.groupable?n:na(n,[t.left,t.top]);t.renderPoses=[na(o,us(r,[-h,-d],i,y,m)),na(a,us(r,[v,-d],i,y,m)),na(s,us(r,[-h,g],i,y,m)),na(c,us(r,[v,g],i,y,m))]},n.checkUpdate=function(){var t=this.props,e=t.target,n=t.container,i=t.parentMoveable,r=this.state,o=r.target,a=r.container;(o||e)&&(this.updateAbles(),(!rs(o,e)||!rs(a,n))&&(this.updateState({target:e,container:n}),i||!n&&!this.controlBox||this.updateRect("End",!1,!1)))},n.triggerEvent=function(t,e){var n=this.props[t];return n&&n(e)},n.unsetAbles=function(){var t=this;this.targetAbles.filter((function(e){return!!e.unset&&(e.unset(t),!0)})).length&&this.forceUpdate()},n.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props,i=n.triggerAblesSimultaneously,r=t.filter((function(t){return t&&n[t.name]})),o="drag"+e+"ControlStart",a=es(r,["drag"+e+"Start","pinch"+e+"Start"],i),s=es(r,[o],i);this.targetAbles=a,this.controlAbles=s},n.updateState=function(t,e){if(e)this.setState(t);else{var n=this.state;for(var i in t)n[i]=t[i]}},n.getEnabledAbles=function(){var t=this.props;return t.ables.filter((function(e){return e&&t[e.name]}))},n.renderAbles=function(){var t,e,n,i,r=this,o=this.props.triggerAblesSimultaneously,a={createElement:kr};return(t=as(es(this.getEnabledAbles(),["render"],o).map((function(t){return(0,t.render)(r,a)||[]}))).filter((function(t){return t})),e=function(t){return t.key},n=[],i={},t.forEach((function(t,r){var o=e(t),a=i[o];a||(i[o]=a=[],n.push(a)),a.push(t)})),n).map((function(t){return t[0]}))},n.updateCheckInput=function(){this.targetDragger&&(this.targetDragger.options.checkInput=this.props.checkInput)},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,cspNonce:""},e}(Ar);function gl(t,e){return Math.max.apply(Math,t.map((function(t){return Math.max(t[0][e],t[1][e],t[2][e],t[3][e])})))}function bl(t,e){return Math.min.apply(Math,t.map((function(t){return Math.min(t[0][e],t[1][e],t[2][e],t[3][e])})))}var vl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new Po,e.moveables=[],e.transformOrigin="50% 50%",e}Mo(e,t);var n=e.prototype;return n.updateEvent=function(t){var e=this.state,n=this.props;e.target||(e.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetDragger=ms(this,e.target,"Group"),this.controlDragger=ys(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var i=!rs(t.container,n.container);i&&(e.container=n.container);var r=this.differ.update(n.targets);(i||r.added.length||r.changed.length||r.removed.length)&&this.updateRect()},n.checkUpdate=function(){this.updateAbles()},n.updateRect=function(t,e,n){var i;if(void 0===n&&(n=!0),this.controlBox){this.moveables.forEach((function(e){e.updateRect(t,!1,!1)}));var r=this.state,o=this.props,a=r.target||o.target;(!e||""!==t&&o.updateGroup)&&(this.rotation=o.defaultGroupRotate,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]);var s=this.rotation,c=this.scale,l=function(t,e){if(!t.length)return[0,0,0,0];var n=t.map((function(t){return Ya(t.state)})),i=jo,r=jo,o=0,a=0,s=qa(e,1e-7);if(s%90){var c=e/180*Math.PI,l=Math.tan(c),u=-1/l,h=[Go,jo],p=[Go,jo];n.forEach((function(t){t.forEach((function(t){var e=t[1]-l*t[0],n=t[1]-u*t[0];h[0]=Math.max(h[0],e),h[1]=Math.min(h[1],e),p[0]=Math.max(p[0],n),p[1]=Math.min(p[1],n)}))})),h.forEach((function(t){p.forEach((function(e){var n=(e-t)/(l-u),o=l*n+t;i=Math.min(i,n),r=Math.min(r,o)}))}));var d=n.map((function(t){var e=t[1],n=t[2],i=t[3];return[oa(t[0],-c),oa(e,-c),oa(n,-c),oa(i,-c)]}));o=gl(d,0)-bl(d,0),a=gl(d,1)-bl(d,1)}else if(i=bl(n,0),r=bl(n,1),o=gl(n,0)-i,a=gl(n,1)-r,s%180){var f=o;o=a,a=f}return[i,r,o,a]}(this.moveables,s),u=l[0],h=l[1],p=l[2],d=l[3];a.style.cssText+="left:0px;top:0px; transform-origin: "+this.transformOrigin+"; width:"+p+"px; height:"+d+"px;transform:rotate("+s+"deg) scale("+(c[0]>=0?1:-1)+", "+(c[1]>=0?1:-1)+")",r.width=p,r.height=d;var f=this.getContainer(),g=Fa(this.controlBox.getElement(),a,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||f,r),b=[g.left,g.top];i=Ya(g),g.pos1=i[0],g.pos2=i[1],g.pos3=i[2],g.pos4=i[3],g.origin=na(b,g.origin),g.beforeOrigin=na(b,g.beforeOrigin);var v=g.targetClientRect;v.top+=h-g.top-r.top,v.left+=u-g.left-r.left;var m=c[0]*c[1]>0?1:-1;this.updateState(zo({},g,{direction:m,beforeDirection:m,left:u-g.left,top:h-g.top}),n)}},n.triggerEvent=function(e,n){if(e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,n)},n.updateAbles=function(){t.prototype.updateAbles.call(this,this.props.ables.concat([il]),"Group")},e.defaultProps=zo({},fl.defaultProps,{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(fl),ml=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Mo(e,t),e.prototype.render=function(){var t=this.props.ables||[],e=this.props.target||this.props.targets,n=$i(e);if(n&&e.length>1){var i=zo({},this.props,{target:null,targets:e,ables:rl.concat([il],t)});return kr(vl,zo({key:"group",ref:Bi(this,"moveable")},i))}var r=n?e[0]:e;return kr(fl,zo({key:"single",ref:Bi(this,"moveable")},zo({},this.props,{target:r,ables:rl.concat(t)})))},function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);o>3&&a&&Object.defineProperty(e,n,a)}([Hi(Uo)],e.prototype,"moveable"),e}(Ar),yl=function(t,e){return(yl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function xl(t,e){function n(){this.constructor=t}yl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Cl=function(){return(Cl=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Sl=function(t){function e(e){var n=t.call(this,e)||this;return n.state={},n.state=n.props,n}return xl(e,t),e.prototype.render=function(){return t=kr(ml,Cl({ref:Bi(this,"moveable")},this.state)),kr(Lr,{element:t,container:this.state.parentElement});var t},e}(Nr),Ol=ll,El=Uo,wl=cl,kl=function(t){function e(e,n){void 0===n&&(n={});var i=t.call(this)||this;i.tempElement=document.createElement("div");var r=Cl({container:e},n),o={};wl.forEach((function(t){o[ar("on "+t)]=function(e){return i.trigger(t,e)}})),Gr(kr(Sl,Cl({ref:Bi(i,"innerMoveable"),parentElement:e},r,o)),i.tempElement);var a=r.target;return $i(a)&&a.length>1&&i.updateRect(),i}xl(e,t);var n=e.prototype;return n.setState=function(t,e){this.innerMoveable.setState(t,e)},n.destroy=function(){Gr(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Gi(El,(function(t,e){t[e]||(t[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.getMoveable();if(i&&i[e])return i[e].apply(i,t)})})),Gi(Ol,(function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var n;this.setState(((n={})[e]=t,n))},enumerable:!0,configurable:!0})}))],e)}(Ai);function Tl(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function _l(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var Pl,Il,Ml,zl,Rl=(Ml=function t(){_classCallCheck(this,t)},Tl([Hi(El,{dragStart:"ngDragStart"}),_l("design:type",kl)],Ml.prototype,"moveable",void 0),Ml),Dl=((Il=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),t=e.call(this),wl.forEach((function(e){t[e]=new d.n})),t}return _createClass(n,[{key:"ngOnInit",value:function(){var t=this,e={},n={};Ol.forEach((function(n){e[n]=t[n]})),wl.forEach((function(e){n[e]=function(n){t[e].emit(n)}})),this.moveable=new kl(this.container||document.body,e),this.moveable.on(n)}},{key:"ngOnChanges",value:function(t){var e=this.moveable;if(e)for(var n in t){var i=t[n],r=i.previousValue,o=i.currentValue;r!==o&&(e[n]=o)}}},{key:"ngOnDestroy",value:function(){this.moveable.destroy()}}]),n}(Rl)).\u0275fac=function(t){return new(t||Il)},Il.\u0275cmp=d.Ib({type:Il,selectors:[["ngx-moveable"]],inputs:{draggable:"draggable",resizable:"resizable",scalable:"scalable",rotatable:"rotatable",warpable:"warpable",pinchable:"pinchable",snappable:"snappable",origin:"origin",target:"target",container:"container",throttleDrag:"throttleDrag",throttleDragRotate:"throttleDragRotate",throttleResize:"throttleResize",throttleScale:"throttleScale",throttleRotate:"throttleRotate",keepRatio:"keepRatio",edge:"edge",pinchThreshold:"pinchThreshold",snapCenter:"snapCenter",snapVertical:"snapVertical",snapElement:"snapElement",snapHorizontal:"snapHorizontal",snapThreshold:"snapThreshold",horizontalGuidelines:"horizontalGuidelines",verticalGuidelines:"verticalGuidelines",elementGuidelines:"elementGuidelines",bounds:"bounds",dragArea:"dragArea",rotationPosition:"rotationPosition",baseDirection:"baseDirection",defaultGroupRotate:"defaultGroupRotate",ables:"ables",className:"className",renderDirections:"renderDirections",scrollable:"scrollable",scrollContainer:"scrollContainer",scrollThreshold:"scrollThreshold",getScrollPosition:"getScrollPosition",rootContainer:"rootContainer",zoom:"zoom",transformOrigin:"transformOrigin",snapDigit:"snapDigit",isDisplaySnapDigit:"isDisplaySnapDigit",innerBounds:"innerBounds",triggerAblesSimultaneously:"triggerAblesSimultaneously",snapGap:"snapGap",pinchOutside:"pinchOutside",padding:"padding",snapDistFormat:"snapDistFormat",dragTarget:"dragTarget",checkInput:"checkInput",cspNonce:"cspNonce",startDragRotate:"startDragRotate",originDraggable:"originDraggable",originRelative:"originRelative",defaultGroupOrigin:"defaultGroupOrigin",groupable:"groupable",clippable:"clippable",customClipPath:"customClipPath",defaultClipPath:"defaultClipPath",clipRelative:"clipRelative",dragWithClip:"dragWithClip",clipArea:"clipArea",roundable:"roundable",roundRelative:"roundRelative"},outputs:{dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",dragGroupStart:"dragGroupStart",dragGroup:"dragGroup",dragGroupEnd:"dragGroupEnd",resizeStart:"resizeStart",resize:"resize",resizeEnd:"resizeEnd",resizeGroupStart:"resizeGroupStart",resizeGroup:"resizeGroup",resizeGroupEnd:"resizeGroupEnd",scaleStart:"scaleStart",scale:"scale",scaleEnd:"scaleEnd",scaleGroupStart:"scaleGroupStart",scaleGroup:"scaleGroup",scaleGroupEnd:"scaleGroupEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",rotateGroupStart:"rotateGroupStart",rotateGroup:"rotateGroup",rotateGroupEnd:"rotateGroupEnd",warpStart:"warpStart",warp:"warp",warpEnd:"warpEnd",pinchStart:"pinchStart",pinch:"pinch",pinchEnd:"pinchEnd",pinchGroupStart:"pinchGroupStart",pinchGroup:"pinchGroup",pinchGroupEnd:"pinchGroupEnd",click:"click",clickGroup:"clickGroup",renderStart:"renderStart",render:"render",renderEnd:"renderEnd",renderGroupStart:"renderGroupStart",renderGroup:"renderGroup",renderGroupEnd:"renderGroupEnd",scroll:"scroll",scrollGroup:"scrollGroup",snap:"snap",clipStart:"clipStart",clip:"clip",clipEnd:"clipEnd",roundStart:"roundStart",round:"round",roundEnd:"roundEnd",dragOriginStart:"dragOriginStart",dragOrigin:"dragOrigin",dragOriginEnd:"dragOriginEnd"},features:[d.yb,d.zb()],decls:0,vars:0,template:function(t,e){},encapsulation:2}),Il),Nl=((Pl=function t(){_classCallCheck(this,t)}).\u0275mod=d.Mb({type:Pl}),Pl.\u0275inj=d.Lb({factory:function(t){return new(t||Pl)},imports:[[]]}),Pl),Al=["moveable"],Ll=["moveableLabel"],Bl=function(){return[]},jl=function(){return[0,250,500]},Gl=((zl=function(){function t(e,n,i,r){var o=this;_classCallCheck(this,t),this.cd=e,this.resizeEventer=n,this.eventerService=i,this.undoService=r,this.selectedNodes=[],this.guidingElements=[],this.selectedCanvasElements=[],this.defaultGroupRotate=0,this.dimention=new z,this.resizeHanles=[],this.directionHandles=[],this.keepRatio=!1,this.resiable=!0,this.rotatable=!0,this.oldStyles=[],this.MOVE_WITH_KEY=2,this.resizeEventer.get().subscribe((function(t){o.moveable.updateRect()})),this.eventerService.get().subscribe((function(t){t.type===y.a.UPDATE_DIRECTION_HANLDES&&o.updateDirectionHandle()}))}return _createClass(t,[{key:"ngOnChanges",value:function(t){t.selectedNodes&&this.selectedNodes&&this.selectedNodes.length&&this.init()}},{key:"init",value:function(){this.updateDirectionHandle()}},{key:"updateDirectionHandle",value:function(){if(this.isMultipleItems())this.directionHandles=Rn[v.MULTIPLE_SELECTION],this.keepRatio=Dn[v.MULTIPLE_SELECTION],this.resiable=Nn[v.MULTIPLE_SELECTION];else{var t=this.getFirstCanvasElement();t.locked?(this.directionHandles=[],this.rotatable=!1):(this.directionHandles=Rn[t.type],this.keepRatio=Dn[t.type],this.resiable=Nn[t.type],this.rotatable=!0)}}},{key:"startCustomDrag",value:function(t){var e=this;setTimeout((function(){e.moveable.isMoveableElement(t.target)||1!==e.selectedNodes.length||e.moveable.ngDragStart(t)}))}},{key:"onKeyDown",value:function(t){this.handleCustomDrag(t),this.handleUndoRedo(t)}},{key:"handleCustomDrag",value:function(t){if(Ri.includes(t.key)){var e=t.key;this.moveable.request("draggable",{deltaX:"ArrowLeft"===e?-this.MOVE_WITH_KEY:"ArrowRight"===e?this.MOVE_WITH_KEY:0,deltaY:"ArrowUp"===e?-this.MOVE_WITH_KEY:"ArrowDown"===e?this.MOVE_WITH_KEY:0},!0),t.preventDefault()}}},{key:"handleUndoRedo",value:function(t){(t.metaKey||t.ctrlKey)&&"z"===t.key&&(t.shiftKey&&"z"===t.key?this.undoService.redo():this.undoService.undo(),this.moveable.updateRect())}},{key:"getFirstCanvasElement",value:function(){return this.selectedCanvasElements[0]}},{key:"getFirstNode",value:function(){return this.selectedNodes[0]}},{key:"isMultipleItems",value:function(){return this.selectedCanvasElements.length>1}},{key:"onResizeStart",value:function(t){this.manualResize=!0,t.setOrigin(["%","%"]),this.onStart()}},{key:"onResize",value:function(t){console.log(t);var e=t.width,n=t.height;this.updateNodeCss({width:e,height:n,transform:t.drag.transform}),this.setDisplayLabel(t.clientX,t.clientY,"W : ".concat(e,"<br>H : ").concat(n))}},{key:"onScaling",value:function(t){this.updateNodeCss({transform:t.drag.transform+" scale(".concat(t.scale[0],", ").concat(t.scale[1],")")}),this.setDisplayLabel(t.clientX,t.clientY,"X : ".concat(t.scale[0].toFixed(2),"<br>Y : ").concat(t.scale[1].toFixed(2)))}},{key:"onElementClick",value:function(t){t.isDouble&&this.editTextElement(t.inputTarget)}},{key:"editTextElement",value:function(t){var e=this,n=this.getFirstCanvasElement();if(!n.locked&&n.type===v.TEXT){t.setAttribute("contentEditable","true"),t.focus(),document.execCommand("selectAll",!1,null);var i=function(){setTimeout((function(){e.moveable.updateRect()}))};t.addEventListener("blur",(function e(){n.locked||(t.removeAttribute("contentEditable"),n.children[0].innerText=t.innerText,t.removeEventListener("blur",e),t.removeEventListener("keydown",i))})),t.addEventListener("keydown",i)}}},{key:"dragging",value:function(t){console.log(t),this.updateNodeCss({transform:t.transform})}},{key:"rotating",value:function(t){this.updateNodeCss({transform:t.transform});var e=Mn.getRotationValue(this.getFirstNode());this.setDisplayLabel(t.clientX,t.clientY,"".concat(e," Deg"))}},{key:"updateNodeCss",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.selectedCanvasElements[e];n.locked||(this.preProcessStyles(n,t),zn.applyCss(this.selectedNodes[e],n,t,!0))}},{key:"preProcessStyles",value:function(t,e){[v.TEXT,v.LINE].includes(t.type)&&delete e[R.HEIGHT]}},{key:"onGroupDrag",value:function(t){var e=this;t.events.forEach((function(t,n){e.updateNodeCss({transform:t.transform},n)}))}},{key:"onGroupResizeStart",value:function(t){t.events.forEach((function(t){t.setOrigin(["%","%"])})),this.onStart()}},{key:"onGroupResize",value:function(t){var e=this;t.events.forEach((function(t,n){e.updateNodeCss({width:t.width,height:t.height,transform:t.drag.transform},n)})),this.setDisplayLabel(t.clientX,t.clientY,"W : ".concat(t.target.offsetWidth,"<br>H : ").concat(t.target.offsetHeight))}},{key:"onGroupScale",value:function(t){var e=this;t.events.forEach((function(t,n){e.updateNodeCss({transform:t.drag.transform+" scale(".concat(t.scale[0],", ").concat(t.scale[1],")")},n)})),this.setDisplayLabel(t.clientX,t.clientY,"W : ".concat(t.target.offsetWidth,"<br>H : ").concat(t.target.offsetHeight))}},{key:"onGroupRotate",value:function(t){var e=this;t.events.forEach((function(t,n){e.updateNodeCss({transform:t.drag.transform+" rotate(".concat(t.rotate,"deg)")},n)}));var n=Mn.getRotationValue(document.getElementsByClassName("moveable-area")[0]);this.setDisplayLabel(t.clientX,t.clientY,"".concat(n," Deg"))}},{key:"setDisplayLabel",value:function(t,e,n){this.moveableLabel.nativeElement.style.cssText="display: block; transform: translate(".concat(t,"px,\n      ").concat(e-10,"px) translate(-100%, -100%) translateZ(-100px);"),this.moveableLabel.nativeElement.innerHTML=n}},{key:"onStart",value:function(){this.oldStyles=zn.getClonedStylesAsText(this.selectedCanvasElements)}},{key:"onEnd",value:function(t){this.sendToUndoList(),this.moveableLabel.nativeElement.style.display="none"}},{key:"sendToUndoList",value:function(){var t=zn.getClonedStylesAsText(this.selectedCanvasElements);this.oldStyles.toString()!==t.toString()&&this.undoService.add({canvasElements:this.selectedCanvasElements,nodes:this.selectedNodes,type:Ln.STYLE,oldStyle:this.oldStyles,newStyle:t})}},{key:"ngOnDestroy",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||zl)(d.Ob(d.h),d.Ob(Wn),d.Ob(y.b),d.Ob(Bn))},zl.\u0275cmp=d.Ib({type:zl,selectors:[["app-select-element"]],viewQuery:function(t,e){var n;1&t&&(d.Cc(Al,!0),d.Cc(Ll,!0)),2&t&&(d.nc(n=d.cc())&&(e.moveable=n.first),d.nc(n=d.cc())&&(e.moveableLabel=n.first))},hostBindings:function(t,e){1&t&&d.bc("keydown",(function(t){return e.onKeyDown(t)}),!1,d.qc)},inputs:{selectedNodes:"selectedNodes",guidingElements:"guidingElements",selectedCanvasElements:"selectedCanvasElements",container:"container",defaultGroupRotate:"defaultGroupRotate"},features:[d.zb()],decls:4,vars:28,consts:[[1,"moveable-label"],["moveableLabel",""],[3,"target","edge","renderDirections","dragArea","throttleRotate","throttleScale","throttleDrag","elementGuidelines","draggable","container","origin","rotatable","resizable","scalable","warpable","pinchable","keepRatio","defaultGroupRotate","throttleResize","horizontalGuidelines","snappable","snapCenter","verticalGuidelines","resizeStart","resize","drag","dragGroup","resizeGroupStart","dragStart","dragGroupStart","scaleStart","scaleGroupStart","resizeGroup","scaleGroup","rotateGroup","rotateStart","rotateGroupStart","rotate","scale","click","dragEnd","rotateEnd","resizeEnd","scaleEnd","dragGroupEnd","rotateGroupEnd","resizeGroupEnd","scaleGroupEnd"],["moveable",""]],template:function(t,e){1&t&&(d.Pb(0,"div",0,1),d.Tb(2,"ngx-moveable",2,3),d.bc("resizeStart",(function(t){return e.onResizeStart(t)}))("resize",(function(t){return e.onResize(t)}))("drag",(function(t){return e.dragging(t)}))("dragGroup",(function(t){return e.onGroupDrag(t)}))("resizeGroupStart",(function(t){return e.onGroupResizeStart(t)}))("dragStart",(function(){return e.onStart()}))("dragGroupStart",(function(){return e.onStart()}))("scaleStart",(function(){return e.onStart()}))("scaleGroupStart",(function(){return e.onStart()}))("resizeGroup",(function(t){return e.onGroupResize(t)}))("scaleGroup",(function(t){return e.onGroupScale(t)}))("rotateGroup",(function(t){return e.onGroupRotate(t)}))("rotateStart",(function(){return e.onStart()}))("rotateGroupStart",(function(){return e.onStart()}))("rotate",(function(t){return e.rotating(t)}))("scale",(function(t){return e.onScaling(t)}))("click",(function(t){return e.onElementClick(t)}))("dragEnd",(function(t){return e.onEnd(t)}))("rotateEnd",(function(t){return e.onEnd(t)}))("resizeEnd",(function(t){return e.onEnd(t)}))("scaleEnd",(function(t){return e.onEnd(t)}))("dragGroupEnd",(function(t){return e.onEnd(t)}))("rotateGroupEnd",(function(t){return e.onEnd(t)}))("resizeGroupEnd",(function(t){return e.onEnd(t)}))("scaleGroupEnd",(function(t){return e.onEnd(t)})),d.Sb()),2&t&&(d.Bb(2),d.jc("target",e.selectedNodes)("edge",!0)("renderDirections",e.directionHandles)("dragArea",!0)("throttleRotate",1)("throttleScale",.01)("throttleDrag",1)("elementGuidelines",d.kc(25,Bl))("draggable",!0)("container",e.container)("origin",!1)("rotatable",e.rotatable)("resizable",e.resiable)("scalable",!1)("warpable",!1)("pinchable",!1)("keepRatio",e.keepRatio)("defaultGroupRotate",e.defaultGroupRotate)("elementGuidelines",e.guidingElements)("throttleResize",1)("horizontalGuidelines",d.kc(26,jl))("scalable",!0)("snappable",!0)("snapCenter",!0)("verticalGuidelines",d.kc(27,jl)))},directives:[Dl],styles:[".moveable-label{display:none;position:fixed;top:0;left:0;padding:5px;border-radius:3px;background:#333;color:#fff;font-weight:700;font-size:12px;transform:translate(-100%,-100%);z-index:9999;opacity:.6}",".toolbar-icon-size{width:32px;line-height:32px;height:32px}.my-resize-handle-e .my-resize-handle-inner,.my-resize-handle-n .my-resize-handle-inner,.my-resize-handle-s .my-resize-handle-inner,.my-resize-handle-w .my-resize-handle-inner,.resizable-props,ew .my-resize-handle-inner,ns .my-resize-handle-inner{border:1px solid #a9a9a9;background:#fff}.my-resize-handle{position:absolute}.my-resize-handle-e,.my-resize-handle-w,ew{top:50%}.my-resize-handle-e .my-resize-handle-inner,.my-resize-handle-w .my-resize-handle-inner,ew .my-resize-handle-inner{margin-top:-10px;width:6px;height:20px}.my-resize-handle-e{right:-3px}.my-resize-handle-w{left:-3px}.my-resize-handle-n,.my-resize-handle-s,ns{left:50%}.my-resize-handle-n .my-resize-handle-inner,.my-resize-handle-s .my-resize-handle-inner,ns .my-resize-handle-inner{margin-left:-10px;width:20px;height:6px}.my-resize-handle-n{top:-3px}.my-resize-handle-s{bottom:-3px}"],encapsulation:2}),zl),Hl=function(){return(Hl=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function Fl(t){return 180*(e=[t[0].clientX,t[0].clientY],n=[t[1].clientX,t[1].clientY],((i=Math.atan2(n[1]-e[1],n[0]-e[0]))>=0?i:i+2*Math.PI)/Math.PI);var e,n,i}function Xl(t,e,n,i){var r=Kl(t),o=Kl(e),a=Kl(i);return Wl(Jl(i[0],$l(r,a)),Jl(i[0],$l(o,a)),n[0])}function Ul(t){return t.touches?Vl(t.touches):[Ql(t)]}function Wl(t,e,n){var i=t.clientX,r=t.clientY;return{clientX:i,clientY:r,deltaX:i-e.clientX,deltaY:r-e.clientY,distX:i-n.clientX,distY:r-n.clientY}}function Yl(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function ql(t,e,n){return t.map((function(t,i){return Wl(t,e[i],n[i])}))}function Vl(t){for(var e=Math.min(t.length,2),n=[],i=0;i<e;++i)n.push(Ql(t[i]));return n}function Ql(t){return{clientX:t.clientX,clientY:t.clientY}}function Kl(t){return 1===t.length?t[0]:{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function Jl(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}}function $l(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}}var Zl=["textarea","input"],tu=function(){function t(t,e){var n=this;void 0===e&&(e={}),this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.targets=[],this.prevTime=0,this.isDouble=!1,this.startRotate=0,this.onDragStart=function(t,e){if(void 0===e&&(e=!0),n.flag||!1!==t.cancelable){var i=n.options,r=i.container,o=i.pinchOutside,a=i.dragstart,s=i.preventRightClick,c=i.preventDefault,l=i.checkInput,u=n.isTouch;if(!n.flag){var h=document.activeElement,p=t.target,d=p.tagName.toLowerCase(),f=Zl.indexOf(d)>-1,g=p.isContentEditable;if(f||g){if(l||h===p)return!1;if(h&&g&&h.isContentEditable&&h.contains(p))return!1}else(c||"touchstart"===t.type)&&h&&(h.isContentEditable||Zl.indexOf(h.tagName)>-1)&&h.blur()}var b=0;if(!n.flag&&u&&o&&(b=setTimeout((function(){pr(r,"touchstart",n.onDragStart,{passive:!1})}))),n.flag&&u&&o&&dr(r,"touchstart",n.onDragStart),function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(b),!n.flag&&t.touches.length!==t.changedTouches.length)return;n.pinchFlag||n.onPinchStart(t)}if(!n.flag){var v=n.startClients[0]?n.startClients:Ul(t);n.customDist=[0,0],n.flag=!0,n.isDrag=!1,n.startClients=v,n.prevClients=v,n.datas={},n.movement=0;var m=Wl(v[0],n.prevClients[0],n.startClients[0]);if(s&&(3===t.which||2===t.button))return clearTimeout(b),n.initDrag(),!1;!1===(a&&a(Hl({type:"dragstart",datas:n.datas,inputEvent:t,isTrusted:e},m)))&&(clearTimeout(b),n.initDrag()),n.isDouble=cr()-n.prevTime<200,n.flag&&c&&t.preventDefault()}}},this.onDrag=function(t,e){if(n.flag){var i=Ul(t);n.pinchFlag&&n.onPinch(t,i);var r=n.move([0,0],t,i);if(r&&(r.deltaX||r.deltaY)){var o=n.options.drag;o&&o(Hl({},r,{isScroll:!!e,inputEvent:t}))}}},this.onDragEnd=function(t){if(n.flag){var e=n.options,i=e.dragend;n.isTouch&&e.pinchOutside&&dr(e.container,"touchstart",n.onDragStart),n.pinchFlag&&n.onPinchEnd(t),n.flag=!1;var r=n.prevClients,o=n.startClients,a=n.pinchFlag?Xl(r,r,o,n.startPinchClients):Wl(r[0],r[0],o[0]),s=cr(),c=!n.isDrag&&n.isDouble;n.prevTime=n.isDrag||c?0:s,n.startClients=[],n.prevClients=[],i&&i(Hl({type:"dragend",datas:n.datas,isDouble:c,isDrag:n.isDrag,inputEvent:t},a))}};var i=[].concat(t);this.options=Hl({checkInput:!1,container:i.length>1?window:i[0],preventRightClick:!0,preventDefault:!0,pinchThreshold:0,events:["touch","mouse"]},e);var r=this.options,o=r.container,a=r.events;if(this.isTouch=a.indexOf("touch")>-1,this.isMouse=a.indexOf("mouse")>-1,this.customDist=[0,0],this.targets=i,this.isMouse&&(i.forEach((function(t){pr(t,"mousedown",n.onDragStart)})),pr(o,"mousemove",this.onDrag),pr(o,"mouseup",this.onDragEnd),pr(o,"contextmenu",this.onDragEnd)),this.isTouch){var s={passive:!1};i.forEach((function(t){pr(t,"touchstart",n.onDragStart,s)})),pr(o,"touchmove",this.onDrag,s),pr(o,"touchend",this.onDragEnd,s),pr(o,"touchcancel",this.onDragEnd,s)}}var e=t.prototype;return e.isDragging=function(){return this.isDrag},e.isFlag=function(){return this.flag},e.isPinchFlag=function(){return this.pinchFlag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(t,e,n,i){void 0===i&&(i=!0),this.flag&&(this.startClients.forEach((function(n){n.clientX-=t,n.clientY-=e})),this.prevClients.forEach((function(n){n.clientX-=t,n.clientY-=e})),i&&this.onDrag(n,!0))},e.move=function(t,e,n){var i=t[0],r=t[1];void 0===n&&(n=this.prevClients);var o=this.customDist,a=this.prevClients,s=this.startClients,c=this.pinchFlag?Xl(n,a,s,this.startPinchClients):Wl(n[0],a[0],s[0]);o[0]+=i,o[1]+=r,c.deltaX+=i,c.deltaY+=r;var l=c.deltaX,u=c.deltaY;return c.distX+=o[0],c.distY+=o[1],this.movement+=Math.sqrt(l*l+u*u),this.prevClients=n,this.isDrag=!0,Hl({type:"drag",datas:this.datas},c,{movement:this.movement,isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},e.onPinchStart=function(t){var e,n,i=this.options,r=i.pinchstart;if(!(this.isDrag&&this.movement>i.pinchThreshold)){var o=Vl(t.changedTouches);if(this.pinchFlag=!0,(e=this.startClients).push.apply(e,o),(n=this.prevClients).push.apply(n,o),this.startDistance=Yl(this.prevClients),this.startPinchClients=this.prevClients.slice(),r){var a=this.prevClients,s=Kl(a),c=Wl(s,s,s);this.startRotate=Fl(a),r(Hl({type:"pinchstart",datas:this.datas,angle:this.startRotate,touches:ql(a,a,a)},c,{inputEvent:t}))}}},e.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){this.isPinch=!0;var n=this.options.pinch;if(n){var i=this.prevClients,r=this.startClients,o=Wl(Kl(e),Kl(i),Kl(r)),a=Fl(e),s=Yl(e);n(Hl({type:"pinch",datas:this.datas,movement:this.movement,angle:a,rotation:a-this.startRotate,touches:ql(e,i,r),scale:s/this.startDistance,distance:s},o,{inputEvent:t}))}}},e.onPinchEnd=function(t){if(this.flag&&this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.options.pinchend;if(n){var i=this.prevClients,r=this.startClients,o=Wl(Kl(i),Kl(i),Kl(r));n(Hl({type:"pinchend",datas:this.datas,isPinch:e,touches:ql(i,i,r)},o,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}}},e.triggerDragStart=function(t){this.onDragStart(t,!1)},e.unset=function(){var t=this,e=this.targets,n=this.options.container;this.isMouse&&(e.forEach((function(e){dr(e,"mousedown",t.onDragStart)})),dr(n,"mousemove",this.onDrag),dr(n,"mouseup",this.onDragEnd),dr(n,"contextmenu",this.onDragEnd)),this.isTouch&&(e.forEach((function(e){dr(e,"touchstart",t.onDragStart)})),dr(n,"touchstart",this.onDragStart),dr(n,"touchmove",this.onDrag),dr(n,"touchend",this.onDragEnd),dr(n,"touchcancel",this.onDragEnd))},e.initDrag=function(){this.startClients=[],this.prevClients=[],this.flag=!1},t}(),eu=function(t,e){return(eu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},nu=function(t,e){return function(t,e){function n(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return a[t];var n,o=String(t);return(n=i[o.toLowerCase()])?n:(n=r[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}n.isEventKey=function(t,e){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;if(null==n)return!1;if("string"==typeof e){var o;if(o=i[e.toLowerCase()])return o===n;if(o=r[e.toLowerCase()])return o===n}else if("number"==typeof e)return e===n;return!1}};var i=(e=t.exports=n).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=e.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)i[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)i[o-48]=o;for(o=1;o<13;o++)i["f"+o]=o+111;for(o=0;o<10;o++)i["numpad "+o]=o+96;var a=e.names=e.title={};for(o in i)a[i[o]]=o;for(var s in r)i[s]=r[s]}(e={exports:{}},e.exports),e.exports}().names;function iu(t){return Array.isArray(t)}function ru(t){return"string"==typeof t}function ou(t,e,n,i){t.addEventListener(e,n,i)}function au(t,e,n){t.removeEventListener(e,n)}var su,cu={"+":"plus","left command":"meta","right command":"meta"},lu={shift:1,ctrl:2,alt:3,meta:4};function uu(t){var e=nu[t]||"";for(var n in cu)e=e.replace(n,cu[n]);return e.replace(/\s/g,"")}function hu(t,e){void 0===e&&(e=uu(t.keyCode));var n=[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"];return-1===n.indexOf(e)&&n.push(e),n.filter(Boolean)}function pu(t){var e=t.slice();return e.sort((function(t,e){return(lu[t]||5)-(lu[e]||5)})),e}var du=function(t){function e(e){void 0===e&&(e=window);var n=t.call(this)||this;return n.container=e,n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n.clear=function(){return n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n},n.keydownEvent=function(t){n.triggerEvent("keydown",t)},n.keyupEvent=function(t){n.triggerEvent("keyup",t)},n.blur=function(){n.clear(),n.trigger("blur")},ou(e,"blur",n.blur),ou(e,"keydown",n.keydownEvent),ou(e,"keyup",n.keyupEvent),n}!function(t,e){function n(){this.constructor=t}eu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return Object.defineProperty(e,"global",{get:function(){return su||(su=new e)},enumerable:!0,configurable:!0}),e.setGlobal=function(){return this.global},n.destroy=function(){var t=this.container;this.clear(),this.off(),au(t,"blur",this.blur),au(t,"keydown",this.keydownEvent),au(t,"keyup",this.keyupEvent)},n.keydown=function(t,e){return this.addEvent("keydown",t,e)},n.offKeydown=function(t,e){return this.removeEvent("keydown",t,e)},n.offKeyup=function(t,e){return this.removeEvent("keyup",t,e)},n.keyup=function(t,e){return this.addEvent("keyup",t,e)},n.addEvent=function(t,e,n){return iu(e)?this.on(t+"."+pu(e).join("."),n):ru(e)?this.on(t+"."+e,n):this.on(t,e),this},n.removeEvent=function(t,e,n){return iu(e)?this.off(t+"."+pu(e).join("."),n):ru(e)?this.off(t+"."+e,n):this.off(t,e),this},n.triggerEvent=function(t,e){this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;var n=uu(e.keyCode),i={key:n,isToggle:"ctrl"===n||"shift"===n||"meta"===n||"alt"===n,inputEvent:e,keyCode:e.keyCode,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey};this.trigger(t,i),this.trigger(t+"."+n,i);var r=hu(e,n);r.length>1&&this.trigger(t+"."+r.join("."),i)},e}(Ai),fu=function(t,e){return(fu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},gu=function(){return(gu=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function bu(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function vu(t,e,n){t!==e&&n(t,e)}function mu(t){var e=t.distX,n=void 0===e?0:e,i=t.distY,r=void 0===i?0:i,o=t.datas,a=o.startX,s=o.startY,c=Math.min(0,n),l=Math.min(0,r),u=Math.abs(n),h=Math.abs(r),p=a+c,d=s+l;return{left:p,top:d,right:p+u,bottom:d+h,width:u,height:h}}var yu,xu,Cu,Su,Ou,Eu,wu,ku,Tu,_u=(xu="rCS"+function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0}("\n:host {\n    position: fixed;\n    display: none;\n    border: 1px solid #4af;\n    background: rgba(68, 170, 255, 0.5);\n    z-index: 100;\n}\n").toString(36),Cu=0,{className:xu,inject:function(t,e){void 0===e&&(e={});var n,i=function(t){if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(t),r=0===Cu;return(i||r)&&(n=function(t,e,n,i){var r=document.createElement("style");r.setAttribute("type","text/css"),r.setAttribute("data-styled-id",t),n.nonce&&r.setAttribute("nonce",n.nonce);var o=e;return n.original||(o=e.replace(/([^}{]*){/gm,(function(e,n){return ir(n).map((function(e){return e.indexOf(":global")>-1?e.replace(/\:global/g,""):e.indexOf(":host")>-1?""+e.replace(/\:host/g,"."+t):"."+t+" "+e})).join(", ")+"{"}))),r.innerHTML=o,(i||document.head||document.body).appendChild(r),r}(xu,"\n:host {\n    position: fixed;\n    display: none;\n    border: 1px solid #4af;\n    background: rgba(68, 170, 255, 0.5);\n    z-index: 100;\n}\n",e,i)),r&&(yu=n),i||++Cu,{destroy:function(){i?(t.removeChild(n),n=null):(Cu>0&&--Cu,0===Cu&&yu&&(yu.parentNode.removeChild(yu),yu=null))}}}}),Pu="selecto-selection "+_u.className,Iu=["selectableTargets","selectByClick","selectFromInside","continueSelect","toggleContinueSelect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault"],Mu=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}(["dragContainer","cspNonce"],Iu),zu=(Boolean,Boolean,Boolean,Boolean,Boolean,["dragStart","drag","dragEnd","selectStart","select","selectEnd","keydown","keyup","scroll"]),Ru=["clickTarget","setSelectedTargets","triggerDragStart"],Du=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;return n.selectedTargets=[],n.differ=new Po,n.dragScroll=new wo,n.onDragStart=function(t,e){var i=t.datas,r=t.clientX,o=t.clientY,a=t.inputEvent,s=n.options,c=s.continueSelect,l=s.selectFromInside,u=s.selectByClick,h=n.getSelectableTargets(),p=h.map((function(t){var e=t.getBoundingClientRect(),n=e.left,i=e.top,r=e.width,o=e.height;return{left:n,top:i,right:n+r,bottom:i+o,width:r,height:o}}));i.selectableTargets=h,i.selectableRects=p,i.startSelectedTargets=n.selectedTargets;for(var d=e||document.elementFromPoint(r,o),f={left:r,top:o,right:r,bottom:o,width:0,height:0};d&&!(h.indexOf(d)>-1);)d=d.parentElement;var g=d?[d]:[],b=!l&&g.length>0;if(b&&!u)return!1;var v=a.type;if(!("mousedown"!==v&&"touchstart"!==v||n.trigger("dragStart",t)))return!1;if(c?g=n.getSelectedTargets(g):n.selectedTargets=[],n.select(g,f,a,!0),i.startX=r,i.startY=o,i.selectedTargets=g,n.target.style.cssText+="left:0px;top:0px;transform: translate("+r+"px, "+o+"px)",b&&u)return n.onDragEnd(t),a.preventDefault(),!1;"touchstart"===v&&a.preventDefault();var m=n.options.scrollOptions;return m&&m.container&&n.dragScroll.dragStart(t,m),!0},n.onDrag=function(t){var e=n.options.scrollOptions;e&&e.container&&n.dragScroll.drag(t,e)||n.check(t)},n.onDragEnd=function(t){var e=t.datas,i=mu(t);n.dragScroll.dragEnd(),n.target.style.cssText+="display: none;",n.trigger("dragEnd",gu(gu({},t),{rect:i})),n.selectEnd(e.startSelectedTargets,e.selectedTargets,i,t),n.selectedTargets=e.selectedTargets},n.onKeyDown=function(t){n.sameCombiKey(t)&&(n.continueSelect=!0,n.trigger("keydown",{}))},n.onKeyUp=function(t){n.sameCombiKey(t)&&(n.continueSelect=!1,n.trigger("keyup",{}))},n.onBlur=function(){n.toggleContinueSelect&&n.continueSelect&&n.trigger("keyup",{})},n.onDocumentSelectStart=function(t){if(n.dragger.isFlag()){var e=n.dragContainer;e===window&&(e=document.documentElement);var i=e instanceof Element?[e]:[].slice.call(e),r=t.target;i.some((function(e){if(e===r||e.contains(r))return t.preventDefault(),!0}))}},n.target=e.target,n.container=e.container,n.options=gu({target:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,hitRate:100,continueSelect:!1,toggleContinueSelect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,cspNonce:""},e),n.initElement(),n.initDragScroll(),n.setKeyController(),n}!function(t,e){function n(){this.constructor=t}fu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.setSelectedTargets=function(t){return this.selectedTargets=t,this.differ=new Po(t),this},n.setKeyContainer=function(t){var e=this,n=this.options;vu(n.keyContainer,t,(function(){n.keyContainer=t,e.setKeyController()}))},n.setToggleContinueSelect=function(t){var e=this,n=this.options;vu(n.toggleContinueSelect,t,(function(){n.toggleContinueSelect=t,e.setKeyEvent()}))},n.setPreventDefault=function(t){this.dragger.options.preventDefault=t},n.setCheckInput=function(t){this.dragger.options.checkInput=t},n.triggerDragStart=function(t){return this.dragger.triggerDragStart(t),this},n.destroy=function(){this.off(),this.keycon&&this.keycon.destroy(),this.dragger.unset(),this.injectResult.destroy(),dr(document,"selectstart",this.onDocumentSelectStart),this.keycon=null,this.dragger=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.clickTarget=function(t,e){var n=function(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}return{clientX:t.clientX,clientY:t.clientY}}(t),i={datas:{},clientX:n.clientX,clientY:n.clientY,inputEvent:t};return this.onDragStart(i,e)&&this.onDragEnd(i),this},n.setKeyController=function(){var t=this.options,e=t.keyContainer,n=t.toggleContinueSelect;this.keycon&&(this.keycon.destroy(),this.keycon=null),n&&(this.keycon=new du(e||window),this.keycon.keydown(this.onKeyDown).keyup(this.onKeyUp).on("blur",this.onBlur))},n.setKeyEvent=function(){this.options.toggleContinueSelect&&!this.keycon&&this.setKeyController()},n.initElement=function(){this.target=function t(e,n,i){var r=e.children,o=e.attributes,a=e.className,s=e.style,c=n||document.createElement(e.tag);for(var l in o)c.setAttribute(l,o[l]);var u=c.children;if(r.forEach((function(e,n){t(e,u[n],c)})),a&&a.split(" ").forEach((function(t){ur(c,t)||hr(c,t)})),s){var h=c.style;for(var l in s)h[l]=s[l]}return!n&&i&&i.appendChild(c),c}(function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=e||{},o=r.className,a=void 0===o?"":o,s=r.style,c=void 0===s?{}:s,l=bu(r,["className","style"]);return{tag:t,className:a,style:c,attributes:l,children:n}}("div",{className:Pu}),this.target,this.container);var t=this.target,e=this.options,n=e.dragContainer,i=e.checkInput,r=e.preventDefault;this.dragContainer="string"==typeof n?[].slice.call(document.querySelectorAll(n)):this.options.dragContainer||this.target.parentNode,this.dragger=new tu(this.dragContainer,{container:window,checkInput:i,preventDefault:r,dragstart:this.onDragStart,drag:this.onDrag,dragend:this.onDragEnd}),pr(document,"selectstart",this.onDocumentSelectStart),this.injectResult=_u.inject(t,{nonce:this.options.cspNonce})},n.hitTest=function(t,e,n,i,r){var o=this.options,a=o.hitRate,s=o.selectByClick,c=t.left,l=t.top,u=t.right,h=t.bottom,p=[];return r.forEach((function(t,r){var o=t.left,d=t.top,f=t.right,g=t.bottom,b=o<=e&&e<=f&&d<=n&&n<=g,v=(f-o)*(g-d),m=Math.max(o,c),y=Math.min(f,u),x=Math.max(d,l),C=Math.min(g,h);s&&b?p.push(i[r]):y<m||C<x||Math.round((y-m)*(C-x)/v*100)>=a&&p.push(i[r])})),p},n.initDragScroll=function(){var t=this;this.dragScroll.on("scroll",(function(e){t.trigger("scroll",{container:e.container,direction:e.direction})})).on("move",(function(e){var n=e.offsetX,i=e.offsetY,r=e.inputEvent,o=r.datas;o.startX-=n,o.startY-=i,o.selectableRects.forEach((function(t){t.top-=i,t.bottom-=i,t.left-=n,t.right-=n})),t.dragger.scrollBy(n,i,r.inputEvent,!1),r.distX+=n,r.distY+=i,t.check(r)}))},n.getSelectableTargets=function(){var t=[];return this.options.selectableTargets.forEach((function(e){Ji(e)?t.push(e):[].slice.call(document.querySelectorAll(e)).forEach((function(e){t.push(e)}))})),t},n.getSelectedTargets=function(t){var e=_o(this.selectedTargets,t),n=e.list,i=e.prevList,r=e.removed;return e.added.map((function(t){return n[t]})).concat(r.map((function(t){return i[t]})))},n.select=function(t,e,n,i){var r=this.differ.update(t),o=r.added,a=r.removed,s=r.prevList,c=r.list;i&&this.trigger("selectStart",{selected:t,added:o.map((function(t){return c[t]})),removed:a.map((function(t){return s[t]})),rect:e,inputEvent:n}),(o.length||a.length)&&this.trigger("select",{selected:t,added:o.map((function(t){return c[t]})),removed:a.map((function(t){return s[t]})),rect:e,inputEvent:n})},n.selectEnd=function(t,e,n,i){var r=i.inputEvent,o=i.isDouble,a=_o(t,e),s=a.added,c=a.removed,l=a.prevList,u=a.list,h=_o(this.selectedTargets,e),p=h.added,d=h.removed,f=h.prevList,g=h.list,b=r.type,v="mousedown"===b||"touchstart"===b;this.trigger("selectEnd",{selected:e,added:s.map((function(t){return u[t]})),removed:c.map((function(t){return l[t]})),afterAdded:p.map((function(t){return g[t]})),afterRemoved:d.map((function(t){return f[t]})),isDragStart:v,isDouble:!!o,rect:n,inputEvent:r})},n.check=function(t){var e=t.datas,n=t.inputEvent,i=mu(t);this.target.style.cssText+="display: block;left:0px;top:0px;transform: translate("+i.left+"px, "+i.top+"px);width:"+i.width+"px;height:"+i.height+"px;";var r=this.hitTest(i,e.startX,e.startY,e.selectableTargets,e.selectableRects),o=this.getSelectedTargets(r);this.trigger("drag",gu(gu({},t),{rect:i})),this.select(o,i,n),e.selectedTargets=o},n.sameCombiKey=function(t){var e=[].concat(this.options.toggleContinueSelect),n=hu(t.inputEvent,t.key);return e.every((function(t){return n.indexOf(t)>-1}))},function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Gi(Iu,(function(t,e){var n={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},i=ar("set "+e);n.set=t[i]?function(t){this[i](t)}:function(t){this.options[e]=t},Object.defineProperty(t,e,n)}))],e)}(Ai),Nu=["el"],Au=(Eu=function t(){_classCallCheck(this,t)},Tl([Hi(Ru),_l("design:type",Du)],Eu.prototype,"selecto",void 0),Eu),Lu=((Ou=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.call(this)).selectionClassName=Pu,zu.forEach((function(e){t[e]=new d.n})),t}return _createClass(n,[{key:"ngAfterViewInit",value:function(){var t=this,e={};Mu.forEach((function(n){n in t&&(e[n]=t[n])})),this.selecto=new Du(Object.assign({},e,{target:this.elRef.nativeElement}));var n=this.selecto;zu.forEach((function(e){n.on(e,(function(n){t[e].emit(n)}))}))}},{key:"ngOnChanges",value:function(t){var e=this.selecto;if(e)for(var n in t)if(!(Iu.indexOf(n)<-1)){var i=t[n],r=i.previousValue,o=i.currentValue;r!==o&&(e[n]=o)}}},{key:"ngOnDestroy",value:function(){this.selecto.destroy()}}]),n}(Au)).\u0275fac=function(t){return new(t||Ou)},Ou.\u0275cmp=d.Ib({type:Ou,selectors:[["ngx-selecto"]],viewQuery:function(t,e){var n;1&t&&d.Cc(Nu,!0),2&t&&d.nc(n=d.cc())&&(e.elRef=n.first)},inputs:{target:"target",container:"container",dragContainer:"dragContainer",selectableTargets:"selectableTargets",selectByClick:"selectByClick",selectFromInside:"selectFromInside",continueSelect:"continueSelect",toggleContinueSelect:"toggleContinueSelect",keyContainer:"keyContainer",hitRate:"hitRate",scrollOptions:"scrollOptions",checkInput:"checkInput",preventDefault:"preventDefault",cspNonce:"cspNonce"},outputs:{dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",selectStart:"selectStart",select:"select",selectEnd:"selectEnd",keydown:"keydown",keyup:"keyup",scroll:"scroll"},features:[d.yb,d.zb()],decls:2,vars:2,consts:[["el",""]],template:function(t,e){1&t&&d.Pb(0,"div",null,0),2&t&&d.Db(e.selectionClassName)},encapsulation:2}),Ou),Bu=((Su=function t(){_classCallCheck(this,t)}).\u0275mod=d.Mb({type:Su}),Su.\u0275inj=d.Lb({factory:function(t){return new(t||Su)},imports:[[]]}),Su),ju=["*"],Gu=((ku=function(){function t(){_classCallCheck(this,t),this.centerAlign=!0,this.backdropClass="dark-backdrop"}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||ku)},ku.\u0275cmp=d.Ib({type:ku,selectors:[["app-popup"]],inputs:{centerAlign:"centerAlign",backdropClass:"backdropClass"},ngContentSelectors:ju,decls:3,vars:3,consts:[["id","myModal",1,"my-modal",3,"ngClass"],[1,"my-modal-content"]],template:function(t,e){1&t&&(d.ic(),d.Tb(0,"div",0),d.Tb(1,"div",1),d.hc(2),d.Sb(),d.Sb()),2&t&&(d.Fb("my-modal-center",e.centerAlign),d.jc("ngClass",e.backdropClass))},directives:[h.i],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.my-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:10000;display:flex;justify-content:center;width:100%;height:100%;overflow:hidden;outline:0}.my-modal-center[_ngcontent-%COMP%]{align-items:center}.light-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.2)}.medium-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.5)}.dark-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.8)}.my-modal-content[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;pointer-events:auto;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.2);border-radius:.3rem;margin:1rem;outline:0;padding:10px}"]}),ku),Hu=((wu=function(){function t(){_classCallCheck(this,t),this.selectedScaleIndex=100,this.scaleOptions=[{label:50,value:.5},{label:75,value:.75},{label:100,value:1},{label:125,value:1.25},{label:150,value:1.5},{label:200,value:2}]}return _createClass(t,[{key:"ngOnChanges",value:function(t){this.selectedScaleIndex=2}},{key:"setIntialScale",value:function(){}},{key:"zoomIn",value:function(){this.selectedScaleIndex!==this.scaleOptions.length-1&&(this.selectedScaleIndex++,this.changeScale())}},{key:"changeScale",value:function(){this.node.style.cssText="transition: transform ease .3s;"+"transform: scale(".concat(this.scaleOptions[this.selectedScaleIndex].value,");")}},{key:"zoomOut",value:function(){0!==this.selectedScaleIndex&&(this.selectedScaleIndex--,this.changeScale())}}]),t}()).\u0275fac=function(t){return new(t||wu)},wu.\u0275cmp=d.Ib({type:wu,selectors:[["app-canvas-scale"]],inputs:{node:"node"},features:[d.zb()],decls:12,vars:2,consts:[[1,"canvas-scaler"],["mat-icon-button","","matTooltip","Zoom in","matTooltipPosition","left",3,"autofocus","click"],[1,"scale-value"],[1,"m-0"],["mat-icon-button","","isIconButton","true","matTooltip","Zoom out","matTooltipPosition","left",3,"click"]],template:function(t,e){1&t&&(d.Tb(0,"div",0),d.Tb(1,"div"),d.Tb(2,"button",1),d.bc("click",(function(){return e.zoomIn()})),d.Tb(3,"mat-icon"),d.zc(4,"add"),d.Sb(),d.Sb(),d.Sb(),d.Tb(5,"div",2),d.Tb(6,"label",3),d.zc(7),d.Sb(),d.Sb(),d.Tb(8,"div"),d.Tb(9,"button",4),d.bc("click",(function(){return e.zoomOut()})),d.Tb(10,"mat-icon"),d.zc(11,"remove"),d.Sb(),d.Sb(),d.Sb(),d.Sb()),2&t&&(d.Bb(2),d.jc("autofocus",!1),d.Bb(5),d.Bc("",null==e.scaleOptions[e.selectedScaleIndex]?null:e.scaleOptions[e.selectedScaleIndex].label,"%"))},directives:[$.a,Un.a,On.a],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.canvas-scaler[_ngcontent-%COMP%]{position:fixed;bottom:60px;right:60px;background-color:rgba(83,47,47,.6);border-radius:3px;z-index:10001}.canvas-scaler[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center}.canvas-scaler[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.scale-value[_ngcontent-%COMP%]{color:#dedede;font-size:.625rem}.mat-icon-button[_ngcontent-%COMP%]{color:#f5f5f5}.mat-icon-button[_ngcontent-%COMP%]:hover{background:#a9a9a9}"]}),wu),Fu=["canvasPreview"],Xu=((Tu=function(){function t(){_classCallCheck(this,t),this.closePreview=new d.n}return _createClass(t,[{key:"ngOnInit",value:function(){this.canvasElement.style[R.OVERFLOW]=D.OVERFLOW_HIDDEN,this.canvasPreview.nativeElement.appendChild(zn.buildDom(this.canvasElement))}},{key:"close",value:function(){this.closePreview.emit()}},{key:"print",value:function(){zn.print(this.canvasPreview.nativeElement.innerHTML)}}]),t}()).\u0275fac=function(t){return new(t||Tu)},Tu.\u0275cmp=d.Ib({type:Tu,selectors:[["app-canvas-preview"]],viewQuery:function(t,e){var n;1&t&&d.vc(Fu,!0),2&t&&d.nc(n=d.cc())&&(e.canvasPreview=n.first)},inputs:{canvasElement:"canvasElement"},outputs:{closePreview:"closePreview"},decls:14,vars:1,consts:[[1,"my-modal-header"],[1,"modal-title"],["mat-icon-button","","matTooltip","Close","matTooltipPosition","above",3,"click"],[1,"material-icons"],[1,"canvas-preview-container"],[1,"canvas-preview","fit-content"],["canvasPreview",""],[3,"node"]],template:function(t,e){if(1&t&&(d.Tb(0,"div",0),d.Tb(1,"h5",1),d.zc(2,"Preview"),d.Sb(),d.Tb(3,"div"),d.Tb(4,"button",2),d.bc("click",(function(){return e.print()})),d.Tb(5,"i",3),d.zc(6,"print"),d.Sb(),d.Sb(),d.Tb(7,"button",2),d.bc("click",(function(){return e.close()})),d.Tb(8,"i",3),d.zc(9,"close"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Tb(10,"div",4),d.Pb(11,"div",5,6),d.Sb(),d.Pb(13,"app-canvas-scale",7)),2&t){var n=d.oc(12);d.Bb(13),d.jc("node",n)}},directives:[$.a,Un.a,Hu],styles:[".my-modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.canvas-preview-container[_ngcontent-%COMP%]{width:calc(100vw - 60px);height:calc(100vh - 100px);overflow-y:auto;background-color:#f5f5f5;border:1px solid #dcdcdc;display:flex;justify-content:center}.canvas-preview[_ngcontent-%COMP%]{transform-origin:top;margin:30px}"]}),Tu),Uu=["canvas"],Wu=["canvasContainer"],Yu=["selectElementRef"];function qu(t,e){if(1&t){var n=d.Ub();d.Tb(0,"app-popup"),d.Tb(1,"app-canvas-preview",13),d.bc("closePreview",(function(){return d.sc(n),d.ec().showPreview=!1})),d.Sb(),d.Sb()}if(2&t){var i=d.ec();d.Bb(1),d.jc("canvasElement",null==i.project?null:i.project.canvasElement)}}function Vu(t,e){if(1&t&&d.Pb(0,"app-canvas-scale",14),2&t){d.ec();var n=d.oc(7);d.jc("node",n)}}var Qu,Ku,Ju,$u,Zu,th,eh,nh=((Qu=function(){function t(e,n){_classCallCheck(this,t),this.eventer=e,this.undoService=n,this.CANVAS_EVENTS=[y.a.CANVAS_PREVIEW,y.a.CANVAS_DOWNLOAD,y.a.CANVAS_ADD_ITEM],this.body=document.body,this.toolbarOptions=[],this.project=An,this.showPreview=!1,this.defaultGroupRotate=0,this.guidingElements=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.createInitialView(),this.subscribeEventer()}},{key:"ngAfterViewInit",value:function(){}},{key:"drop",value:function(t){t.preventDefault();var e=t.dataTransfer.getData("pickerItem");if(e){var n=JSON.parse(e),i=n.item.canvasElement,r=this.projectNode.getBoundingClientRect();zn.setInitialNodeLocation(t,n,r),this.addNewNode(i)}}},{key:"onDuplicateSelectedItem",value:function(t){var e=this;t.canvasElements.forEach((function(t){var n=x.cloneDeep(t);zn.setDuplicateNodeLocation(n),e.addNewNode(n)}))}},{key:"addNewNode",value:function(t){switch(t.type){case v.BACKGROUND:this.handleBackgroundChange(t);break;default:this.handleGenericElements(t)}}},{key:"handleBackgroundChange",value:function(t){var e=_defineProperty({},R.BG,this.project.canvasElement.style[R.BG]),n=_defineProperty({},R.BG,t.style[R.BG]);zn.applyCss(this.projectNode,this.project.canvasElement,n,!0),this.undoService.add({canvasElements:[this.project.canvasElement],nodes:[this.projectNode],type:Ln.STYLE,oldStyle:[JSON.stringify(e)],newStyle:[JSON.stringify(n)]})}},{key:"handleGenericElements",value:function(t){this.adjustWidthHeight(t);var e=zn.buildDom(t);this.attachEventListner(e,t),this.addItemInProject(t,e),this.addToUndoList([t],[e],Ln.ADD)}},{key:"addToUndoList",value:function(t,e,n){this.undoService.add({canvasElements:t,nodes:e,type:n})}},{key:"adjustWidthHeight",value:function(t){t.type===v.PHOTO&&In.setInitialWidthAndHeight(this.getProjectWidthHeight(),t)}},{key:"onSelectionStart",value:function(t){}},{key:"onSelection",value:function(t){t.removed.forEach((function(t){return t.classList.remove("selected-item-guide")})),t.selected.forEach((function(t){return t.classList.add("selected-item-guide")}))}},{key:"selectoDragStart",value:function(t){var e=t.inputEvent.target.classList;(e.contains("moveable-area")||e.contains("moveable-control")||e.contains("moveable-line"))&&t.stop()}},{key:"selectoDragEnd",value:function(t){}},{key:"clearItemSelection",value:function(){if(this.selectedNodes){var t,e=_createForOfIteratorHelper(this.selectedNodes);try{for(e.s();!(t=e.n()).done;)t.value.classList.remove("selected-item-guide")}catch(n){e.e(n)}finally{e.f()}}this.selectedNodes=[],this.selectedCanvasElements=[]}},{key:"onSelectionEnd",value:function(t){var e=t.selected;e.forEach((function(t){return t.style.outline=""}));for(var n=this.projectNode.children,i=[],r=[],o=[],a=0;a<n.length;a++)if(e.includes(n[a])){var s=this.project.canvasElement.children[a];1!==e.length&&s.locked||(r.push(n[a]),i.push(s))}else o.push(n[a]);1===r.length&&this.addZIndex(r[0],i[0]),this.setInitialGroupRotate(i[0]),this.selectedNodes=r,this.selectedCanvasElements=i,this.guidingElements=o,t.isDragStart&&this.selectElementRef.startCustomDrag(t.inputEvent)}},{key:"setInitialGroupRotate",value:function(t){this.defaultGroupRotate=t?Mn.getTransformValue(t.style[R.TRANSFORM],"rotate"):0}},{key:"onSelectEnd",value:function(t){}},{key:"getProjectWidthHeight",value:function(){return{width:this.project.canvasElement.dimention.width,height:this.project.canvasElement.dimention.height}}},{key:"addItemInProject",value:function(t,e){this.projectNode.appendChild(e),this.project.canvasElement.children.push(t)}},{key:"setNodeLocation",value:function(t,e,n){n.dimention.translateX=t.x,n.dimention.translateY=t.y,zn.applyDimention(e,n,n.dimention,!0)}},{key:"allowDrop",value:function(t){t.preventDefault()}},{key:"createInitialView",value:function(){var t=zn.buildDom(this.project.canvasElement);this.projectNode=t,this.canvas.nativeElement.appendChild(t),this.undoService.init(this.projectNode,this.project.canvasElement)}},{key:"onCanvasClick",value:function(t){t.target&&t.target.classList.contains("canvas-template")&&(this.selectedNode=null,this.selectedCanvasElement=null)}},{key:"attachEventListner",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.selectElement(t,e,n),this.addZIndex(t,e)}},{key:"selectElement",value:function(t,e,n){this.selectedNodes=[t],this.selectedCanvasElements=[e],this.guidingElements=Array.from(this.projectNode.children)}},{key:"getInitialRotateDeg",value:function(){var t=this.selectedNode.style.transform;return t?parseInt(t.split("rotate(")[1],10):0}},{key:"addZIndex",value:function(t,e){e.locked||e.style[R.Z_INDEX]===this.project.currentZindex-1||zn.applyCss(t,e,_defineProperty({},R.Z_INDEX,this.project.currentZindex++),!0)}},{key:"onItemRemove",value:function(t){var e=t.canvasElements,n=t.nodes,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.project.canvasElement.children.filter((function(t){return!e.includes(t)}));if(this.project.canvasElement.children=r,this.addToUndoList(e,n,Ln.DELETE),n.forEach((function(t){t.remove()})),i){var o=this.projectNode.children;this.selectedCanvasElements=r.length?[r[r.length-1]]:[],this.selectedNodes=o.length?[o[o.length-1]]:[]}}},{key:"onItemGroup",value:function(t){var e=new M("div",{},{position:"absolute"},t.canvasElements);e.type=v.GROUP,zn.setGroupNodeLocation(t.nodes,e,this.canvas.nativeElement),this.onItemRemove(t,!1),this.addNewNode(e)}},{key:"onItemUnGroup",value:function(t){var e=this,n=t.canvasElements[0],i=Mn.getTransformValue(n.style.transform,"translate");n.children.forEach((function(t){var n=Mn.getTransformValue(t.style.transform,"translate");Mn.updateTransformValue(t.style,"translate","translate(".concat(i.x+n.x,"px,").concat(i.y+n.y,"px)")),e.addNewNode(t)})),zn.setUnGroupNodeLocation(t.nodes[0],t.canvasElements[0]),this.onItemRemove(t,!1)}},{key:"subscribeEventer",value:function(){var t=this;this.eventer.get().pipe(Object(Pn.a)((function(e){return t.CANVAS_EVENTS.includes(e.type)}))).subscribe((function(e){t.processEventer(e)}))}},{key:"processEventer",value:function(t){switch(t.type){case y.a.CANVAS_PREVIEW:this.showPreview=!0;break;case y.a.CANVAS_ADD_ITEM:this.addNewNode(t.value.item)}}}]),t}()).\u0275fac=function(t){return new(t||Qu)(d.Ob(y.b),d.Ob(Bn))},Qu.\u0275cmp=d.Ib({type:Qu,selectors:[["app-canvas"]],viewQuery:function(t,e){var n;1&t&&(d.vc(Uu,!0),d.vc(Wu,!0),d.vc(Yu,!0)),2&t&&(d.nc(n=d.cc())&&(e.canvas=n.first),d.nc(n=d.cc())&&(e.canvasContainer=n.first),d.nc(n=d.cc())&&(e.selectElementRef=n.first))},decls:14,vars:19,consts:[[1,"tool-bar"],[3,"selectedNodes","selectedCanvasElements","clearSelectedElements","duplicateSelectedItem","removeSelectedItem","unGroupSelectedItem","groupSelectedItem"],[1,"canvas-container"],["canvasContainer",""],[1,"canvas-wrapper","position-relative"],[2,"width","100%","height","50px"],[1,"canvas",3,"drop","dragover","click"],["canvas",""],[3,"selectedNodes","defaultGroupRotate","guidingElements","selectedCanvasElements","container"],["selectElementRef",""],[3,"container","dragContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","toggleContinueSelect","keyContainer","hitRate","preventDefault","selectEnd","select","dragStart","dragEnd"],[4,"ngIf"],[3,"node",4,"ngIf"],[3,"canvasElement","closePreview"],[3,"node"]],template:function(t,e){if(1&t&&(d.Tb(0,"div",0),d.Tb(1,"app-toolbar",1),d.bc("clearSelectedElements",(function(){return e.clearItemSelection()}))("duplicateSelectedItem",(function(t){return e.onDuplicateSelectedItem(t)}))("removeSelectedItem",(function(t){return e.onItemRemove(t)}))("unGroupSelectedItem",(function(t){return e.onItemUnGroup(t)}))("groupSelectedItem",(function(t){return e.onItemGroup(t)})),d.Sb(),d.Sb(),d.Tb(2,"div",2,3),d.Tb(4,"div",4),d.Pb(5,"div",5),d.Tb(6,"div",6,7),d.bc("drop",(function(t){return e.drop(t)}))("dragover",(function(t){return e.allowDrop(t)}))("click",(function(t){return e.onCanvasClick(t)})),d.Sb(),d.Pb(8,"div",5),d.Pb(9,"app-select-element",8,9),d.Tb(11,"ngx-selecto",10),d.bc("selectEnd",(function(t){return e.onSelectionEnd(t)}))("select",(function(t){return e.onSelection(t)}))("dragStart",(function(t){return e.selectoDragStart(t)}))("dragEnd",(function(t){return e.selectoDragEnd(t)})),d.Sb(),d.Sb(),d.Sb(),d.yc(12,qu,2,1,"app-popup",11),d.yc(13,Vu,1,1,"app-canvas-scale",12)),2&t){var n=d.oc(3),i=d.oc(7);d.Bb(1),d.jc("selectedNodes",e.selectedNodes)("selectedCanvasElements",e.selectedCanvasElements),d.Bb(8),d.jc("selectedNodes",e.selectedNodes)("defaultGroupRotate",e.defaultGroupRotate)("guidingElements",e.guidingElements)("selectedCanvasElements",e.selectedCanvasElements)("container",i),d.Bb(2),d.jc("container",i)("dragContainer",n)("selectableTargets",e.projectNode.childNodes)("selectByClick",!0)("selectFromInside",!1)("continueSelect",!1)("toggleContinueSelect","shift")("keyContainer",i)("hitRate",1)("preventDefault",!1),d.Bb(1),d.jc("ngIf",e.showPreview),d.Bb(1),d.jc("ngIf",!e.showPreview)}},directives:[zi,Gl,Lu,h.k,Gu,Xu,Hu],styles:[".toolbar-icon-size{width:32px;line-height:32px;height:32px}.tool-bar{height:50px;z-index:9999;box-shadow:0 1px 1px grey}.canvas-container,.tool-bar{position:relative;width:100%;background-color:#f5f5f5}.canvas-container{height:calc(100vh - 110px);display:flex;justify-content:center;overflow:auto}.canvas-wrapper{outline:none}.canvas{position:relative;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;transform-origin:top;box-shadow:0 0 4px grey}.canvas img{-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none}.resize-handler{position:absolute;width:15px;height:15px;border-bottom:5px solid rgba(0,0,0,.842);border-right:5px solid rgba(0,0,0,.842);right:-5px;bottom:-5px;cursor:nwse-resize!important}.rotate-handler{position:absolute;left:calc(50% - 10px);top:-40px;color:rgba(0,0,0,.842);cursor:ew-resize}.selected-item-guide{outline:1px dashed silver}"],encapsulation:2}),Qu),ih=[{path:"",component:(Ku=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}(),Ku.\u0275fac=function(t){return new(t||Ku)},Ku.\u0275cmp=d.Ib({type:Ku,selectors:[["app-builder"]],decls:5,vars:0,consts:[[1,"builder-container"],[1,"pickers-container"],[1,"builder-canvas"]],template:function(t,e){1&t&&(d.Tb(0,"div",0),d.Tb(1,"div",1),d.Pb(2,"app-pickers"),d.Sb(),d.Tb(3,"div",2),d.Pb(4,"app-canvas"),d.Sb(),d.Sb())},directives:[_n,nh],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.builder-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.builder-canvas[_ngcontent-%COMP%]{width:100%;background-color:#fdfff8}"]}),Ku)}],rh=((Ju=function t(){_classCallCheck(this,t)}).\u0275mod=d.Mb({type:Ju}),Ju.\u0275inj=d.Lb({factory:function(t){return new(t||Ju)},imports:[[p.a.forChild(ih)],p.a]}),Ju),oh=n("vvyD"),ah=((eh=function t(){_classCallCheck(this,t)}).\u0275mod=d.Mb({type:eh}),eh.\u0275inj=d.Lb({factory:function(t){return new(t||eh)},imports:[[h.c,J.b,J.g,oh.a],J.b,J.g]}),eh),sh=((th=function t(){_classCallCheck(this,t)}).\u0275mod=d.Mb({type:th}),th.\u0275inj=d.Lb({factory:function(t){return new(t||th)},imports:[[]]}),th),ch=((Zu=function t(){_classCallCheck(this,t)}).\u0275mod=d.Mb({type:Zu}),Zu.\u0275inj=d.Lb({factory:function(t){return new(t||Zu)},imports:[[h.c]]}),Zu),lh=(($u=function t(){_classCallCheck(this,t)}).\u0275mod=d.Mb({type:$u}),$u.\u0275inj=d.Lb({factory:function(t){return new(t||$u)},imports:[[h.c,rh,ah,Ge,oh.a,sh,Nl,Bu,ch]]}),$u)}}]);