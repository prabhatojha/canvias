(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{LAq7:function(t,e,n){"use strict";n.r(e),n.d(e,"BuilderModule",(function(){return $l}));var i=n("ofXK"),r=n("tyNb"),o=n("fXoL");const a={TEXT_MENU_ID:2,PHOTO_MENU_ID:5,UPLOAD_MENU_ID:6,VECTOR_MENU_ID:7,BG_MENU_ID:8,ELEMENTS_MENU_ID:12},s=[{id:0,label:"Template",icon:"text_fields",type:"text"},{id:1,label:"Layouts",icon:"view_comfy",type:"text"},{id:2,label:"Text",icon:"text_fields",type:"text"},{id:5,label:"Photo",icon:"image_search"},{id:7,label:"Vectors",icon:"design_services"},{id:12,label:"Elements",icon:"signal_cellular_null",type:"text"},{id:a.BG_MENU_ID,label:"Background",icon:"wallpaper"},{id:9,label:"Upload",icon:"cloud_upload"},{id:10,label:"Stickers",icon:"star_rate"},{id:11,label:"Gif",icon:"gif"},{id:8,label:"Icons",icon:"insert_emoticon"}];var c=function(t){return t[t.SINGLE_SELECT=0]="SINGLE_SELECT",t[t.FONT_WEIGHT_BOLD=1]="FONT_WEIGHT_BOLD",t[t.TOGGABLE=2]="TOGGABLE",t[t.FONT_STYLE_ITALIC=3]="FONT_STYLE_ITALIC",t}({}),l=function(t){return t[t.CANVAS=0]="CANVAS",t[t.BACKGROUND=1]="BACKGROUND",t[t.PHOTO=2]="PHOTO",t[t.ANY=3]="ANY",t[t.TEXT=4]="TEXT",t[t.VECTOR=5]="VECTOR",t[t.GROUP=6]="GROUP",t[t.MULTIPLE_SELECTION=7]="MULTIPLE_SELECTION",t[t.LINE=8]="LINE",t}({});const u={2:[{tag:"label",text:"Enter your text",elementId:"my-first-element",id:"xzkljasf214assaf",type:"image",toolbarOptions:[0,1,3,4,6,7,8,10,11],searchKeywords:[],canvasElement:{tag:"div",type:"text",attribute:{},style:{"font-size":"24px","font-family":"monospace","text-align":"center",position:"absolute",cursor:"move","user-select":"none",width:"320px",height:"68px"},children:[{tag:"label",innerText:"Double click to type",style:{cursor:"move"}}]},imageUrl:"/assets/images/pickers/add-text.png"}],3:[{tag:"button",text:"Submit",children:[],style:{padding:"10px 18px",position:"absolute"}}],4:[{tag:"a",text:"My link",children:[],style:{padding:"10px 18px",position:"absolute"}}],5:[]};var h=n("0/lk");Node.prototype.forEach=Array.prototype.forEach;class p{static cloneShallow(t){return Array.isArray(t)?[...t]:Object.assign({},t)}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}static getElementsAsArray(t){return Array.from(t)}}class d{constructor(t){this.eventer=t}dragStart(t,e){t.dataTransfer.setData("pickerItem",JSON.stringify(this.buildData(t,e)))}onClick(t,e){this.eventer.send({type:h.a.CANVAS_ADD_ITEM,value:p.cloneDeep({item:e.canvasElement})})}buildData(t,e){const n=t.target.getBoundingClientRect();return{left:t.clientX-n.left,top:t.clientY-n.top,item:e}}}var f=n("LRne"),g=n("D0XW"),b=n("7o/Q"),m=n("WMd4");function v(t,e=g.a){var n;const i=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new y(i,e))}class y{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new x(t,this.delay,this.scheduler))}}class x extends b.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,i=t.scheduler,r=t.destination;for(;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(r);if(n.length>0){const e=Math.max(0,n[0].time-i.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(x.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new S(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(m.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(m.a.createComplete()),this.unsubscribe()}}class S{constructor(t,e){this.time=t,this.notification=e}}class E{constructor(t){this.canvasElement=t}}class O{constructor(t,e,n,i){this.resizable=!0,this.increaseZIndex=!0,this.tag=t,this.attribute=e,this.style=n,this.children=i}}class C{constructor(){this.width=0,this.height=0,this.rotate=0,this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1}}const w={Z_INDEX:"z-index",COLOR:"color",BG:"background",BG_COLOR:"background-color",BG_IMAGE:"background-image",LETTER_SPACING:"letter-spacing",LINE_HEIGHT:"line-height",BG_SIZE:"background-size",BG_POSITION:"background-position",OVERFLOW:"overflow",OVERFLOW_HIDDEN:"hidden",FONT_FAMILY:"font-family",FONT_ITALIC:"font-style",FONT_SIZE:"font-size",FONT_WEIGHT:"font-weight",WIDTH:"width",HEIGHT:"height",TRANSFORM:"transform",TRANSLATE:"translate",ROTATE:"rotate",TRANSLATE_X:"translateX",TRANSLATE_Y:"translateY",SCALE_X:"scaleX",SCALE_Y:"scaleY",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TEXT_ALIGN:"text-align",OPACITY:"opacity",POSITION:"position"},T={OVERFLOW_HIDDEN:"hidden",FONT_WEIGHT_BOLD:"bold",FONT_WEIGHT_NORMAL:"normal",FONT_ITALIC:"italic",FONT_STYLE_NORMAL:"normal",BG_SIZE_COVER:"cover",GB_POSITION_CENTER:"center",TEXT_ALIGN_LEFT:"left",TEXT_ALIGN_CENTER:"center",TEXT_ALIGN_JUSTIFY:"justify",TEXT_ALIGN_RIGHT:"right",COLOR_TRANSPARENT:"transparent",COLOR_BLACK:"black",POSITION_ABSOLUTE:"absolute",NONE:"none"},P=[w.WIDTH,w.HEIGHT,w.TOP,w.FONT_SIZE,w.LEFT,w.LETTER_SPACING],I={[w.OPACITY]:1,[w.POSITION]:T.POSITION_ABSOLUTE,[w.BG]:T.COLOR_TRANSPARENT,"user-select":"none"},k=Object.assign({},I,{[w.FONT_SIZE]:"35px",[w.FONT_FAMILY]:"monospace",[w.TEXT_ALIGN]:"center",[w.WIDTH]:"320px",[w.LETTER_SPACING]:"0px",[w.LINE_HEIGHT]:1.5,[w.FONT_ITALIC]:T.FONT_STYLE_NORMAL,[w.FONT_WEIGHT]:T.FONT_WEIGHT_NORMAL,[w.COLOR]:T.COLOR_BLACK}),_=Object.assign({},I,{[w.TEXT_ALIGN]:[T.TEXT_ALIGN_CENTER],[w.WIDTH]:"200px",[w.HEIGHT]:"200px"}),M={width:"100%",height:"100%","object-fit":"cover"},z={cursor:"move","max-width":"100%","max-height":"100%"},R={src:"",class:"large-photo-wrapper"};function D(){const t=p.cloneDeep(R),e=p.cloneDeep(z),n=p.cloneDeep(_),i=new O("img",t,e,[]),r=new O("div",{},n,[i]);return r.dimention=N(),new E(r)}function N(){const t=new C;return t.width=320,t.height=40,t}const A=[{id:"FbN2z3bEaSs",thumb:"https://images.unsplash.com/photo-1500485035595-cbe6f645feb1?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1500485035595-cbe6f645feb1?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4e3,height:6e3},{id:"A-NVHPka9Rk",thumb:"https://images.unsplash.com/photo-1494783367193-149034c05e8f?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1494783367193-149034c05e8f?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5472,height:3648},{id:"3l3RwQdHRHg",thumb:"https://images.unsplash.com/photo-1491466424936-e304919aada7?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1491466424936-e304919aada7?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4017,height:2683},{id:"txtWlEUyW2Y",thumb:"https://images.unsplash.com/photo-1500322969630-a26ab6eb64cc?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1500322969630-a26ab6eb64cc?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:6e3,height:4e3},{id:"EPy0gBJzzZU",thumb:"https://images.unsplash.com/reserve/bOvf94dPRxWu0u3QsPjF_tree.jpg?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/reserve/bOvf94dPRxWu0u3QsPjF_tree.jpg?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4928,height:3264},{id:"PH0HYjsf2n8",thumb:"https://images.unsplash.com/photo-1472213984618-c79aaec7fef0?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1472213984618-c79aaec7fef0?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5034,height:5269},{id:"_WR6tUIAJe8",thumb:"https://images.unsplash.com/photo-1502318217862-aa4e294ba657?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1502318217862-aa4e294ba657?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:2143,height:3e3},{id:"-98y5HIFDs8",thumb:"https://images.unsplash.com/photo-1504714146340-959ca07e1f38?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1504714146340-959ca07e1f38?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3400,height:2720},{id:"50HS3AzJsvQ",thumb:"https://images.unsplash.com/photo-1484402628941-0bb40fc029e7?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1484402628941-0bb40fc029e7?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3e3,height:4500},{id:"_RBcxo9AU-U",thumb:"https://images.unsplash.com/photo-1472214103451-9374bd1c798e?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1472214103451-9374bd1c798e?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:7932,height:5291},{id:"Ni4NgA64TFQ",thumb:"https://images.unsplash.com/photo-1419064642531-e575728395f2?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1419064642531-e575728395f2?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5966,height:3978},{id:"WymR2nYtj5M",thumb:"https://images.unsplash.com/photo-1446038236174-69712e24d137?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1446038236174-69712e24d137?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4016,height:6016},{id:"_tBeFVZPlPY",thumb:"https://images.unsplash.com/photo-1541890289-b86df5bafd81?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1541890289-b86df5bafd81?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4384,height:3012},{id:"UzHQOxVxqgw",thumb:"https://images.unsplash.com/photo-1431620828042-54af7f3a9e28?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1431620828042-54af7f3a9e28?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:7e3,height:4700},{id:"IX7lpZDGHPc",thumb:"https://images.unsplash.com/photo-1538939859956-a6631d70277c?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1538939859956-a6631d70277c?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5760,height:3840},{id:"1EYMue_AwDw",thumb:"https://images.unsplash.com/photo-1454372182658-c712e4c5a1db?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1454372182658-c712e4c5a1db?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:7360,height:4912},{id:"1kf69eE7VR4",thumb:"https://images.unsplash.com/photo-1521747116042-5a810fda9664?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1521747116042-5a810fda9664?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:6e3,height:4e3},{id:"koy6FlCCy5s",thumb:"https://images.unsplash.com/photo-1490750967868-88aa4486c946?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1490750967868-88aa4486c946?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:7952,height:5304},{id:"zNN6ubHmruI",thumb:"https://images.unsplash.com/photo-1476610182048-b716b8518aae?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1476610182048-b716b8518aae?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:7952,height:4811},{id:"Uszp5Gkg0AI",thumb:"https://images.unsplash.com/photo-1413752362258-7af2a667b590?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1413752362258-7af2a667b590?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4928,height:3264}],L=[{id:"zGzXsJUBQfs",thumb:"https://images.unsplash.com/photo-1558981806-ec527fa84c39?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1558981806-ec527fa84c39?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3e3,height:2e3},{id:"QMDap1TAu0g",thumb:"https://images.unsplash.com/photo-1487088678257-3a541e6e3922?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1487088678257-3a541e6e3922?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4032,height:3024},{id:"0ZPSX_mQ3xI",thumb:"https://images.unsplash.com/photo-1528459801416-a9e53bbf4e17?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1528459801416-a9e53bbf4e17?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5041,height:7113},{id:"DbwYNr8RPbg",thumb:"https://images.unsplash.com/photo-1522441815192-d9f04eb0615c?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1522441815192-d9f04eb0615c?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4433,height:7880},{id:"wuc-KEIBrdE",thumb:"https://images.unsplash.com/photo-1516617442634-75371039cb3a?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1516617442634-75371039cb3a?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3216,height:4832},{id:"h0Vxgz5tyXA",thumb:"https://images.unsplash.com/32/Mc8kW4x9Q3aRR3RkP5Im_IMG_4417.jpg?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/32/Mc8kW4x9Q3aRR3RkP5Im_IMG_4417.jpg?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5760,height:3840},{id:"yI3weKNBRTc",thumb:"https://images.unsplash.com/photo-1533035353720-f1c6a75cd8ab?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1533035353720-f1c6a75cd8ab?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5304,height:7952},{id:"vC8wj_Kphak",thumb:"https://images.unsplash.com/photo-1487147264018-f937fba0c817?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1487147264018-f937fba0c817?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3456,height:5184},{id:"0tgMnMIYQ9Y",thumb:"https://images.unsplash.com/photo-1533628635777-112b2239b1c7?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1533628635777-112b2239b1c7?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3e3,height:2002},{id:"Hyu76loQLdk",thumb:"https://images.unsplash.com/photo-1509114397022-ed747cca3f65?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1509114397022-ed747cca3f65?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3024,height:4032},{id:"sYbVbxSmdVQ",thumb:"https://images.unsplash.com/photo-1558980664-4d79c6e77b93?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1558980664-4d79c6e77b93?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:7952,height:5304},{id:"RnCPiXixooY",thumb:"https://images.unsplash.com/photo-1500462918059-b1a0cb512f1d?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1500462918059-b1a0cb512f1d?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3223,height:4834},{id:"EWDvHNNfUmQ",thumb:"https://images.unsplash.com/photo-1495195129352-aeb325a55b65?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1495195129352-aeb325a55b65?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:6144,height:4069},{id:"Xaanw0s0pMk",thumb:"https://images.unsplash.com/photo-1513151233558-d860c5398176?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1513151233558-d860c5398176?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4290,height:2860},{id:"5J1bHRX1fNw",thumb:"https://images.unsplash.com/photo-1531315630201-bb15abeb1653?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1531315630201-bb15abeb1653?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:3036,height:4048},{id:"5hvn-2WW6rY",thumb:"https://images.unsplash.com/photo-1476820865390-c52aeebb9891?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1476820865390-c52aeebb9891?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4554,height:3039},{id:"G9i_plbfDgk",thumb:"https://images.unsplash.com/photo-1478760329108-5c3ed9d495a0?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1478760329108-5c3ed9d495a0?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4e3,height:3e3},{id:"4Zaq5xY5M_c",thumb:"https://images.unsplash.com/photo-1531685250784-7569952593d2?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1531685250784-7569952593d2?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:4032,height:3024},{id:"XXpbdU_31Sg",thumb:"https://images.unsplash.com/photo-1524055988636-436cfa46e59e?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1524055988636-436cfa46e59e?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:2741,height:3657},{id:"62vi3TG5EDg",thumb:"https://images.unsplash.com/photo-1519751138087-5bf79df62d5b?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=200&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",imageUrl:"https://images.unsplash.com/photo-1519751138087-5bf79df62d5b?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEzNzIzOX0",width:5616,height:3744}],B=[{id:2025158,thumb:"https://cdn.pixabay.com/photo/2017/01/31/15/37/evergreen-2025158_150.png",imageUrl:"https://pixabay.com/get/54e0d7464b57a414f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:984,thumbWidth:150,thumbHeight:76},{id:1297082,thumb:"https://cdn.pixabay.com/photo/2016/03/31/22/33/landscape-1297082_150.png",imageUrl:"https://pixabay.com/get/57e2dc444a5aae14f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:1081,thumbWidth:150,thumbHeight:84},{id:1296789,thumb:"https://cdn.pixabay.com/photo/2016/03/31/22/01/art-1296789_150.png",imageUrl:"https://pixabay.com/get/57e2dc454d5aa514f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:1920,thumbWidth:150,thumbHeight:150},{id:1597029,thumb:"https://cdn.pixabay.com/photo/2016/08/16/03/24/forest-1597029_150.png",imageUrl:"https://pixabay.com/get/57e5dc444a50a514f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:960,thumbWidth:150,thumbHeight:75},{id:310140,thumb:"https://cdn.pixabay.com/photo/2014/04/03/10/20/waterfall-310140_150.png",imageUrl:"https://pixabay.com/get/55e1d5424e52b108f5d08460962c357a1c3cd6e74e5074407d2a7fd79544c4_1280.png",width:1874,height:1920,thumbWidth:147,thumbHeight:150},{id:32248,thumb:"https://cdn.pixabay.com/photo/2012/04/13/12/43/country-32248_150.png",imageUrl:"https://pixabay.com/get/55e2d747424fad0bffd8992cc32a33771637dcf852547841702b78d69e4c_1280.png",width:1920,height:1408,thumbWidth:150,thumbHeight:109},{id:310139,thumb:"https://cdn.pixabay.com/photo/2014/04/03/10/20/pond-310139_150.png",imageUrl:"https://pixabay.com/get/55e1d542495bb108f5d08460962c357a1c3cd6e74e5074407d2a7fd79544c4_1280.png",width:1920,height:1389,thumbWidth:150,thumbHeight:108},{id:307957,thumb:"https://cdn.pixabay.com/photo/2014/04/02/17/06/owl-307957_150.png",imageUrl:"https://pixabay.com/get/55e0d24a4f55b108f5d08460962c357a1c3cd6e74e5074407d2a7fd79544c4_1280.png",width:1920,height:1382,thumbWidth:150,thumbHeight:107},{id:3046592,thumb:"https://cdn.pixabay.com/photo/2017/12/29/02/15/pond-3046592_150.png",imageUrl:"https://pixabay.com/get/55e0d1454f5bae14f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:1226,thumbWidth:150,thumbHeight:95},{id:575621,thumb:"https://cdn.pixabay.com/photo/2014/12/21/23/35/hill-575621_150.png",imageUrl:"https://pixabay.com/get/53e7d0454853b108f5d08460962c357a1c3cd6e74e5074407d2a7fd79544c4_1280.png",width:1920,height:960,thumbWidth:150,thumbHeight:75},{id:2707595,thumb:"https://cdn.pixabay.com/photo/2017/09/02/15/24/sunset-2707595_150.png",imageUrl:"https://pixabay.com/get/54e7d5444f5ba914f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:1080,thumbWidth:150,thumbHeight:84},{id:1293888,thumb:"https://cdn.pixabay.com/photo/2016/03/31/17/46/asian-1293888_150.png",imageUrl:"https://pixabay.com/get/57e2dc40425aa414f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:1920,thumbWidth:150,thumbHeight:150},{id:152642,thumb:"https://cdn.pixabay.com/photo/2013/07/12/17/56/snowflakes-152642_150.png",imageUrl:"https://pixabay.com/get/57e5d7454e50b108f5d08460962c357a1c3cd6e74e5074407d2a7fd79544c4_1280.png",width:1920,height:1287,thumbWidth:150,thumbHeight:100},{id:2300041,thumb:"https://cdn.pixabay.com/photo/2017/05/10/06/26/palm-tree-2300041_150.png",imageUrl:"https://pixabay.com/get/54e3d5434a56ad14f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:1623,thumbWidth:150,thumbHeight:126},{id:152720,thumb:"https://cdn.pixabay.com/photo/2013/07/12/17/58/arctic-152720_150.png",imageUrl:"https://pixabay.com/get/57e5d7444852b108f5d08460962c357a1c3cd6e74e5074407d2a7fd79544c4_1280.png",width:1920,height:960,thumbWidth:150,thumbHeight:75},{id:1670419,thumb:"https://cdn.pixabay.com/photo/2016/09/14/20/48/landmark-1670419_150.png",imageUrl:"https://pixabay.com/get/57e6d2434e53a514f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1919,height:1920,thumbWidth:150,thumbHeight:150},{id:37404,thumb:"https://cdn.pixabay.com/photo/2012/04/18/15/54/spring-37404_150.png",imageUrl:"https://pixabay.com/get/55e7d1434e4fad0bffd8992cc32a33771637dcf852547841702b78d69e4c_1280.png",width:1920,height:1920,thumbWidth:150,thumbHeight:150},{id:2976428,thumb:"https://cdn.pixabay.com/photo/2017/11/25/09/32/sunset-2976428_150.png",imageUrl:"https://pixabay.com/get/54e9d2454e50a414f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1920,height:1323,thumbWidth:150,thumbHeight:103},{id:2636594,thumb:"https://cdn.pixabay.com/photo/2017/08/13/09/20/tower-2636594_150.png",imageUrl:"https://pixabay.com/get/54e6d6454f5ba814f6da8c7dda79337c1136dded514c704c7c277ed0944fcc59_1280.png",width:1926,height:1920,thumbWidth:150,thumbHeight:149},{id:310145,thumb:"https://cdn.pixabay.com/photo/2014/04/03/10/20/stream-310145_150.png",imageUrl:"https://pixabay.com/get/55e1d5424e57b108f5d08460962c357a1c3cd6e74e5074407d2a7fd79544c4_1280.png",width:1920,height:1691,thumbWidth:150,thumbHeight:131}];var j=n("zScf");let G=(()=>{class t{constructor(t){this.httpService=t,this.rows=[[],[]],this.GET_IMAGES="/api/images",this.PAGE=0,this.LIMIT="20",this.withMock=!0,this.isLoading=!0,this.query="",this.EXTRA_DELAY=1e3,this.query="scenery",this.getPhotos()}resetPage(t){this.query=t,this.rows=[[],[]],this.PAGE=0}getPhotos(){this.isLoading=!0,this.PAGE+=1;const t={params:{page:""+this.PAGE,limit:this.LIMIT,query:this.query,source:"unsplash"}};this.withMock?this.mock().pipe(v(500)).subscribe(t=>{this.processPhotos(t)}):this.httpService.get(this.GET_IMAGES,t).pipe(v(this.EXTRA_DELAY)).subscribe(t=>{this.processPhotos(t)})}processPhotos(t){let e=!0;t.forEach(t=>{const n=function(){const t=p.cloneDeep(R),e=p.cloneDeep(M),n=p.cloneDeep(_),i=new O("img",t,e,[]),r=new O("div",{},n,[i]);return r.dimention=N(),new E(r)}();n.id=t.id,n.imageUrl=t.thumb,n.canvasElement.children[0].attribute.src=t.imageUrl,n.canvasElement.dimention.width=t.width,n.canvasElement.dimention.height=t.height,n.canvasElement.type=l.PHOTO,n.canvasElement.increaseZIndex=!1,e?this.rows[0].push(n):this.rows[1].push(n),e=!e}),this.isLoading=!1}mock(){return Object(f.a)(A)}}return t.\u0275fac=function(e){return new(e||t)(o.Xb(j.a))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var H=n("3Pt+"),F=n("bTqV");let X=(()=>{class t{constructor(){this.placeholder="Search",this.minQueryLength=2,this.value="",this.searchQuery=new o.n,this.searchValueChange=new o.n,this.query=""}ngOnInit(){}doSearch(){this.query.length>=this.minQueryLength&&this.searchQuery.emit(this.query)}onChange(){this.query.length>=this.minQueryLength&&this.searchValueChange.emit(this.query.trim().toLowerCase())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["app-search-box"]],inputs:{placeholder:"placeholder",minQueryLength:"minQueryLength",value:"value"},outputs:{searchQuery:"searchQuery",searchValueChange:"searchValueChange"},decls:6,vars:3,consts:[[1,"search-box"],["type","search","autofocus","",3,"placeholder","ngModel","ngModelChange","keydown.enter"],[1,"search-box-button"],["mat-icon-button","",3,"disabled","click"],[1,"material-icons"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"input",1),o.bc("ngModelChange",(function(t){return e.query=t}))("ngModelChange",(function(){return e.onChange()}))("keydown.enter",(function(){return e.doSearch()})),o.Sb(),o.Tb(2,"div",2),o.Tb(3,"button",3),o.bc("click",(function(){return e.doSearch()})),o.Tb(4,"i",4),o.zc(5,"search"),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Bb(1),o.jc("placeholder",e.placeholder)("ngModel",e.query),o.Bb(2),o.jc("disabled",(null==e.query?null:e.query.length)<e.minQueryLength))},directives:[H.a,H.d,H.e,F.a],styles:[".search-box[_ngcontent-%COMP%]{display:flex;align-items:center}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:30px;padding:20px 17px;border:1px solid grey;border-right:0;background:#fff;outline:none;border-top-left-radius:4px;border-bottom-left-radius:4px}.search-box-button[_ngcontent-%COMP%]{background:#fff;border-top-right-radius:4px;border-bottom-right-radius:4px;border:1px solid grey;border-left:0;color:#000}"]}),t})();const U=["photoContainer"];function W(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"li",10),o.bc("dragstart",(function(n){o.sc(t);const i=e.$implicit;return o.ec(2).dragStart(n,i)}))("click",(function(n){o.sc(t);const i=e.$implicit;return o.ec(2).onClick(n,i)})),o.Pb(2,"img",11),o.Sb(),o.Qb()}if(2&t){const t=e.$implicit;o.Bb(2),o.jc("src",t.imageUrl,o.tc),o.Cb("id",t.id)}}function Y(t,e){if(1&t&&(o.Tb(0,"ul",8),o.yc(1,W,3,2,"ng-container",9),o.Sb()),2&t){const t=e.$implicit;o.Bb(1),o.jc("ngForOf",t)}}let q=(()=>{class t extends d{constructor(t,e){super(e),this.imageService=t,this.eventer=e,this.items=[],this.rows=[[],[]],this.scrollTimer=null}ngOnInit(){}ngOnChanges(t){}onNewSearch(t){this.imageService.resetPage(t),this.getNextSet()}getNextSet(){this.imageService.getPhotos()}onScroll(t){this.imageService.isLoading||(null!==this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>{const t=this.photoContainer.nativeElement;t.scrollTop+t.offsetHeight+50>t.scrollHeight&&this.imageService.getPhotos()},50))}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(G),o.Ob(h.b))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-image-picker"]],viewQuery:function(t,e){var n;1&t&&o.vc(U,!0),2&t&&o.nc(n=o.cc())&&(e.photoContainer=n.first)},features:[o.yb,o.zb()],decls:9,vars:4,consts:[[1,"search-box-wrapper"],[3,"placeholder","searchQuery"],[1,"images-container",3,"scroll"],["photoContainer",""],[1,"d-flex"],["class","picker-item",4,"ngFor","ngForOf"],[1,"w-100","text-center","spinner","my-4"],[1,"spinner-border"],[1,"picker-item"],[4,"ngFor","ngForOf"],["draggable","",1,"image-li",3,"dragstart","click"],[2,"width","100%",3,"src"]],template:function(t,e){1&t&&(o.Tb(0,"div"),o.Tb(1,"div",0),o.Tb(2,"app-search-box",1),o.bc("searchQuery",(function(t){return e.onNewSearch(t)})),o.Sb(),o.Sb(),o.Tb(3,"div",2,3),o.bc("scroll",(function(t){return e.onScroll(t)})),o.Tb(5,"div",4),o.yc(6,Y,2,1,"ul",5),o.Sb(),o.Tb(7,"div",6),o.Pb(8,"div",7),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Bb(2),o.jc("placeholder","Search photos"),o.Bb(4),o.jc("ngForOf",e.imageService.rows),o.Bb(1),o.Fb("invisible",!e.imageService.isLoading))},directives:[X,i.j],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}[_nghost-%COMP%]{padding:10px 15px 0}.search-box-wrapper[_ngcontent-%COMP%]{margin:0 15px 15px}.images-container[_ngcontent-%COMP%]{overflow-y:auto;padding:0 14px 10px;height:calc(100vh - 177px)}.picker-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.picker-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1px;margin:3px;border-radius:3px;display:flex;align-items:center;cursor:move}.picker-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{box-shadow:0 0 4px 1px #d3d3d3;transition:box-shadow .3s}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]{width:calc(100% - 3px)}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:3px}"]}),t})();class V{constructor(t,e){this.type=Q.IMAGE,this.toolbarOptions=t,this.canvasElement=e}}var Q=function(t){return t[t.TEXT=0]="TEXT",t[t.IMAGE=1]="IMAGE",t}({});const $=[0,1,3,4,6,7,8,10,11],K={outline:"none",[w.WIDTH]:"100%"},J={class:"users-editable-content"};function Z(){const t=p.cloneDeep(J),e=p.cloneDeep(K),n=p.cloneDeep(k),i=new O("label",t,e,[]),r=new O("div",{},n,[i]);return r.type=l.TEXT,r.resizable=!1,r.dimention=function(){const t=new C;return t.width=320,t.height=40,t}(),new V($,r)}var tt=n("ZbMF");let et=(()=>{class t{constructor(t){this.fontService=t,this.list=[],this.tempp=[{resizable:!1,increaseZIndex:!0,tag:"div",attribute:{},style:{"font-size":"49px","font-family":"Bebas Neue","text-align":"center",position:"absolute","user-select":"none",width:"158px","letter-spacing":"11px",transform:"matrix(1.74,0,0,1.74,171.04,44.01) translate(0px, 41.09195402298849px)","z-index":20},children:[{resizable:!0,increaseZIndex:!0,tag:"label",attribute:{class:"users-editable-content"},style:{outline:"none",width:"100%"},children:[],innerText:"CALVIN"}],type:4,dimention:{width:320,height:40,rotate:0,translateX:0,translateY:0,scaleX:1,scaleY:1}},{resizable:!1,increaseZIndex:!0,tag:"div",attribute:{},style:{"font-size":"49px","font-family":"Bebas Neue","text-align":"center",position:"absolute","user-select":"none",width:"158px","letter-spacing":"10px",transform:"matrix(1.74,0,0,1.74,171,140.45) translate(0px, 41.0919540229885px)","z-index":23},children:[{resizable:!0,increaseZIndex:!0,tag:"label",attribute:{class:"users-editable-content"},style:{outline:"none",width:"100%"},children:[],innerText:"HARRIS"}],type:4,dimention:{width:320,height:40,rotate:0,translateX:0,translateY:0,scaleX:1,scaleY:1}},{resizable:!0,increaseZIndex:!0,tag:"div",attribute:{},style:{position:"absolute",cursor:"move","user-select":"none",width:"275px",transform:"matrix(1,0,0,1,112.6,240.5) translate(0px, 71.5px)","z-index":24},children:[{resizable:!0,increaseZIndex:!0,tag:"hr",attribute:{},style:{"border-color":"black","border-top":"1px solid","border-style":"solid"},children:[]}],type:8},{resizable:!1,increaseZIndex:!0,tag:"div",attribute:{},style:{"font-size":"24px","font-family":"Josefin Sans","text-align":"center",position:"absolute","user-select":"none",width:"275px","letter-spacing":"33px",transform:"matrix(1,0,0,1,112.6,304) translate(0px, 71.5px)","z-index":25},children:[{resizable:!0,increaseZIndex:!0,tag:"label",attribute:{class:"users-editable-content"},style:{outline:"none",width:"100%"},children:[],innerText:"SUMMER\n"}],type:4,dimention:{width:320,height:40,rotate:0,translateX:0,translateY:0,scaleX:1,scaleY:1}}],this.init()}init(){for(let t=0;t<2;t++)this.buildTextPickerItem(this.fontService.customTextFonts[t]);this.buildImageTypeText()}buildImageTypeText(){const t=Z();t.type=Q.IMAGE,t.imageUrl="/assets/images/pickers/calvin-harris.png",t.canvasElement=new O("div",{},{position:"absolute",width:"200px",height:"300px"},this.tempp),this.list.push(t)}buildTextPickerItem(t){const e=Z();e.fontSize=t.fontSize,e.fontFamily=t.family,e.type=Q.TEXT,e.innerText=t.innerText,e.canvasElement.children[0].innerText="Double click to edit",e.canvasElement.style[w.FONT_SIZE]=t.fontSize,e.canvasElement.style[w.FONT_FAMILY]=t.family,this.list.push(e)}}return t.\u0275fac=function(e){return new(e||t)(o.Xb(tt.a))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function nt(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"li",7),o.bc("dragstart",(function(e){o.sc(t);const n=o.ec().$implicit;return o.ec().dragStart(e,n)}))("click",(function(e){o.sc(t);const n=o.ec().$implicit;return o.ec().onClick(e,n)})),o.Pb(2,"img",8),o.Sb(),o.Qb()}if(2&t){const t=o.ec().$implicit;o.Bb(2),o.jc("src",t.imageUrl,o.tc),o.Cb("id",t.id)}}function it(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"li",9),o.bc("dragstart",(function(e){o.sc(t);const n=o.ec().$implicit;return o.ec().dragStart(e,n)}))("click",(function(e){o.sc(t);const n=o.ec().$implicit;return o.ec().onClick(e,n)})),o.Tb(2,"p"),o.zc(3),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.ec().$implicit;o.Bb(2),o.xc("font-family",t.fontFamily)("font-size",t.fontSize),o.Bb(1),o.Ac(t.innerText)}}function rt(t,e){if(1&t&&(o.Rb(0),o.yc(1,nt,3,2,"ng-container",6),o.yc(2,it,4,5,"ng-container",6),o.Qb()),2&t){const t=e.$implicit,n=o.ec();o.Bb(1),o.jc("ngIf",t.type===n.TextPickerTypes.IMAGE),o.Bb(1),o.jc("ngIf",t.type===n.TextPickerTypes.TEXT)}}let ot=(()=>{class t extends d{constructor(t,e){super(e),this.textPickerService=t,this.eventer=e,this.TextPickerTypes=Q,this.items=[]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(et),o.Ob(h.b))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-text-picker"]],features:[o.yb],decls:6,vars:2,consts:[[1,"text-picker-container"],[1,"search-box-wrapper"],[3,"placeholder"],[1,"text-container"],[1,"picker-item"],[4,"ngFor","ngForOf"],[4,"ngIf"],["draggable","true",1,"image-li",3,"dragstart","click"],[2,"width","100%",3,"src"],["draggable","true",1,"text-li","custom-text-li",3,"dragstart","click"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Pb(2,"app-search-box",2),o.Sb(),o.Tb(3,"div",3),o.Tb(4,"ul",4),o.yc(5,rt,3,2,"ng-container",5),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Bb(2),o.jc("placeholder","Search for text"),o.Bb(3),o.jc("ngForOf",e.textPickerService.list))},directives:[X,i.j,i.k],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}[_nghost-%COMP%]{padding:10px 15px 0}.search-box-wrapper[_ngcontent-%COMP%]{margin:0 15px 15px}.text-container[_ngcontent-%COMP%]{overflow-y:auto;padding:0 8px 10px;height:calc(100vh - 177px)}.picker-item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.picker-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px;margin:7px;border-radius:3px;display:flex;align-items:center;cursor:-webkit-grab;cursor:grab;box-shadow:0 0 2px #f5f5f5}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]{width:calc(50% - 14px);padding:0}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.picker-item[_ngcontent-%COMP%]   .custom-text-li[_ngcontent-%COMP%]{width:calc(100% - 7px);padding:7px 10px;background-color:#d3d3d3;color:#484848;transition:background-color .2s}.picker-item[_ngcontent-%COMP%]   .custom-text-li[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.custom-li-item[_ngcontent-%COMP%]{height:120px;text-align:center;display:inline-grid;font-size:30px;text-transform:uppercase;font-family:fantasy;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"]}),t})(),at=(()=>{class t{constructor(t){this.httpService=t,this.vectors=[],this.GET_IMAGES="/api/images/vectors",this.PAGE=0,this.LIMIT="20",this.withMock=!0,this.isLoading=!0,this.query="",this.EXTRA_DELAY=10,this.query="scenery",this.getPhotos()}resetPage(t){this.query=t,this.vectors=[],this.PAGE=0}getPhotos(){this.isLoading=!0,this.PAGE+=1;const t={params:{page:""+this.PAGE,limit:this.LIMIT,query:this.query,source:"unsplash"}};this.withMock?this.mock().pipe(v(500)).subscribe(t=>{this.processPhotos(t)}):this.httpService.get(this.GET_IMAGES,t).pipe(v(this.EXTRA_DELAY)).subscribe(t=>{this.processPhotos(t)})}processPhotos(t){t.forEach(t=>{const e=D();e.id=t.id,e.imageUrl=t.thumb,e.canvasElement.children[0].attribute.src=t.imageUrl,e.canvasElement.type=l.VECTOR,e.canvasElement.increaseZIndex=!0,this.updateWidth(e.canvasElement,t.thumbWidth,t.thumbHeight),this.vectors.push(e)}),this.isLoading=!1}updateWidth(t,e,n){t.style.width=1.5*e+"px",t.style.height=1.5*n+"px"}mock(){return Object(f.a)(B)}}return t.\u0275fac=function(e){return new(e||t)(o.Xb(j.a))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const st=["photoContainer"];function ct(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"li",9),o.bc("dragstart",(function(n){o.sc(t);const i=e.$implicit;return o.ec().dragStart(n,i)}))("click",(function(n){o.sc(t);const i=e.$implicit;return o.ec().onClick(n,i)})),o.Pb(2,"img",10),o.Sb(),o.Qb()}if(2&t){const t=e.$implicit;o.Bb(2),o.jc("src",t.imageUrl,o.tc),o.Cb("id",t.id)}}let lt=(()=>{class t extends d{constructor(t,e){super(e),this.vectorService=t,this.eventer=e,this.scrollTimer=null}ngOnInit(){}ngOnChanges(t){}onNewSearch(t){this.vectorService.resetPage(t),this.getNextSet()}getNextSet(){this.vectorService.getPhotos()}onScroll(t){this.vectorService.isLoading||(null!==this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>{const t=this.photoContainer.nativeElement;t.scrollTop+t.offsetHeight+50>t.scrollHeight&&this.vectorService.getPhotos()},50))}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(at),o.Ob(h.b))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-vector-picker"]],viewQuery:function(t,e){var n;1&t&&o.vc(st,!0),2&t&&o.nc(n=o.cc())&&(e.photoContainer=n.first)},features:[o.yb,o.zb()],decls:10,vars:4,consts:[[1,"search-box-wrapper"],[3,"placeholder","searchQuery"],[1,"images-container",3,"scroll"],["photoContainer",""],[1,"d-flex"],[1,"picker-item"],[4,"ngFor","ngForOf"],[1,"w-100","text-center","spinner","my-4"],[1,"spinner-border"],["draggable","",1,"image-li",3,"dragstart","click"],[3,"src"]],template:function(t,e){1&t&&(o.Tb(0,"div"),o.Tb(1,"div",0),o.Tb(2,"app-search-box",1),o.bc("searchQuery",(function(t){return e.onNewSearch(t)})),o.Sb(),o.Sb(),o.Tb(3,"div",2,3),o.bc("scroll",(function(t){return e.onScroll(t)})),o.Tb(5,"div",4),o.Tb(6,"ul",5),o.yc(7,ct,3,2,"ng-container",6),o.Sb(),o.Sb(),o.Tb(8,"div",7),o.Pb(9,"div",8),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Bb(2),o.jc("placeholder","Search photos"),o.Bb(5),o.jc("ngForOf",e.vectorService.vectors),o.Bb(1),o.Fb("invisible",!e.vectorService.isLoading))},directives:[X,i.j],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}[_nghost-%COMP%]{padding:10px 15px 0}.search-box-wrapper[_ngcontent-%COMP%]{margin:0 15px 15px}.images-container[_ngcontent-%COMP%]{overflow-y:auto;padding:0 8px 10px;height:calc(100vh - 165px)}.picker-item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.picker-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1px;margin:7px;border-radius:3px;cursor:pointer;height:130px}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]{width:calc(50% - 14px);height:130px;display:flex;align-items:center;justify-content:center}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:3px;max-height:100%;max-width:100%}"]}),t})(),ut=(()=>{class t{constructor(t){this.httpService=t,this.backgrounds=[],this.GET_IMAGES="/api/images",this.PAGE=0,this.LIMIT="20",this.withMock=!0,this.isLoading=!0,this.query="",this.EXTRA_DELAY=10,this.getPhotos()}resetPage(t){this.query=t,this.backgrounds=[],this.PAGE=0}getPhotos(){this.isLoading=!0,this.PAGE+=1;const t={params:{page:""+this.PAGE,limit:this.LIMIT,query:(this.query+" background").trim(),source:"unsplash"}};this.withMock?this.mock().pipe(v(500)).subscribe(t=>{this.processPhotos(t)}):this.httpService.get(this.GET_IMAGES,t).pipe(v(this.EXTRA_DELAY)).subscribe(t=>{this.processPhotos(t)})}processPhotos(t){t.forEach(t=>{const e=D();e.id=t.id,e.imageUrl=t.thumb,e.canvasElement.type=l.BACKGROUND,e.canvasElement.style={[w.BG]:`url('${t.imageUrl}') center/cover`},this.backgrounds.push(e)}),this.isLoading=!1}updateWidth(t,e,n){t.style.width=1.5*e+"px",t.style.height=1.5*n+"px"}mock(){return Object(f.a)(L)}}return t.\u0275fac=function(e){return new(e||t)(o.Xb(j.a))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ht=(()=>{class t{constructor(t){this.elementRef=t,this.appClickOutside=new o.n}onMouseEnter(t){this.srcElement&&this.srcElement.contains(t)||this.elementRef.nativeElement.contains(t)||this.appClickOutside.emit(!0)}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.l))},t.\u0275dir=o.Jb({type:t,selectors:[["","appClickOutside",""]],hostBindings:function(t,e){1&t&&o.bc("mousedown",(function(t){return e.onMouseEnter(t.target)}),!1,o.qc)},inputs:{srcElement:"srcElement"},outputs:{appClickOutside:"appClickOutside"}}),t})();var pt=n("XNiG"),dt=n("xgIS"),ft=n("/uUt"),gt=n("Kj3r");function bt(t,e){(function(t){return"string"==typeof t&&t.includes(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&t.includes("%")}(t);return t=360===e?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:t=360===e?(t<0?t%e+e:t%e)/parseFloat(String(e)):t%e/parseFloat(String(e))}function mt(t){return Math.min(1,Math.max(0,t))}function vt(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function yt(t){return t<=1?100*Number(t)+"%":t}function xt(t){return 1===t.length?"0"+t:String(t)}function St(t,e,n){t=bt(t,255),e=bt(e,255),n=bt(n,255);var i=Math.max(t,e,n),r=Math.min(t,e,n),o=0,a=0,s=(i+r)/2;if(i===r)a=0,o=0;else{var c=i-r;switch(a=s>.5?c/(2-i-r):c/(i+r),i){case t:o=(e-n)/c+(e<n?6:0);break;case e:o=(n-t)/c+2;break;case n:o=(t-e)/c+4}o/=6}return{h:o,s:a,l:s}}function Et(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*n*(e-t):n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Ot(t,e,n){t=bt(t,255),e=bt(e,255),n=bt(n,255);var i=Math.max(t,e,n),r=Math.min(t,e,n),o=0,a=i,s=i-r,c=0===i?0:s/i;if(i===r)o=0;else{switch(i){case t:o=(e-n)/s+(e<n?6:0);break;case e:o=(n-t)/s+2;break;case n:o=(t-e)/s+4}o/=6}return{h:o,s:c,v:a}}function Ct(t,e,n,i){var r=[xt(Math.round(t).toString(16)),xt(Math.round(e).toString(16)),xt(Math.round(n).toString(16))];return i&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function wt(t){return Tt(t)/255}function Tt(t){return parseInt(t,16)}var Pt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},It="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",kt="[\\s|\\(]+("+It+")[,|\\s]+("+It+")[,|\\s]+("+It+")\\s*\\)?",_t="[\\s|\\(]+("+It+")[,|\\s]+("+It+")[,|\\s]+("+It+")[,|\\s]+("+It+")\\s*\\)?",Mt={CSS_UNIT:new RegExp(It),rgb:new RegExp("rgb"+kt),rgba:new RegExp("rgba"+_t),hsl:new RegExp("hsl"+kt),hsla:new RegExp("hsla"+_t),hsv:new RegExp("hsv"+kt),hsva:new RegExp("hsva"+_t),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function zt(t){return Boolean(Mt.CSS_UNIT.exec(String(t)))}var Rt=function(){function t(e,n){var i;if(void 0===e&&(e=""),void 0===n&&(n={}),e instanceof t)return e;"number"==typeof e&&(e=function(t){return{r:t>>16,g:(65280&t)>>8,b:255&t}}(e)),this.originalInput=e;var r=function(t){var e,n,i={r:0,g:0,b:0},r=1,o=null,a=null,s=null,c=!1,l=!1;return"string"==typeof t&&(t=function(t){if(0===(t=t.trim().toLowerCase()).length)return!1;var e=!1;if(Pt[t])t=Pt[t],e=!0;else if("transparent"===t)return{r:0,g:0,b:0,a:0,format:"name"};var n=Mt.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=Mt.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Mt.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=Mt.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Mt.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=Mt.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Mt.hex8.exec(t))?{r:Tt(n[1]),g:Tt(n[2]),b:Tt(n[3]),a:wt(n[4]),format:e?"name":"hex8"}:(n=Mt.hex6.exec(t))?{r:Tt(n[1]),g:Tt(n[2]),b:Tt(n[3]),format:e?"name":"hex"}:(n=Mt.hex4.exec(t))?{r:Tt(n[1]+n[1]),g:Tt(n[2]+n[2]),b:Tt(n[3]+n[3]),a:wt(n[4]+n[4]),format:e?"name":"hex8"}:!!(n=Mt.hex3.exec(t))&&{r:Tt(n[1]+n[1]),g:Tt(n[2]+n[2]),b:Tt(n[3]+n[3]),format:e?"name":"hex"}}(t)),"object"==typeof t&&(zt(t.r)&&zt(t.g)&&zt(t.b)?(e=t.g,n=t.b,i={r:255*bt(t.r,255),g:255*bt(e,255),b:255*bt(n,255)},c=!0,l="%"===String(t.r).substr(-1)?"prgb":"rgb"):zt(t.h)&&zt(t.s)&&zt(t.v)?(o=yt(t.s),a=yt(t.v),i=function(t,e,n){t=6*bt(t,360),e=bt(e,100),n=bt(n,100);var i=Math.floor(t),r=t-i,o=n*(1-e),a=n*(1-r*e),s=n*(1-(1-r)*e),c=i%6;return{r:255*[n,a,o,o,s,n][c],g:255*[s,n,n,a,o,o][c],b:255*[o,o,s,n,n,a][c]}}(t.h,o,a),c=!0,l="hsv"):zt(t.h)&&zt(t.s)&&zt(t.l)&&(o=yt(t.s),s=yt(t.l),i=function(t,e,n){var i,r,o;if(t=bt(t,360),e=bt(e,100),n=bt(n,100),0===e)r=n,o=n,i=n;else{var a=n<.5?n*(1+e):n+e-n*e,s=2*n-a;i=Et(s,a,t+1/3),r=Et(s,a,t),o=Et(s,a,t-1/3)}return{r:255*i,g:255*r,b:255*o}}(t.h,o,s),c=!0,l="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(r=t.a)),r=vt(r),{ok:c,format:t.format||l,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:r}}(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(i=n.format)&&void 0!==i?i:r.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},t.prototype.getLuminance=function(){var t=this.toRgb(),e=t.r/255,n=t.g/255,i=t.b/255;return.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(t){return this.a=vt(t),this.roundA=Math.round(100*this.a)/100,this},t.prototype.toHsv=function(){var t=Ot(this.r,this.g,this.b);return{h:360*t.h,s:t.s,v:t.v,a:this.a}},t.prototype.toHsvString=function(){var t=Ot(this.r,this.g,this.b),e=Math.round(360*t.h),n=Math.round(100*t.s),i=Math.round(100*t.v);return 1===this.a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this.roundA+")"},t.prototype.toHsl=function(){var t=St(this.r,this.g,this.b);return{h:360*t.h,s:t.s,l:t.l,a:this.a}},t.prototype.toHslString=function(){var t=St(this.r,this.g,this.b),e=Math.round(360*t.h),n=Math.round(100*t.s),i=Math.round(100*t.l);return 1===this.a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this.roundA+")"},t.prototype.toHex=function(t){return void 0===t&&(t=!1),Ct(this.r,this.g,this.b,t)},t.prototype.toHexString=function(t){return void 0===t&&(t=!1),"#"+this.toHex(t)},t.prototype.toHex8=function(t){return void 0===t&&(t=!1),function(t,e,n,i,r){var o,a=[xt(Math.round(t).toString(16)),xt(Math.round(e).toString(16)),xt(Math.round(n).toString(16)),xt((o=i,Math.round(255*parseFloat(o)).toString(16)))];return r&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this.r,this.g,this.b,this.a,t)},t.prototype.toHex8String=function(t){return void 0===t&&(t=!1),"#"+this.toHex8(t)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var t=Math.round(this.r),e=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb("+t+", "+e+", "+n+")":"rgba("+t+", "+e+", "+n+", "+this.roundA+")"},t.prototype.toPercentageRgb=function(){var t=function(t){return Math.round(100*bt(t,255))+"%"};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var t=function(t){return Math.round(100*bt(t,255))};return 1===this.a?"rgb("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%)":"rgba("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%, "+this.roundA+")"},t.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var t="#"+Ct(this.r,this.g,this.b,!1),e=0,n=Object.entries(Pt);e<n.length;e++){var i=n[e];if(t===i[1])return i[0]}return!1},t.prototype.toString=function(t){var e=Boolean(t);t=null!=t?t:this.format;var n=!1;return e||!(this.a<1&&this.a>=0)||!t.startsWith("hex")&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this.a?this.toName():this.toRgbString()},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=mt(n.l),new t(n)},t.prototype.brighten=function(e){void 0===e&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-e/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-e/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-e/100*255))),new t(n)},t.prototype.darken=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=mt(n.l),new t(n)},t.prototype.tint=function(t){return void 0===t&&(t=10),this.mix("white",t)},t.prototype.shade=function(t){return void 0===t&&(t=10),this.mix("black",t)},t.prototype.desaturate=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=mt(n.s),new t(n)},t.prototype.saturate=function(e){void 0===e&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=mt(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,new t(n)},t.prototype.mix=function(e,n){void 0===n&&(n=50);var i=this.toRgb(),r=new t(e).toRgb(),o=n/100;return new t({r:(r.r-i.r)*o+i.r,g:(r.g-i.g)*o+i.g,b:(r.b-i.b)*o+i.b,a:(r.a-i.a)*o+i.a})},t.prototype.analogous=function(e,n){void 0===e&&(e=6),void 0===n&&(n=30);var i=this.toHsl(),r=360/n,o=[this];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,o.push(new t(i));return o},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){void 0===e&&(e=6);for(var n=this.toHsv(),i=n.h,r=n.s,o=n.v,a=[],s=1/e;e--;)a.push(new t({h:i,s:r,v:o})),o=(o+s)%1;return a},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),i=n.h,r=[this],o=360/e,a=1;a<e;a++)r.push(new t({h:(i+a*o)%360,s:n.s,l:n.l}));return r},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function Dt(t,e){if(1&t){const t=o.Ub();o.Tb(0,"span",3),o.bc("mousedown",(function(e){return o.sc(t),o.ec().handleMousedown(e)})),o.zc(1),o.Sb()}if(2&t){const t=o.ec();o.jc("ngStyle",t.labelStyle),o.Bb(1),o.Bc(" ",t.label," ")}}function Nt(t,e){if(1&t&&(o.Tb(0,"div",2),o.Pb(1,"div",3),o.Sb()),2&t){const t=o.ec();o.xc("left",t.left)("top",t.top),o.Bb(1),o.jc("ngStyle",t.pointer)}}const At={};let Lt=(()=>{let t=class{constructor(){this.white="transparent",this.size=8,this.grey="rgba(0,0,0,.08)"}ngOnInit(){const t=function(t,e,n){const i=`${t}-${e}-${n}`;if(At[i])return At[i];const r=function(t,e,n){if("undefined"==typeof document)return null;const i=document.createElement("canvas");i.width=2*n,i.height=2*n;const r=i.getContext("2d");return r?(r.fillStyle=t,r.fillRect(0,0,i.width,i.height),r.fillStyle=e,r.fillRect(0,0,n,n),r.translate(n,n),r.fillRect(0,0,n,n),i.toDataURL()):null}(t,e,n);return r?(At[i]=r,r):null}(this.white,this.grey,this.size);this.gridStyles={borderRadius:this.borderRadius,boxShadow:this.boxShadow,background:`url(${t}) center left`}}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["color-checkboard"]],inputs:{white:"white",size:"size",grey:"grey",boxShadow:"boxShadow",borderRadius:"borderRadius"},decls:1,vars:1,consts:[[1,"grid",3,"ngStyle"]],template:function(t,e){1&t&&o.Pb(0,"div",0),2&t&&o.jc("ngStyle",e.gridStyles)},directives:[i.l],styles:[".grid[_ngcontent-%COMP%] {\n    top: 0px;\n    right: 0px;\n    bottom: 0px;\n    left: 0px;\n    position: absolute;\n  }"],changeDetection:0}),t})(),Bt=(()=>{let t=class{};return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[i.c]]}),t})(),jt=(()=>{let t=class{constructor(t){this.el=t,this.coordinatesChange=new pt.a,this.mousechange=new pt.a,this.mouseListening=!1}mousemove(t,e,n,i=!1){this.mouseListening&&(t.preventDefault(),this.mousechange.next({$event:t,x:e,y:n,isTouch:i}))}mouseup(){this.mouseListening=!1}mousedown(t,e,n,i=!1){t.preventDefault(),this.mouseListening=!0,this.mousechange.next({$event:t,x:e,y:n,isTouch:i})}ngOnInit(){this.sub=this.mousechange.pipe(Object(ft.a)((t,e)=>t.x===e.x&&t.y===e.y)).subscribe(t=>this.handleChange(t.x,t.y,t.$event,t.isTouch))}ngOnDestroy(){this.sub.unsubscribe()}handleChange(t,e,n,i){const r=this.el.nativeElement.clientWidth,o=this.el.nativeElement.clientHeight,a=t-(this.el.nativeElement.getBoundingClientRect().left+window.pageXOffset);let s=e-this.el.nativeElement.getBoundingClientRect().top;i||(s-=window.pageYOffset),this.coordinatesChange.next({x:t,y:e,top:s,left:a,containerWidth:r,containerHeight:o,$event:n})}};return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.l))},t.\u0275dir=o.Jb({type:t,selectors:[["","ngx-color-coordinates",""]],hostBindings:function(t,e){1&t&&o.bc("mousemove",(function(t){return e.mousemove(t,t.pageX,t.pageY)}),!1,o.rc)("touchmove",(function(t){return e.mousemove(t,t.touches[0].clientX,t.touches[0].clientY,!0)}),!1,o.rc)("mouseup",(function(){return e.mouseup()}),!1,o.rc)("touchend",(function(){return e.mouseup()}),!1,o.rc)("mousedown",(function(t){return e.mousedown(t,t.pageX,t.pageY)}))("touchstart",(function(t){return e.mousedown(t,t.touches[0].clientX,t.touches[0].clientY,!0)}))},outputs:{coordinatesChange:"coordinatesChange"}}),t})(),Gt=(()=>{let t=class{};return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)}}),t})(),Ht=(()=>{let t=class{constructor(){this.direction="horizontal",this.onChange=new o.n}ngOnChanges(){"vertical"===this.direction?(this.pointerLeft=0,this.pointerTop=100*this.rgb.a,this.gradient={background:`linear-gradient(to bottom, rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 0) 0%,\n          rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 1) 100%)`}):(this.gradient={background:`linear-gradient(to right, rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 0) 0%,\n          rgba(${this.rgb.r},${this.rgb.g},${this.rgb.b}, 1) 100%)`},this.pointerLeft=100*this.rgb.a)}handleChange({top:t,left:e,containerHeight:n,containerWidth:i,$event:r}){let o;if("vertical"===this.direction){let e;e=t<0?0:t>n?1:Math.round(100*t/n)/100,this.hsl.a!==e&&(o={h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:e,source:"rgb"})}else{let t;t=e<0?0:e>i?1:Math.round(100*e/i)/100,this.hsl.a!==t&&(o={h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:t,source:"rgb"})}if(!o)return null;this.onChange.emit({data:o,$event:r})}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["color-alpha"]],inputs:{direction:"direction",hsl:"hsl",rgb:"rgb",pointer:"pointer",shadow:"shadow",radius:"radius"},outputs:{onChange:"onChange"},features:[o.zb()],decls:7,vars:15,consts:[[1,"alpha"],[1,"alpha-checkboard"],[1,"alpha-gradient",3,"ngStyle"],["ngx-color-coordinates","",3,"coordinatesChange"],[1,"alpha-pointer"],[1,"alpha-slider",3,"ngStyle"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Pb(2,"color-checkboard"),o.Sb(),o.Pb(3,"div",2),o.Tb(4,"div",3),o.bc("coordinatesChange",(function(t){return e.handleChange(t)})),o.Tb(5,"div",4),o.Pb(6,"div",5),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.xc("border-radius",e.radius),o.Bb(3),o.xc("box-shadow",e.shadow)("border-radius",e.radius),o.jc("ngStyle",e.gradient),o.Bb(1),o.Eb("alpha-container color-alpha-",e.direction,""),o.Bb(1),o.xc("left",e.pointerLeft,"%")("top",e.pointerTop,"%"),o.Bb(1),o.jc("ngStyle",e.pointer))},directives:[Lt,i.l,jt],styles:[".alpha[_ngcontent-%COMP%] {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n    }\n    .alpha-checkboard[_ngcontent-%COMP%] {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      overflow: hidden;\n    }\n    .alpha-gradient[_ngcontent-%COMP%] {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n    }\n    .alpha-container[_ngcontent-%COMP%] {\n      position: relative;\n      height: 100%;\n      margin: 0 3px;\n    }\n    .alpha-pointer[_ngcontent-%COMP%] {\n      position: absolute;\n    }\n    .alpha-slider[_ngcontent-%COMP%] {\n      width: 4px;\n      border-radius: 1px;\n      height: 8px;\n      box-shadow: 0 0 2px rgba(0, 0, 0, .6);\n      background: #fff;\n      margin-top: 1px;\n      transform: translateX(-2px);\n    },"],changeDetection:0}),t})(),Ft=(()=>{let t=class{};return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[i.c,Bt,Gt]]}),t})();function Xt(t){let e=0,n=0;return["r","g","b","a","h","s","l","v"].forEach(i=>{t[i]&&(e+=1,isNaN(t[i])||(n+=1),"s"===i||"l"===i)&&/^\d+%$/.test(t[i])&&(n+=1)}),e===n&&t}function Ut(t,e){const n=new Rt(t.hex?t.hex:t),i=n.toHsl(),r=n.toHsv(),o=n.toRgb(),a=n.toHex();return 0===i.s&&(i.h=e||0,r.h=e||0),{hsl:i,hex:"000000"===a&&0===o.a?"transparent":n.toHexString(),rgb:o,hsv:r,oldHue:t.h||e||i.h,source:t.source}}let Wt=(()=>{let t=class{constructor(){this.color={h:250,s:.5,l:.2,a:1},this.onChange=new o.n,this.onChangeComplete=new o.n,this.onSwatchHover=new o.n}ngOnInit(){this.changes=this.onChange.pipe(Object(gt.a)(100)).subscribe(t=>this.onChangeComplete.emit(t)),this.setState(Ut(this.color,0)),this.currentColor=this.hex}ngOnChanges(){this.setState(Ut(this.color,this.oldHue))}ngOnDestroy(){this.changes.unsubscribe()}setState(t){this.oldHue=t.oldHue,this.hsl=t.hsl,this.hsv=t.hsv,this.rgb=t.rgb,this.hex=t.hex,this.source=t.source,this.afterValidChange()}handleChange(t,e){if(Xt(t)){const n=Ut(t,t.h||this.oldHue);this.setState(n),this.onChange.emit({color:n,$event:e}),this.afterValidChange()}}afterValidChange(){}handleSwatchHover(t,e){if(Xt(t)){const n=Ut(t,t.h||this.oldHue);this.setState(n),this.onSwatchHover.emit({color:n,$event:e})}}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["color-wrap"]],inputs:{color:"color",className:"className"},outputs:{onChange:"onChange",onChangeComplete:"onChangeComplete",onSwatchHover:"onSwatchHover"},features:[o.zb()],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),Yt=(()=>{let t=class{constructor(){this.placeholder="",this.onChange=new o.n,this.focus=!1}ngOnInit(){this.wrapStyle=this.style&&this.style.wrap?this.style.wrap:{},this.inputStyle=this.style&&this.style.input?this.style.input:{},this.labelStyle=this.style&&this.style.label?this.style.label:{},this.dragLabel&&(this.labelStyle.cursor="ew-resize")}handleFocus(t){this.focus=!0}handleFocusOut(t){this.focus=!1,this.currentValue=this.blurValue}handleKeydown(t){const e=String(t.target.value),n=e.indexOf("%")>-1,i=Number(e.replace(/%/g,""));if(!isNaN(i)){const e=this.arrowOffset||1;38===t.keyCode&&(this.onChange.emit(this.label?{data:{[this.label]:i+e},$event:t}:{data:i+e,$event:t}),this.currentValue=n?`${i+e}%`:i+e),40===t.keyCode&&(this.onChange.emit(this.label?{data:{[this.label]:i-e},$event:t}:{data:i-e,$event:t}),this.currentValue=n?`${i-e}%`:i-e)}}handleKeyup(t){40!==t.keyCode&&38!==t.keyCode&&this.onChange.emit(this.label?{data:{[this.label]:t.target.value},$event:t}:{data:t.target.value,$event:t})}ngOnChanges(){this.focus||(this.currentValue=String(this.value).toUpperCase()),this.blurValue=String(this.value).toUpperCase()}ngOnDestroy(){this.unsubscribe()}subscribe(){this.mousemove=Object(dt.a)(document,"mousemove").subscribe(t=>this.handleDrag(t)),this.mouseup=Object(dt.a)(document,"mouseup").subscribe(()=>this.unsubscribe())}unsubscribe(){this.mousemove&&this.mousemove.unsubscribe(),this.mouseup&&this.mouseup.unsubscribe()}handleMousedown(t){this.dragLabel&&(t.preventDefault(),this.handleDrag(t),this.subscribe())}handleDrag(t){if(this.dragLabel){const e=Math.round(this.value+t.movementX);e>=0&&e<=this.dragMax&&this.onChange.emit({data:{[this.label]:e},$event:t})}}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["color-editable-input"]],inputs:{placeholder:"placeholder",style:"style",label:"label",value:"value",arrowOffset:"arrowOffset",dragLabel:"dragLabel",dragMax:"dragMax"},outputs:{onChange:"onChange"},features:[o.zb()],decls:3,vars:5,consts:[[1,"wrap",3,"ngStyle"],["spellCheck","false",3,"ngStyle","value","placeholder","keydown","keyup","focus","focusout"],[3,"ngStyle","mousedown",4,"ngIf"],[3,"ngStyle","mousedown"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"input",1),o.bc("keydown",(function(t){return e.handleKeydown(t)}))("keyup",(function(t){return e.handleKeyup(t)}))("focus",(function(t){return e.handleFocus(t)}))("focusout",(function(t){return e.handleFocusOut(t)})),o.Sb(),o.yc(2,Dt,2,2,"span",2),o.Sb()),2&t&&(o.jc("ngStyle",e.wrapStyle),o.Bb(1),o.jc("ngStyle",e.inputStyle)("value",e.currentValue)("placeholder",e.placeholder),o.Bb(1),o.jc("ngIf",e.label))},directives:[i.l,i.k],styles:["[_nghost-%COMP%] {\n      display: flex;\n    }\n    .wrap[_ngcontent-%COMP%] {\n      position: relative;\n    }"],changeDetection:0}),t})(),qt=(()=>{let t=class{};return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[i.c]]}),t})(),Vt=(()=>{let t=class{constructor(){this.hidePointer=!1,this.direction="horizontal",this.onChange=new o.n,this.left="0px",this.top=""}ngOnChanges(){"horizontal"===this.direction?this.left=`${100*this.hsl.h/360}%`:this.top=`${-100*this.hsl.h/360+100}%`}handleChange({top:t,left:e,containerHeight:n,containerWidth:i,$event:r}){let o;if("vertical"===this.direction){let e;e=t<0?359:t>n?0:360*(-100*t/n+100)/100,this.hsl.h!==e&&(o={h:e,s:this.hsl.s,l:this.hsl.l,a:this.hsl.a,source:"rgb"})}else{let t;t=e<0?0:e>i?359:100*e/i*360/100,this.hsl.h!==t&&(o={h:t,s:this.hsl.s,l:this.hsl.l,a:this.hsl.a,source:"rgb"})}if(!o)return null;this.onChange.emit({data:o,$event:r})}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["color-hue"]],inputs:{hidePointer:"hidePointer",direction:"direction",hsl:"hsl",pointer:"pointer",radius:"radius",shadow:"shadow"},outputs:{onChange:"onChange"},features:[o.zb()],decls:3,vars:8,consts:[["ngx-color-coordinates","",1,"color-hue-container",3,"coordinatesChange"],["class","color-hue-pointer",3,"left","top",4,"ngIf"],[1,"color-hue-pointer"],[1,"color-hue-slider",3,"ngStyle"]],template:function(t,e){1&t&&(o.Tb(0,"div"),o.Tb(1,"div",0),o.bc("coordinatesChange",(function(t){return e.handleChange(t)})),o.yc(2,Nt,2,5,"div",1),o.Sb(),o.Sb()),2&t&&(o.Eb("color-hue color-hue-",e.direction,""),o.xc("border-radius",e.radius,"px")("box-shadow",e.shadow),o.Bb(2),o.jc("ngIf",!e.hidePointer))},directives:[jt,i.k,i.l],styles:[".color-hue[_ngcontent-%COMP%] {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n    }\n    .color-hue-container[_ngcontent-%COMP%] {\n      margin: 0 2px;\n      position: relative;\n      height: 100%;\n    }\n    .color-hue-pointer[_ngcontent-%COMP%] {\n      position: absolute;\n    }\n    .color-hue-slider[_ngcontent-%COMP%] {\n      margin-top: 1px;\n      width: 4px;\n      border-radius: 1px;\n      height: 8px;\n      box-shadow: 0 0 2px rgba(0, 0, 0, .6);\n      background: #fff;\n      transform: translateX(-2px);\n    }\n    .color-hue-horizontal[_ngcontent-%COMP%] {\n      background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n        33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n    }\n    .color-hue-vertical[_ngcontent-%COMP%] {\n      background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n        #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n    }"],changeDetection:0}),t})(),Qt=(()=>{let t=class{};return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[i.c,Gt]]}),t})(),$t=(()=>{let t=class{constructor(){this.onChange=new o.n}ngOnChanges(){this.background=`hsl(${this.hsl.h}, 100%, 50%)`,this.pointerTop=-100*this.hsv.v+1+100+"%",this.pointerLeft=100*this.hsv.s+"%"}handleChange({top:t,left:e,containerHeight:n,containerWidth:i,$event:r}){e<0?e=0:e>i?e=i:t<0?t=0:t>n&&(t=n);let o=-t/n+1;o=o>0?o:0,o=o>1?1:o,this.onChange.emit({data:{h:this.hsl.h,s:e/i,v:o,a:this.hsl.a,source:"hsva"},$event:r})}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["color-saturation"]],inputs:{hsl:"hsl",hsv:"hsv",radius:"radius",pointer:"pointer",circle:"circle"},outputs:{onChange:"onChange"},features:[o.zb()],decls:5,vars:8,consts:[["ngx-color-coordinates","",1,"color-saturation",3,"coordinatesChange"],[1,"saturation-white"],[1,"saturation-black"],[1,"saturation-pointer",3,"ngStyle"],[1,"saturation-circle",3,"ngStyle"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.bc("coordinatesChange",(function(t){return e.handleChange(t)})),o.Tb(1,"div",1),o.Pb(2,"div",2),o.Tb(3,"div",3),o.Pb(4,"div",4),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.xc("background",e.background,o.Hb),o.Bb(3),o.xc("top",e.pointerTop)("left",e.pointerLeft),o.jc("ngStyle",e.pointer),o.Bb(1),o.jc("ngStyle",e.circle))},directives:[jt,i.l],styles:[".saturation-white[_ngcontent-%COMP%] {\n      background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n    }\n    .saturation-black[_ngcontent-%COMP%] {\n      background: linear-gradient(to top, #000, rgba(0,0,0,0));\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n    }\n    .color-saturation[_ngcontent-%COMP%] {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n    }\n    .saturation-pointer[_ngcontent-%COMP%] {\n      position: absolute;\n      cursor: default;\n    }\n    .saturation-circle[_ngcontent-%COMP%] {\n      width: 4px;\n      height: 4px;\n      box-shadow: 0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3), 0 0 1px 2px rgba(0,0,0,.4);\n      border-radius: 50%;\n      cursor: hand;\n      transform: translate(-2px, -4px);\n    }"],changeDetection:0}),t})(),Kt=(()=>{let t=class{};return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[i.c,Gt]]}),t})();const Jt=function(t,e){return{input:t,label:e}};function Zt(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",11),o.Tb(1,"color-editable-input",12),o.bc("onChange",(function(e){return o.sc(t),o.ec().handleChange(e)})),o.Sb(),o.Sb()}if(2&t){const t=o.ec();o.Bb(1),o.wc(o.mc(3,Jt,t.input,t.label)),o.jc("value",t.hex)}}function te(t,e){if(1&t){const t=o.Ub();o.Tb(0,"color-editable-input",17),o.bc("onChange",(function(e){return o.sc(t),o.ec(2).handleChange(e)})),o.Sb()}if(2&t){const t=o.ec(2);o.wc(o.mc(4,Jt,t.input,t.label)),o.jc("value",t.rgb.a)("arrowOffset",.01)}}function ee(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",11),o.Tb(1,"color-editable-input",13),o.bc("onChange",(function(e){return o.sc(t),o.ec().handleChange(e)})),o.Sb(),o.Sb(),o.Tb(2,"div",11),o.Tb(3,"color-editable-input",14),o.bc("onChange",(function(e){return o.sc(t),o.ec().handleChange(e)})),o.Sb(),o.Sb(),o.Tb(4,"div",11),o.Tb(5,"color-editable-input",15),o.bc("onChange",(function(e){return o.sc(t),o.ec().handleChange(e)})),o.Sb(),o.Sb(),o.Tb(6,"div",11),o.yc(7,te,1,7,"color-editable-input",16),o.Sb()}if(2&t){const t=o.ec();o.Bb(1),o.wc(o.mc(10,Jt,t.input,t.label)),o.jc("value",t.rgb.r),o.Bb(2),o.wc(o.mc(13,Jt,t.input,t.label)),o.jc("value",t.rgb.g),o.Bb(2),o.wc(o.mc(16,Jt,t.input,t.label)),o.jc("value",t.rgb.b),o.Bb(2),o.jc("ngIf",!t.disableAlpha)}}function ne(t,e){if(1&t){const t=o.Ub();o.Tb(0,"color-editable-input",17),o.bc("onChange",(function(e){return o.sc(t),o.ec(2).handleChange(e)})),o.Sb()}if(2&t){const t=o.ec(2);o.wc(o.mc(4,Jt,t.input,t.label)),o.jc("value",t.hsl.a)("arrowOffset",.01)}}function ie(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",11),o.Tb(1,"color-editable-input",18),o.bc("onChange",(function(e){return o.sc(t),o.ec().handleChange(e)})),o.Sb(),o.Sb(),o.Tb(2,"div",11),o.Tb(3,"color-editable-input",19),o.bc("onChange",(function(e){return o.sc(t),o.ec().handleChange(e)})),o.Sb(),o.Sb(),o.Tb(4,"div",11),o.Tb(5,"color-editable-input",20),o.bc("onChange",(function(e){return o.sc(t),o.ec().handleChange(e)})),o.Sb(),o.Sb(),o.Tb(6,"div",11),o.yc(7,ne,1,7,"color-editable-input",16),o.Sb()}if(2&t){const t=o.ec();o.Bb(1),o.wc(o.mc(10,Jt,t.input,t.label)),o.jc("value",t.round(t.hsl.h)),o.Bb(2),o.wc(o.mc(13,Jt,t.input,t.label)),o.jc("value",t.round(100*t.hsl.s)+"%"),o.Bb(2),o.wc(o.mc(16,Jt,t.input,t.label)),o.jc("value",t.round(100*t.hsl.l)+"%"),o.Bb(2),o.jc("ngIf",!t.disableAlpha)}}function re(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",12),o.Tb(1,"color-alpha",13),o.bc("onChange",(function(e){return o.sc(t),o.ec().handleValueChange(e)})),o.Sb(),o.Sb()}if(2&t){const t=o.ec();o.Bb(1),o.jc("radius",2)("rgb",t.rgb)("hsl",t.hsl)("pointer",t.pointer)}}let oe=(()=>{let t=class{constructor(){this.onChange=new o.n,this.view="",this.input={fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px","text-align":"center"},this.label={"text-transform":"uppercase",fontSize:"11px","line-height":"11px",color:"#969696","text-align":"center",display:"block",marginTop:"12px"}}ngOnInit(){1===this.hsl.a&&"hex"!==this.view?this.view="hex":"rgb"!==this.view&&"hsl"!==this.view&&(this.view="rgb")}toggleViews(){"hex"===this.view?this.view="rgb":"rgb"===this.view?this.view="hsl":"hsl"===this.view&&(this.view=1===this.hsl.a?"hex":"rgb")}round(t){return Math.round(t)}handleChange({data:t,$event:e}){if(t.hex){if(new Rt(t.hex).isValid){const n=new Rt(t.hex);this.onChange.emit({data:{hex:this.disableAlpha?n.toHex():n.toHex8(),source:"hex"},$event:e})}}else if(t.r||t.g||t.b)this.onChange.emit({data:{r:t.r||this.rgb.r,g:t.g||this.rgb.g,b:t.b||this.rgb.b,source:"rgb"},$event:e});else if(t.a)t.a<0?t.a=0:t.a>1&&(t.a=1),this.disableAlpha&&(t.a=1),this.onChange.emit({data:{h:this.hsl.h,s:this.hsl.s,l:this.hsl.l,a:Math.round(100*t.a)/100,source:"rgb"},$event:e});else if(t.h||t.s||t.l){const n=t.s&&t.s.replace("%",""),i=t.l&&t.l.replace("%","");this.onChange.emit({data:{h:t.h||this.hsl.h,s:Number(n||this.hsl.s),l:Number(i||this.hsl.l),source:"hsl"},$event:e})}}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["color-chrome-fields"]],inputs:{disableAlpha:"disableAlpha",hsl:"hsl",rgb:"rgb",hex:"hex"},outputs:{onChange:"onChange"},decls:13,vars:3,consts:[[1,"chrome-wrap"],[1,"chrome-fields"],[3,"ngIf"],[1,"chrome-toggle"],[1,"chrome-icon",3,"click"],["icon",""],["viewBox","0 0 24 24",1,"chrome-toggle-svg"],["fill","#333","d","M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"],["iconUp",""],["fill","#333","d","M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15Z"],["iconDown",""],[1,"chrome-field"],["label","hex",3,"value","onChange"],["label","r",3,"value","onChange"],["label","g",3,"value","onChange"],["label","b",3,"value","onChange"],["label","a",3,"style","value","arrowOffset","onChange",4,"ngIf"],["label","a",3,"value","arrowOffset","onChange"],["label","h",3,"value","onChange"],["label","s",3,"value","onChange"],["label","l",3,"value","onChange"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.yc(2,Zt,2,6,"ng-template",2),o.yc(3,ee,8,19,"ng-template",2),o.yc(4,ie,8,19,"ng-template",2),o.Sb(),o.Tb(5,"div",3),o.Tb(6,"div",4,5),o.bc("click",(function(){return e.toggleViews()})),o.dc(),o.Tb(8,"svg",6),o.Pb(9,"path",7,8),o.Pb(11,"path",9,10),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Bb(2),o.jc("ngIf","hex"===e.view),o.Bb(1),o.jc("ngIf","rgb"===e.view),o.Bb(1),o.jc("ngIf","hsl"===e.view))},directives:[i.k,Yt],styles:[".chrome-wrap[_ngcontent-%COMP%] {\n        padding-top: 16px;\n        display: flex;\n      }\n      .chrome-fields[_ngcontent-%COMP%] {\n        flex: 1;\n        display: flex;\n        margin-left: -6px;\n      }\n      .chrome-field[_ngcontent-%COMP%] {\n        padding-left: 6px;\n        width: 100%;\n      }\n      .chrome-toggle[_ngcontent-%COMP%] {\n        width: 32px;\n        text-align: right;\n        position: relative;\n      }\n      .chrome-icon[_ngcontent-%COMP%] {\n        margin-right: -4px;\n        margin-top: 12px;\n        cursor: pointer;\n        position: relative;\n      }\n      .chrome-toggle-svg[_ngcontent-%COMP%] {\n        width: 24px;\n        height: 24px;\n        border: 1px transparent solid;\n        border-radius: 5px;\n      }\n      .chrome-toggle-svg[_ngcontent-%COMP%]:hover {\n        background: #eee;\n      }"],changeDetection:0}),t})(),ae=(()=>{let t=class extends Wt{constructor(){super(),this.disableAlpha=!1,this.circle={width:"12px",height:"12px",borderRadius:"6px",boxShadow:"rgb(255, 255, 255) 0px 0px 0px 1px inset",transform:"translate(-6px, -8px)"},this.pointer={width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -2px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}afterValidChange(){this.activeBackground=`rgba(${this.rgb.r}, ${this.rgb.g}, ${this.rgb.b}, ${this.disableAlpha?1:this.rgb.a})`}handleValueChange({data:t,$event:e}){this.handleChange(t,e)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["color-chrome"]],inputs:{disableAlpha:"disableAlpha"},features:[o.yb],decls:14,vars:16,consts:[[1,"saturation"],[3,"hsl","hsv","circle","onChange"],[1,"chrome-body"],[1,"chrome-controls"],[1,"chrome-color"],[1,"chrome-swatch"],[1,"chrome-active"],[1,"chrome-toggles"],[1,"chrome-hue"],[3,"radius","hsl","pointer","onChange"],["class","chrome-alpha",4,"ngIf"],[3,"rgb","hsl","hex","disableAlpha","onChange"],[1,"chrome-alpha"],[3,"radius","rgb","hsl","pointer","onChange"]],template:function(t,e){1&t&&(o.Tb(0,"div"),o.Tb(1,"div",0),o.Tb(2,"color-saturation",1),o.bc("onChange",(function(t){return e.handleValueChange(t)})),o.Sb(),o.Sb(),o.Tb(3,"div",2),o.Tb(4,"div",3),o.Tb(5,"div",4),o.Tb(6,"div",5),o.Pb(7,"div",6),o.Pb(8,"color-checkboard"),o.Sb(),o.Sb(),o.Tb(9,"div",7),o.Tb(10,"div",8),o.Tb(11,"color-hue",9),o.bc("onChange",(function(t){return e.handleValueChange(t)})),o.Sb(),o.Sb(),o.yc(12,re,2,4,"div",10),o.Sb(),o.Sb(),o.Tb(13,"color-chrome-fields",11),o.bc("onChange",(function(t){return e.handleValueChange(t)})),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Eb("chrome-picker ",e.className,""),o.Bb(2),o.jc("hsl",e.hsl)("hsv",e.hsv)("circle",e.circle),o.Bb(5),o.xc("background",e.activeBackground,o.Hb),o.Bb(4),o.jc("radius",2)("hsl",e.hsl)("pointer",e.pointer),o.Bb(1),o.jc("ngIf",!e.disableAlpha),o.Bb(1),o.jc("rgb",e.rgb)("hsl",e.hsl)("hex",e.hex)("disableAlpha",e.disableAlpha))},directives:[$t,Lt,Vt,i.k,oe,Ht],styles:[".chrome-picker[_ngcontent-%COMP%] {\n        background: #fff;\n        border-radius: 2px;\n        box-shadow: 0 0 2px rgba(0, 0, 0, 0.3), 0 4px 8px rgba(0, 0, 0, 0.3);\n        box-sizing: initial;\n        width: 225px;\n        font-family: 'Menlo';\n      }\n      .chrome-controls[_ngcontent-%COMP%] {\n        display: flex;\n      }\n      .chrome-color[_ngcontent-%COMP%] {\n        width: 42px;\n      }\n      .chrome-body[_ngcontent-%COMP%] {\n        padding: 14px 14px 12px;\n      }\n      .chrome-active[_ngcontent-%COMP%] {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        border-radius: 20px;\n        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.1);\n        z-index: 2;\n      }\n      .chrome-swatch[_ngcontent-%COMP%] {\n        width: 28px;\n        height: 28px;\n        border-radius: 15px;\n        position: relative;\n        overflow: hidden;\n      }\n      .saturation[_ngcontent-%COMP%] {\n        width: 100%;\n        padding-bottom: 55%;\n        position: relative;\n        border-radius: 2px 2px 0 0;\n        overflow: hidden;\n      }\n      .chrome-toggles[_ngcontent-%COMP%] {\n        flex: 1;\n      }\n      .chrome-hue[_ngcontent-%COMP%] {\n        height: 10px;\n        position: relative;\n        margin-bottom: 8px;\n      }\n      .chrome-alpha[_ngcontent-%COMP%] {\n        height: 10px;\n        position: relative;\n      }"],changeDetection:0}),t})(),se=(()=>{let t=class{};return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[i.c,Ft,Bt,qt,Qt,Kt]]}),t})();const ce=["toolbarNewColorPicker"];function le(t,e){if(1&t&&(o.Tb(0,"h5",18),o.zc(1),o.Sb()),2&t){const t=o.ec(3);o.Bb(1),o.Ac(t.heading)}}function ue(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",19),o.Tb(1,"color-chrome",20),o.bc("onChangeComplete",(function(e){return o.sc(t),o.ec(3).unsavedColor=e.color})),o.Sb(),o.Tb(2,"div",21),o.Tb(3,"button",22),o.bc("click",(function(e){o.sc(t);const n=o.ec(3);return e.stopPropagation(),n.showColorPicker=!1})),o.zc(4,"Cancel"),o.Sb(),o.Tb(5,"button",23),o.bc("click",(function(e){return o.sc(t),o.ec(3).onPick(e)})),o.zc(6,"Save"),o.Sb(),o.Sb(),o.Sb()}}function he(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",24),o.bc("mouseenter",(function(){o.sc(t);const n=e.$implicit;return o.ec(3).onHover(n)}))("click",(function(){o.sc(t);const n=e.$implicit;return o.ec(3).onClick(n)})),o.Sb()}if(2&t){const t=e.$implicit,n=o.ec(3);o.xc("background-color",t),o.Fb("selected-color",t===n.selectedColor)}}function pe(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",24),o.bc("mouseenter",(function(){o.sc(t);const n=e.$implicit;return o.ec(3).onHover(n)}))("click",(function(){o.sc(t);const n=e.$implicit;return o.ec(3).onClick(n)})),o.Sb()}if(2&t){const t=e.$implicit,n=o.ec(3);o.xc("background-color",t),o.Fb("selected-color",t===n.selectedColor)}}function de(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",8),o.bc("appClickOutside",(function(){return o.sc(t),o.ec(2).close()})),o.yc(1,le,2,1,"h5",9),o.Tb(2,"div",10),o.Tb(3,"h5"),o.zc(4,"My Colors"),o.Sb(),o.Tb(5,"button",11),o.bc("click",(function(){return o.sc(t),o.ec(2).showColorPicker=!0})),o.zc(6,"+ Add"),o.Sb(),o.yc(7,ue,7,0,"div",12),o.Sb(),o.Tb(8,"div",13),o.yc(9,he,1,4,"div",14),o.Sb(),o.Tb(10,"div",15),o.Tb(11,"h5"),o.zc(12,"Standard Colors"),o.Sb(),o.Sb(),o.Tb(13,"div",16),o.Tb(14,"div",17),o.bc("click",(function(){o.sc(t);const e=o.ec(2);return e.onClick(e.CSS_PROPERTY_VALUES.COLOR_TRANSPARENT)})),o.zc(15," Transparent "),o.Sb(),o.yc(16,pe,1,4,"div",14),o.Sb(),o.Sb()}if(2&t){const t=o.ec(2),e=o.oc(1);o.jc("srcElement",e),o.Bb(1),o.jc("ngIf",t.heading),o.Bb(6),o.jc("ngIf",t.showColorPicker),o.Bb(2),o.jc("ngForOf",t.customColors),o.Bb(5),o.Fb("selected-color",t.CSS_PROPERTY_VALUES.COLOR_TRANSPARENT===t.selectedColor),o.Bb(2),o.jc("ngForOf",t.standeardColors)}}function fe(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",2),o.bc("appClickOutside",(function(){return o.sc(t),o.ec().toggleOptions()})),o.Pb(1,"div",3,4),o.yc(3,de,17,7,"div",5),o.Tb(4,"button",6),o.bc("click",(function(){return o.sc(t),o.ec().toggleOptions()})),o.Tb(5,"span",7),o.zc(6,"\xd7"),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=o.ec(),e=o.oc(1);o.jc("srcElement",t.externalSourseElement||e),o.Bb(3),o.jc("ngIf",t.showDropdown)}}const ge=["*"];let be=(()=>{class t{constructor(){this.showDropdown=!1,this.selectedColor="",this.CSS_PROPERTY_VALUES=T,this.customColors=[],this.standeardColors=["#000000","#323232","#646464","#7d7d7d","#afafaf","#e1e1e1","#ffffff","#820000","#b40000","#e60000","#ff0000","#ff3232","#ff6464","#ff7d7d","#823400","#b44800","#e65c00","#ff6600","#ff8532","#ffa364","#ffb27d","#828200","#b4b400","#e6e600","#ffff00","#ffff32","#ffff64","#ffff7d","#003300","#008000","#00cc00","#00e600","#4dff4d","#80ff80","#b3ffb3","#001a4d","#003cb3","#0000ff","#0055ff","#4d88ff","#80b3ff","#b3d1ff","#003333","#006666","#00cccc","#00ffff","#33ffff","#80ffff","#b3ffff","#4d004d","#660066","#ac39ac","#bf40bf","#cc66cc","#d98cd9","#df9fdf","#660029","#b30047","#e6005c","#ff0066","#ff3385","#ff66a3","#ff99c2"],this.showColorPicker=!1,this.selectedOption={},this.colorHover=new o.n,this.colorSelect=new o.n}ngOnInit(){}ngAfterViewInit(){}openColorPicker(t){this.selectedOption=t,this.showColorPicker=!0}onPick(t){t.stopPropagation(),this.showColorPicker=!1;const e=this.unsavedColor.rgb;this.customColors.push(`rgba(${e.r},${e.g},${e.b},${e.a})`)}open(){setTimeout(()=>{this.showDropdown=!0})}onHover(t){}onClick(t){this.colorSelect.emit(t)}close(){this.showDropdown=!1,this.showColorPicker=!1}toggleOptions(){this.showDropdown=!this.showDropdown,this.showColorPicker=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["app-color-picker"]],viewQuery:function(t,e){var n;1&t&&o.vc(ce,!0),2&t&&o.nc(n=o.cc())&&(e.toolbarNewColorPicker=n.first)},inputs:{externalSourseElement:"externalSourseElement",heading:"heading"},outputs:{colorHover:"colorHover",colorSelect:"colorSelect"},ngContentSelectors:ge,decls:4,vars:1,consts:[["srcElement",""],["class","left-raiser-container color-picker-content",3,"srcElement","appClickOutside",4,"ngIf"],[1,"left-raiser-container","color-picker-content",3,"srcElement","appClickOutside"],["id","toolbarNewColorPicker"],["toolbarNewColorPicker",""],["class","color-picker","id","colorPalette",3,"srcElement","appClickOutside",4,"ngIf"],["type","button","aria-label","Close",1,"close","close-button",3,"click"],["aria-hidden","true"],["id","colorPalette",1,"color-picker",3,"srcElement","appClickOutside"],["class","color-picker-heading",4,"ngIf"],[1,"my-color-header","position-relative"],["type","button",1,"btn","btn-outline-info","btn-sm",3,"click"],["class","color-sketch",4,"ngIf"],[1,"color-pallete-container","justify-content-start"],["class","color-pallete",3,"background-color","selected-color","mouseenter","click",4,"ngFor","ngForOf"],[1,"standard-color-header"],[1,"mt-3","color-pallete-container"],[1,"color-pallete","transparent-color-pallete",3,"click"],[1,"color-picker-heading"],[1,"color-sketch"],[3,"onChangeComplete"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-secondary","btn-sm","mr-2",3,"click"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"color-pallete",3,"mouseenter","click"]],template:function(t,e){1&t&&(o.ic(),o.Tb(0,"div",null,0),o.hc(2),o.Sb(),o.yc(3,fe,7,2,"div",1)),2&t&&(o.Bb(3),o.jc("ngIf",e.showDropdown))},directives:[i.k,ht,i.j,ae],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.color-picker[_ngcontent-%COMP%]{color:#484848;width:100%;height:calc(100vh - 60px);padding:0 20px;overflow-y:auto}.color-pallete-container[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap}.color-pallete[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:.15em;cursor:pointer;margin:5px;transition:all .15s;overflow:hidden;box-shadow:0 0 2px 0 grey;transition:box-shadow .3s}.color-pallete[_ngcontent-%COMP%]:hover{box-shadow:0 0 2px 1px grey}.color-pallete.add-color-pallete[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px}.color-sketch[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;border-radius:2px;box-shadow:0 0 2px rgba(0,0,0,.3),0 4px 8px rgba(0,0,0,.3);padding:10px;background:#fff}.color-sketch[_ngcontent-%COMP%]     .chrome-picker{border-radius:0;box-shadow:0 0 0}.my-color-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.my-color-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:.813rem}.standard-color-header[_ngcontent-%COMP%]{margin-top:2rem;border-top:1px solid #d3d3d3;padding-top:20px}.standard-color-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:.813rem}.close-button[_ngcontent-%COMP%]{position:absolute;right:7px;top:3px}.color-picker-heading[_ngcontent-%COMP%]{border-bottom:1px solid silver;margin-bottom:20px;padding-bottom:5px}.transparent-color-pallete[_ngcontent-%COMP%]{background-color:transparent;margin:5px;width:calc(100% - 15px);box-sizing:content-box;display:flex;justify-content:center;align-items:center}"]}),t})();const me=["photoContainer"],ve=function(t){return{"background-image":t}};function ye(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"li",15),o.bc("dragstart",(function(n){o.sc(t);const i=e.$implicit;return o.ec().dragStart(n,i)}))("click",(function(n){o.sc(t);const i=e.$implicit;return o.ec().onClick(n,i)})),o.Sb(),o.Qb()}if(2&t){const t=e.$implicit;o.Bb(1),o.jc("ngStyle",o.lc(1,ve,"url("+t.imageUrl+")"))}}let xe=(()=>{class t extends d{constructor(t,e){super(e),this.backgroundService=t,this.eventer=e,this.items=[],this.rows=[[],[]],this.scrollTimer=null}ngOnChanges(t){}onNewSearch(t){this.backgroundService.resetPage(t),this.getNextSet()}getNextSet(){this.backgroundService.getPhotos()}onColorSelect(t){const e=new O("div",{},{},[]);e.type=l.BACKGROUND,e.style[w.BG]=t,this.onClick(null,{canvasElement:e})}onScroll(t){this.backgroundService.isLoading||(null!==this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>{const t=this.photoContainer.nativeElement;t.scrollTop+t.offsetHeight+50>t.scrollHeight&&this.backgroundService.getPhotos()},50))}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(ut),o.Ob(h.b))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-background-picker"]],viewQuery:function(t,e){var n;1&t&&o.vc(me,!0),2&t&&o.nc(n=o.cc())&&(e.photoContainer=n.first)},features:[o.yb,o.zb()],decls:19,vars:5,consts:[[1,"search-box-wrapper"],[3,"placeholder","searchQuery"],[1,"images-container",3,"scroll"],["photoContainer",""],[1,"d-flex"],[1,"picker-item"],[1,"image-li","custom-li","bg-color-selctor",3,"click"],["colorSelector",""],[1,"material-icons"],["heading","Select Background Color",3,"externalSourseElement","colorSelect"],["backgroundPicker",""],[1,"image-li","custom-li",3,"click"],[4,"ngFor","ngForOf"],[1,"w-100","text-center","spinner","my-4"],[1,"spinner-border"],["draggable","",1,"image-li",3,"ngStyle","dragstart","click"]],template:function(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div"),o.Tb(1,"div",0),o.Tb(2,"app-search-box",1),o.bc("searchQuery",(function(t){return e.onNewSearch(t)})),o.Sb(),o.Sb(),o.Tb(3,"div",2,3),o.bc("scroll",(function(t){return e.onScroll(t)})),o.Tb(5,"div",4),o.Tb(6,"ul",5),o.Tb(7,"li",6,7),o.bc("click",(function(){return o.sc(t),o.oc(13).open()})),o.Tb(9,"i",8),o.zc(10,"format_paint"),o.Sb(),o.zc(11," Select Color "),o.Sb(),o.Tb(12,"app-color-picker",9,10),o.bc("colorSelect",(function(t){return e.onColorSelect(t)})),o.Sb(),o.Tb(14,"li",11),o.bc("click",(function(){return e.onColorSelect("transparent")})),o.zc(15," Transparent "),o.Sb(),o.yc(16,ye,2,3,"ng-container",12),o.Sb(),o.Sb(),o.Tb(17,"div",13),o.Pb(18,"div",14),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=o.oc(8);o.Bb(2),o.jc("placeholder","Search Backgrounds"),o.Bb(10),o.jc("externalSourseElement",t),o.Bb(4),o.jc("ngForOf",e.backgroundService.backgrounds),o.Bb(1),o.Fb("invisible",!e.backgroundService.isLoading)}},directives:[X,be,i.j,i.l],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}[_nghost-%COMP%]{padding:10px 15px 0}.search-box-wrapper[_ngcontent-%COMP%]{margin:0 15px 15px}.images-container[_ngcontent-%COMP%]{overflow-y:auto;padding:0 8px 10px;height:calc(100vh - 165px)}.picker-item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.picker-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1px;margin:3px;border-radius:3px;cursor:pointer;height:130px;background-position:50%}.picker-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{box-shadow:0 0 4px 1px #d3d3d3;transition:box-shadow .3s}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]{width:calc(50% - 12px);height:130px;background-size:cover;-webkit-user-drag:element}.picker-item[_ngcontent-%COMP%]   .image-li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:3px;max-height:100%;max-width:100%}.picker-item[_ngcontent-%COMP%]   .custom-li[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center}.bg-color-selctor[_ngcontent-%COMP%]{background-image:linear-gradient(rgba(10,10,10,.4),rgba(10,10,10,.4)),url(bg-color-selector.0ab769dd1bfb2c82a131.png);background-size:cover}"]}),t})();const Se={position:"absolute",cursor:"move","user-select":"none",width:"200px"},Ee={"border-color":"black"},Oe=[{style:"solid",image:"/assets/images/pickers/solid-line.png",border:"1px"},{style:"dotted",image:"/assets/images/pickers/dotted-line.png",border:"1px"},{style:"dashed",image:"/assets/images/pickers/dashed-line.png",border:"1px"},{style:"double",image:"/assets/images/pickers/double-line.png",border:"4px"}];function Ce(){const t=p.cloneDeep(Ee),e=p.cloneDeep(Se),n=new O("hr",{},t,[]),i=new O("div",{},e,[n]);return i.type=l.LINE,Oe.map(t=>{const e=p.cloneDeep(i);return e.children[0].style["border-top"]=`${t.border} solid`,e.children[0].style["border-style"]=t.style,{imageUrl:t.image,backgroundSize:"fixed",canvasElement:e}})}let we=(()=>{class t{constructor(t){this.httpService=t,this.elements=[],this.GET_IMAGES="/api/images",this.PAGE=0,this.LIMIT="20",this.withMock=!1,this.isLoading=!0,this.query="",this.EXTRA_DELAY=10,this.addLineItems()}addLineItems(){const t={label:"Lines",values:Ce()};this.elements.push(t)}addBoxItems(){const t={label:"Boxes",values:Ce()};this.elements.push(t)}resetPage(t){this.query=t,this.elements=[],this.PAGE=0}getPhotos(){this.isLoading=!0,this.PAGE+=1;const t={params:{page:""+this.PAGE,limit:this.LIMIT,query:(this.query+" background").trim(),source:"unsplash"}};this.withMock?this.mock().pipe(v(500)).subscribe(t=>{this.processPhotos(t)}):this.httpService.get(this.GET_IMAGES,t).pipe(v(this.EXTRA_DELAY)).subscribe(t=>{this.processPhotos(t)})}processPhotos(t){t.forEach(t=>{const e=D();e.id=t.id,e.imageUrl=t.thumb,e.canvasElement.type=l.BACKGROUND,e.canvasElement.style={[w.BG]:`url('${t.imageUrl}') center/cover`},this.elements.push(e)}),this.isLoading=!1}mock(){return Object(f.a)(A)}}return t.\u0275fac=function(e){return new(e||t)(o.Xb(j.a))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Te=function(t){return{"background-image":t}};function Pe(t,e){if(1&t){const t=o.Ub();o.Tb(0,"li",5),o.bc("dragstart",(function(n){o.sc(t);const i=e.$implicit;return o.ec(2).dragStart(n,i)}))("click",(function(n){o.sc(t);const i=e.$implicit;return o.ec(2).onClick(n,i)})),o.Sb()}2&t&&o.jc("ngStyle",o.lc(1,Te,"url("+e.$implicit.imageUrl+")"))}function Ie(t,e){if(1&t&&(o.Tb(0,"div",2),o.Tb(1,"p"),o.zc(2),o.Sb(),o.Tb(3,"div",3),o.Tb(4,"ul"),o.yc(5,Pe,1,3,"li",4),o.Sb(),o.Sb(),o.Sb()),2&t){const t=e.$implicit;o.Bb(2),o.Ac(t.label),o.Bb(3),o.jc("ngForOf",t.values)}}let ke=(()=>{class t extends d{constructor(t,e){super(t),this.eventService=t,this.elementService=e}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(h.b),o.Ob(we))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-elements-picker"]],features:[o.yb],decls:2,vars:1,consts:[[1,"elements-picker-container"],["class","element-container",4,"ngFor","ngForOf"],[1,"element-container"],[1,"element-content"],["class","image-li","draggable","",3,"ngStyle","dragstart","click",4,"ngFor","ngForOf"],["draggable","",1,"image-li",3,"ngStyle","dragstart","click"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.yc(1,Ie,6,2,"div",1),o.Sb()),2&t&&(o.Bb(1),o.jc("ngForOf",e.elementService.elements))},directives:[i.j,i.l],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.elements-picker-container[_ngcontent-%COMP%]{padding:20px;height:100%;overflow-y:auto}.element-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;flex-wrap:wrap}.image-li[_ngcontent-%COMP%]{cursor:pointer;width:calc(50% - 6px);height:130px;margin:3px;background-size:contain;background-position:50%;display:flex;align-items:center;border:1px solid grey;border-radius:3px;-webkit-user-drag:element}"]}),t})();const _e=["itemsRef"];function Me(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",4),o.bc("click",(function(){return o.sc(t),o.ec().onClose()})),o.Tb(1,"i",5),o.zc(2,"arrow_left"),o.Sb(),o.Sb()}}function ze(t,e){1&t&&(o.Rb(0),o.Pb(1,"app-image-picker"),o.Qb())}function Re(t,e){1&t&&(o.Rb(0),o.Pb(1,"app-text-picker"),o.Qb())}function De(t,e){1&t&&(o.Rb(0),o.Pb(1,"app-vector-picker"),o.Qb())}function Ne(t,e){1&t&&(o.Rb(0),o.Pb(1,"app-background-picker"),o.Qb())}function Ae(t,e){1&t&&(o.Rb(0),o.Pb(1,"app-elements-picker"),o.Qb())}let Le=(()=>{class t{constructor(){this.showPicker=!1,this.showPickerChange=new o.n,this.closePicker=new o.n,this.items=[],this.isLoading=!0,this.LEFT_MENU_CONST=a}onClose(){this.showPickerChange.emit(!1)}loadItems(){this.items=[],setTimeout(()=>{this.items=u[this.picker.id],this.isLoading=!1},100)}ngOnChanges(t){t.picker&&this.picker&&(this.isLoading=!0,this.loadItems())}dragStart(t,e){const n=t.target.getBoundingClientRect();t.dataTransfer.setData("pickerItem",JSON.stringify({left:t.clientX-n.left,top:t.clientY-n.top,item:e}))}visuliseItems(){this.items.forEach(t=>{const e=document.createElement(t.tag);e.draggable=!0,e.ondragstart=t=>{const e=t.target.getBoundingClientRect();t.dataTransfer.setData("pickerItem",JSON.stringify({id:t.target.id,left:t.clientX-e.left,top:t.clientY-e.top}))},e.id="myIddd",e.innerText=t.text,Object.keys(t.style).forEach(n=>{e.style[n]=t.style[n]}),this.itemsRef.nativeElement.appendChild(e)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["app-picker"]],viewQuery:function(t,e){var n;1&t&&o.vc(_e,!0),2&t&&o.nc(n=o.cc())&&(e.itemsRef=n.first)},inputs:{picker:"picker",showPicker:"showPicker"},outputs:{showPickerChange:"showPickerChange",closePicker:"closePicker"},features:[o.zb()],decls:8,vars:9,consts:[[1,"picker"],["class","picker-close",3,"click",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"picker-close",3,"click"],[1,"material-icons"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.yc(1,Me,3,0,"div",1),o.Rb(2,2),o.yc(3,ze,2,0,"ng-container",3),o.yc(4,Re,2,0,"ng-container",3),o.yc(5,De,2,0,"ng-container",3),o.yc(6,Ne,2,0,"ng-container",3),o.yc(7,Ae,2,0,"ng-container",3),o.Qb(),o.Sb()),2&t&&(o.Fb("show-picker",e.showPicker),o.Bb(1),o.jc("ngIf",e.showPicker),o.Bb(1),o.jc("ngSwitch",null==e.picker?null:e.picker.id),o.Bb(1),o.jc("ngSwitchCase",e.LEFT_MENU_CONST.PHOTO_MENU_ID),o.Bb(1),o.jc("ngSwitchCase",e.LEFT_MENU_CONST.TEXT_MENU_ID),o.Bb(1),o.jc("ngSwitchCase",e.LEFT_MENU_CONST.VECTOR_MENU_ID),o.Bb(1),o.jc("ngSwitchCase",e.LEFT_MENU_CONST.BG_MENU_ID),o.Bb(1),o.jc("ngSwitchCase",e.LEFT_MENU_CONST.ELEMENTS_MENU_ID))},directives:[i.k,i.m,i.n,q,ot,lt,xe,ke],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#484848}.picker-close[_ngcontent-%COMP%]{right:-15px;position:absolute;top:45%;z-index:1;width:15px;height:50px;border-top-right-radius:4px;border-bottom-right-radius:4px;background-color:rgba(49,66,90,.89);display:flex;justify-content:center;align-items:center;cursor:pointer}.picker[_ngcontent-%COMP%]{width:0;transition:width .4s ease-in;position:relative;height:calc(100vh - 60px);background:rgba(49,66,90,.89);color:#fff}.picker.show-picker[_ngcontent-%COMP%]{width:310px}"]}),t})();var Be=n("NFeN");function je(t,e){if(1&t){const t=o.Ub();o.Tb(0,"li",4),o.bc("click",(function(){o.sc(t);const n=e.$implicit,i=e.index;return o.ec().selectPicker(n,i)})),o.Tb(1,"mat-icon",5),o.zc(2),o.Sb(),o.Tb(3,"span"),o.zc(4),o.Sb(),o.Sb()}if(2&t){const t=e.$implicit,n=e.index,i=o.ec();o.Fb("selected",n===i.selectedItemIndex&&i.showPicker),o.Bb(2),o.Ac(t.icon),o.Bb(2),o.Ac(t.label)}}let Ge=(()=>{class t{constructor(){this.items=s,this.showPicker=!1,this.selectedPicker=null}ngOnInit(){}selectPicker(t,e){this.showPicker=!0,this.selectedItemIndex!==e&&(this.selectedItemIndex=e,this.selectedPicker=t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["app-pickers"]],decls:5,vars:3,consts:[[1,"pickers-container","position-relative"],[1,"pickers"],[3,"selected","click",4,"ngFor","ngForOf"],[3,"picker","showPicker","showPickerChange"],[3,"click"],["aria-hidden","false","aria-label","item.label"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Tb(2,"ul"),o.yc(3,je,5,4,"li",2),o.Sb(),o.Sb(),o.Tb(4,"app-picker",3),o.bc("showPickerChange",(function(t){return e.showPicker=t})),o.Sb(),o.Sb()),2&t&&(o.Bb(3),o.jc("ngForOf",e.items),o.Bb(1),o.jc("picker",e.selectedPicker)("showPicker",e.showPicker))},directives:[i.j,Le,Be.a],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.pickers-container[_ngcontent-%COMP%]{display:flex}.picker-close[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-10px}.pickers[_ngcontent-%COMP%]{position:relative;top:0;color:#fff;font-size:.625rem;width:74px;height:calc(100vh - 60px);background-color:#31425a;box-shadow:2px 0 0 #a9a9a9;overflow-y:auto}.pickers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0}.pickers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:center;padding:10px;cursor:pointer;display:flex;flex-direction:column;align-items:center;transition:background-color .25s ease-in-out}.pickers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:25px;width:25px}.pickers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:2px}.pickers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:#3072b9;border-radius:3px}.pickers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#eaeaea}"]}),t})();var He=n("pLZG");class Fe{static setInitialWidthAndHeight(t,e){Fe.getImageRatio(t.width,t.height,e.dimention.width,e.dimention.height,e)}static getImageRatio(t,e,n,i,r){for(;n>t||i>e;)n/=2,i/=2;r.dimention.width=n,r.dimention.height=i}}let Xe=(()=>{class t{static getTransformValue(t,e){switch(e){case"rotate":const e=this.matchReg(t,this.TRANSFORM_ROTATE);return e&&parseFloat(e);case"translate":return this.getTranslateValue(t)}}static getTranslateValue(t){const e=this.matchReg(t,this.TRANSFORM_TRANSLATE);return e?{x:parseFloat(e.split(",")[0]),y:parseFloat(e.split(",")[1])}:{x:0,y:0}}static matchReg(t,e){const n=t&&t.match(e);return n&&n[0]}static updateTransformValue(t,e,n){if(!t[w.TRANSFORM]||t[w.TRANSFORM]===T.NONE)return void(t[w.TRANSFORM]=n);const i=n.split("(")[0];t[w.TRANSFORM]=t[w.TRANSFORM].includes(i)?t[w.TRANSFORM].replace(new RegExp(i+"(.*)"),n):t[w.TRANSFORM]+` ${n}`}static getMatrixValue(t,e){const n=this.getComputedStyle(t,w.TRANSFORM);console.log(n);let i=n.split("(")[1];return console.log(i),i=i.split(")")[0],i=i.split(","),i?e===w.TRANSFORM?i.map(t=>parseFloat(t)):6===i.length?this.MATRIX_2D_LOCATION[e].map(t=>parseFloat(i[t])):this.MATRIX_3D_LOCATION[e].map(t=>parseFloat(i[t])):[0,0]}static getRotationValue(t){const e=this.getMatrixValue(t,w.TRANSFORM);return Math.round(Math.atan2(e[1],e[0])*(180/Math.PI))}static toText(t){return JSON.stringify(t)}static getComputedStyle(t,e){return window.getComputedStyle(t)[e]}static setMatrixValue(t,e,n){return(6===t.length?this.MATRIX_2D_LOCATION[e]:this.MATRIX_3D_LOCATION[e]).forEach((e,i)=>{t[e]=n[i]}),t}static matrixToCssText(t){return`matrix(${t.join()})`}}return t.TRANSFORM_ROTATE=/(?<=rotate\()(.*)(?=\s*deg\))/,t.TRANSFORM_TRANSLATE=/(?<=translate\()(.*)(?=\s*\))/,t.matrixPattern=/-?\d+\.?\d*/g,t.MATRIX_2D_LOCATION={[w.TRANSLATE]:[4,5]},t.MATRIX_3D_LOCATION={[w.TRANSLATE]:[12,13]},t})();class Ue{static buildDom(t){const e=document.createElement(t.tag);if(this.addElementStyle(e,t.style),this.addInnerText(e,t.innerText),this.addAttributes(e,t.attribute),t.children)for(let n=0;n<t.children.length;n++)e.appendChild(this.buildDom(t.children[n]));return e}static addDimention(t,e){e.dimention&&this.applyDimention(t,e,e.dimention)}static addAttributes(t,e){e&&Object.keys(e).forEach(n=>{t.setAttribute(n,e[n])})}static addElementStyle(t,e){e&&Object.keys(e).forEach(n=>{t.style[n]=e[n]})}static addInnerText(t,e){e&&(t.innerText=e)}static print(t){const e=window.open("","_blank","top=0,left=0,height=100%,width=auto");e.document.open(),e.document.write(`\n      <html>\n        <head>\n          <title>Print tab</title>\n          <style>\n          //........Customized style.......\n          </style>\n        </head>\n    <body onload="window.print();window.close()">${t}</body>\n      </html>`),e.document.close()}static setInitialNodeLocation(t,e,n){t.clientX&&t.clientY&&e.left&&e.top&&(e.item.canvasElement.style[w.TRANSFORM]=`translate(${t.clientX-n.left-e.left}px, ${t.clientY-n.top-e.top}px)`)}static setDuplicateNodeLocation(t){const{x:e,y:n}=Xe.getTransformValue(t.style[w.TRANSFORM],"translate");Xe.updateTransformValue(t.style,"translate",`translate(${e+20}px, ${n+20}px)`)}static setGroupNodeLocation(t,e,n){const i=document.getElementsByClassName("moveable-control-box")[0],r=Xe.getMatrixValue(i,w.TRANSLATE),o=i.getBoundingClientRect(),a=n.getBoundingClientRect();let s=1e4,c=1e4,l=-1e4,u=-1e4;t.forEach((t,n)=>{const i=t.getBoundingClientRect();s>i.top&&(s=i.top),c>i.left&&(c=i.left),l<i.right&&(l=i.right),u<i.bottom&&(u=i.bottom);const o=Xe.getMatrixValue(t,w.TRANSFORM),a=Xe.getMatrixValue(t,w.TRANSLATE),h=Xe.setMatrixValue(o,w.TRANSLATE,[a[0]-r[0],a[1]-r[1]]);e.children[n].style[w.TRANSFORM]=Xe.matrixToCssText(h)});const h=o.left-a.left,p=o.top-a.top;e.style[w.WIDTH]=l-c+"px",e.style[w.HEIGHT]=u-s+"px",e.style[w.TRANSFORM]=`${w.TRANSLATE}(${h}px, ${p}px)`}static setUnGroupNodeLocation(t,e){}static applyCss(t,e,n,i){Object.keys(n).forEach(r=>{const o=this._getStyleValue(r,n[r]);t.style[r]=o,i&&(e.style[r]=o)})}static _getStyleValue(t,e){return e||0===e?"string"==typeof e&&e.endsWith("px")?e:P.includes(t)?e+"px":e:""}static applyDimention(t,e,n,i){this.applyCss(t,e,{[w.WIDTH]:n.width,[w.HEIGHT]:n.height,[w.LEFT]:n.translateX,[w.TOP]:n.translateY},i),t.style[w.TRANSFORM]=this.dimentionCss(n),i&&(e.dimention=p.cloneDeep(n))}static dimentionCss(t){return`${w.ROTATE}(${t.rotate}deg) `+`${w.SCALE_X}(${t.scaleX}) `+`${w.SCALE_Y}(${t.scaleY}) `}static setElementId(t,e){const n=class{static getUuid(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})}}.getUuid();this.addAttributes(t,{id:n})}static getClonedStylesAsText(t){return t.map(t=>Xe.toText(p.cloneDeep(t.style)))}}const We={[l.TEXT]:["e","w"],[l.PHOTO]:["e","w","n","s","sw","se","ne","nw"],[l.GROUP]:["sw","se","ne","nw"],[l.MULTIPLE_SELECTION]:["sw","se","ne","nw"],[l.LINE]:["e","w"]},Ye={[l.TEXT]:!1,[l.PHOTO]:!1,[l.GROUP]:!0,[l.MULTIPLE_SELECTION]:!0,[l.VECTOR]:!0},qe={[l.TEXT]:!0,[l.PHOTO]:!0,[l.GROUP]:!1,[l.MULTIPLE_SELECTION]:!1,[l.LINE]:!0,[l.VECTOR]:!0},Ve={elementId:"my-first-element",id:"jfaslj12o4u12oi",currentZindex:1,zIndex:{[l.PHOTO]:500,[l.ANY]:5e3},canvasElement:{type:l.BACKGROUND,tag:"div",locked:!1,innerText:"",resizable:!1,increaseZIndex:!1,ratio:{x:"0",y:"0"},dimention:{width:500,height:500,rotate:0,translateX:0,translateY:0,scaleX:1,scaleY:1},style:{width:"500px",height:"500px",position:"relative",background:"white","-webkit-print-color-adjust":"exact",overflow:"hidden"},attribute:{class:"canvas-template"},children:[]}};var Qe=function(t){return t[t.ADD=0]="ADD",t[t.DELETE=1]="DELETE",t[t.STYLE=2]="STYLE",t}({});let $e=(()=>{class t{constructor(){this.list=[],this.index=-1,this.length=0}init(t,e){this.parentCanvasElement=e,this.parentNode=t}add(t){this.index++,this.list[this.index]=t,this.length=this.index+1}undo(){this.index>=0&&(this.applyChange(this.list[this.index],!0),this.index--)}redo(){this.index<this.length-1&&(this.index++,this.applyChange(this.list[this.index],!1))}applyChange(t,e){let n=t.type;switch(e&&[Qe.ADD,Qe.DELETE].includes(n)&&(n=n===Qe.ADD?Qe.DELETE:Qe.ADD),n){case Qe.ADD:this.addItem(t);break;case Qe.DELETE:this.removeItem(t);break;case Qe.STYLE:this.applyStyles(t,e)}}applyStyles(t,e){const n=e?t.oldStyle:t.newStyle;t.canvasElements.forEach((e,i)=>{const r=JSON.parse(n[i]);Object.keys(r).forEach(n=>{t.nodes[i].style[n]=r[n],e.style[n]=r[n]})})}addItem(t){t.canvasElements.forEach((e,n)=>{this.parentCanvasElement.children.push(e),this.parentNode.appendChild(t.nodes[n])})}removeItem(t){t.nodes.forEach(t=>t.remove()),this.parentCanvasElement.children=this.parentCanvasElement.children.filter(e=>!t.canvasElements.includes(e))}getOriginalItemStyle(t){return t.style}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ke=function(t){return t[t.FONT_FAMILY=0]="FONT_FAMILY",t[t.COLOR=1]="COLOR",t[t.BACKGROUND_COLOR=2]="BACKGROUND_COLOR",t[t.FONT_SIZE=3]="FONT_SIZE",t[t.OPACITY=4]="OPACITY",t[t.LETTER_SPACING=5]="LETTER_SPACING",t[t.FONT_WEIGHT_BOLD=6]="FONT_WEIGHT_BOLD",t[t.FONT_STYLE_ITALIC=7]="FONT_STYLE_ITALIC",t[t.DELETE=8]="DELETE",t[t.RENAME_ME=9]="RENAME_ME",t[t.TEXT_ALIGNMENT=10]="TEXT_ALIGNMENT",t[t.LOCK=11]="LOCK",t[t.UNDO_REDO=12]="UNDO_REDO",t[t.DUPLICATE=13]="DUPLICATE",t[t.GROUP_UNGROUP=14]="GROUP_UNGROUP",t[t.FLIP_HORIZONTAL=15]="FLIP_HORIZONTAL",t[t.FLIP_VERTICAL=16]="FLIP_VERTICAL",t}({});const Je={[l.BACKGROUND]:[Ke.BACKGROUND_COLOR],[l.PHOTO]:[Ke.OPACITY,Ke.DELETE,Ke.LOCK,Ke.DUPLICATE,Ke.FLIP_HORIZONTAL,Ke.FLIP_VERTICAL],[l.VECTOR]:[Ke.BACKGROUND_COLOR,Ke.OPACITY,Ke.DELETE,Ke.LOCK,Ke.DUPLICATE,Ke.FLIP_HORIZONTAL,Ke.FLIP_VERTICAL],[l.TEXT]:[Ke.BACKGROUND_COLOR,Ke.FONT_FAMILY,Ke.COLOR,Ke.FONT_SIZE,Ke.OPACITY,Ke.LETTER_SPACING,Ke.FONT_WEIGHT_BOLD,Ke.FONT_STYLE_ITALIC,Ke.DELETE,Ke.TEXT_ALIGNMENT,Ke.LOCK,Ke.DUPLICATE],[l.MULTIPLE_SELECTION]:[Ke.BACKGROUND_COLOR,Ke.FONT_FAMILY,Ke.FONT_SIZE,Ke.COLOR,Ke.OPACITY,Ke.DELETE,Ke.LOCK,Ke.DUPLICATE],[l.GROUP]:[Ke.BACKGROUND_COLOR,Ke.COLOR,Ke.OPACITY,Ke.DELETE,Ke.DUPLICATE,Ke.LOCK,Ke.GROUP_UNGROUP],[l.LINE]:[Ke.BACKGROUND_COLOR,Ke.COLOR,Ke.OPACITY,Ke.DELETE,Ke.DUPLICATE,Ke.LOCK,Ke.GROUP_UNGROUP]},Ze=[];for(let Kl=5;Kl<150;Kl++)Ze.push({label:Kl+"",value:Kl+"px"});var tn=n("Qu3c");let en=(()=>{class t{constructor(){this.subject=new pt.a}send(){this.subject.next()}get(){return this.subject.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var nn=n("vxfF");function rn(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"li",11),o.bc("click",(function(){o.sc(t);const n=e.$implicit;return o.ec(2).onSelect(n)})),o.zc(2),o.Sb(),o.Qb()}if(2&t){const t=e.$implicit,n=o.ec(2);o.Bb(1),o.xc("font-family",t.value),o.Fb("selected",t.value===n.selectedFont),o.Bb(1),o.Bc(" ",t.label," ")}}function on(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",3),o.bc("appClickOutside",(function(){return o.sc(t),o.ec().toggleOptions()})),o.Tb(1,"div"),o.Tb(2,"div",4),o.Tb(3,"app-search-box",5),o.bc("searchValueChange",(function(e){return o.sc(t),o.ec().filterResult(e)})),o.Sb(),o.Sb(),o.Tb(4,"div",6),o.Tb(5,"cdk-virtual-scroll-viewport",7),o.Tb(6,"ul"),o.Tb(7,"li",8),o.Tb(8,"button",9),o.zc(9,"+ Add your font"),o.Sb(),o.Sb(),o.yc(10,rn,3,5,"ng-container",10),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=o.ec(),e=o.oc(1);o.jc("srcElement",e),o.Bb(3),o.jc("minQueryLength",0),o.Bb(7),o.jc("cdkVirtualForOf",t.filteredOptions)}}let an=(()=>{class t{constructor(t,e){this.fontService=t,this.resizeEventer=e,this.fontHover=new o.n,this.fontSelect=new o.n,this.revertFontSelect=new o.n,this.isVisible=!1,this.options=[],this.filteredOptions=[]}ngOnInit(){this.options=this.fontService.getFonts()}onSelect(t){this.fontSelect.emit(t),this.resizeEventer.send()}onHover(t){this.fontHover.emit(t)}onCloseWithoutSelect(){this.revertFontSelect.emit()}toggleOptions(){this.isVisible=!this.isVisible,this.isVisible&&(this.filteredOptions=this.options)}filterResult(t){this.filteredOptions=this.options.filter(e=>e.value.toLowerCase().includes(t))}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(tt.a),o.Ob(en))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-font-family"]],inputs:{selectedFont:"selectedFont",disabled:"disabled"},outputs:{fontHover:"fontHover",fontSelect:"fontSelect",revertFontSelect:"revertFontSelect"},decls:5,vars:3,consts:[["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-light","dropdown-toggle","btn-sm","font-family-button",3,"disabled","click"],["buttonSource",""],["class","left-raiser-container",3,"srcElement","appClickOutside",4,"ngIf"],[1,"left-raiser-container",3,"srcElement","appClickOutside"],[1,"mb-4","search-box-container"],[3,"minQueryLength","searchValueChange"],[1,"font-container"],["itemSize","38"],[1,"add-your-font"],["type","button",1,"btn","btn-primary","btn-sm"],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"click"]],template:function(t,e){1&t&&(o.Tb(0,"button",0,1),o.bc("click",(function(){return e.toggleOptions()})),o.Tb(2,"span"),o.zc(3),o.Sb(),o.Sb(),o.yc(4,on,11,3,"div",2)),2&t&&(o.jc("disabled",e.disabled),o.Bb(3),o.Ac(e.selectedFont),o.Bb(1),o.jc("ngIf",e.isVisible))},directives:[i.k,ht,X,nn.d,nn.a,nn.c],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.font-family-button[_ngcontent-%COMP%]{display:flex;align-items:center}.font-family-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:80px;text-align:left;overflow:hidden;text-overflow:ellipsis}.search-box-container[_ngcontent-%COMP%]{width:100%;padding:0 20px}.font-container[_ngcontent-%COMP%]{font-size:1rem}.font-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0 20px}.font-container[_ngcontent-%COMP%]   .cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:calc(100vh - 170px)}.font-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:7px}.font-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#add8e6;border-radius:3px}.font-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover:not(.selected){background-color:#f0f0f0}.add-your-font[_ngcontent-%COMP%]{padding:0 0 7px!important}.add-your-font[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.add-your-font[_ngcontent-%COMP%]:hover{background-color:inherit!important}"]}),t})();function sn(t,e){if(1&t){const t=o.Ub();o.Tb(0,"li",9),o.bc("click",(function(){o.sc(t);const n=e.$implicit;return o.ec(2).onValueChange(n.value)})),o.zc(1),o.Sb()}if(2&t){const t=e.$implicit;o.Bb(1),o.Bc(" ",t.label," ")}}function cn(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",7),o.bc("appClickOutside",(function(){return o.sc(t),o.ec().toggleOptions()})),o.Tb(1,"ul"),o.yc(2,sn,2,1,"li",8),o.Sb(),o.Sb()}if(2&t){const t=o.ec(),e=o.oc(4);o.jc("srcElement",e),o.Bb(2),o.jc("ngForOf",t.AVAILABLE_FONT_SIZE)}}let ln=(()=>{class t{constructor(t){this.resizeEventer=t,this.valueChange=new o.n,this.AVAILABLE_FONT_SIZE=[],this.showOptions=!1;for(let e=5;e<150;e++)this.AVAILABLE_FONT_SIZE.push({label:e,value:e})}ngOnChanges(t){this.value=parseInt(this.selectedValue,10)}onInputChange(){this.onValueChange(this.value)}onValueChange(t){this.valueChange.emit(t),this.resizeEventer.send()}toggleOptions(){this.showOptions=!this.showOptions}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(en))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-font-size"]],inputs:{selectedValue:"selectedValue",disabled:"disabled"},outputs:{valueChange:"valueChange"},features:[o.zb()],decls:7,vars:4,consts:[[1,"input-group","input-group-sm"],["type","number",1,"form-control","font-size-input",3,"ngModel","disabled","ngModelChange","change"],["fontSizeInput",""],[1,"input-group-append"],["fontSizeButton",""],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-light","dropdown-toggle",3,"disabled","click"],["class","font-size-dropdown",3,"srcElement","appClickOutside",4,"ngIf"],[1,"font-size-dropdown",3,"srcElement","appClickOutside"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"input",1,2),o.bc("ngModelChange",(function(t){return e.value=t}))("change",(function(){return e.onInputChange()})),o.Sb(),o.Tb(3,"div",3,4),o.Tb(5,"button",5),o.bc("click",(function(){return e.toggleOptions()})),o.Sb(),o.Sb(),o.yc(6,cn,3,2,"div",6),o.Sb()),2&t&&(o.Bb(1),o.jc("ngModel",e.value)("disabled",e.disabled),o.Bb(4),o.jc("disabled",e.disabled),o.Bb(1),o.jc("ngIf",e.showOptions))},directives:[H.f,H.a,H.d,H.e,i.k,ht,i.j],styles:[".font-size-input[_ngcontent-%COMP%]{width:60px}.font-size-dropdown[_ngcontent-%COMP%]{position:absolute;left:2px;top:100%;width:82px;height:200px;overflow-y:auto;background-color:#fff;box-shadow:0 0 2px #000;cursor:pointer}.font-size-dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}"]}),t})();function un(t,e){if(1&t){const t=o.Ub();o.Tb(0,"button",7),o.bc("click",(function(){o.sc(t);const n=e.$implicit,i=o.ec(2);return i.sendEvent(i.CSS_PROPERTIES.TEXT_ALIGN,n.cssValue)})),o.Tb(1,"i",2),o.zc(2),o.Sb(),o.Sb()}if(2&t){const t=e.$implicit,n=o.ec(2);o.Fb("active",n.initialStyles[n.CSS_PROPERTIES.TEXT_ALIGN]===t.cssValue),o.Bb(2),o.Ac(t.icon)}}function hn(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",4),o.bc("appClickOutside",(function(){return o.sc(t),o.ec().toggle()})),o.Tb(1,"div",5),o.yc(2,un,3,3,"button",6),o.Sb(),o.Sb()}if(2&t){const t=o.ec(),e=o.oc(1);o.jc("srcElement",e),o.Bb(2),o.jc("ngForOf",t.availableOtions)}}let pn=(()=>{class t{constructor(){this.initialStyles={},this.styleChange=new o.n,this.isVisible=!1,this.CSS_PROPERTIES=w,this.availableOtions=[{icon:"format_align_left",cssValue:"left"},{icon:"format_align_center",cssValue:"center"},{icon:"format_align_justify",cssValue:"justify"},{icon:"format_align_right",cssValue:"right"}]}ngOnInit(){}toggle(){this.isVisible=!this.isVisible}sendEvent(t,e){this.styleChange.emit({[t]:e})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["app-text-alignment"]],inputs:{disabled:"disabled",initialStyles:"initialStyles"},outputs:{styleChange:"styleChange"},decls:6,vars:2,consts:[["myButton",""],["mat-icon-button","","matTooltip","Unlock Element","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],[1,"material-icons"],["class","toolbar-item-drop",3,"srcElement","appClickOutside",4,"ngIf"],[1,"toolbar-item-drop",3,"srcElement","appClickOutside"],["role","group","aria-label","Basic example",1,"btn-group","btn-group-lg","w-100"],["type","button","class","btn btn-light",3,"active","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-light",3,"click"]],template:function(t,e){1&t&&(o.Tb(0,"section",null,0),o.Tb(2,"button",1),o.bc("click",(function(){return e.toggle()})),o.Tb(3,"i",2),o.zc(4,"subject"),o.Sb(),o.Sb(),o.Sb(),o.yc(5,hn,3,2,"div",3)),2&t&&(o.Bb(2),o.jc("disabled",e.disabled),o.Bb(3),o.jc("ngIf",e.isVisible))},directives:[F.a,tn.a,i.k,ht,i.j],styles:[""]}),t})();var dn=n("5RNC");function fn(t,e){if(1&t){const t=o.Ub();o.Tb(0,"section",4),o.bc("appClickOutside",(function(){return o.sc(t),o.ec().isOpacitySelectorOpen=!1})),o.Tb(1,"span"),o.zc(2,"Transparency"),o.Sb(),o.Tb(3,"mat-slider",5),o.bc("ngModelChange",(function(e){return o.sc(t),o.ec().selectedValue=e}))("change",(function(e){return o.sc(t),o.ec().onSliderStop(e)}))("input",(function(e){return o.sc(t),o.ec().onValueChange(e)})),o.Sb(),o.Sb()}if(2&t){const t=o.ec(),e=o.oc(1);o.jc("srcElement",e),o.Bb(3),o.jc("ngModel",t.selectedValue)("thumbLabel",!0)("step",1)}}let gn=(()=>{class t{constructor(){this.selectedOpacity=1,this.slideChange=new o.n,this.slideStop=new o.n,this.closeSlider=new o.n,this.selectedValue=100,this.isOpacitySelectorOpen=!1}ngOnChanges(t){this.selectedValue=this.selectedOpacity?Math.floor(100*this.selectedOpacity):100}onValueChange(t){t&&this.slideChange.emit(t.value/100)}onSliderStop(t){t&&this.slideStop.emit(t.value/100)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["app-slider"]],inputs:{selectedOpacity:"selectedOpacity",disabled:"disabled"},outputs:{slideChange:"slideChange",slideStop:"slideStop",closeSlider:"closeSlider"},features:[o.zb()],decls:6,vars:2,consts:[["opacityButton",""],["mat-icon-button","","matTooltip","Change Opacity","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],[1,"material-icons"],["class","my-slider toolbar-item-drop py-0",3,"srcElement","appClickOutside",4,"ngIf"],[1,"my-slider","toolbar-item-drop","py-0",3,"srcElement","appClickOutside"],[1,"mat-primary",3,"ngModel","thumbLabel","step","ngModelChange","change","input"]],template:function(t,e){1&t&&(o.Tb(0,"section",null,0),o.Tb(2,"button",1),o.bc("click",(function(){return e.isOpacitySelectorOpen=!e.isOpacitySelectorOpen})),o.Tb(3,"i",2),o.zc(4,"opacity"),o.Sb(),o.Sb(),o.Sb(),o.yc(5,fn,4,4,"section",3)),2&t&&(o.Bb(2),o.jc("disabled",e.disabled),o.Bb(3),o.jc("ngIf",e.isOpacitySelectorOpen))},directives:[F.a,tn.a,i.k,ht,dn.a,H.d,H.e],styles:[".mat-icon-button[_ngcontent-%COMP%], .toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.my-slider[_ngcontent-%COMP%]{display:flex;align-items:center}.my-slider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:20px}"]}),t})(),bn=(()=>{class t{transform(t){return t&&t.includes("px")?t.split("px")[0]:t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Nb({name:"removePx",type:t,pure:!0}),t})();function mn(t,e){if(1&t){const t=o.Ub();o.Tb(0,"section",4),o.bc("appClickOutside",(function(){return o.sc(t),o.ec().toggle()})),o.Tb(1,"div"),o.Tb(2,"p"),o.zc(3,"Letter Spacing"),o.Sb(),o.Tb(4,"div",5),o.Tb(5,"mat-slider",6),o.bc("input",(function(e){return o.sc(t),o.ec().onLetterSpacing(e)}))("change",(function(e){return o.sc(t),o.ec().onLetterSpacing(e,!0)})),o.fc(6,"removePx"),o.Sb(),o.Tb(7,"span"),o.zc(8),o.fc(9,"removePx"),o.Sb(),o.Sb(),o.Sb(),o.Tb(10,"div"),o.Tb(11,"p"),o.zc(12,"Line Height"),o.Sb(),o.Tb(13,"div",5),o.Tb(14,"mat-slider",6),o.bc("input",(function(e){return o.sc(t),o.ec().onLineHeight(e)}))("change",(function(e){return o.sc(t),o.ec().onLineHeight(e,!0)})),o.Sb(),o.Tb(15,"span"),o.zc(16),o.Sb(),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=o.ec(),e=o.oc(1);o.jc("srcElement",e),o.Bb(5),o.jc("thumbLabel",!0)("step",1)("min",-10)("max",50)("value",o.gc(6,13,t.initialStyles[t.CSS_PROPERTIES.LETTER_SPACING])||0),o.Bb(3),o.Ac(o.gc(9,15,t.initialStyles[t.CSS_PROPERTIES.LETTER_SPACING])||0),o.Bb(6),o.jc("thumbLabel",!0)("step",1)("min",-10)("max",50)("value",t.getLineHeight()),o.Bb(2),o.Ac(t.getLineHeight())}}let vn=(()=>{class t{constructor(t){this.resizeEventer=t,this.initialStyles={},this.styleChange=new o.n,this.styleChangeEnd=new o.n,this.CSS_PROPERTIES=w,this.isVisible=!1,this.LINE_HEIGHT=1.5}ngOnInit(){}toggle(){this.isVisible=!this.isVisible}onLetterSpacing(t,e=!1){this.sendEvent(w.LETTER_SPACING,t.value,e)}onLineHeight(t,e=!1){this.sendEvent(w.LINE_HEIGHT,this.LINE_HEIGHT+t.value/10,e)}sendEvent(t,e,n){n?this.styleChangeEnd.emit({[t]:e}):this.styleChange.emit({[t]:e}),this.resizeEventer.send()}getLineHeight(){return this.initialStyles&&this.initialStyles[w.LINE_HEIGHT]?Math.floor(10*(this.initialStyles[w.LINE_HEIGHT]-this.LINE_HEIGHT)):0}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(en))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-letter-spacing"]],inputs:{disabled:"disabled",initialStyles:"initialStyles"},outputs:{styleChange:"styleChange",styleChangeEnd:"styleChangeEnd"},decls:6,vars:2,consts:[["spacingButton",""],["mat-icon-button","","matTooltip","Letter Spacing","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],[1,"material-icons"],["class","toolbar-item-drop letter-spacing",3,"srcElement","appClickOutside",4,"ngIf"],[1,"toolbar-item-drop","letter-spacing",3,"srcElement","appClickOutside"],[1,"letter-spacing-content"],[1,"mat-primary",3,"thumbLabel","step","min","max","value","input","change"]],template:function(t,e){1&t&&(o.Tb(0,"section",null,0),o.Tb(2,"button",1),o.bc("click",(function(){return e.toggle()})),o.Tb(3,"i",2),o.zc(4,"text_rotation_none"),o.Sb(),o.Sb(),o.Sb(),o.yc(5,mn,17,17,"section",3)),2&t&&(o.Bb(2),o.jc("disabled",e.disabled),o.Bb(3),o.jc("ngIf",e.isVisible))},directives:[F.a,tn.a,i.k,ht,dn.a],pipes:[bn],styles:[".letter-spacing-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;cursor:pointer}.letter-spacing-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:50px;text-align:right}"]}),t})();function yn(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",5),o.Tb(2,"app-font-family",9),o.bc("fontSelect",(function(e){return o.sc(t),o.ec().onFontFamilySelect(e)})),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.ec();o.Bb(2),o.jc("selectedFont",t.styles[t.CSS_PROPS.FONT_FAMILY])("disabled",t.isLocked)}}function xn(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",5),o.Tb(2,"app-font-size",10),o.bc("valueChange",(function(e){return o.sc(t),o.ec().onFontSizeSelect(e)})),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.ec();o.Bb(2),o.jc("disabled",t.isLocked)("selectedValue",t.styles[t.CSS_PROPS.FONT_SIZE])}}function Sn(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",5),o.Tb(2,"button",11),o.bc("click",(function(){return o.sc(t),o.ec().onBoldClick()})),o.Tb(3,"i",7),o.zc(4,"format_bold"),o.Sb(),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.ec();o.Bb(2),o.Fb("icon-pressed",t.styles[t.CSS_PROPS.FONT_WEIGHT]===t.CSS_PROP_VALUES.FONT_WEIGHT_BOLD),o.jc("disabled",t.isLocked)}}function En(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",5),o.Tb(2,"button",12),o.bc("click",(function(){return o.sc(t),o.ec().onItalicClick()})),o.Tb(3,"i",7),o.zc(4,"format_italic"),o.Sb(),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.ec();o.Bb(2),o.Fb("icon-pressed",t.styles[t.CSS_PROPS.FONT_ITALIC]===t.CSS_PROP_VALUES.FONT_ITALIC),o.jc("disabled",t.isLocked)}}function On(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",5),o.Tb(2,"app-color-picker",13,14),o.bc("colorSelect",(function(e){return o.sc(t),o.ec().onBGColorSelect(e)})),o.Tb(4,"button",15),o.bc("click",(function(){return o.sc(t),o.oc(3).open()})),o.Tb(5,"i",7),o.zc(6,"format_paint"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.ec();o.Bb(4),o.Fb("disabled",t.isLocked)}}function Cn(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",5),o.Tb(2,"app-color-picker",16,14),o.bc("colorSelect",(function(e){return o.sc(t),o.ec().onColorSelect(e)})),o.Tb(4,"button",17),o.bc("click",(function(){return o.sc(t),o.oc(3).open()})),o.Tb(5,"i",7),o.zc(6,"color_lens"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.ec();o.Bb(4),o.Fb("disabled",t.isLocked)}}function wn(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",5),o.Tb(2,"app-text-alignment",18),o.bc("styleChange",(function(e){return o.sc(t),o.ec().updateCss(e)})),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.ec();o.Bb(2),o.jc("disabled",t.isLocked)("initialStyles",t.styles)}}function Tn(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",5),o.Tb(2,"app-slider",19),o.bc("slideChange",(function(e){return o.sc(t),o.ec().updateOpacity(e,!1)}))("slideStop",(function(e){return o.sc(t),o.ec().updateOpacity(e,!0)})),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.ec();o.Bb(2),o.jc("disabled",t.isLocked)("selectedOpacity",t.styles[t.CSS_PROPS.OPACITY])}}function Pn(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",5),o.Tb(2,"button",20),o.bc("click",(function(){return o.sc(t),o.ec().onFlip(-1,1)})),o.Tb(3,"i",21),o.zc(4,"unfold_less"),o.Sb(),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.ec();o.Bb(2),o.jc("disabled",t.isLocked)}}function In(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",5),o.Tb(2,"button",22),o.bc("click",(function(){return o.sc(t),o.ec().onFlip(1,-1)})),o.Tb(3,"i",7),o.zc(4,"unfold_less"),o.Sb(),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.ec();o.Bb(2),o.jc("disabled",t.isLocked)}}function kn(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",5),o.Tb(2,"app-letter-spacing",23),o.bc("styleChange",(function(e){return o.sc(t),o.ec().updateCss(e,!1)}))("styleChangeEnd",(function(e){return o.sc(t),o.ec().updateCss(e,!0)})),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.ec();o.Bb(2),o.jc("disabled",t.isLocked)("initialStyles",t.styles)}}function _n(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",5),o.Tb(1,"button",24),o.bc("click",(function(){return o.sc(t),o.ec().groupItem()})),o.Tb(2,"i",7),o.zc(3,"group_work"),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=o.ec();o.Bb(1),o.Fb("icon-pressed",t.isGroupedItems),o.jc("matTooltip",t.isGroupedItems?"Ungroup":"Group")}}function Mn(t,e){1&t&&(o.Tb(0,"i",7),o.zc(1,"lock"),o.Sb())}function zn(t,e){1&t&&(o.Tb(0,"i",7),o.zc(1,"lock_open"),o.Sb())}function Rn(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",5),o.Tb(2,"button",24),o.bc("click",(function(){return o.sc(t),o.ec().lockItem()})),o.yc(3,Mn,2,0,"i",25),o.yc(4,zn,2,0,"i",25),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.ec();o.Bb(2),o.Fb("icon-pressed",t.isLocked),o.jc("matTooltip",t.isLocked?"Unlock Eelement":"Lock Element"),o.Bb(1),o.jc("ngIf",t.isLocked),o.Bb(1),o.jc("ngIf",!t.isLocked)}}function Dn(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",5),o.Tb(2,"button",26),o.bc("click",(function(){return o.sc(t),o.ec().duplicate()})),o.Tb(3,"i",7),o.zc(4,"file_copy"),o.Sb(),o.Sb(),o.Sb(),o.Qb()}}function Nn(t,e){if(1&t){const t=o.Ub();o.Rb(0),o.Tb(1,"div",5),o.Tb(2,"button",27),o.bc("click",(function(){return o.sc(t),o.ec().removeItem()})),o.Tb(3,"i",7),o.zc(4,"delete"),o.Sb(),o.Sb(),o.Sb(),o.Qb()}if(2&t){const t=o.ec();o.Bb(2),o.jc("disabled",t.isLocked)}}let An=(()=>{class t{constructor(t,e){this.eventerService=t,this.undoService=e,this.options=[],this.selectedNodes=[],this.selectedCanvasElements=[],this.removeSelectedItem=new o.n,this.duplicateSelectedItem=new o.n,this.groupSelectedItem=new o.n,this.unGroupSelectedItem=new o.n,this.clearSelectedElements=new o.n,this.filterConfig=[],this.FILTER_TYPES=c,this.AVA_TOOLBAR_OPTIONS=Ke,this.avaToolbarOptions={},this.CSS_PROPS=w,this.CSS_PROP_VALUES=T,this.initialOpacity=0,this.styles={},this.isGroupUngroupVisible=!1}ngOnChanges(t){t.selectedCanvasElements&&(this.selectedCanvasElements&&this.selectedCanvasElements.length?this.init():(this.updateToolbarConfig(),this.isGroupUngroupVisible=!1))}ngOnInit(){}init(){this.selectedCanvasElements.length>1?this.updateToolbarConfig(l.MULTIPLE_SELECTION):(this.fistCanvasElement=this.selectedCanvasElements[0],this.firstNode=this.selectedNodes[0],this.styles=this.getOriginalItemStyle(),this.updateToolbarConfig()),this.updateLock(),this.updateGroupItemFlag()}updateLock(){this.isLocked=!this.selectedCanvasElements.some(t=>!t.locked)}updateGroupItemFlag(){this.isGroupUngroupVisible=this.fistCanvasElement.type===l.GROUP||this.selectedCanvasElements.length>1,this.isGroupedItems=this.fistCanvasElement.type===l.GROUP&&1===this.selectedCanvasElements.length}getOriginalItemStyle(){return this.fistCanvasElement.style}updateToolbarConfig(t){const e=this.selectedCanvasElements?this.selectedCanvasElements.map(t=>t.type):[];t&&e.push(t);let n=Je[e[0]]||[];for(let r=1;r<e.length;r++)n=(Je[e[r]]||[]).filter(t=>n.includes(t));const i={};n.forEach(t=>{i[t]=!0}),this.avaToolbarOptions=i}onFontFamilySelect(t){this.updateCss({[w.FONT_FAMILY]:t.value})}onFontSizeSelect(t){this.updateCss({[w.FONT_SIZE]:t})}onCloseWithoutSelect(t){const e=this.getOriginalItemStyle();this.applyNodeChanges(t,e[t.cssField]),this.changeSelectedValue(t,e[t.cssField])}changeSelectedValue(t,e){t.selectedValue=t.id===Ke.FONT_SIZE?parseInt(e,10):e}applySelectedItemChanes(t,e){this.getOriginalItemStyle()[t.cssField]=e}applyNodeChanges(t,e){this.selectedNodes[0].style[t.cssField]=e}onBoldClick(){this.updateCss({[w.FONT_WEIGHT]:this.styles[w.FONT_WEIGHT]===T.FONT_WEIGHT_BOLD?T.FONT_WEIGHT_NORMAL:T.FONT_WEIGHT_BOLD})}updateCss(t,e=!0){const n=Ue.getClonedStylesAsText(this.selectedCanvasElements);this.selectedNodes.forEach((n,i)=>{this.selectedCanvasElements[i].locked||Ue.applyCss(n,this.selectedCanvasElements[i],t,e)}),e&&this.undoService.add({canvasElements:this.selectedCanvasElements,nodes:this.selectedNodes,type:Qe.STYLE,oldStyle:n,newStyle:Ue.getClonedStylesAsText(this.selectedCanvasElements)})}onFlip(t,e){const n=Xe.getComputedStyle(this.firstNode,w.TRANSFORM);this.updateCss({[w.TRANSFORM]:n&&n!==T.NONE?`${n} scale(${t}, ${e})`:`scale(${t}, ${e})`})}onItalicClick(){this.updateCss({[w.FONT_ITALIC]:this.styles[w.FONT_ITALIC]===T.FONT_ITALIC?T.FONT_STYLE_NORMAL:T.FONT_ITALIC})}removeItem(){this.removeSelectedItem.emit(this.getSelectedItems())}groupItem(){this.isGroupedItems?this.unGroupSelectedItem.emit(this.getSelectedItems()):this.groupSelectedItem.emit(this.getSelectedItems())}lockItem(){this.isLocked=!this.isLocked,this.selectedCanvasElements.forEach(t=>{t.locked=this.isLocked}),this.eventerService.send({type:h.a.UPDATE_DIRECTION_HANLDES})}onColorSelect(t){this.updateCss({[w.COLOR]:t})}onBGColorSelect(t){this.updateCss({[w.BG_COLOR]:t})}onTextAlign(t){this.updateCss({[w.TEXT_ALIGN]:t})}onCssChange(t,e){}updateOpacity(t,e){this.updateCss({[w.OPACITY]:t},e)}undoItem(){this.clearSelectedElements.emit(),this.undoService.undo()}redoItem(){this.clearSelectedElements.emit(),this.undoService.redo()}duplicate(){this.duplicateSelectedItem.emit(this.getSelectedItems())}getSelectedItems(){return{nodes:this.selectedNodes,canvasElements:this.selectedCanvasElements}}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(h.b),o.Ob($e))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-toolbar"]],inputs:{options:"options",selectedNodes:"selectedNodes",selectedCanvasElements:"selectedCanvasElements"},outputs:{removeSelectedItem:"removeSelectedItem",duplicateSelectedItem:"duplicateSelectedItem",groupSelectedItem:"groupSelectedItem",unGroupSelectedItem:"unGroupSelectedItem",clearSelectedElements:"clearSelectedElements"},features:[o.zb()],decls:26,vars:17,consts:[[1,"toolbar-items"],[1,"ml-2","d-flex","toolbar-items-left"],[4,"ngIf"],[1,"toolbar-items-right"],["class","toolbar-item",4,"ngIf"],[1,"toolbar-item"],["mat-icon-button","","matTooltip","Undo","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],[1,"material-icons"],["mat-icon-button","","matTooltip","Redo","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],[3,"selectedFont","disabled","fontSelect"],[3,"disabled","selectedValue","valueChange"],["mat-icon-button","","matTooltip","Text Bold","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],["mat-icon-button","","matTooltip","Text Italic","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],["heading","Select Background Color",3,"colorSelect"],["backgroundPicker",""],["mat-icon-button","","matTooltip","Background Color","matTooltipPosition","above",1,"toolbar-icon-size",3,"click"],["heading","Select Text Color",3,"colorSelect"],["mat-icon-button","","matTooltip","Text Color","matTooltipPosition","above",1,"toolbar-icon-size",3,"click"],[3,"disabled","initialStyles","styleChange"],[3,"disabled","selectedOpacity","slideChange","slideStop"],["mat-icon-button","","matTooltip","Flip Horizontally","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],[1,"material-icons","rotate-90"],["mat-icon-button","","matTooltip","Flip Vertically","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"],[3,"disabled","initialStyles","styleChange","styleChangeEnd"],["mat-icon-button","","matTooltipPosition","above",1,"toolbar-icon-size",3,"matTooltip","click"],["class","material-icons",4,"ngIf"],["mat-icon-button","","matTooltip","Duplicate Item","matTooltipPosition","above",1,"toolbar-icon-size",3,"click"],["mat-icon-button","","matTooltip","Delete Element","matTooltipPosition","above",1,"toolbar-icon-size",3,"disabled","click"]],template:function(t,e){1&t&&(o.Pb(0,"div"),o.Tb(1,"div",0),o.Tb(2,"div",1),o.yc(3,yn,3,2,"ng-container",2),o.yc(4,xn,3,2,"ng-container",2),o.yc(5,Sn,5,3,"ng-container",2),o.yc(6,En,5,3,"ng-container",2),o.yc(7,On,7,2,"ng-container",2),o.yc(8,Cn,7,2,"ng-container",2),o.yc(9,wn,3,2,"ng-container",2),o.yc(10,Tn,3,2,"ng-container",2),o.yc(11,Pn,5,1,"ng-container",2),o.yc(12,In,5,1,"ng-container",2),o.yc(13,kn,3,2,"ng-container",2),o.Sb(),o.Tb(14,"div",3),o.yc(15,_n,4,3,"div",4),o.yc(16,Rn,5,5,"ng-container",2),o.yc(17,Dn,5,0,"ng-container",2),o.yc(18,Nn,5,1,"ng-container",2),o.Tb(19,"div",5),o.Tb(20,"button",6),o.bc("click",(function(){return e.undoItem()})),o.Tb(21,"i",7),o.zc(22,"undo"),o.Sb(),o.Sb(),o.Tb(23,"button",8),o.bc("click",(function(){return e.redoItem()})),o.Tb(24,"i",7),o.zc(25,"redo"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Bb(3),o.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.FONT_FAMILY]),o.Bb(1),o.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.FONT_SIZE]),o.Bb(1),o.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.FONT_WEIGHT_BOLD]),o.Bb(1),o.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.FONT_STYLE_ITALIC]),o.Bb(1),o.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.BACKGROUND_COLOR]),o.Bb(1),o.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.COLOR]),o.Bb(1),o.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.TEXT_ALIGNMENT]),o.Bb(1),o.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.OPACITY]),o.Bb(1),o.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.FLIP_HORIZONTAL]),o.Bb(1),o.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.FLIP_VERTICAL]),o.Bb(1),o.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.LETTER_SPACING]),o.Bb(2),o.jc("ngIf",e.isGroupUngroupVisible),o.Bb(1),o.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.LOCK]),o.Bb(1),o.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.DUPLICATE]),o.Bb(1),o.jc("ngIf",e.avaToolbarOptions[e.AVA_TOOLBAR_OPTIONS.DELETE]),o.Bb(2),o.jc("disabled",-1===e.undoService.index),o.Bb(3),o.jc("disabled",e.undoService.index+1===e.undoService.length))},directives:[i.k,F.a,tn.a,an,ln,be,pn,gn,vn],styles:[".toolbar-icon-size{width:32px;line-height:32px;height:32px}.toolbar-items{position:relative;display:flex;justify-content:space-between;height:100%;align-items:center;font-size:.813rem}.toolbar-items-left{margin-left:1rem;display:flex;align-items:center}.toolbar-items-right{margin-right:1rem;display:flex;align-items:center}.toolbar-item{position:relative;margin:0 3px}.toolbar-input{padding:7px 13px;border:1px solid #f0f0f0}.toolbar-input:focus{outline:1px solid #f0f0f0}input[type=number]{width:60px}.toolbar-icons{display:flex;border:1px solid #f0f0f0;border-radius:3px;cursor:pointer;padding:2px;color:#484848}.pinched-item{box-shadow:inset 0 0 3px;background-color:#d3d3d3}.toolbar-icons:hover:not(.toolbar-icons-selected){background:#f0f0f0}.toolbar-bg-color{border:1px solid silver;border-radius:2px;padding:15px;cursor:pointer}.toolbar-item-drop{position:absolute;left:0;top:calc(100% + 10px);background:#fff;box-shadow:0 0 2px grey;padding:10px 20px;border-radius:3px}"],encapsulation:2}),t})();const Ln=["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"];function Bn(t){return void 0===t}var jn=function(){var t=function(){function t(){this._eventHandler={},this.options={}}var e=t.prototype;return e.trigger=function(t,e){void 0===e&&(e={});var n=this._eventHandler[t]||[],i=n.length>0;if(!i)return!0;n=n.concat(),e.eventType=t;var r=!1,o=[e],a=0;e.stop=function(){r=!0},e.currentTarget=this;for(var s=arguments.length,c=new Array(s>2?s-2:0),l=2;l<s;l++)c[l-2]=arguments[l];for(c.length>=1&&(o=o.concat(c)),a=0;n[a];a++)n[a].apply(this,o);return!r},e.once=function(t,e){if("object"==typeof t&&Bn(e)){var n,i=t;for(n in i)this.once(n,i[n]);return this}if("string"==typeof t&&"function"==typeof e){var r=this;this.on(t,(function n(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];e.apply(r,o),r.off(t,n)}))}return this},e.hasOn=function(t){return!!this._eventHandler[t]},e.on=function(t,e){if("object"==typeof t&&Bn(e)){var n,i=t;for(n in i)this.on(n,i[n]);return this}if("string"==typeof t&&"function"==typeof e){var r=this._eventHandler[t];Bn(r)&&(this._eventHandler[t]=[],r=this._eventHandler[t]),r.push(e)}return this},e.off=function(t,e){if(Bn(t))return this._eventHandler={},this;if(Bn(e)){if("string"==typeof t)return this._eventHandler[t]=void 0,this;var n,i=t;for(n in i)this.off(n,i[n]);return this}var r,o,a=this._eventHandler[t];if(a)for(r=0;void 0!==(o=a[r]);r++)if(o===e){a=a.splice(r,1);break}return this},t}();return t.VERSION="2.1.2",t}();function Gn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map((function(e){return e.split(" ").map((function(e){return e?""+t+e:""})).join(" ")})).join(" ")}function Hn(t,e){return function(n){n&&(t[e]=n)}}function Fn(t,e,n){return function(i){i&&(t[e][n]=i)}}function Xn(t,e){return function(n){var i=n.prototype;t.forEach((function(t){e(i,t)}))}}function Un(t,e){return void 0===e&&(e={}),function(n,i){t.forEach((function(t){var r=e[t]||t;n[r]||(n[r]=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=(e=this[i])[t].apply(e,n);return o===this[i]?this:o})}))}}var Wn=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,i=this.values,r=n.indexOf(t),o=-1===r?n.length:r;n[o]=t,i[o]=e},t}(),Yn=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),qn="function"==typeof Map,Vn=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}(),Qn=function(){function t(t,e,n,i,r,o,a,s){this.prevList=t,this.list=e,this.added=n,this.removed=i,this.changed=r,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,e){var n=[],i=[];return t.forEach((function(t){var e=t[0],r=t[1],o=new Vn;n[e]=o,i[r]=o})),n.forEach((function(t,e){t.connect(n[e-1])})),t.filter((function(t,n){return!e[n]})).map((function(t,e){var r=t[0],o=t[1];if(r===o)return[0,0];var a=n[r],s=i[o-1],c=a.getIndex();return a.disconnect(),s?a.connect(s,s.next):a.connect(void 0,n[0]),[c,a.getIndex()]}))}(this.changedBeforeAdded,this.fixed),e=this.changed,n=[];this.cacheOrdered=t.filter((function(t,i){var r=e[i];if(t[0]!==t[1])return n.push([r[0],r[1]]),!0})),this.cachePureChanged=n},t}();function $n(t,e,n){var i=qn?Map:n?Yn:Wn,r=n||function(t){return t},o=[],a=[],s=[],c=t.map(r),l=e.map(r),u=new i,h=new i,p=[],d=[],f={},g=[],b=0,m=0;return c.forEach((function(t,e){u.set(t,e)})),l.forEach((function(t,e){h.set(t,e)})),c.forEach((function(t,e){var n=h.get(t);void 0===n?(++m,a.push(e)):f[n]=m})),l.forEach((function(t,e){var n=u.get(t);void 0===n?(o.push(e),++b):(s.push([n,e]),p.push([n-(m=f[e]||0),e-b]),d.push(e===n),n!==e&&g.push([n,e]))})),a.reverse(),new Qn(t,e,o,a,g,s,p,d)}var Kn=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),n=$n(this.list,e,this.findKeyCallback);return this.list=e,n},t}(),Jn=("undefined"!=typeof document&&document,['"',"'",'\\"',"\\'"]);function Zn(t){return void 0===t}function ti(t){return t&&"object"==typeof t}function ei(t){return Array.isArray(t)}function ni(t){return"string"==typeof t}function ii(t,e,n,i){for(var r=n;r<i;++r){var o=e[r].trim();if(o===t)return r;var a=r;if("("===o?a=ii(")",e,r+1,i):Jn.indexOf(o)>-1&&(a=ii(o,e,r+1,i)),-1===a)break;r=a}return-1}function ri(t,e){for(var n=new RegExp("(\\s*"+(e||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),i=t.split(n).filter(Boolean),r=i.length,o=[],a=[],s=0;s<r;++s){var c=i[s].trim(),l=s;if("("===c)l=ii(")",i,s+1,r);else{if(")"===c)throw new Error("invalid format");if(Jn.indexOf(c)>-1)l=ii(c,i,s+1,r);else if(c===e){a.length&&(o.push(a.join("")),a=[]);continue}}-1===l&&(l=r-1),a.push(i.slice(s,l+1).join("")),s=l}return a.length&&o.push(a.join("")),o}function oi(t){return ri(t,"")}function ai(t){return ri(t,",")}function si(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function ci(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);return e?{prefix:e[1],unit:e[3],value:parseFloat(e[2])}:{prefix:"",unit:"",value:NaN}}function li(t){return t.replace(/[\s-_]([a-z])/g,(function(t,e){return e.toUpperCase()}))}function ui(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,(function(t,n,i){return""+n+e+i.toLowerCase()}))}function hi(){return Date.now?Date.now():(new Date).getTime()}function pi(t,e,n){void 0===n&&(n=-1);for(var i=t.length,r=0;r<i;++r)if(e(t[r],r,t))return r;return n}function di(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function fi(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function gi(t,e,n,i){t.addEventListener(e,n,i)}function bi(t,e,n){t.removeEventListener(e,n)}var mi=function(t,e){return(mi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function vi(t,e){function n(){this.constructor=t}mi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var yi=function(){return(yi=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function xi(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function Si(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function Ei(t,e){var n=Object.keys(t),i=Object.keys(e),r=$n(n,i,(function(t){return t})),o={},a={},s={};return r.added.forEach((function(t){var n=i[t];o[n]=e[n]})),r.removed.forEach((function(e){var i=n[e];a[i]=t[i]})),r.maintained.forEach((function(i){var r=n[i[0]];t[r]!==e[r]&&(s[r]=[t[r],e[r]])})),{added:o,removed:a,changed:s}}function Oi(t){t.forEach((function(t){t()}))}function Ci(t){var e=0;return t.map((function(t){return null==t?"$compat"+ ++e:""+t}))}function wi(t,e,n,i){return ni(t)?new zi("text_"+t,e,n,i,null,{}):new("string"==typeof t.type?Ri:t.type.prototype.render?Li:Ni)(t.type,e,n,i,t.ref,t.props)}function Ti(t){var e=[];return t.forEach((function(t){e=e.concat(ei(t)?Ti(t):t)})),e}function Pi(t){var e=t.className,n=xi(t,["className"]);return null!=e&&(n.class=e),delete n.style,delete n.children,n}function Ii(t,e){if(!e)return t;for(var n in e)Zn(t[n])&&(t[n]=e[n]);return t}function ki(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=e||{},o=r.key,a=r.ref,s=xi(r,["key","ref"]);return{type:t,key:o,ref:a,props:yi(yi({},s),{children:Ti(n).filter((function(t){return null!=t&&!1!==t}))})}}var _i=function(){function t(t,e,n,i,r,o){void 0===o&&(o={}),this.type=t,this.key=e,this.index=n,this.container=i,this.ref=r,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,n,i){if(this.base&&!ni(e)&&!i&&!this._should(e.props,n))return!1;this.original=e,this._setState(n);var r=this.props;return ni(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?r:{},n),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function Mi(t){var e={},n={};for(var i in t)0===i.indexOf("on")?n[i.replace("on","").toLowerCase()]=t[i]:e[i]=t[i];return{attributes:e,events:n}}var zi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}vi(e,t);var n=e.prototype;return n._render=function(t){var e=this,n=!this.base;return n&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push((function(){n?e._mounted():e._updated()})),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(_i),Ri=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events={},e}vi(e,t);var n=e.prototype;return n.addEventListener=function(t,e){var n=this.events;n[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,n[t])},n.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},n._should=function(t){return Si(this.props,t)},n._render=function(t,e){var n=this,i=!this.base;i&&(this.base=document.createElement(this.type)),Hi(this,this._providers,this.props.children,t,null);var r=this.base,o=Mi(e),a=o.attributes,s=o.events,c=Mi(this.props),l=c.attributes,u=c.events;return function(t,e,n){var i=Ei(t,e),r=i.added,o=i.removed,a=i.changed;for(var s in r)n.setAttribute(s,r[s]);for(var s in a)n.setAttribute(s,a[s][1]);for(var s in o)n.removeAttribute(s)}(Pi(a),Pi(l),r),function(t,e,n){var i=Ei(t,e),r=i.added,o=i.removed,a=i.changed;for(var s in o)n.removeEventListener(s);for(var s in r)n.addEventListener(s,r[s]);for(var s in a)n.removeEventListener(s),n.addEventListener(s,a[s][1]);for(var s in o)n.removeEventListener(s)}(s,u,this),function(t,e,n){var i=n.style,r=Ei(t,e),o=r.added,a=r.removed,s=r.changed;for(var c in o){var l=ui(c,"-");i.setProperty?i.setProperty(l,o[c]):i[l]=o[c]}for(var c in s)l=ui(c,"-"),i.setProperty?i.setProperty(l,s[c][1]):i[l]=s[c][1];for(var c in a)l=ui(c,"-"),i.removeProperty?i.removeProperty(l):i[l]=""}(e.style||{},this.props.style||{},r),t.push((function(){i?n._mounted():n._updated()})),!0},n._unmount=function(){var t=this.events,e=this.base;for(var n in t)e.removeEventListener(n,t[n]);this._providers.forEach((function(t){t._unmount()})),this.events={},e.parentNode.removeChild(e)},e}(_i);function Di(t){if(!t)return null;if(t instanceof Node)return t;var e=t._provider._providers;return e.length?Di(e[0].base):null}var Ni=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}vi(e,t);var n=e.prototype;return n._render=function(t){var e=this.type(this.props);return Hi(this,this._providers,e?[e]:[],t),!0},n._unmount=function(){this._providers.forEach((function(t){t._unmount()}))},e}(_i),Ai=function(t){function e(e){var n=t.call(this,"container","container",0,null)||this;return n.base=e,n}vi(e,t);var n=e.prototype;return n._render=function(){return!0},n._unmount=function(){},e}(_i),Li=function(t){function e(e,n,i,r,o,a){return void 0===a&&(a={}),t.call(this,e,n,i,r,o,Ii(a,e.defaultProps))||this}vi(e,t);var n=e.prototype;return n._should=function(t,e){return this.base.shouldComponentUpdate(Ii(t,this.type.defaultProps),e||this.base.state)},n._render=function(t,e,n){var i=this;this.props=Ii(this.props,this.type.defaultProps);var r=!this.base;r?(this.base=new this.type(this.props),this.base._provider=this):this.base.props=this.props;var o=this.base,a=o.state,s=o.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),Hi(this,this._providers,s?[s]:[],t,n,null),t.push((function(){r?(i._mounted(),o.componentDidMount()):(i._updated(),o.componentDidUpdate(e,a))}))},n._setState=function(t){t&&(this.base.state=t)},n._unmount=function(){this._providers.forEach((function(t){t._unmount()})),this.base.componentWillUnmount()},e}(_i),Bi=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,n){var i=[],r=this._provider;Hi(r.container,[r],[r.original],i,yi(yi({},this.state),t),n)&&(e&&i.push(e),Oi(i))},e.forceUpdate=function(t){this.setState(this.state,t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},t}(),ji=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vi(e,t),e.prototype.shouldComponentUpdate=function(t,e){return Si(this.props,t)||Si(this.state,e)},e}(Bi),Gi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}vi(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.element,n=t.container;this._portalProvider=new Ai(n),Fi(e,n,this._portalProvider)},n.componentDidUpdate=function(){var t=this.props;Fi(t.element,t.container,this._portalProvider)},n.componentWillUnmount=function(){Fi(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(ji);function Hi(t,e,n,i,r,o){var a=function(t,e,n){var i=n.map((function(t){return ni(t)?null:t.key})),r=$n(Ci(e.map((function(t){return t.key}))),Ci(i),(function(t){return t}));r.removed.forEach((function(t){e.splice(t,1)[0]._unmount()})),r.ordered.forEach((function(t){var n=t[1],i=e.splice(t[0],1)[0];e.splice(n,0,i);var r=Di(i.base),o=Di(e[n+1]&&e[n+1].base);r&&r.parentNode.insertBefore(r,o)})),r.added.forEach((function(r){e.splice(r,0,wi(n[r],i[r],r,t))}));var o=r.maintained.filter((function(r){var o=r[1],a=n[o],s=e[o];return(ni(a)?"text_"+a:a.type)!==s.type?(s._unmount(),e.splice(o,1,wi(a,i[o],o,t)),!0):(s.index=o,!1)}));return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}(r.added,o.map((function(t){return t[1]})))}(t,e,n),s=e.filter((function(t,e){return t._update(i,n[e],r,o)})),c=function t(e){if(!e)return null;var n=e.base;return n instanceof Node?n:t(e.container)}(t);return c&&a.reverse().forEach((function(n){var i=e[n],r=Di(i.base);if(r&&c!==r&&!r.parentNode){var o=function(t,e){for(var n=t._providers,i=n.length,r=e.index+1;r<i;++r){var o=Di(n[r].base);if(o)return o}return null}(t,i);c.insertBefore(r,o)}})),s.length>0}function Fi(t,e,n){void 0===n&&(n=e.__REACT_COMPAT__);var i=!!n;return n||(n=new Ai(e)),function(t,e,n){var i=[];Hi(t,t._providers,e,i,void 0),Oi(i)}(n,t?[t]:[]),i||(e.__REACT_COMPAT__=n),n}function Xi(t,e,n){var i=e.__REACT_COMPAT__;t&&!i&&(e.innerHTML=""),Fi(t,e,i),n&&n()}const Ui=("undefined"!=typeof window&&window||{}).navigator;var Wi=[{criteria:"PhantomJS",identity:"PhantomJS"},{criteria:/Whale/,identity:"Whale",versionSearch:"Whale"},{criteria:/Edge/,identity:"Edge",versionSearch:"Edge"},{criteria:/MSIE|Trident|Windows Phone/,identity:"IE",versionSearch:"IEMobile|MSIE|rv"},{criteria:/MiuiBrowser/,identity:"MIUI Browser",versionSearch:"MiuiBrowser"},{criteria:/SamsungBrowser/,identity:"Samsung Internet",versionSearch:"SamsungBrowser"},{criteria:/SAMSUNG /,identity:"Samsung Internet",versionSearch:"Version"},{criteria:/Chrome|CriOS/,identity:"Chrome"},{criteria:/Android/,identity:"Android Browser",versionSearch:"Version"},{criteria:/iPhone|iPad/,identity:"Safari",versionSearch:"Version"},{criteria:"Apple",identity:"Safari",versionSearch:"Version"},{criteria:"Firefox",identity:"Firefox"}],Yi=[{criteria:/Windows Phone/,identity:"Windows Phone",versionSearch:"Windows Phone"},{criteria:"Windows 2000",identity:"Window",versionAlias:"5.0"},{criteria:/Windows NT/,identity:"Window",versionSearch:"Windows NT"},{criteria:/iPhone|iPad/,identity:"iOS",versionSearch:"iPhone OS|CPU OS"},{criteria:"Mac",versionSearch:"OS X",identity:"MAC"},{criteria:/Android/,identity:"Android"},{criteria:/Tizen/,identity:"Tizen"},{criteria:/Web0S/,identity:"WebOS"}],qi=[{criteria:/iPhone|iPad/,browserVersionSearch:"Version",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],Vi={version:"-1",name:"unknown"},Qi={version:"-1",name:"unknown"};function $i(t,e){const n=[];for(let i=0;i<t.length;i++)e(t[i])&&n.push(t[i]);return n}let Ki;function Ji(t,e){return e&&e.test?!!e.test(t):t.indexOf(e)>-1}function Zi(t,e){const n=$i(t,t=>Ji(Ki,t.criteria))[0];return n&&n.identity||e.name}function tr(t,e){return $i(t,t=>{const n=t.criteria,i=new RegExp(t.identity,"i").test(e);return!!(n?i&&Ji(Ki,n):i)})[0]}function er(t,e){let n=Vi.version;const i=new RegExp(`(${t})`,"i").exec(e);if(!i)return n;const r=i.index;return r>-1&&(n=e.substring(r+i[0].length+1).split(" ")[0].replace(/_/g,".").replace(/;|\)/g,"")),n}function nr(t){if(t)return er(function(t){let e=tr(Wi,t);return e||(e={criteria:t,versionSearch:t,identity:t}),e}(t).versionSearch||t,Ki)}function ir(){let t;return function(e,n){for(let r=0;r<e.length;r++)if(t=er((i=e[r]).browserVersionSearch,Ki),Ji(Ki,i.webviewToken)||Ji(t,i.webviewBrowserVersion))return!0;var i;return!1}($i(qi,t=>Ji(Ki,t.criteria)))}function rr(t){const e=function(t){return tr(Yi,t)}(t)||{},n=Qi.version;let i;if(!t)return;if(e.versionAlias)return e.versionAlias;const r=new RegExp(`(${e.versionSearch||t})\\s([\\d_\\.]+|\\d_0)`,"i");return r.exec(Ki)&&(i=r.exec(Ki)[2].replace(/_/g,".").replace(/;|\)/g,"")),i||n}function or(){const t=Zi(Yi,Qi);return{name:t,version:rr(t)}}function ar(){const t=Zi(Wi,Vi);return{name:t,version:nr(t),webview:ir()}}function sr(t=Ui.userAgent){!function(t){Ki=t}(t);const e={os:or(),browser:ar(),isMobile:-1!==Ki.indexOf("Mobi")};return e.browser.name=e.browser.name.toLowerCase(),e.os.name=e.os.name.toLowerCase(),e.os.version=e.os.version.toLowerCase(),"ios"===e.os.name&&e.browser.webview&&(e.browser.version="-1"),e}sr.VERSION="#__VERSION__#";var cr=sr,lr=function(t,e){return(lr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},ur=function(){return(ur=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},hr=function(){return(hr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function pr(t){return 180*(e=[t[0].clientX,t[0].clientY],n=[t[1].clientX,t[1].clientY],((i=Math.atan2(n[1]-e[1],n[0]-e[0]))>=0?i:i+2*Math.PI)/Math.PI);var e,n,i}function dr(t,e,n,i){var r=xr(t),o=xr(e),a=xr(i);return gr(Sr(i[0],Er(r,a)),Sr(i[0],Er(o,a)),n[0])}function fr(t){return t.touches?vr(t.touches):[yr(t)]}function gr(t,e,n){var i=t.clientX,r=t.clientY;return{clientX:i,clientY:r,deltaX:i-e.clientX,deltaY:r-e.clientY,distX:i-n.clientX,distY:r-n.clientY}}function br(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function mr(t,e,n){return t.map((function(t,i){return gr(t,e[i],n[i])}))}function vr(t){for(var e=Math.min(t.length,2),n=[],i=0;i<e;++i)n.push(yr(t[i]));return n}function yr(t){return{clientX:t.clientX,clientY:t.clientY}}function xr(t){return 1===t.length?t[0]:{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function Sr(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}}function Er(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}}var Or=["textarea","input"],Cr=function(){function t(t,e){var n=this;void 0===e&&(e={}),this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.targets=[],this.prevTime=0,this.isDouble=!1,this.startRotate=0,this.onDragStart=function(t,e){if(void 0===e&&(e=!0),n.flag||!1!==t.cancelable){var i=n.options,r=i.container,o=i.pinchOutside,a=i.dragstart,s=i.preventRightClick,c=i.preventDefault,l=i.checkInput,u=n.isTouch;if(!n.flag){var h=document.activeElement,p=t.target,d=p.tagName.toLowerCase(),f=Or.indexOf(d)>-1,g=p.isContentEditable;if(f||g){if(l||h===p)return!1;if(h&&g&&h.isContentEditable&&h.contains(p))return!1}else(c||"touchstart"===t.type)&&h&&(h.isContentEditable||Or.indexOf(h.tagName)>-1)&&h.blur()}var b=0;if(!n.flag&&u&&o&&(b=setTimeout((function(){gi(r,"touchstart",n.onDragStart,{passive:!1})}))),n.flag&&u&&o&&bi(r,"touchstart",n.onDragStart),function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(b),!n.flag&&t.touches.length!==t.changedTouches.length)return;n.pinchFlag||n.onPinchStart(t)}if(!n.flag){var m=n.startClients[0]?n.startClients:fr(t);n.customDist=[0,0],n.flag=!0,n.isDrag=!1,n.startClients=m,n.prevClients=m,n.datas={},n.movement=0;var v=gr(m[0],n.prevClients[0],n.startClients[0]);if(s&&(3===t.which||2===t.button))return clearTimeout(b),n.initDrag(),!1;!1===(a&&a(hr({type:"dragstart",datas:n.datas,inputEvent:t,isTrusted:e},v)))&&(clearTimeout(b),n.initDrag()),n.isDouble=hi()-n.prevTime<200,n.flag&&c&&t.preventDefault()}}},this.onDrag=function(t,e){if(n.flag){var i=fr(t);n.pinchFlag&&n.onPinch(t,i);var r=n.move([0,0],t,i);if(r&&(r.deltaX||r.deltaY)){var o=n.options.drag;o&&o(hr({},r,{isScroll:!!e,inputEvent:t}))}}},this.onDragEnd=function(t){if(n.flag){var e=n.options,i=e.dragend;n.isTouch&&e.pinchOutside&&bi(e.container,"touchstart",n.onDragStart),n.pinchFlag&&n.onPinchEnd(t),n.flag=!1;var r=n.prevClients,o=n.startClients,a=n.pinchFlag?dr(r,r,o,n.startPinchClients):gr(r[0],r[0],o[0]),s=hi(),c=!n.isDrag&&n.isDouble;n.prevTime=n.isDrag||c?0:s,n.startClients=[],n.prevClients=[],i&&i(hr({type:"dragend",datas:n.datas,isDouble:c,isDrag:n.isDrag,inputEvent:t},a))}};var i=[].concat(t);this.options=hr({checkInput:!1,container:i.length>1?window:i[0],preventRightClick:!0,preventDefault:!0,pinchThreshold:0,events:["touch","mouse"]},e);var r=this.options,o=r.container,a=r.events;if(this.isTouch=a.indexOf("touch")>-1,this.isMouse=a.indexOf("mouse")>-1,this.customDist=[0,0],this.targets=i,this.isMouse&&(i.forEach((function(t){gi(t,"mousedown",n.onDragStart)})),gi(o,"mousemove",this.onDrag),gi(o,"mouseup",this.onDragEnd),gi(o,"contextmenu",this.onDragEnd)),this.isTouch){var s={passive:!1};i.forEach((function(t){gi(t,"touchstart",n.onDragStart,s)})),gi(o,"touchmove",this.onDrag,s),gi(o,"touchend",this.onDragEnd,s),gi(o,"touchcancel",this.onDragEnd,s)}}var e=t.prototype;return e.isDragging=function(){return this.isDrag},e.isFlag=function(){return this.flag},e.isPinchFlag=function(){return this.pinchFlag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(t,e,n,i){void 0===i&&(i=!0),this.flag&&(this.startClients.forEach((function(n){n.clientX-=t,n.clientY-=e})),this.prevClients.forEach((function(n){n.clientX-=t,n.clientY-=e})),i&&this.onDrag(n,!0))},e.move=function(t,e,n){var i=t[0],r=t[1];void 0===n&&(n=this.prevClients);var o=this.customDist,a=this.prevClients,s=this.startClients,c=this.pinchFlag?dr(n,a,s,this.startPinchClients):gr(n[0],a[0],s[0]);o[0]+=i,o[1]+=r,c.deltaX+=i,c.deltaY+=r;var l=c.deltaX,u=c.deltaY;return c.distX+=o[0],c.distY+=o[1],this.movement+=Math.sqrt(l*l+u*u),this.prevClients=n,this.isDrag=!0,hr({type:"drag",datas:this.datas},c,{movement:this.movement,isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},e.onPinchStart=function(t){var e,n,i=this.options,r=i.pinchstart;if(!(this.isDrag&&this.movement>i.pinchThreshold)){var o=vr(t.changedTouches);if(this.pinchFlag=!0,(e=this.startClients).push.apply(e,o),(n=this.prevClients).push.apply(n,o),this.startDistance=br(this.prevClients),this.startPinchClients=this.prevClients.slice(),r){var a=this.prevClients,s=xr(a),c=gr(s,s,s);this.startRotate=pr(a),r(hr({type:"pinchstart",datas:this.datas,angle:this.startRotate,touches:mr(a,a,a)},c,{inputEvent:t}))}}},e.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){this.isPinch=!0;var n=this.options.pinch;if(n){var i=this.prevClients,r=this.startClients,o=gr(xr(e),xr(i),xr(r)),a=pr(e),s=br(e);n(hr({type:"pinch",datas:this.datas,movement:this.movement,angle:a,rotation:a-this.startRotate,touches:mr(e,i,r),scale:s/this.startDistance,distance:s},o,{inputEvent:t}))}}},e.onPinchEnd=function(t){if(this.flag&&this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.options.pinchend;if(n){var i=this.prevClients,r=this.startClients,o=gr(xr(i),xr(i),xr(r));n(hr({type:"pinchend",datas:this.datas,isPinch:e,touches:mr(i,i,r)},o,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}}},e.triggerDragStart=function(t){this.onDragStart(t,!1)},e.unset=function(){var t=this,e=this.targets,n=this.options.container;this.isMouse&&(e.forEach((function(e){bi(e,"mousedown",t.onDragStart)})),bi(n,"mousemove",this.onDrag),bi(n,"mouseup",this.onDragEnd),bi(n,"contextmenu",this.onDragEnd)),this.isTouch&&(e.forEach((function(e){bi(e,"touchstart",t.onDragStart)})),bi(n,"touchstart",this.onDragStart),bi(n,"touchmove",this.onDrag),bi(n,"touchend",this.onDragEnd),bi(n,"touchcancel",this.onDragEnd))},e.initDrag=function(){this.startClients=[],this.prevClients=[],this.flag=!1},t}(),wr=function(t,e){return(wr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Tr(t){var e=t.container;return[e.scrollLeft,e.scrollTop]}var Pr,Ir=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startRect=null,e.startPos=[],e.prevTime=0,e.timer=0,e}!function(t,e){function n(){this.constructor=t}wr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.dragStart=function(t,e){var n=e.container.getBoundingClientRect(),i=n.top,r=n.left,o=n.width,a=n.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:i,left:r,width:o,height:a}},n.drag=function(t,e){var n=this,i=t.clientX,r=t.clientY,o=e.container,a=e.threshold,s=void 0===a?0:a,c=e.throttleTime,l=void 0===c?0:c,u=e.getScrollPosition,h=void 0===u?Tr:u,p=this.startRect,d=this.startPos,f=hi(),g=Math.max(l+this.prevTime-f,0),b=[0,0];if(p.top>r-s?(d[1]>p.top||r<d[1])&&(b[1]=-1):p.top+p.height<r+s&&(d[1]<p.top+p.height||r>d[1])&&(b[1]=1),p.left>i-s?(d[0]>p.left||i<d[0])&&(b[0]=-1):p.left+p.width<i+s&&(d[0]<p.left+p.width||i>d[0])&&(b[0]=1),clearTimeout(this.timer),!b[0]&&!b[1])return!1;if(g>0)return this.timer=window.setTimeout((function(){n.drag(t,e)}),g),!1;this.prevTime=f;var m=h({container:o,direction:b});this.trigger("scroll",{container:o,direction:b,inputEvent:t});var v=h({container:o,direction:b}),y=v[0]-m[0],x=v[1]-m[1];return!(!y&&!x||(this.trigger("move",{offsetX:b[0]?y:0,offsetY:b[1]?x:0,inputEvent:t}),l&&(this.timer=window.setTimeout((function(){n.drag(t,e)}),l)),0))},n.dragEnd=function(){clearTimeout(this.timer)},e}(jn),kr=function(t,e){return(kr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},_r="function"==typeof Map?void 0:(Pr=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++Pr)});function Mr(t,e){return $n(t,e,_r)}var zr=function(t){function e(e){return void 0===e&&(e=[]),t.call(this,e,_r)||this}return function(t,e){function n(){this.constructor=t}kr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Kn),Rr=function(t,e){return(Rr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Dr(t,e){function n(){this.constructor=t}Rr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Nr=function(){return(Nr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function Ar(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+e+'deg);transform-origin: 16px 16px"></path></svg>'}var Lr=cr(("undefined"!=typeof navigator&&navigator||{}).userAgent||""),Br=Lr.os.name.indexOf("ios")>-1||Lr.browser.name.indexOf("safari")>-1,jr="moveable-",Gr="\n{\n\tposition: fixed;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --zoom: 1;\n    --zoompx: 1px;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    width: calc(14 * var(--zoompx));\n    height: calc(14 * var(--zoompx));\n    margin-top: calc(-7 * var(--zoompx));\n    margin-left: calc(-7 * var(--zoompx));\n    border: calc(2 * var(--zoompx)) solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n    height: 1px;\n    width: var(--zoompx);\n    height: var(--zoompx);\n\tbackground: #4af;\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top: var(--zoompx) dashed #4af;\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left: var(--zoompx) dashed #4af;\n}\n.line.dashed:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #4af;\n    font-size: 12px;\n    font-weight: bold;\n}\n.line.dashed.horizontal:before, .line.gap.horizontal:before {\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 5px;\n}\n.line.dashed.vertical:before, .line.gap.vertical:before {\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.line.rotation-line {\n\theight: 40px;\n    width: 1px;\n    transform-origin: 50% calc(100% - 0.5px);\n    top: -40px;\n    width: var(--zoompx);\n    height: calc(40 * var(--zoompx));\n    top: calc(-40 * var(--zoompx));\n    transform-origin: 50% calc(100% - 0.5 * var(--zoompx));\n}\n.line.rotation-line .control {\n\tborder-color: #4af;\n\tbackground:#fff;\n    cursor: alias;\n    left: 50%;\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n    width: calc(2 * var(--zoompx));\n}\n.line.horizontal.bold {\n    height: 2px;\n    height: calc(2 * var(--zoompx));\n}\n\n.line.gap {\n    background: #f55;\n}\n.line.gap:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n    width: calc(12 * var(--zoompx));\n    height: calc(12 * var(--zoompx));\n    margin-top: calc(-6 * var(--zoompx));\n    margin-left: calc(-6 * var(--zoompx));\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+function(t){var e=Ar(1,t),n=Ar(2,t),i=45*Math.round(t/45)%180,r=135===i?"nwse-resize":45===i?"nesw-resize":90===i?"ew-resize":"ns-resize";return"cursor:"+r+";cursor: url('"+e+"') 16 16, "+r+";cursor: -webkit-image-set(url('"+e+"') 1x, url('"+n+"') 2x) 16 16, "+r+";"}(t)+"\n}\n"})).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n"+(Br?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n",Hr=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Fr=Math.pow(10,10),Xr=-Fr,Ur=["nw","ne","sw","se","n","w","s","e"],Wr={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},Yr={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},qr=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging"];function Vr(t,e,n,i,r,o){for(var a=0;a<r;++a){var s=n+a*r,c=i+a*r;t[s]+=t[c]*o,e[s]+=e[c]*o}}function Qr(t,e,n,i,r){for(var o=0;o<r;++o){var a=n+o*r,s=i+o*r,c=t[a],l=e[a];t[a]=t[s],t[s]=c,e[a]=e[s],e[s]=l}}function $r(t,e,n,i,r){for(var o=0;o<i;++o){var a=n+o*i;t[a]/=r,e[a]/=r}}function Kr(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var i=t.slice(),r=0;r<n;++r)i[r*n+e-1]=0,i[(e-1)*n+r]=0;return i[(e-1)*(n+1)]=1,i}function Jr(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),i=uo(e),r=0;r<e;++r){var o=e*r+r;if(0===n[o])for(var a=r+1;a<e;++a)if(n[e*r+a]){Qr(n,i,r,a,e);break}if(!n[o])return[];for($r(n,i,r,e,n[o]),a=0;a<e;++a){var s=n[a+r*e];0!==s&&r!==a&&Vr(n,i,a,r,e,-s)}}return i}function Zr(t,e){var n=Math.atan2(e[1]-t[1],e[0]-t[0]);return n>=0?n:n+2*Math.PI}function to(t,e){for(var n=t.slice(),i=t.length;i<e-1;++i)n[i]=0;return n[e-1]=1,n}function eo(t,e,n){if(void 0===e&&(e=Math.sqrt(t.length)),e===n)return t;for(var i=uo(n),r=Math.min(e,n),o=0;o<r-1;++o){for(var a=0;a<r-1;++a)i[o*n+a]=t[o*e+a];i[(o+1)*n-1]=t[(o+1)*e-1],i[(n-1)*n+o]=t[(e-1)*e+o]}return i[n*n-1]=t[e*e-1],i}function no(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=uo(t);return e.forEach((function(e){i=io(i,e,t)})),i}function io(t,e,n){void 0===n&&(n=Math.sqrt(t.length));var i=[],r=t.length/n,o=e.length/r;if(!r)return e;if(!o)return t;for(var a=0;a<n;++a)for(var s=0;s<o;++s){i[s*n+a]=0;for(var c=0;c<r;++c)i[s*n+a]+=t[c*n+a]*e[s*r+c]}return i}function ro(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length,i=0,r=n-1;r>=0;--r)i+=t[r];return n?i/n:0}function oo(t,e){for(var n=Math.min(t.length,e.length),i=t.slice(),r=0;r<n;++r)i[r]=i[r]+e[r];return i}function ao(t,e){for(var n=Math.min(t.length,e.length),i=t.slice(),r=0;r<n;++r)i[r]=i[r]-e[r];return i}function so(t,e,n){void 0===n&&(n=e.length);var i=io(t,e,n),r=i[n-1];return i.map((function(t){return t/r}))}function co(t,e){return so(lo(e,3),to(t,3))}function lo(t,e){var n=Math.cos(t),i=Math.sin(t),r=uo(e);return r[0]=n,r[1]=i,r[e]=-i,r[e+1]=n,r}function uo(t){for(var e=t*t,n=[],i=0;i<e;++i)n[i]=i%(t+1)?0:1;return n}function ho(t,e){for(var n=uo(e),i=Math.min(t.length,e-1),r=0;r<i;++r)n[(e+1)*r]=t[r];return n}function po(t,e){for(var n=uo(e),i=Math.min(t.length,e-1),r=0;r<i;++r)n[e*(e-1)+r]=t[r];return n}function fo(t,e,n,i,r,o,a,s){var c=t[0],l=t[1],u=e[0],h=e[1],p=n[0],d=n[1],f=i[0],g=i[1],b=r[0],m=r[1],v=o[0],y=o[1],x=a[0],S=a[1],E=s[0],O=s[1],C=Jr([c,0,u,0,p,0,f,0,l,0,h,0,d,0,g,0,1,0,1,0,1,0,1,0,0,c,0,u,0,p,0,f,0,l,0,h,0,d,0,g,0,1,0,1,0,1,0,1,-b*c,-m*c,-v*u,-y*u,-x*p,-S*p,-E*f,-O*f,-b*l,-m*l,-v*h,-y*h,-x*d,-S*d,-E*g,-O*g],8);if(!C.length)return[];var w=io(C,[b,m,v,y,x,S,E,O],8);return w[8]=1,eo(function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],i=0;i<e;++i)for(var r=0;r<e;++r)n[r*e+i]=t[e*i+r];return n}(w),3,4)}function go(t,e){var n=e.datas,i=t.state,r=i.matrix,o=i.beforeMatrix,a=i.is3d,s=i.left,c=i.top,l=i.origin,u=i.offsetMatrix,h=i.targetMatrix,p=i.transformOrigin,d=a?4:3;n.is3d=a,n.matrix=r,n.targetMatrix=h,n.beforeMatrix=o,n.offsetMatrix=u,n.transformOrigin=p,n.inverseMatrix=Jr(r,d),n.inverseBeforeMatrix=Jr(o,d),n.absoluteOrigin=to(oo([s,c],l),d),n.startDragBeforeDist=so(n.inverseBeforeMatrix,n.absoluteOrigin,d),n.startDragDist=so(n.inverseMatrix,n.absoluteOrigin,d)}function bo(t,e){var n=t.datas,i=n.startDragBeforeDist,r=n.startDragDist,o=n.is3d?4:3;return ao(so(e?n.inverseBeforeMatrix:n.inverseMatrix,oo(n.absoluteOrigin,[t.distX,t.distY]),o),e?i:r)}function mo(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function vo(t,e){return mo(e).map((function(e){return t[e]}))}function yo(t,e){var n=vo(t,e);return[ro.apply(void 0,n.map((function(t){return t[0]}))),ro.apply(void 0,n.map((function(t){return t[1]})))]}function xo(t,e){return yo(t,e.map((function(t){return-t})))}function So(t,e,n,i,r,o){var a=xo(Ao(e,n,i,r),o);return[t[0]-a[0],t[1]-a[1]]}function Eo(t,e,n,i){return io(t,Po(e,i,n),i)}function Oo(t,e){var n=t.transformOrigin,i=t.is3d?4:3;return Eo(t.offsetMatrix,io(t.targetMatrix,ho(e,i),i),n,i)}function Co(t,e){return xo($o(t.state),e)}function wo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Gn.apply(void 0,[jr].concat(t))}function To(){return uo(3)}function Po(t,e,n){return no(e,po(n,e),t,po(n.map((function(t){return-t})),e))}function Io(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function ko(t,e,n){for(var i=document.body,r=!t||n?t:t.parentElement,o=!1,a="relative";r&&r!==i;){e===r&&(o=!0);var s=ra(r),c=s.transform;if("static"!==(a=s.position)||c&&"none"!==c)break;r=r.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!r||r===i,offsetParent:r||i}}function _o(t,e,n,i){var r,o=t.tagName.toLowerCase(),a=t.offsetLeft,s=t.offsetTop;if(i){var c=(e||document.documentElement).getBoundingClientRect();a-=c.left,s-=c.top}var l,u,h=Zn(a),p=!h;return p||"svg"===o?u=(l=Io(n).map((function(t){return parseFloat(t)}))).slice():(u=(l=Br?function(t){return Io(ra(t,":before")).map((function(e,n){var i=ci(e);return i.value*function(t,e,n){return"%"===e?Ro(t.ownerSVGElement)[n?"width":"height"]/100:1}(t,i.unit,0===n)}))}(t):Io(n).map((function(t){return parseFloat(t)}))).slice(),p=!0,"g"===o?(a=0,s=0):(a=(r=function(t,e){if(!t.getBBox)return[0,0];var n=t.getBBox(),i=Ro(t.ownerSVGElement),r=n.x-i.x,o=n.y-i.y;return[r,o,e[0]-r,e[1]-o]}(t,l))[0],s=r[1],l[0]=r[2],l[1]=r[3])),{isSVG:h,hasOffset:p,offset:[a,s],origin:l,targetOrigin:u}}function Mo(t,e,n){var i,r,o,a,s,c,l=t,u=[],h=!1,p=!1,d=3,f=ko(e,e,!0).offsetParent;for(n&&(h=t===e,n.length>10&&(p=!0,d=4),e=t.parentElement);l&&!h;){var g=ra(l),b=l.tagName.toLowerCase(),m=g.position,v="fixed"===m,y=(a=(c=g.transform)&&"none"!==c?ti(c)?c:si(c).value.split(/s*,\s*/g).map((function(t){return parseFloat(t)})):[1,0,0,1,0,0],void 0===(s=void 0)&&(s=6===a.length),s?[a[0],a[1],0,a[2],a[3],0,a[4],a[5],1]:a),x=y.length;if(!p&&16===x){p=!0,d=4;for(var S=u.length,E=0;E<S;++E)u[E]=eo(u[E],3,4)}p&&9===x&&(y=eo(y,3,4));var O=_o(l,e,g,v),C=O.hasOffset,w=O.isSVG,T=O.origin,P=O.targetOrigin,I=O.offset,k=I[0],_=I[1];"svg"===b&&o&&u.push(Do(l,d),uo(d));var M=ko(l,e),z=M.offsetParent,R=M.isEnd;Br&&C&&!w&&M.isStatic&&("relative"===m||"static"===m)&&(k-=z.offsetLeft,_-=z.offsetTop,h=h||R);var D=0,N=0;if(C&&f!==z&&(D=z.clientLeft,N=z.clientTop),u.push(Po(y,d,T),po(C?[k-l.scrollLeft+D,_-l.scrollTop+N]:[l,T],d)),o||(o=y),i||(i=T),r||(r=P),h||v)break;l=z,h=R}return o||(o=uo(d)),i||(i=[0,0]),r||(r=[0,0]),{offsetContainer:f,matrixes:u,targetMatrix:o,transformOrigin:i,targetTransformOrigin:r,is3d:p}}function zo(t,e){return void 0===e&&(e=t.length>9),(e?"matrix3d":"matrix")+"("+(n=t,i=!e,void 0===i&&(i=9===n.length),i?[n[0],n[1],n[3],n[4],n[6],n[7]]:n).join(",")+")";var n,i}function Ro(t){var e=t.viewBox,n=e&&e.baseVal||{x:0,y:0,width:0,height:0};return{x:n.x,y:n.y,width:n.width||t.clientWidth,height:n.height||t.clientHeight}}function Do(t,e){var n=t.clientWidth,i=t.clientHeight,r=Ro(t),o=r.width,a=r.height,s=n/o,c=i/a,l=t.preserveAspectRatio.baseVal,u=l.align,h=l.meetOrSlice,p=[0,0],d=[s,c],f=[0,0];if(1!==u){var g=(u-2)%3,b=Math.floor((u-2)/3);p[0]=o*g/2,p[1]=a*b/2;var m=2===h?Math.max(c,s):Math.min(s,c);d[0]=m,d[1]=m,f[0]=(n-o)/2*g,f[1]=(i-a)/2*b}var v=ho(d,e);return v[e*(e-1)]=f[0],v[e*(e-1)+1]=f[1],Po(v,e,p)}function No(t,e,n){return so(t,to(e,n),n)}function Ao(t,e,n,i){return[[0,0],[e,0],[0,n],[e,n]].map((function(e){return No(t,e,i)}))}function Lo(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]})),i=Math.min.apply(Math,e),r=Math.min.apply(Math,n),o=Math.max.apply(Math,e),a=Math.max.apply(Math,n);return{left:i,top:r,right:o,bottom:a,width:o-i,height:a-r}}function Bo(t,e,n,i){return Lo(Ao(t,e,n,i))}function jo(t,e,n,i){var r=16===t.length?4:3,o=Ao(t,n,i,r),a=o[0],s=a[0],c=a[1],l=o[1],u=l[0],h=l[1],p=o[2],d=p[0],f=p[1],g=o[3],b=g[0],m=g[1],v=No(t,e,r),y=v[0],x=v[1],S=Math.min(s,u,d,b),E=Math.min(c,h,f,m),O=Math.max(s,u,d,b),C=Math.max(c,h,f,m);y=y-S||0,x=x-E||0;var w=[((s=s-S||0)+(u=u-S||0)+(d=d-S||0)+(b=b-S||0))/4,((c=c-E||0)+(h=h-E||0)+(f=f-E||0)+(m=m-E||0))/4],T=Zr(w,[s,c]),P=Zr(w,[u,h]);return[[S,E,O,C],[y,x],[[s,c],[u,h],[d,f],[b,m]],T<P&&P-T<Math.PI||T>P&&P-T<-Math.PI?1:-1]}function Go(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ho(t,e){return Go([e[0]-t[0],e[1]-t[1]])}function Fo(t,e,n){void 0===n&&(n=Zr(t,e));var i=Ho(t,e);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+n+"rad)",width:i+"px"}}function Xo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=e.length,r=e.reduce((function(t,e){return t+e[0]}),0)/i,o=e.reduce((function(t,e){return t+e[1]}),0)/i;return{transform:"translate("+r+"px, "+o+"px) rotate("+t+"rad)"}}function Uo(t,e,n,i){void 0===e&&(e=window.getComputedStyle(t)),void 0===i&&(i=n||"border-box"===e.boxSizing);var r=t.offsetWidth,o=t.offsetHeight,a=!Zn(r);if((n||i)&&a)return[r,o];if(!a&&"svg"!==t.tagName.toLowerCase()){var s=t.getBBox();return[s.width,s.height]}return r=t.clientWidth,o=t.clientHeight,n||i?[r+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0),o+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0)]:[r-(parseFloat(e.paddingLeft)||0)-(parseFloat(e.paddingRight)||0),o-(parseFloat(e.paddingTop)||0)-(parseFloat(e.paddingBottom)||0)]}function Wo(t,e){return Zr(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Yo(t,e,n,i,r,o){var a,s,c,l,u,h=0,p=0,d=0,f=0,g=[0,0],b=[[0,0],[0,0],[0,0],[0,0]],m=To(),v=To(),y=To(),x=To(),S=To(),E=0,O=0,C=[0,0],w=1,T=1,P=!1,I="",k=[0,0],_={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},M={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},z={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},R=[0,0],D=0,N=o?o.beforeMatrix:void 0,A=o?o.rootMatrix:void 0,L=o?o.is3d?4:3:void 0;if(e){if(o)E=o.width,O=o.height;else{var B=ra(e);O=e.offsetHeight,Zn(E=e.offsetWidth)&&(E=(a=Uo(e,B,!0))[0],O=a[1])}var j;m=(s=function(t,e,n,i,r,o){var a=Mo(t,e,i),s=a.matrixes,c=a.is3d,l=a.targetMatrix,u=a.transformOrigin,h=a.targetTransformOrigin,p=Mo(a.offsetContainer,n,r),d=p.matrixes,f=p.is3d,g=f||c?4:3,b="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,m=e||document.body,v=i?eo(i,o,g):uo(g),y=l,x=r?eo(r,o,g):uo(g),S=i?eo(i,o,g):uo(g),E=uo(g),O=s.length,C=ko(m,m,!0).offsetParent;d.reverse(),s.reverse(),!c&&f&&(y=eo(y,3,4),s.forEach((function(t,e){s[e]=eo(t,3,4)}))),c&&!f&&d.forEach((function(t,e){d[e]=eo(t,3,4)})),r||d.forEach((function(t){x=io(x,t,g)})),s.forEach((function(t,e){var n;O-2===e&&(S=v.slice()),O-1===e&&(E=v.slice()),ti(t[g*(g-1)])&&(n=function(t,e,n,i,r,o){for(var a,s=Uo(t,void 0,!0),c=s[0],l=s[1],u=e.getBoundingClientRect(),h=t.getBoundingClientRect(),p=h.left-u.left+e.scrollLeft-(e.clientLeft||0),d=h.top-u.top+e.scrollTop-(e.clientTop||0),f=h.width,g=h.height,b=no(n,r,o),m=Bo(b,c,l,n),v=m.left,y=m.top,x=m.width,S=m.height,E=No(b,i,n),O=ao(E,[v,y]),C=[p+O[0]*f/x,d+O[1]*g/S],w=[0,0],T=0;++T<10;){var P=Jr(r,n);a=ao(No(P,C,n),No(P,E,n)),w[0]=a[0],w[1]=a[1];var I=Bo(no(n,r,po(w,n),o),c,l,n),k=I.left-p,_=I.top-d;if(Math.abs(k)<2&&Math.abs(_)<2)break;C[0]-=k,C[1]-=_}return w.map((function(t){return Math.round(t)}))}(t[g*(g-1)],C,g,t[g*(g-1)+1],v,s[e+1]),t[g*(g-1)]=n[0],t[g*(g-1)+1]=n[1]),v=io(v,t,g)}));var w=!b&&c;y||(y=uo(w?4:3));var T=zo(b&&16===y.length?eo(y,4,3):y,w);return[x=Kr(x,g,g),S,E,v,y,T,u,h,c||f]}(e,n,r,N,A,L))[0],y=s[1],v=s[2],S=s[4],I=s[5],R=s[7],P=s[8],h=(l=(c=jo(x=s[3],C=s[6],E,O))[0])[0],p=l[1],d=l[2],f=l[3],g=c[1],b=c[2],w=c[3],T=(u=jo(v,oo(C,function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i];return n[e-1]=0,n}(S,P?4:3)),E,O))[3],k=[(k=u[1])[0]+(j=u[0])[0]-h,k[1]+j[1]-p],_=qo(e),M=qo(ko(i,i,!0).offsetParent||document.body,!0),t&&(z=qo(t)),D=Wo([b[0],b[1]],w)}return{rotation:D,targetClientRect:_,containerClientRect:M,moveableClientRect:z,beforeDirection:T,direction:w,target:e,left:h,top:p,right:d,bottom:f,pos1:b[0],pos2:b[1],pos3:b[2],pos4:b[3],width:E,height:O,rootMatrix:m,beforeMatrix:y,offsetMatrix:v,targetMatrix:S,matrix:x,targetTransform:I,is3d:P,beforeOrigin:k,origin:g,transformOrigin:C,targetOrigin:R}}function qo(t,e){var n=t.getBoundingClientRect(),i={left:n.left,right:n.right,top:n.top,bottom:n.bottom,width:n.width,height:n.height};return e&&(i.clientLeft=t.clientLeft,i.clientTop=t.clientTop,i.clientWidth=t.clientWidth,i.clientHeight=t.clientHeight,i.scrollWidth=t.scrollWidth,i.scrollHeight=t.scrollHeight),i}function Vo(t){if(t){var e=t.getAttribute("data-direction");if(e){var n=[0,0];return e.indexOf("w")>-1&&(n[0]=-1),e.indexOf("e")>-1&&(n[0]=1),e.indexOf("n")>-1&&(n[1]=-1),e.indexOf("s")>-1&&(n[1]=1),n}}}function Qo(t,e){return[oo(e,t[0]),oo(e,t[1]),oo(e,t[2]),oo(e,t[3])]}function $o(t){return Qo([t.pos1,t.pos2,t.pos3,t.pos4],[t.left,t.top])}function Ko(t,e){return e?Math.round(t/e)*e:t}function Jo(t,e){return t.forEach((function(n,i){t[i]=Ko(t[i],e)})),t}function Zo(t,e){t[e]&&(t[e].unset(),t[e]=null)}function ta(t,e,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ea(t,e,n){var i=e.datas;i.datas||(i.datas={});var r=Nr({},n,{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,datas:i.datas});return i.isStartEvent?i.lastEvent=r:i.isStartEvent=!0,r}function na(t,e,n){var i=e.datas,r="isDrag"in n?n.isDrag:e.isDrag;return i.datas||(i.datas={}),Nr({isDrag:r},n,{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:i.lastEvent,isDouble:e.isDouble,datas:i.datas})}function ia(t,e,n,i){return i&&vc.prototype.triggerEvent.call(t,e,n),t.triggerEvent(e,n)}function ra(t,e){return window.getComputedStyle(t,e)}function oa(t,e,n){var i={},r={};return t.filter((function(t){var o=t.name;if(i[o]||!e.some((function(e){return t[e]})))return!1;if(!n&&t.ableGroup){if(r[t.ableGroup])return!1;r[t.ableGroup]=!0}return i[o]=!0,!0}))}function aa(t,e,n){return t*(e?n:1/n)}function sa(t,e,n){return t*(e?1/n:n)}function ca(t,e){return t===e||null==t&&null==e}function la(t,e){var n=[],i=[];return t.forEach((function(r,o){var a=e(r,o,t),s=i.indexOf(a),c=n[s]||[];-1===s&&(i.push(a),n.push(c)),c.push(r)})),n}function ua(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function ha(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(e)-Math.abs(t)})),t[0]}function pa(t,e,n){return so(Jr(t,n),to(e,n),n)}function da(t,e){var n;return n=pa(t.rootMatrix,[e.distX,e.distY],t.is3d?4:3),e.distX=n[0],e.distY=n[1],e}function fa(t,e,n,i,r){return ao(No(t,oo(n,e),r),i)}function ga(t,e,n){return[[e[0],e[0]*t[1]/t[0]],[e[1]*t[0]/t[1],e[1]]].filter((function(t){return t.every((function(t,i){return n?t<=e[i]:t>=e[i]}))}))[0]||t}function ba(t,e){var n=ci(t),i=n.value;return"%"===n.unit?i*e/100:i}function ma(t,e,n){return n?t/e*100+"%":t+"px"}function va(t,e,n,i,r){var o=t[n],a=o.direction,s=o.pos,c=o.vertical,l=o.sub,u=[i*Math.abs(o.horizontal),r*Math.abs(c)];a&&!l?a.split("").forEach((function(n){var i="n"===n||"s"===n;t.forEach((function(t,r){var o=t.direction,a=t.horizontal,s=t.vertical,c=t.pos;o&&-1!==o.indexOf(n)&&(e[r]=oo(c,[i||!a?0:u[0],i&&s?u[1]:0]))}))})):e[n]=oo(s,u)}function ya(t,e){var n=e.datas,i=t.state,r=i.moveableClientRect,o=i.pos1,a=ao(pa(i.rootMatrix,[e.clientX-r.left,e.clientY-r.top],i.is3d?4:3),o),s=bo({datas:n,distX:a[0],distY:a[1]});return[s[0],s[1]]}function xa(t){return Math.abs(t)<=1e-7?0:t}function Sa(t,e,n,i,r,o,a){var s="Start"===r;if(!t.state.target||s&&i.indexOf("Control")>-1&&!o.isRequest&&t.areaElement===o.inputEvent.target)return!1;var c=""+n+i+r,l=""+n+i+"Condition",u="End"===r,h=r.indexOf("After")>-1,p=s&&(!t.targetDragger||!t.controlDragger||!t.targetDragger.isFlag()||!t.controlDragger.isFlag());p&&t.updateRect(r,!0,!1),""!==r||h||da(t.state,o);var d=i.indexOf("Group")>-1,f=t[e].slice();if(o.isRequest){var g=o.requestAble;f.some((function(t){return t.name===g}))||f.push.apply(f,t.props.ables.filter((function(t){return t.name===g})))}if(!f.length)return!1;var b=f.filter((function(t){return t[c]})),m=o.datas,v=m.render||(m.render={}),y=Nr({},o,{datas:v,originalDatas:m});p&&b.forEach((function(e){e.unset&&e.unset(t)}));var x=b.filter((function(e){var n=s&&e[l],i=e.name,r=m[i]||(m[i]={});return!(n&&!e[l](o,t))&&e[c](t,Nr({},o,{datas:r,originalDatas:m}))})),S=x.length;if(s){if(b.length&&!S)return t.state.dragger=null,t.moveables&&t.moveables.forEach((function(t){t.state.dragger=null})),!1;!function(t,e,n){var i=ea(t,n,{isPinch:!!n.isPinch}),r=e?"Group":"";e&&(i.targets=t.props.targets),ia(t,"onRender"+r+"Start",i)}(t,d,y)}else u?function(t,e,n){var i=ea(t,n,{isPinch:!!n.sPinch,isDrag:n.isDrag}),r=e?"Group":"";e&&(i.targets=t.props.targets),ia(t,"onRender"+r+"End",i)}(t,d,y):h&&!S||function(t,e,n){var i=ea(t,n,{isPinch:!!n.isPinch}),r=e?"Group":"";e&&(i.targets=t.props.targets),ia(t,"onRender"+r,i)}(t,d,y);if(u&&(t.state.dragger=null),t.isUnmounted)return!1;(!s&&S&&!a||u)&&(x.some((function(t){return t.updateRect}))&&!d?t.updateRect(r,!1,!1):t.updateRect(r,!0,!1),t.forceUpdate()),s||u||h||!S||Sa(t,e,n,i,r+"After",o)}function Ea(t,e,n){var i=t.controlBox.getElement(),r=[];r.push(i),t.props.dragArea||r.push(e);var o=function(e){var n=e.inputEvent.target;return n===t.areaElement||!t.isMoveableElement(n)||n.className.indexOf("moveable-area")>-1||n.className.indexOf("moveable-padding")>-1};return Oa(t,r,"targetAbles",n,{dragstart:o,pinchstart:o})}function Oa(t,e,n,i,r){void 0===r&&(r={});var o=t.props,a={container:window,pinchThreshold:o.pinchThreshold,pinchOutside:o.pinchOutside};return["drag","pinch"].forEach((function(e){["Start","","End"].forEach((function(o){var s=""+e+o.toLowerCase();a[s]=function(a){return!(r[s]&&!r[s](a))&&Sa(t,n,e,i,o,a)}}))})),new Cr(e,a)}var Ca={name:"pinchable",updateRect:!0,props:{pinchable:Boolean},events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},pinchStart:function(t,e){var n=e.datas,i=e.targets,r=e.angle,o=t.props,a=o.pinchable;if(!a)return!1;var s="onPinch"+(i?"Group":"")+"Start",c="drag"+(i?"Group":"")+"ControlStart",l=(!0===a?t.controlAbles:o.ables.filter((function(t){return a.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[c]})),u=ea(t,e,{});i&&(u.targets=i);var h=ia(t,s,u);n.isPinch=!1!==h,n.ables=l;var p=n.isPinch;return!!p&&(l.forEach((function(i){if(n[i.name+"Datas"]={},i[c]){var o=Nr({},e,{datas:n[i.name+"Datas"],parentRotate:r,isPinch:!0});i[c](t,o)}})),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p)},pinch:function(t,e){var n=e.datas,i=e.inputEvent,r=e.targets,o=e.angle;if(n.isPinch){var a=e.distance*(1-1/e.scale),s=ea(t,e,{});r&&(s.targets=r),ia(t,"onPinch"+(r?"Group":""),s);var c="drag"+(r?"Group":"")+"Control";return n.ables.forEach((function(r){r[c]&&r[c](t,Nr({},e,{datas:n[r.name+"Datas"],inputEvent:i,parentDistance:a,parentRotate:o,isPinch:!0}))})),s}},pinchEnd:function(t,e){var n=e.datas,i=e.isPinch,r=e.inputEvent,o=e.targets;if(n.isPinch){var a="onPinch"+(o?"Group":"")+"End",s=na(t,e,{isDrag:i});o&&(s.targets=o),ia(t,a,s);var c="drag"+(o?"Group":"")+"ControlEnd";return n.ables.forEach((function(o){o[c]&&o[c](t,Nr({},e,{isDrag:i,datas:n[o.name+"Datas"],inputEvent:r,isPinch:!0}))})),i}},pinchGroupStart:function(t,e){return this.pinchStart(t,Nr({},e,{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,Nr({},e,{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,Nr({},e,{targets:t.props.targets}))}};function wa(t,e,n,i,r){var o=t.dragger.move(e,n),a=o.originalDatas||o.datas,s=a.draggable||(a.draggable={});return Nr({},r?da(t,o):o,{isDrag:!0,isPinch:!!i,parentEvent:!0,datas:s})}var Ta=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var e=t.prototype;return e.dragStart=function(t,e){return this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},Nr({},this.move(t,e),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var n,i;return this.isFlag?(n=this.prevX+t[0],i=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],i=t[1],this.isFlag=!0),this.prevX=n,this.prevY=i,{type:"drag",clientX:n,clientY:i,inputEvent:e,isDrag:this.isDrag,distX:n-this.startX,distY:i-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentDragger:this}},t}();function Pa(t,e,n,i,r,o){var a=!!n.match(/Start$/g),s=!!n.match(/End$/g),c=r.inputEvent,l=r.isPinch,u=r.datas,h=t.moveables.map((function(t,r){var h={};a?h=(new Ta).dragStart(i,c):(t.state.dragger||(t.state.dragger=u.childDraggers[r]),h=wa(t.state,i,c,l,o));var p=e[n](t,Nr({},h,{parentFlag:!0}));return s&&(t.state.dragger=null),p}));return a&&(u.childDraggers=t.moveables.map((function(t){return t.state.dragger}))),h}function Ia(t,e,n,i,r,o){var a=e.name,s=i[a]||(i[a]=[]),c=!!n.match(/End$/g);return t.moveables.map((function(t,i){var a=s[i]||(s[i]={}),l="function"==typeof r?r(t,a):r,u=e[n](t,Nr({},l,{datas:a,parentFlag:!0}));return u&&o&&o(t,a,u,i),c&&(t.state.dragger=null),u}))}function ka(t){return t.isRequest?("resizable"===t.requestAble||"scalable"===t.requestAble)&&t.parentDirection:di(t.inputEvent.target,wo("direction"))}function _a(t,e,n,i,r,o){var a=r[0],s=r[1],c=o[0],l=o[1],u=[],h=i?0:1,p="vertical"===e?"horizontal":"vertical",d=la(t.filter((function(t){return t.type===e})),(function(t){return t.element})).map((function(t){return t[0]})).filter((function(t){var e=t.pos;return e[h]<=l&&c<=e[h]+t.sizes[h]}));return d.forEach((function(t){var e=t.pos[i],r=e+t.sizes[i];d.forEach((function(t){var o=t.pos,c=t.sizes,l=t.element,h=o[i],f=h+c[i],g=0,b=0,m=!0;if(r<=h)a<(g=f-(b=r-h))-n&&(m=!1);else{if(!(f<=e))return;s>(g=h-(b=e-f))+n&&(m=!1)}if(m&&u.push({pos:"vertical"===p?[g,o[1]]:[o[0],g],element:l,sizes:c,size:0,type:p,gap:b,gapGuidelines:d}),r<=a&&s<=h){var v=(h+r-(s-a))/2;Ko(a-(v-n),.1)>=0&&u.push({pos:"vertical"===p?[v,o[1]]:[o[0],v],element:l,sizes:c,size:0,type:p,gap:r-a,gapGuidelines:d})}}))})),u}function Ma(t,e,n,i,r){var o=function(t){var e=t.state,n=e.guidelines,i=e.containerClientRect,r=i.scrollHeight,o=i.scrollWidth,a=t.props,s=a.snapHorizontal,c=void 0===s||s,l=a.snapVertical,u=void 0===l||l,h=a.snapGap,p=void 0===h||h,d=a.verticalGuidelines,f=a.horizontalGuidelines,g=a.snapThreshold,b=void 0===g?5:g,m=n.slice();if(p){var v=Lo($o(t.state)),y=v.top,x=v.left,S=v.bottom,E=v.right,O=n.filter((function(t){return t.element}));m.push.apply(m,_a(O,"horizontal",b,0,[x,E],[y,S]).concat(_a(O,"vertical",b,1,[y,S],[x,E])))}return c&&f&&f.forEach((function(t){m.push({type:"horizontal",pos:[0,Ko(t,.1)],size:o})})),u&&d&&d.forEach((function(t){m.push({type:"vertical",pos:[Ko(t,.1),0],size:r})})),m}(t),a=t.props,s=a.snapElement,c=void 0===s||s,l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,i=0;i<n;++i){var r=t[i];if(!Zn(r))return r}return t[n]}(r,a.snapThreshold,5);return{vertical:Ra(o,"vertical",e,l,i,c),horizontal:Ra(o,"horizontal",n,l,i,c)}}function za(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],i=n.guidelineInfos[0];return{isSnap:e,offset:i.offset,dist:i.dist,pos:n.pos,guideline:i.guideline}}function Ra(t,e,n,i,r,o){if(!t||!t.length)return{isSnap:!1,posInfos:[]};var a="vertical"===e?0:1,s=n.map((function(n){var s=t.map((function(t){var e=n-t.pos[a];return{offset:e,dist:Math.abs(e),guideline:t}})).filter((function(t){var n=t.guideline;return!(!o&&n.element||!r&&n.center||n.type!==e||t.dist>i)})).sort((function(t,e){return t.dist-e.dist}));return{pos:n,guidelineInfos:s}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist}));return{isSnap:s.length>0,posInfos:s}}function Da(t,e){return t.slice().sort((function(t,n){var i=t.sign[e],r=n.sign[e],o=n.offset[e],a=Math.abs(t.offset[e]),s=Math.abs(o);return i?r?t.isBound&&n.isBound?s-a:t.isBound?-1:n.isBound?1:t.isSnap&&n.isSnap?a-s:t.isSnap?-1:n.isSnap||a<1e-7?1:s<1e-7?-1:a-s:-1:1}))[0]}function Na(t,e){var n=ro(e[0][0],e[1][0]),i=ro(e[0][1],e[1][1]);return{vertical:n<=t[0],horizontal:i<=t[1]}}function Aa(t,e){var n,i,r=e[0],o=e[1],a=o[0]-r[0],s=o[1]-r[1];return Math.abs(a)<1e-7&&(a=0),Math.abs(s)<1e-7&&(s=0),a?s?(n=s/a*(t[0]-r[0])+r[1],i=t[1]):(n=r[1],i=t[1]):(n=r[0],i=t[0]),n-i}function La(t,e,n){void 0===n&&(n=1e-7);var i=Aa(t[0],e)<=0;return t.slice(1).every((function(t){var r=Aa(t,e);return r<=0===i||Math.abs(r)<=n}))}function Ba(t,e,n,i,r){return void 0===r&&(r=0),i&&e-r<=t||!i&&t<=n+r?{isBound:!0,offset:i?e-t:n-t}:{isBound:!1,offset:0}}function ja(t,e,n,i,r){var o,a=t[0],s=t[1],c=e[0],l=e[1],u=xa(s[1]-a[1]),h=xa(s[0]-a[0]),p=xa(l[1]-c[1]);if(!xa(l[0]-c[0])){if(r&&!u)return{isBound:!1,offset:0};if(h)return Ba(u/h*(c[0]-a[0])+a[1],c[1],l[1],n,i);var d=c[0]-a[0];return{isBound:o=Math.abs(d)<=(i||0),offset:o?d:0}}return p||r&&!h?{isBound:!1,offset:0}:u?Ba((c[1]-a[1])/(u/h)+a[0],c[0],l[0],n,i):(d=c[1]-a[1],{isBound:o=Math.abs(d)<=(i||0),offset:o?d:0})}function Ga(t,e,n,i){return e.map((function(e){var r=e[0],o=function(t,e,n){var i=t.props.innerBounds;if(!i)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var r=i.left,o=i.top,a=i.width,s=i.height,c=[[r,o],[r,o+s]],l=[[r,o],[r+a,o]],u=[[r+a,o],[r+a,o+s]],h=[[r,o+s],[r+a,o+s]],p=Na(n,e),d=p.horizontal,f=p.vertical;if(La([n,[r,o],[r+a,o],[r,o+s],[r+a,o+s]],e))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=ja(e,l,f),b=ja(e,h,f),m=ja(e,c,d),v=ja(e,u,d),y=g.isBound&&b.isBound,x=g.isBound||b.isBound,S=m.isBound&&v.isBound,E=m.isBound||v.isBound,O=ha(g.offset,b.offset),C=ha(m.offset,v.offset),w=[0,0],T=!1,P=!1;return Math.abs(C)<Math.abs(O)?(w=[O,0],T=x,P=y):(w=[0,C],T=E,P=S),{isAllBound:P,isVerticalBound:x,isHorizontalBound:E,isBound:T,offset:w}}(t,[e[1],e[2]],n),a=o.isBound,s=o.offset,c=o.isVerticalBound,l=o.isHorizontalBound,u=bo({datas:i,distX:s[0],distY:s[1]}).map((function(t,e){return t*(r[e]?2/r[e]:0)}));return{sign:r,isBound:a,isVerticalBound:c,isHorizontalBound:l,isSnap:!1,offset:u}}))}function Ha(t,e,n){return function(t,e){var n=[],i=t[0],r=t[1];return i&&r?n.push([[0,2*r],t,[-i,r]],[[2*i,0],t,[i,-r]]):i?(n.push([[2*i,0],[i,1],[i,-1]]),e&&n.push([[0,-1],[i,-1],[-i,-1]],[[0,1],[i,1],[-i,1]])):r?(n.push([[0,2*r],[1,r],[-1,r]]),e&&n.push([[-1,0],[-1,r],[-1,-r]],[[1,0],[1,r],[1,-r]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}(e,n).map((function(e){var n=e[2];return[e[0],yo(t,e[1]),yo(t,n)]}))}function Fa(t,e,n,i){var r=i?t.map((function(t){return co(t,i)})):t,o=[n].concat(e);return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].some((function(t,e){return!La(o,t)}))}function Xa(t,e,n){var i=t.props.bounds||{},r=i.left,o=i.top,a=i.right,s=i.bottom,c={left:void 0===r?-1/0:r,top:void 0===o?-1/0:o,right:void 0===a?1/0:a,bottom:void 0===s?1/0:s};return{vertical:Ua(c,e,!0),horizontal:Ua(c,n,!1)}}function Ua(t,e,n){var i=t[n?"left":"top"],r=t[n?"right":"bottom"],o=Math.min.apply(Math,e),a=Math.max.apply(Math,e);return i+1>o?{isBound:!0,offset:o-i,pos:i}:r-1<a?{isBound:!0,offset:a-r,pos:r}:{isBound:!1,offset:0,pos:0}}function Wa(t,e,n){return(n?t.map((function(t){return co(t,n)})):t).some((function(t){return t[0]<e.left&&Math.abs(t[0]-e.left)>.1||t[0]>e.right&&Math.abs(t[0]-e.right)>.1||t[1]<e.top&&Math.abs(t[1]-e.top)>.1||t[1]>e.bottom&&Math.abs(t[1]-e.bottom)>.1}))}function Ya(t,e,n){var i=No(t,[e.clientLeft,e.clientTop],n);return[e.left+i[0],e.top+i[1]]}function qa(t){var e=t.state;if(!e.guidelines||!e.guidelines.length){var n=t.props,i=n.horizontalGuidelines,r=n.verticalGuidelines,o=n.elementGuidelines,a=void 0===o?[]:o,s=n.snapCenter;if(n.innerBounds||n.bounds||(void 0===i?[]:i).length||(void 0===r?[]:r).length||a.length){var c=e.targetClientRect,l=c.top,u=c.left,h=e.rootMatrix,p=e.is3d?4:3,d=Ya(h,e.containerClientRect,p),f=d[0],g=d[1],b=$o(e),m=ao([Math.min.apply(Math,b.map((function(t){return t[0]}))),Math.min.apply(Math,b.map((function(t){return t[1]})))],pa(h,[u-f,l-g],p)).map((function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e})),v=m[0],y=m[1],x=[];a.forEach((function(t){var e=t.getBoundingClientRect(),n=e.left-f,i=e.top-g,r=i+e.height,o=n+e.width,a=pa(h,[n,i],p),c=a[0],l=a[1],u=pa(h,[o,r],p),d=u[0],b=u[1],m=d-c,S=b-l,E=[m,S];x.push({type:"vertical",element:t,pos:[Ko(c+v,.1),l],size:S,sizes:E}),x.push({type:"vertical",element:t,pos:[Ko(d+v,.1),l],size:S,sizes:E}),x.push({type:"horizontal",element:t,pos:[c,Ko(l+y,.1)],size:m,sizes:E}),x.push({type:"horizontal",element:t,pos:[c,Ko(b+y,.1)],size:m,sizes:E}),s&&(x.push({type:"vertical",element:t,pos:[Ko((c+d)/2+v,.1),l],size:S,sizes:E,center:!0}),x.push({type:"horizontal",element:t,pos:[c,Ko((l+b)/2+y,.1)],size:m,sizes:E,center:!0}))})),e.guidelines=x,e.enableSnap=!0}}}function Va(t,e){var n=t.props,i=n.snappable,r=n.bounds,o=n.innerBounds,a=n.verticalGuidelines,s=n.horizontalGuidelines,c=t.state,l=c.guidelines;return!(!i||!c.enableSnap||e&&!0!==i&&i.indexOf(e)<0||!(r||o||l&&l.length||a&&a.length||s&&s.length))}function Qa(t,e,n,i,r){var o=function(t,e,n,i){var r=e[0]-t[0],o=e[1]-t[1];if(Math.abs(r)<1e-7&&(r=0),Math.abs(o)<1e-7&&(o=0),!r)return i?[0,0]:[0,n];if(!o)return i?[n,0]:[0,0];var a=o/r,s=t[1]-a*t[0];return i?[n,a*(e[0]+n)+s-e[1]]:[(e[1]+n-s)/a-e[0],n]}(t,e,n,i);if(!o)return[0,0];var a=bo({datas:r,distX:o[0],distY:o[1]});return[a[0],a[1]]}function $a(t,e,n,i,r,o){var a=Ao(t,e,n,o?4:3);return Qo(a,ao(i,xo(a,r)))}function Ka(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Ja(t,e){return t.isBound?t.offset:e.isSnap?za(e).offset:0}function Za(t,e,n,i){void 0===i&&(i=n);var r=Xa(t,i.map((function(t){return t[0]})),i.map((function(t){return t[1]}))),o=r.horizontal,a=r.vertical,s=e?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Ma(t,n.map((function(t){return t[0]})),n.map((function(t){return t[1]}))),c=s.horizontal,l=s.vertical,u=Ja(o,c),h=Ja(a,l),p=Math.abs(u),d=Math.abs(h);return{horizontal:{isBound:o.isBound,isSnap:c.isSnap,offset:u,dist:p},vertical:{isBound:a.isBound,isSnap:l.isSnap,offset:h,dist:d}}}function ts(t){return t?t/Math.abs(t):0}function es(t,e,n,i,r,o){var a=function(t,e){var n=[],i=[-t[0],-t[1]];return t[0]&&t[1]?(n.push([i,[t[0],-t[1]]],[i,[-t[0],t[1]]]),e&&n.push([i,t])):t[0]?e?n.push([i,[i[0],-1]],[i,[i[0],1]],[i,[t[0],-1]],[i,t],[i,[t[0],1]]):n.push([[i[0],-1],[t[0],-1]],[[i[0],0],[t[0],0]],[[i[0],1],[t[0],1]]):t[1]?e?n.push([i,[-1,i[1]]],[i,[1,i[1]]],[i,[-1,t[1]]],[i,[1,t[1]]],[i,t]):n.push([[-1,i[1]],[-1,t[1]]],[[0,i[1]],[0,t[1]]],[[1,i[1]],[1,t[1]]]):n.push([i,[1,0]],[i,[-1,0]],[i,[0,-1]],[i,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),n}(n,i),s=Ha(e,n,i),c=function(t,e,n,i,r,o){return n.map((function(n){var a=n[0],s=n[1],c=yo(e,a),l=yo(e,s),u=i?function(t,e,n,i){var r=function(t,e,n){var i=t.props.bounds||{},r=i.left,o=void 0===r?-1/0:r,a=i.top,s=void 0===a?-1/0:a,c=i.right,l=void 0===c?1/0:c,u=i.bottom,h=void 0===u?1/0:u,p=n[0],d=n[1],f=ao(n,e),g=f[0],b=f[1];Math.abs(g)<1e-7&&(g=0),Math.abs(b)<1e-7&&(b=0);var m=b>0,v=g>0,y={isBound:!1,offset:0,pos:0},x={isBound:!1,offset:0,pos:0};if(0===g&&0===b)return{vertical:y,horizontal:x};if(0===g)m?h<d&&(x.pos=h,x.offset=d-h):s>d&&(x.pos=s,x.offset=d-s);else if(0===b)v?l<p&&(y.pos=l,y.offset=p-l):o>p&&(y.pos=o,y.offset=p-o);else{var S=b/g,E=n[1]-S*p,O=0,C=0,w=!1;v&&l<=p?(O=S*l+E,C=l,w=!0):!v&&p<=o&&(O=S*o+E,C=o,w=!0),w&&(O<s||O>h)&&(w=!1),w||(m&&h<=d?(C=((O=h)-E)/S,w=!0):!m&&d<=s&&(C=((O=s)-E)/S,w=!0)),w&&(y.isBound=!0,y.pos=C,y.offset=p-C,x.isBound=!0,x.pos=O,x.offset=d-O)}return{vertical:y,horizontal:x}}(t,e,n),o=r.horizontal,a=r.vertical,s=i?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,n){var i=n[0],r=n[1],o=e[0],a=e[1],s=ao(n,e),c=s[0],l=s[1],u=l>0,h=c>0;c=xa(c),l=xa(l);var p={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===c&&0===l)return{vertical:p,horizontal:d};var f=Ma(t,c?[i]:[],l?[r]:[]),g=f.vertical,b=f.horizontal;g.posInfos.filter((function(t){var e=t.pos;return h?e>=o:e<=o})),b.posInfos.filter((function(t){var e=t.pos;return u?e>=a:e<=a})),g.isSnap=g.posInfos.length>0,b.isSnap=b.posInfos.length>0;var m=za(g),v=m.isSnap,y=m.guideline,x=za(b),S=x.isSnap,E=x.guideline,O=S?E.pos[1]:0,C=v?y.pos[0]:0;if(0===c)S&&(d.isSnap=!0,d.pos=E.pos[1],d.offset=r-d.pos);else if(0===l)v&&(p.isSnap=!0,p.pos=C,p.offset=i-C);else{var w=l/c,T=n[1]-w*i,P=0,I=0,k=!1;v?(P=w*(I=C)+T,k=!0):S&&(I=((P=O)-T)/w,k=!0),k&&(p.isSnap=!0,p.pos=I,p.offset=i-I,d.isSnap=!0,d.pos=P,d.offset=r-P)}return{vertical:p,horizontal:d}}(t,e,n),c=s.horizontal,l=s.vertical,u=Ka(o,c),h=Ka(a,l),p=Math.abs(u),d=Math.abs(h);return{horizontal:{isBound:o.isBound,isSnap:c.isSnap,offset:u,dist:p},vertical:{isBound:a.isBound,isSnap:l.isSnap,offset:h,dist:d}}}(t,c,l,r):Za(t,r,[l]),h=u.horizontal,p=h.dist,d=h.offset,f=h.isBound,g=h.isSnap,b=u.vertical,m=b.dist,v=b.offset,y=b.isBound,x=b.isSnap,S=ao(s,a);if(!v&&!d)return{isBound:y||f,isSnap:x||g,sign:S,offset:[0,0]};var E=p<m,O=Qa(c,l,-(E?v:d),E,o).map((function(t,e){return t*(S[e]?2/S[e]:0)}));return{sign:S,isBound:E?y:f,isSnap:E?x:g,offset:O}}))}(t,e,a,i,r,o).concat(Ga(t,s,yo(e,[0,0]),o)),l=Da(c,0),u=Da(c,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:u.isBound,offset:u.offset[1]}}}function ns(t,e,n,i,r,o,a,s){for(var c=$o(t.state),l=t.props.keepRatio,u=0,h=0,p=0;p<2;++p){var d=es(t,e(u,h),r,l,a,s),f=d.width,g=d.height,b=f.isBound,m=g.isBound,v=f.offset,y=g.offset;if(1===p&&(b||(v=0),m||(y=0)),0===p&&a&&!b&&!m)return[0,0];if(l){var x=Math.abs(v)*(n?1/n:1),S=Math.abs(y)*(i?1/i:1);(b&&m?x<S:m||!b&&x<S)?v=n*y/i:y=i*v/n}u+=v,h+=y}if(r[0]&&r[1]){var E=function(t,e,n,i,r){var o=[-n[0],-n[1]],a=t.state,s=a.width,c=a.height,l=t.props.bounds,u=1/0,h=1/0;if(l){var p=l.left,d=void 0===p?-1/0:p,f=l.top,g=void 0===f?-1/0:f,b=l.right,m=void 0===b?1/0:b,v=l.bottom,y=void 0===v?1/0:v;[[n[0],-n[1]],[-n[0],n[1]]].forEach((function(t){var n=t[0]!==o[0],a=t[1]!==o[1],l=yo(e,t),p=ts(t[1]-o[1]),f=ts(t[0]-o[0]),b=360*Zr(i,l)/Math.PI;if(a){var v=l.slice();(Math.abs(b-360)<2||Math.abs(b-180)<2)&&(v[1]=i[1]);var x=Qa(i,v,(i[1]<l[1]?y:g)-l[1],!1,r)[1];isNaN(x)||(h=c+p*x)}if(n){v=l.slice(),(Math.abs(b-90)<2||Math.abs(b-270)<2)&&(v[0]=i[0]);var S=Qa(i,v,(i[0]<l[0]?m:d)-l[0],!0,r)[0];isNaN(S)||(u=s+f*S)}}))}return{maxWidth:u,maxHeight:h}}(t,c,r,o,s),O=E.maxWidth,C=E.maxHeight,w=function(t,e,n,i,r,o,a,s,c){var l=Za(t,s,[yo(e,a)]),u=l.horizontal.offset,h=l.vertical.offset;if(h||u){var p=bo({datas:c,distX:-h,distY:-u}),d=p[1];return[Math.min(r||1/0,n+a[0]*p[0])-n,Math.min(o||1/0,i+a[1]*d)-i]}return[0,0]}(t,e(u,h),n+u,i+h,O,C,r,a,s);u+=v=w[0],h+=y=w[1]}return[u,h]}function is(t,e,n,i){if(!Va(t,"rotatable"))return i;var r=i*Math.PI/180,o=[e.pos1,e.pos2,e.pos3,e.pos4].map((function(t){return ao(t,n)})),a=o.map((function(t){return co(t,r)})),s=function(t,e,n,i,r){var o=t.props.bounds,a=r*Math.PI/180;if(!o)return[];var s=o.left,c=o.top,l=o.right,u=o.bottom,h=(void 0===s?-1/0:s)-i[0],p=(void 0===l?1/0:l)-i[0],d=(void 0===c?-1/0:c)-i[1],f=(void 0===u?1/0:u)-i[1],g={left:h,top:d,right:p,bottom:f};if(!Wa(n,g,0))return[];var b=[];return[[h,0],[p,0],[d,1],[f,1]].forEach((function(t,i){var r=t[0],o=t[1];n.forEach((function(t){var n=Zr([0,0],t);b.push.apply(b,function(t,e,n){var i=Go(t),r=Math.sqrt(i*i-e*e)||0;return[r,-r].sort((function(e,i){return Math.abs(e-t[n?0:1])-Math.abs(i-t[n?0:1])})).map((function(t){return Zr([0,0],n?[t,e]:[e,t])}))}(t,r,o).map((function(t){return a+t-n})).filter((function(t){return!Wa(e,g,t)})).map((function(t){return Ko(180*t/Math.PI,1e-7)})))}))})),b}(t,o,a,n,i).concat(function(t,e,n,i,r){var o=t.props.innerBounds,a=r*Math.PI/180;if(!o)return[];var s=o.left,c=o.top,l=s-i[0],u=s+o.width-i[0],h=c-i[1],p=c+o.height-i[1],d=[[l,h],[u,h],[l,p],[u,p]],f=yo(n,[0,0]);if(!Fa(n,d,f,0))return[];var g=[],b=d.map((function(t){return[Go(t),Zr([0,0],t)]}));return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach((function(t){var n=Zr([0,0],function(t){var e=t[0],n=t[1],i=n[0]-e[0],r=n[1]-e[1];if(!i)return[e[0],0];if(!r)return[0,e[1]];var o=r/i,a=-o*e[0]+e[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),i=function(t){var e=t[0],n=t[1],i=n[0]-e[0],r=n[1]-e[1];if(!i)return Math.abs(e[0]);if(!r)return Math.abs(e[1]);var o=r/i;return Math.abs((-o*e[0]+e[1])/Math.sqrt(Math.pow(o,2)+1))}(t);g.push.apply(g,b.filter((function(t){var e=t[0];return e&&i<=e})).map((function(t){var e=t[0],r=t[1],o=Math.acos(e?i/e:0);return[a+(r+o)-n,a+(r-o)-n]})).reduce((function(t,e){return t.push.apply(t,e),t}),[]).filter((function(t){return!Fa(e,d,f,t)})).map((function(t){return Ko(180*t/Math.PI,1e-7)})))})),g}(t,o,a,n,i));return s.sort((function(t,e){return Math.abs(t-i)-Math.abs(e-i)})),s.length?s[0]:i}function rs(t){var e=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(t){var n=t.guideline;e.indexOf(n)>-1||e.push(n)}))})),e}function os(t,e,n,i){var r=t-n,o=r<0?r+e:i;return{size:(r<0?0:r)-o,pos:o}}function as(t,e,n,i){var r=[],o=la(t.filter((function(t){return t.element&&!t.gap})),(function(t){var n=t.element,o=t.pos,a=o[i],s=(Math.min(0,a-e)<0?-1:1)+"_"+o[i?0:1],c=function(t,e,i){var r=pi(t,(function(t){return n===t[0]&&a===t[1]}));return r>-1?t[r]:void 0}(r);return c?c[2]:(r.push([n,a,s]),s)}));return o.forEach((function(t){t.sort((function(t,r){return os(t.pos[i],t.size,e,n).size-os(r.pos[i],t.size,e,n).size||t.pos[i?0:1]-r.pos[i?0:1]}))})),o}function ss(t,e,n,i,r,o,a,s,c,l,u,h){var p=e[0],d=e[1],f=e[2],g=e[3];return ua(t.map((function(t,e){var b=!0;return t.map((function(t,m){var v,y=t.pos,x=os(y[l],t.size,i,r),S=x.pos,E=x.size;if(E<a)return null;var O=b;b=!1;var C=s&&O?parseFloat(E.toFixed(c)):0;return h.createElement("div",{className:wo("line",p,"guideline","dashed"),"data-size":C>0?u(C):"",key:p+"LinkGuidline"+e+"-"+m,style:(v={},v[d]=n+S+"px",v[f]=-o+y[l?0:1]+"px",v[g]=E+"px",v)})}))})))}function cs(t,e,n,i,r,o){var a=e[0],s=e[1],c=e[2],l=e[3];return t.map((function(t,e){var u,h=t.pos;return o.createElement("div",{className:wo("line",a,"guideline","target","bold",t.type),key:a+"TargetGuidline"+e,style:(u={},u[s]=n+"px",u[c]=-i+h+"px",u[l]=r+"px",u)})}))}function ls(t,e,n,i,r,o){var a=e[0],s=e[1],c=e[2],l=e[3];return t.map((function(t,e){var u,h=t.pos,p=t.size;return o.createElement("div",{className:wo("line",a,"guideline",t.element?"bold":""),key:a+"Guidline"+e,style:(u={},u[s]=-n+h[r]+"px",u[c]=-i+h[r?0:1]+"px",u[l]=p+"px",u)})}))}function us(t,e,n,i){var r=t.filter((function(t){return t.element&&t.gap&&t.type===e})),o="vertical"===e?[0,1]:[1,0],a=o[0],s=o[1];return ua(r.map((function(t,e){var r=t.pos,o=t.gap,c=t.gapGuidelines,l=t.sizes,u=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(t)-Math.abs(e)})),t[0]}(r[s]+l[s]-n[s],r[s]-n[s]-i[s]),h=Math.min(l[s],i[s]);u>0&&u>h?u=2*(u-h/2):u<0&&u<-h&&(u=2*(u+h/2));var p=(u>0?0:i[s])+u/2;return function(t,e,n,i,r,o,a){var s=Math.abs(o),c=r[e]+(o>0?i[0]:0);return t.filter((function(t){return t.pos[e]<=n[e]})).sort((function(t,n){return n.pos[e]-t.pos[e]})).filter((function(t){var n=t.pos[e];return Ko(n+t.sizes[e],1e-4)===Ko(c-s,1e-4)&&(c=n,!0)})).map((function(t){var i=-n[e]+t.pos[e]+t.sizes[e];return Nr({},t,{gap:o,renderPos:e?[a,i]:[i,a]})}))}(c,a,n,i,r,o,p).concat(function(t,e,n,i,r,o,a){var s=Math.abs(o),c=r[e]+(o<0?i[e]:0);return t.filter((function(t){return t.pos[e]>n[e]})).sort((function(t,n){return t.pos[e]-n.pos[e]})).filter((function(t){var n=t.sizes,i=t.pos[e];return Ko(i,1e-4)===Ko(c+s,1e-4)&&(c=i+n[e],!0)})).map((function(t){var i=-n[e]+t.pos[e]-s;return Nr({},t,{gap:o,renderPos:e?[a,i]:[i,a]})}))}(c,a,n,i,r,o,p))})))}function hs(t,e,n,i,r,o){var a=i[0],s=i[1],c=i[2],l=i[3],u=t.props,h=u.snapDigit,p=void 0===h?0:h,d=u.isDisplaySnapDigit,f=void 0===d||d,g="vertical"===n?"horizontal":"vertical",b="vertical"===n?[0,1]:[1,0],m=b[0],v=b[1];return e.map((function(t,e){var n,i=t.renderPos,u=Math.abs(t.gap),h=f?parseFloat(u.toFixed(p)):0;return o.createElement("div",{className:wo("line",a,"guideline","gap"),"data-size":h>0?r(h):"",key:g+"GapGuideline"+e,style:(n={},n[s]=i[m]+"px",n[c]=i[v]+"px",n[l]=u+"px",n)})}))}var ps={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 1;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,e){var n=t.state,i=n.top,r=n.left,o=n.pos1,a=n.pos2,s=n.pos3,c=n.pos4,l=n.snapRenderInfo,u=n.targetClientRect,h=n.containerClientRect,p=n.is3d,d=n.rootMatrix;if(!l||!Va(t,""))return[];var f=p?4:3,g=Math.min(o[0],a[0],s[0],c[0]),b=Math.min(o[1],a[1],s[1],c[1]),m=Ya(d,h,f),v=pa(d,[u.left-m[0],u.top-m[1]],f),y=v[0],x=v[1],S=t.props,E=S.snapThreshold,O=void 0===E?5:E,C=S.snapDigit,w=void 0===C?0:C,T=S.isDisplaySnapDigit,P=void 0===T||T,I=S.snapDistFormat,k=void 0===I?function(t){return t}:I,_=$o(t.state),M=Lo(_),z=M.width,R=M.height,D=M.top,N=M.left,A=M.bottom,L=M.right,B=[],j=[],G=[],H=[],F=[];if(!l.request){if(l.direction&&F.push(function(t,e,n){var i=[];if(n[0]&&n[1])i=[n,[-n[0],n[1]],[n[0],-n[1]]].map((function(t){return yo(e,t)}));else if(n[0]||n[1])t.props.keepRatio?i=[[-1,-1],[-1,1],[1,-1],[1,1],n].map((function(t){return yo(e,t)})):(i=vo(e,n)).length>1&&i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]);else for(var r=[e[0],e[1],e[3],e[2],e[0]],o=0;o<4;++o)i.push(r[o]),i.push([(r[o][0]+r[o+1][0])/2,(r[o][1]+r[o+1][1])/2]);return Ma(t,i.map((function(t){return t[0]})),i.map((function(t){return t[1]})),!0,1)}(t,_,l.direction)),l.snap){var X=Lo(_);l.center&&(X.middle=(X.top+X.bottom)/2,X.center=(X.left+X.right)/2),F.push(function(t,e,n,i){var r=t.props.snapCenter&&!0,o=["left","right"],a=["top","bottom"];return r&&(o.push("center"),a.push("middle")),o=o.filter((function(t){return t in e})),a=a.filter((function(t){return t in e})),Ma(t,o.map((function(t){return e[t]})),a.map((function(t){return e[t]})),r,1)}(t,X))}F.forEach((function(t){var e=t.vertical.posInfos,n=t.horizontal.posInfos;B.push.apply(B,e.map((function(t){return{type:"snap",pos:t.pos}}))),j.push.apply(j,n.map((function(t){return{type:"snap",pos:t.pos}}))),G.push.apply(G,rs(e)),H.push.apply(H,rs(n))}))}!function(t,e,n,i,r){var o=Xa(t,e,n),a=o.vertical,s=o.horizontal,c=s.isBound,l=s.pos;a.isBound&&i.push({type:"bounds",pos:a.pos}),c&&r.push({type:"bounds",pos:l});var u=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),i=n.pos1,r=n.pos2,o=n.pos3,a=n.pos4,s=yo([i,r,o,a],[0,0]),c=e.left,l=e.top,u=e.width,h=e.height,p=[[c,l],[c,l+h]],d=[[c,l],[c+u,l]],f=[[c+u,l],[c+u,l+h]],g=[[c,l+h],[c+u,l+h]],b=[],m=[],v={top:!1,bottom:!1,left:!1,right:!1};return[[i,r],[r,a],[a,o],[o,i]].forEach((function(t){var e=Na(s,t),n=e.horizontal,i=e.vertical,r=ja(t,d,i,1,!0),o=ja(t,g,i,1,!0),a=ja(t,p,n,1,!0),y=ja(t,f,n,1,!0);r.isBound&&!v.top&&(b.push(l),v.top=!0),o.isBound&&!v.bottom&&(b.push(l+h),v.bottom=!0),a.isBound&&!v.left&&(m.push(c),v.left=!0),y.isBound&&!v.right&&(m.push(c+u),v.right=!0)})),{horizontal:b,vertical:m}}(t),h=u.horizontal;u.vertical.forEach((function(t){pi(i,(function(e){return"bounds"===e.type&&e.pos===t}))>=0||i.push({type:"bounds",pos:t})})),h.forEach((function(t){pi(r,(function(e){return"bounds"===e.type&&e.pos===t}))>=0||r.push({type:"bounds",pos:t})}))}(t,[N,L],[D,A],B,j);var U=as(H,y,z,0),W=as(G,x,R,1),Y=["horizontal","left","top","width"],q=["vertical","top","left","height"],V=us(G,"vertical",[r,i],[z,R]),Q=us(H,"horizontal",[r,i],[z,R]),$=G.concat(H);return ia(t,"onSnap",{guidelines:$.filter((function(t){return!t.element})),elements:la($.filter((function(t){return t.element})),(function(t){return t.element})),gaps:V.concat(Q)},!0),hs(t,V,"vertical",Y,k,e).concat(hs(t,Q,"horizontal",q,k,e),ss(U,Y,g,y,z,i,O,P,w,0,k,e),ss(W,q,b,x,R,r,O,P,w,1,k,e),cs(j,Y,g,i,z,e),cs(B,q,b,r,R,e),ls(H,Y,r,i,0,e),ls(G,q,i,r,1,e))},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},qa(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t){return ka(t)||vs(t)},dragControlStart:function(t,e){t.state.snapRenderInfo=null,qa(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t,e){t.state.snapRenderInfo=null,qa(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null}},ds={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,e){var n=t.state,i=n.dragInfo,r=n.beforeOrigin;if(!t.props.throttleDragRotate||!i)return[];var o=i.dist;if(!o[0]&&!o[1])return[];var a=Go(o),s=Zr(o,[0,0]);return[e.createElement("div",{className:wo("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:a+"px",transform:"translate("+r[0]+"px, "+r[1]+"px) rotate("+s+"rad)"}})]},dragStart:function(t,e){var n=e.datas,i=e.parentEvent,r=t.state,o=r.targetTransform,a=r.target;if(r.dragger)return!1;r.dragger=e.parentDragger||t.targetDragger;var s=window.getComputedStyle(a);n.datas={},n.left=parseFloat(s.left||"")||0,n.top=parseFloat(s.top||"")||0,n.bottom=parseFloat(s.bottom||"")||0,n.right=parseFloat(s.right||"")||0,n.transform=o,n.startTranslate=[0,0],go(t,{datas:n}),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,function(t,e){e.absolutePoses=$o(t.state)}(t,n);var c=ea(t,e,{set:function(t){n.startTranslate=t}});return!1!==(i||ia(t,"onDragStart",c))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(r.dragger=null,n.isPinch=!1),!!n.isDrag&&c},drag:function(t,e){var n=e.datas,i=e.parentEvent,r=e.parentFlag,o=e.isPinch,a=e.isRequest,s=e.distX,c=e.distY,l=n.prevDist,u=n.prevBeforeDist,h=n.transform,p=n.startTranslate;if(n.isDrag){var d=t.props,f=d.parentMoveable,g=i?0:d.throttleDrag||0,b=i?0:d.throttleDragRotate||0,m=!1,v=0;if(!i&&b>0&&(s||c)){var y=d.startDragRotate||0,x=Ko(y+180*Zr([0,0],[s,c])/Math.PI,b)-y,S=c*Math.abs(Math.cos((x-90)/180*Math.PI)),E=Go([s*Math.abs(Math.cos(x/180*Math.PI)),S]);v=x*Math.PI/180,s=E*Math.cos(v),c=E*Math.sin(v)}if(!o&&!i&&!r&&(!b||s||c)){var O=function(t,e,n,i,r,o){if(!Va(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a=Qo(o.absolutePoses,[e,n]),s=Lo(a),c=s.left,l=s.right,u=s.top,h=s.bottom,p=[[c,u],[l,u],[c,h],[l,h]];t.props.snapCenter&&p.push([(c+l)/2,(u+h)/2]);var d=Za(t,r,p,a),f=d.vertical,g=d.horizontal,b=function(t,e,n){var i,r=Ga(t,Ha(e,[0,0],!1).map((function(t){var e=t[1],n=t[2];return[t[0].map((function(t){return 2*Math.abs(t)})),e,n]})),yo(e,[0,0]),n),o=Da(r,0),a=Da(r,1),s=0,c=0,l=o.isVerticalBound||a.isVerticalBound,u=o.isHorizontalBound||a.isHorizontalBound;return(l||u)&&(s=(i=function(t,e){var n=t.datas,i=n.absoluteOrigin,r=n.is3d?4:3;return ao(so(n.matrix,oo(n.startDragDist,[t.distX,t.distY]),r),i)}({datas:n,distX:-o.offset[0],distY:-a.offset[1]}))[0],c=i[1]),{vertical:{isBound:l,offset:s},horizontal:{isBound:u,offset:c}}}(t,a,o),m=b.vertical,v=b.horizontal,y=f.isSnap,x=g.isSnap,S=f.isBound||m.isBound,E=g.isBound||v.isBound,O=function(t,e,n,i,r){var o=e[0],a=e[1],s=n[0],c=n[1],l=i[0],u=i[1],h=r[0],p=r[1],d=-h,f=-p;if(t&&o&&a){d=0,f=0;var g=[];if(s&&c?g.push([0,p],[h,0]):s?g.push([h,0]):c?g.push([0,p]):l&&u?g.push([0,p],[h,0]):l?g.push([h,0]):u&&g.push([0,p]),g.length){g.sort((function(t,e){return Go(ao([o,a],t))-Go(ao([o,a],e))}));var b=g[0];if(b[0]&&Math.abs(o)>1e-7)d=-b[0],f=a*Math.abs(o+d)/Math.abs(o)-a;else if(b[1]&&Math.abs(a)>1e-7){var m=a;f=-b[1],d=o*Math.abs(a+f)/Math.abs(m)-o}if(t&&c&&s)if(Math.abs(d)>1e-7&&Math.abs(d)<Math.abs(h))d*=v=Math.abs(h)/Math.abs(d),f*=v;else if(Math.abs(f)>1e-7&&Math.abs(f)<Math.abs(p)){var v;d*=v=Math.abs(p)/Math.abs(f),f*=v}else d=ha(-h,d),f=ha(-p,f)}}else d=o||s?-h:0,f=a||c?-p:0;return[d,f]}(i,[e,n],[S,E],[y,x],[ha(f.offset,m.offset),ha(g.offset,v.offset)]);return[{isBound:S,isSnap:y,offset:O[0]},{isBound:E,isSnap:x,offset:O[1]}]}(t,s,c,b,a,n),C=O[0],w=O[1];m=C.isSnap||w.isSnap||C.isBound||w.isBound,s+=C.offset,c+=w.offset}n.passDeltaX=s-(n.passDistX||0),n.passDeltaY=c-(n.passDistY||0),n.passDistX=s,n.passDistY=c;var T=oo(bo({datas:n,distX:s,distY:c},!0),p),P=oo(bo({datas:n,distX:s,distY:c},!1),p);b||m||(Jo(P,g),Jo(T,g));var I=ao(T,p),k=ao(P,p),_=ao(k,l),M=ao(I,u);n.prevDist=k,n.prevBeforeDist=I;var z=n.left+I[0],R=n.top+I[1],D=n.right-I[0],N=n.bottom-I[1],A=h+" translate("+k[0]+"px, "+k[1]+"px)";if(t.state.dragInfo.dist=i?[0,0]:k,i||f||!_.every((function(t){return!t}))||!M.some((function(t){return!t}))){var L=ea(t,e,{transform:A,dist:k,delta:_,translate:P,beforeDist:I,beforeDelta:M,beforeTranslate:T,left:z,top:R,right:D,bottom:N,isPinch:o});return!i&&ia(t,"onDrag",L),L}}},dragEnd:function(t,e){var n=e.parentEvent,i=e.datas,r=e.isDrag;if(t.state.dragger=null,t.state.dragInfo=null,i.isDrag)return i.isDrag=!1,!n&&ia(t,"onDragEnd",na(t,e,{})),r},dragGroupStart:function(t,e){var n=e.datas,i=e.clientX,r=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var a=Pa(t,this,"dragStart",[i||0,r||0],e,!1),s=ia(t,"onDragGroupStart",Nr({},o,{targets:t.props.targets,events:a}));return n.isDrag=!1!==s,!!n.isDrag&&o},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,e),i=e.datas,r=Pa(t,this,"drag",[i.passDeltaX,i.passDeltaY],e,!1);if(n){var o=Nr({targets:t.props.targets,events:r},n);return ia(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var n=e.isDrag;if(e.datas.isDrag)return this.dragEnd(t,e),Pa(t,this,"dragEnd",[0,0],e,!1),ia(t,"onDragGroupEnd",na(t,e,{targets:t.props.targets})),n},request:function(t){var e={},n=t.getRect(),i=0,r=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(t){return"x"in t?i=t.x-n.left:"deltaX"in t&&(i+=t.deltaX),"y"in t?r=t.y-n.top:"deltaY"in t&&(r+=t.deltaY),{datas:e,distX:i,distY:r}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function fs(t,e,n,i,r,o){var a=No(t.state.rootMatrix,r,t.state.is3d?4:3),s=oo([o.left,o.top],a);e.startAbsoluteOrigin=s,e.prevDeg=Zr(s,[n,i])/Math.PI*180,e.prevSnapDeg=e.prevDeg,e.startDeg=e.prevDeg,e.loop=0}function gs(t,e,n,i,r,o){var a=n.prevDeg,s=is(t,e,n.origin,i);return n.prevDeg=s,[s-a,s,o+s]}function bs(t,e,n,i,r,o,a,s){var c=n.prevDeg,l=n.prevSnapDeg,u=n.startDeg,h=n.loop;c>i&&c>270&&i<90?++n.loop:c<i&&c<90&&i>270&&--n.loop;var p=n.loop,d=360*h+l-u+o,f=360*p+i-u+o;n.prevDeg=f-360*p+u-o;var g=r*((f=Ko(f,a))-o);return s&&(f=(g=is(t,e,n.origin,g))/r+o),n.prevSnapDeg=f-360*p+u-o,[r*(f-d),g,o+g]}function ms(t,e,n,i,r,o,a,s){return bs(t,e,n,Zr(n.startAbsoluteOrigin,[r,o])/Math.PI*180,i,a,s,!0)}function vs(t){return t.isRequest?"rotatable"===t.requestAble:di(t.inputEvent.target,wo("rotation"))}var ys={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},render:function(t,e){var n=t.props;if(!n.rotatable)return null;var i=t.state,r=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=(t||"top").split("-"),c=s[0],l=s[1],u=[i,r];"left"===c?u=[o,i]:"right"===c?u=[r,a]:"bottom"===c&&(u=[a,o]);var h=[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2],p=Wo(u,n);if(l){var d="top"===l||"left"===l,f="bottom"===c||"left"===c;h=u[d&&!f||!d&&f?0:1]}return[h,p]}(n.rotationPosition,i.renderPoses,i.direction),o=r[0],a=r[1];return e.createElement("div",{key:"rotation",className:wo("line rotation-line"),style:{transform:"translate(-50%) translate("+o[0]+"px, "+o[1]+"px) rotate("+a+"rad)"}},e.createElement("div",{className:wo("control","rotation")}))},dragControlCondition:vs,dragControlStart:function(t,e){var n=e.datas,i=e.clientX,r=e.clientY,o=e.parentRotate,a=e.parentFlag,s=e.isPinch,c=e.isRequest,l=t.state,u=l.left,h=l.top,p=l.origin,d=l.beforeOrigin,f=l.direction,g=l.beforeDirection,b=l.targetTransform;if(!c&&!l.target)return!1;var m=t.getRect();if(n.rect=m,n.transform=b,n.left=u,n.top=h,c||s||a){var v=o||0;n.beforeInfo={origin:m.beforeOrigin,prevDeg:v,startDeg:v,prevSnapDeg:v,loop:0},n.afterInfo={origin:m.origin,prevDeg:v,startDeg:v,prevSnapDeg:v,loop:0}}else{n.beforeInfo={origin:m.beforeOrigin},n.afterInfo={origin:m.origin};var y=qo(t.controlBox.getElement());fs(t,n.beforeInfo,i,r,d,y),fs(t,n.afterInfo,i,r,p,y)}n.direction=f,n.beforeDirection=g,n.startRotate=0,n.datas={};var x=ea(t,e,{set:function(t){n.startRotate=t}}),S=ia(t,"onRotateStart",x);return n.isRotate=!1!==S,t.state.snapRenderInfo={request:e.isRequest},!!n.isRotate&&x},dragControl:function(t,e){var n,i,r,o,a,s,c=e.datas,l=e.clientX,u=e.clientY,h=e.parentRotate,p=e.parentFlag,d=e.isPinch,f=c.direction,g=c.beforeDirection,b=c.beforeInfo,m=c.afterInfo,v=c.startRotate,y=c.rect;if(c.isRotate){var x,S,E,O,C,w,T=t.props,P=T.throttleRotate,I=void 0===P?0:P,k=T.parentMoveable;if(!p&&"parentDist"in e){var _=e.parentDist;x=(n=gs(t,y,m,_,0,v))[0],S=n[1],E=n[2],O=(i=gs(t,y,b,_,0,v))[0],C=i[1],w=i[2]}else d||p?(x=(r=bs(t,y,m,h,f,v,I))[0],S=r[1],E=r[2],O=(o=bs(t,y,b,h,f,v,I))[0],C=o[1],w=o[2]):(x=(a=ms(t,y,m,f,l,u,v,I))[0],S=a[1],E=a[2],O=(s=ms(t,y,b,g,l,u,v,I))[0],C=s[1],w=s[2]);if(x||O||k){var M=ea(t,e,{delta:x,dist:S,rotate:E,beforeDist:C,beforeDelta:O,beforeRotate:w,transform:c.transform+" rotate("+S+"deg)",isPinch:!!d});return ia(t,"onRotate",M),M}}},dragControlEnd:function(t,e){var n=e.datas,i=e.isDrag;return!!n.isRotate&&(n.isRotate=!1,ia(t,"onRotateEnd",na(t,e,{})),i)},dragGroupControlCondition:vs,dragGroupControlStart:function(t,e){var n=e.datas,i=e.inputEvent,r=t.state,o=r.left,a=r.top,s=r.beforeOrigin,c=this.dragControlStart(t,e);if(!c)return!1;c.set(n.beforeDirection*t.rotation);var l=Ia(t,this,"dragControlStart",n,Nr({},e,{parentRotate:0}),(function(t,e,n){var r=t.state,c=r.beforeOrigin,l=oo(ao([r.left,r.top],[o,a]),ao(c,s));e.prevClient=l,n.dragStart=ds.dragStart(t,(new Ta).dragStart(l,i))})),u=ia(t,"onRotateGroupStart",Nr({},c,{targets:t.props.targets,events:l}));return n.isRotate=!1!==u,!!n.isRotate&&c},dragGroupControl:function(t,e){var n=e.inputEvent,i=e.datas;if(i.isRotate){var r=this.dragControl(t,e);if(r){var o=i.beforeDirection,a=r.beforeDelta/180*Math.PI,s=Ia(t,this,"dragControl",i,Nr({},e,{parentRotate:r.beforeDist}),(function(t,i,r,s){var c=i.prevClient,l=c[0],u=c[1],h=co([l,u],a*o),p=h[0],d=h[1],f=[p-l,d-u];i.prevClient=[p,d];var g=ds.drag(t,wa(t.state,f,n,!!e.isPinch,!1));r.drag=g}));t.rotation=o*r.beforeRotate;var c=Nr({targets:t.props.targets,events:s,set:function(e){t.rotation=e}},r);return ia(t,"onRotateGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,i=e.datas;if(i.isRotate)return this.dragControlEnd(t,e),Ia(t,this,"dragControlEnd",i,e),ia(t,"onRotateGroupEnd",na(t,e,{targets:t.props.targets})),n},request:function(t){var e={},n=0,i=t.getRotation();return{isControl:!0,requestStart:function(t){return{datas:e}},request:function(t){return"deltaRotate"in t?n+=t.deltaRotate:"rotate"in t&&(n=t.rotate-i),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function xs(t,e,n){var i=t.state,r=i.renderPoses,o=i.rotation,a=t.props.renderDirections,s=void 0===a?e:a,c=t.state.direction,l={};return s.forEach((function(t){l[t]=!0})),s.map((function(t){var e=Wr[t];if(!e||!l[t])return null;var i=Ko(o/Math.PI*180,15)+Yr[t];return c<1&&(i=360-i),i%=180,n.createElement("div",{className:wo("control","direction",t),"data-rotation":i,"data-direction":t,key:"direction-"+t,style:Xo.apply(void 0,[o].concat(e.map((function(t){return r[t]}))))})}))}function Ss(t,e){return xs(t,Ur,e)}function Es(t,e){return xs(t,["nw","ne","sw","se"],e)}var Os={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,e){var n=t.props;if(n.resizable)return n.edge?Es(t,e):Ss(t,e)},dragControlCondition:ka,dragControlStart:function(t,e){var n,i=e.inputEvent,r=e.isPinch,o=e.datas,a=e.parentFlag,s=e.parentDirection||(r?[0,0]:Vo(i.target)),c=t.state,l=c.target,u=c.width,h=c.height;if(!s||!l)return!1;!r&&go(t,{datas:o}),o.datas={},o.direction=s,o.startOffsetWidth=u,o.startOffsetHeight=h,o.prevWidth=0,o.prevHeight=0,n=function(t){var e=window.getComputedStyle(t);return[parseFloat(e.width),parseFloat(e.height)]}(l),o.startWidth=n[0],o.startHeight=n[1];var p=[Math.max(0,u-o.startWidth),Math.max(0,h-o.startHeight)];if(o.minSize=p,o.maxSize=[1/0,1/0],!a){var d=window.getComputedStyle(l);o.minSize=oo([parseFloat(d.minWidth)||0,parseFloat(d.minHeight)||0],p),o.maxSize=oo([parseFloat(d.maxWidth)||1/0,parseFloat(d.maxHeight)||1/0],p)}var f=t.props.transformOrigin||"% %";o.transformOrigin=f&&ni(f)?f.split(" "):f,o.startDirection=function(t,e){if(!e[0]&&!e[1])return[0,0];var n=[-1,-1];return[e[0]?e[0]:-1*n[0],e[1]?e[1]:-1*n[1]]}(0,s),o.fixedPosition=Co(t,o.startDirection),o.fixedOriginalPosition=Co(t,s);var g=ea(t,e,{direction:s,set:function(t){var e=t[1];o.startWidth=t[0],o.startHeight=e},setMin:function(t){o.minSize=t},setMax:function(t){o.maxSize=t},setOrigin:function(t){o.transformOrigin=t},dragStart:ds.dragStart(t,(new Ta).dragStart([0,0],i))});return!1!==ia(t,"onResizeStart",g)&&(o.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),!!o.isResize&&g},dragControl:function(t,e){var n,i=e.datas,r=e.distX,o=e.distY,a=e.parentFlag,s=e.isPinch,c=e.parentDistance,l=e.parentScale,u=e.inputEvent,h=e.dragClient,p=e.parentDist,d=e.isRequest,f=i.direction,g=i.transformOrigin;if(i.isResize){var b=i.startWidth,m=i.startHeight,v=i.startOffsetWidth,y=i.startOffsetHeight,x=i.prevWidth,S=i.prevHeight,E=i.minSize,O=i.maxSize,C=t.props,w=C.throttleResize,T=void 0===w?0:w,P=C.parentMoveable,I=f;f[0]||f[1]||(I=[1,1]);var k=t.props.keepRatio||e.parentKeepRatio,_=I[0]||!I[1],M=_?y/v:v/y,z=k||a?f:i.startDirection,R=h,D=0,N=0;if(h||(R=!a&&s?Co(t,[0,0]):k?i.fixedOriginalPosition:i.fixedPosition),p)D=p[0],N=p[1];else if(l)D=(l[0]-1)*v,N=(l[1]-1)*y;else if(s)c&&(D=c,N=c*y/v);else{var A=bo({datas:i,distX:r,distY:o});if(D=I[0]*A[0],N=I[1]*A[1],k&&v&&y){var L=Zr([0,0],A),B=Zr([0,0],I),j=Zr([0,0],[v,y]),G=Go([D,N]),H=Math.cos(L-B)*G;I[0]?I[1]?(D=Math.cos(j)*H,N=Math.sin(j)*H):N=aa(D=H,_,M):D=sa(N=H,_,M)}}var F=I[0]||k?Math.max(v+D,1e-7):v,X=I[1]||k?Math.max(y+N,1e-7):y;k&&v&&y&&(X=F*y/v);var U=[0,0];if(s||(U=function(t,e,n,i,r,o,a){if(!Va(t,"resizable"))return[0,0];var s=t.state,c=s.matrix,l=s.is3d;return ns(t,(function(t,o){return $a(c,e+t,n+o,r,i,l)}),e,n,i,r,o,a)}(t,F,X,f,i.fixedOriginalPosition,d,i)),p&&(!p[0]&&(U[0]=0),!p[1]&&(U[1]=0)),k){I[0]&&I[1]&&U[0]&&U[1]&&(Math.abs(U[0])>Math.abs(U[1])?U[1]=0:U[0]=0);var W=!U[0]&&!U[1];W&&(_?F=Ko(F,T):X=Ko(X,T)),I[0]&&!I[1]||U[0]&&!U[1]||W&&_?X=aa(F+=U[0],_,M):(!I[0]&&I[1]||!U[0]&&U[1]||W&&!_)&&(F=sa(X+=U[1],_,M))}else F+=U[0],X+=U[1],U[0]||(F=Ko(F,T)),U[1]||(X=Ko(X,T));F=(n=function(t,e,n,i){if(!i)return t.map((function(t,i){return Math.min(n[i],Math.max(t,e[i]))}));var r=t[0],o=t[1],a=ga(t,e,!1),s=a[0],c=a[1],l=ga(t,n,!0),u=l[0],h=l[1];return r<s||o<c?(r=s,o=c):(r>u||o>h)&&(r=u,o=h),[r,o]}([F,X],E,O,k))[0],X=n[1];var Y=[(D=(F=Math.round(F))-v)-x,(N=(X=Math.round(X))-y)-S];i.prevWidth=D,i.prevHeight=N;var q=function(t,e,n,i,r,o){var a=t.props.groupable,s=t.state,c=s.is3d?4:3,l=a?s.left:0,u=a?s.top:0;return ao(So(r,Eo(s.offsetMatrix,s.targetMatrix,function(t,e,n,i,r,o){return void 0===i&&(i=e),void 0===r&&(r=n),void 0===o&&(o=[0,0]),t?t.map((function(t,a){var s=ci(t),c=s.value,l=s.unit,u=a?r:i,h=a?n:e;return"%"===t||isNaN(c)?h*(u?o[a]/u:0):"%"!==l?c:h*c/100})):o}(o,e,n,s.width,s.height,s.transformOrigin),c),e,n,c,i),[l,u])}(t,F,X,z,R,g);if(P||!Y.every((function(t){return!t}))||!q.every((function(t){return!t}))){var V=ea(t,e,{width:b+D,height:m+N,offsetWidth:F,offsetHeight:X,direction:f,dist:[D,N],delta:Y,isPinch:!!s,drag:ds.drag(t,wa(t.state,q,u,!!s,!1))});return ia(t,"onResize",V),V}}},dragControlAfter:function(t,e){var n=e.datas;if(n.isResize){var i=t.state,r=i.width-(n.startOffsetWidth+n.prevWidth),o=i.height-(n.startOffsetHeight+n.prevHeight),a=Math.abs(r)>3,s=Math.abs(o)>3;return a&&(n.startWidth+=r,n.startOffsetWidth+=r,n.prevWidth+=r),s&&(n.startHeight+=o,n.startOffsetHeight+=o,n.prevHeight+=o),a||s?(this.dragControl(t,e),!0):void 0}},dragControlEnd:function(t,e){var n=e.datas,i=e.isDrag;return!!n.isResize&&(n.isResize=!1,ia(t,"onResizeEnd",na(t,e,{})),i)},dragGroupControlCondition:ka,dragGroupControlStart:function(t,e){var n=e.datas,i=this.dragControlStart(t,e);if(!i)return!1;var r=i.direction,o=n.fixedOriginalPosition,a=Ia(t,this,"dragControlStart",n,(function(n,i){var a=Co(n,r),s=so(lo(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),c=s[1];return i.originalX=s[0],i.originalY=c,e})),s=Nr({},i,{targets:t.props.targets,events:a}),c=ia(t,"onResizeGroupStart",s);return n.isResize=!1!==c,!!n.isResize&&i},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var i=this.dragControl(t,e);if(i){var r=i.offsetWidth,o=i.offsetHeight,a=i.dist,s=t.props.keepRatio,c=[r/(r-a[0]),o/(o-a[1])],l=n.fixedOriginalPosition,u=Ia(t,this,"dragControl",n,(function(n,i){var r=so(lo(t.rotation/180*Math.PI,3),[i.originalX*c[0],i.originalY*c[1],1],3);return Nr({},e,{parentDist:null,parentScale:c,dragClient:oo(l,[r[0],r[1]]),parentKeepRatio:s})})),h=Nr({targets:t.props.targets,events:u},i);return ia(t,"onResizeGroup",h),h}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,i=e.datas;if(i.isResize)return this.dragControlEnd(t,e),Ia(t,this,"dragControlEnd",i,e),ia(t,"onResizeGroupEnd",na(t,e,{targets:t.props.targets})),n},request:function(t){var e={},n=0,i=0,r=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-r.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?i=t.offsetHeight-r.offsetHeight:"deltaHeight"in t&&(i+=t.deltaHeight),{datas:e,parentDist:[n,i]}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},Cs={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,e){var n=t.props;if(!n.resizable&&n.scalable)return n.edge?Es(t,e):Ss(t,e)},dragControlCondition:ka,dragControlStart:function(t,e){var n=e.datas,i=e.isPinch,r=e.inputEvent,o=e.parentDirection||(i?[0,0]:Vo(r.target)),a=t.state,s=a.width,c=a.height,l=a.targetTransform;if(!o||!a.target)return!1;i||go(t,{datas:n}),n.datas={},n.transform=l,n.prevDist=[1,1],n.direction=o,n.width=s,n.height=c,n.startScale=[1,1],n.fixedDirection=o.map((function(t){return-t})),n.fixedPosition=Co(t,o);var u=ea(t,e,{direction:o,set:function(t){n.startScale=t},dragStart:ds.dragStart(t,(new Ta).dragStart([0,0],r))});return!1!==ia(t,"onScaleStart",u)&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),!!n.isScale&&u},dragControl:function(t,e){var n=e.datas,i=e.distX,r=e.distY,o=e.parentScale,a=e.parentDistance,s=e.isPinch,c=e.inputEvent,l=e.dragClient,u=e.parentDist,h=e.isRequest,p=n.prevDist,d=n.direction,f=n.width,g=n.height,b=n.transform,m=n.startScale;if(!n.isScale)return!1;var v=t.props,y=v.throttleScale,x=v.parentMoveable,S=d;d[0]||d[1]||(S=[1,1]);var E=t.props.keepRatio||e.parentKeepRatio,O=t.state,C=S[0]||!S[1],w=f*m[0],T=g*m[1],P=C?T/w:w/T,I=1,k=1,_=l;if(l||(_=!e.parentFlag&&s?Co(t,[0,0]):n.fixedPosition),u)I=(f+u[0])/f,k=(g+u[1])/g;else if(o)I=o[0],k=o[1];else if(s)a&&(I=(f+a)/f,k=(g+a*g/f)/g);else{var M=bo({datas:n,distX:i,distY:r}),z=S[0]*M[0],R=S[1]*M[1];if(E&&f&&g){var D=Zr([0,0],M),N=Zr([0,0],S),A=Zr([0,0],[w,T]),L=Go([z,R]),B=Math.cos(D-N)*L;S[0]?S[1]?(z=Math.cos(A)*B,R=Math.sin(A)*B):R=aa(z=B,C,P):z=sa(R=B,C,P)}I=(f+z)/f,k=(g+R)/g}0===(I=S[0]||E?I*m[0]:m[0])&&(I=1e-9*(p[0]>0?1:-1)),0===(k=S[1]||E?k*m[1]:m[1])&&(k=1e-9*(p[1]>0?1:-1));var j,G=[I/m[0],k/m[1]];if(!s&&t.props.groupable){var H=(O.snapRenderInfo||{}).direction;ei(H)&&(H[0]||H[1])&&(O.snapRenderInfo={direction:d,request:e.isRequest})}var F=[0,0];if(s||(F=function(t,e,n,i,r,o){var a=o.width,s=o.height;if(!Va(t,"scalable"))return[0,0];var c=o.is3d,l=ns(t,(function(t,r){return $a(Oo(o,oo(e,[t/a,r/s])),a,s,i,n,c)}),a,s,n,i,r,o);return[l[0]/a,l[1]/s]}(t,G,d,n.fixedPosition,h,n)),E){S[0]&&S[1]&&F[0]&&F[1]&&(Math.abs(F[0])>Math.abs(F[1])?F[1]=0:F[0]=0);var X=!F[0]&&!F[1];if(X&&(C?G[0]=Ko(G[0]*m[0],y)/m[0]:G[1]=Ko(G[1]*m[1],y)/m[1]),S[0]&&!S[1]||F[0]&&!F[1]||X&&C){G[0]+=F[0];var U=aa(f*G[0]*m[0],C,P);G[1]=U/g/m[1]}else if(!S[0]&&S[1]||!F[0]&&F[1]||X&&!C){G[1]+=F[1];var W=sa(g*G[1]*m[1],C,P);G[0]=W/f/m[0]}}else G[0]+=F[0],G[1]+=F[1],F[0]||(G[0]=Ko(G[0]*m[0],y)/m[0]),F[1]||(G[1]=Ko(G[1]*m[1],y)/m[1]);0===G[0]&&(G[0]=1e-9*(p[0]>0?1:-1)),0===G[1]&&(G[1]=1e-9*(p[1]>0?1:-1));var Y,q,V=[G[0]/p[0],G[1]/p[1]];j=[(Y=G)[0]*(q=m)[0],Y[1]*q[1]],n.prevDist=G;var Q=function(t,e,n,i){var r=t.state,o=r.width,a=r.height,s=r.is3d?4:3,c=t.props.groupable,l=c?r.left:0,u=c?r.top:0;return ao(So(i,Oo(t.state,e),o,a,s,n),[l,u])}(t,V,d,_);if(I===p[0]&&k===p[1]&&Q.every((function(t){return!t}))&&!x)return!1;var $=ea(t,e,{offsetWidth:f,offsetHeight:g,scale:j,direction:d,dist:G,delta:V,transform:b+" scale("+I+", "+k+")",isPinch:!!s,drag:ds.drag(t,wa(t.state,Q,c,s,!1))});return ia(t,"onScale",$),$},dragControlEnd:function(t,e){var n=e.datas,i=e.isDrag;return!!n.isScale&&(n.isScale=!1,ia(t,"onScaleEnd",na(t,e,{})),i)},dragGroupControlCondition:ka,dragGroupControlStart:function(t,e){var n=e.datas,i=this.dragControlStart(t,e);if(!i)return!1;var r=i.direction,o=n.fixedPosition;n.moveableScale=t.scale;var a=Ia(t,this,"dragControlStart",n,(function(n,i){var a=Co(n,r),s=so(lo(-t.rotation/180*Math.PI,3),[a[0]-o[0],a[1]-o[1],1],3),c=s[1];return i.originalX=s[0],i.originalY=c,e})),s=Nr({},i,{targets:t.props.targets,events:a}),c=ia(t,"onScaleGroupStart",s);return n.isScale=!1!==c,!!n.isScale&&s},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){var i=this.dragControl(t,e);if(i){var r=n.moveableScale;t.scale=[i.scale[0]*r[0],i.scale[1]*r[1]];var o=t.props.keepRatio,a=i.dist,s=i.scale,c=n.fixedPosition,l=Ia(t,this,"dragControl",n,(function(n,i){var r=so(lo(t.rotation/180*Math.PI,3),[i.originalX*a[0],i.originalY*a[1],1],3);return Nr({},e,{parentDist:null,parentScale:s,parentKeepRatio:o,dragClient:oo(c,[r[0],r[1]])})})),u=Nr({targets:t.props.targets,events:l},i);return ia(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,i=e.datas;if(i.isScale)return this.dragControlEnd(t,e),Ia(t,this,"dragControlEnd",i,e),ia(t,"onScaleGroupEnd",na(t,e,{targets:t.props.targets})),n},request:function(){var t={},e=0,n=0;return{isControl:!0,requestStart:function(e){return{datas:t,parentDirection:e.direction||[1,1]}},request:function(i){return{datas:t,parentDist:[e+=i.deltaWidth,n+=i.deltaHeight]}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function ws(t,e){return t.map((function(t,n){return(2*t+1*e[n])/3}))}function Ts(t,e,n){var i=Zr(t,e),r=Zr(t,n)-i;return r>=0?r:r+2*Math.PI}var Ps={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,e){var n=t.props;if(n.resizable||n.scalable||!n.warpable)return[];var i=t.state,r=i.pos1,o=i.pos2,a=i.pos3,s=i.pos4,c=ws(r,o),l=ws(o,r),u=ws(r,a),h=ws(a,r),p=ws(a,s),d=ws(s,a),f=ws(o,s),g=ws(s,o);return[e.createElement("div",{className:wo("line"),key:"middeLine1",style:Fo(c,p)}),e.createElement("div",{className:wo("line"),key:"middeLine2",style:Fo(l,d)}),e.createElement("div",{className:wo("line"),key:"middeLine3",style:Fo(u,f)}),e.createElement("div",{className:wo("line"),key:"middeLine4",style:Fo(h,g)})].concat(Ss(t,e))},dragControlCondition:function(t){return!t.isRequest&&di(t.inputEvent.target,wo("direction"))},dragControlStart:function(t,e){var n=e.datas,i=t.props.target,r=Vo(e.inputEvent.target);if(!r||!i)return!1;var o=t.state,a=o.transformOrigin,s=o.is3d,c=o.targetTransform,l=o.targetMatrix,u=o.width,h=o.height,p=o.left,d=o.top;return n.datas={},n.targetTransform=c,n.warpTargetMatrix=s?l:eo(l,3,4),n.targetInverseMatrix=Kr(Jr(n.warpTargetMatrix,4),3,4),n.direction=r,n.left=p,n.top=d,go(t,{datas:n}),n.poses=[[0,0],[u,0],[0,h],[u,h]].map((function(t){return ao(t,a)})),n.nextPoses=n.poses.map((function(t){return so(n.warpTargetMatrix,[t[0],t[1],0,1],4)})),n.startMatrix=uo(4),n.prevMatrix=uo(4),n.absolutePoses=$o(o),n.posIndexes=mo(r),o.snapRenderInfo={request:e.isRequest,direction:r},!1!==ia(t,"onWarpStart",ea(t,e,{set:function(t){n.startMatrix=t}}))&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,i=e.isRequest,r=e.distX,o=e.distY,a=n.targetInverseMatrix,s=n.prevMatrix,c=n.startMatrix,l=n.poses,u=n.posIndexes,h=n.absolutePoses;if(!n.isWarp)return!1;if(Va(t,"warpable")){var p=u.map((function(t){return h[t]}));p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var d=Za(t,i,p.map((function(t){return[t[0]+r,t[1]+o]})));o-=d.horizontal.offset,r-=d.vertical.offset}var f=bo({datas:n,distX:r,distY:o},!0),g=n.nextPoses.slice();if(u.forEach((function(t){g[t]=oo(g[t],f)})),!Hr.every((function(t){return e=t.map((function(t){return l[t]})),n=t.map((function(t){return g[t]})),i=Ts(e[0],e[1],e[2]),r=Ts(n[0],n[1],n[2]),!(i>=(o=Math.PI)&&r<=o||i<=o&&r>=o);var e,n,i,r,o})))return!1;var b=fo(l[0],l[2],l[1],l[3],g[0],g[2],g[1],g[3]);if(!b.length)return!1;var m=io(a,b,4),v=n.targetTransform+" "+zo(m,!0),y=io(Jr(s,4),m,4);return n.prevMatrix=m,ia(t,"onWarp",ea(t,e,{delta:y,matrix:io(c,m,4),multiply:io,dist:m,transform:v})),!0},dragControlEnd:function(t,e){var n=e.datas,i=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,ia(t,"onWarpEnd",na(t,e,{})),i)}},Is=wo("area"),ks=wo("area-pieces"),_s=wo("area-piece"),Ms=wo("avoid");function zs(t){var e=t.areaElement,n=t.state,i=n.width,r=n.height;!function(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}(e,Ms),e.style.cssText+="left: 0px; top: 0px; width: "+i+"px; height: "+r+"px"}function Rs(t){return t.createElement("div",{key:"area_pieces",className:ks},t.createElement("div",{className:_s}),t.createElement("div",{className:_s}),t.createElement("div",{className:_s}),t.createElement("div",{className:_s}))}var Ds={name:"dragArea",props:{dragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,i=n.target,r=n.dragArea,o=t.state,a=o.width,s=o.height,c=o.renderPoses;if(n.groupable)return[e.createElement("div",{key:"area",ref:Hn(t,"areaElement"),className:Is}),Rs(e)];if(!i||!r)return[];var l=fo([0,0],[a,0],[0,s],[a,s],c[0],c[1],c[2],c[3]),u=l.length?zo(l,!0):"none";return[e.createElement("div",{key:"area",ref:Hn(t,"areaElement"),className:Is,style:{top:"0px",left:"0px",width:a+"px",height:s+"px",transformOrigin:"0 0",transform:u}}),Rs(e)]},dragStart:function(t,e){var n=e.datas,i=e.clientX,r=e.clientY,o=e.inputEvent;if(!o)return!1;n.isDragArea=!1,n.inputTarget=o.target;var a=t.areaElement,s=t.state,c=s.moveableClientRect,l=s.rootMatrix,u=s.is3d,h=c.left,p=c.top,d=Lo(s.renderPoses),f=d.left,g=d.top,b=d.width,m=d.height,v=pa(l,[i-h,r-p],u?4:3),y=v[0],x=v[1],S=[{left:f,top:g,width:b,height:(x-=g)-10},{left:f,top:g,width:(y-=f)-10,height:m},{left:f,top:g+x+10,width:b,height:m-x-10},{left:f+y+10,top:g,width:b-y-10,height:m}],E=[].slice.call(a.nextElementSibling.children);return S.forEach((function(t,e){E[e].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"})),fi(a,Ms),!0},drag:function(t,e){var n=e.datas;if(!e.inputEvent)return!1;n.isDragArea||(n.isDragArea=!0,zs(t))},dragEnd:function(t,e){if(!e.inputEvent)return!1;var n=e.inputEvent,i=e.datas.isDragArea;i||zs(t);var r=t.state.target,o=n.target;if(!i&&!t.isMoveableElement(o)){var a=r.contains(o);ia(t,"onClick",ea(t,e,{isDouble:e.isDouble,inputTarget:o,isTarget:r===o,containsTarget:a}))}},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){var n=e.inputEvent,i=e.isDragArea,r=e.datas;if(!n)return!1;i||zs(t);var o=r.inputTarget,a=n.target;if(!i&&!t.isMoveableElement(a)&&o!==a){var s=t.props.targets,c=s.indexOf(a),l=c>-1,u=!1;-1===c&&(u=(c=pi(s,(function(t){return t.contains(a)})))>-1),ia(t,"onClickGroup",ea(t,e,{isDouble:e.isDouble,targets:s,inputTarget:a,targetIndex:c,isTarget:l,containsTarget:u}))}}},Ns={name:"origin",props:{origin:Boolean},events:{},render:function(t,e){var n=t.state,i=n.beforeOrigin,r=n.rotation;return[e.createElement("div",{className:wo("control","origin"),style:Xo(r,i),key:"beforeOrigin"})]}};function As(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var Ls={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragStart:function(t,e){var n=t.props.scrollContainer,i=void 0===n?t.getContainer():n,r=new Ir;e.datas.dragScroll=r;var o=e.isControl?"controlDragger":"targetDragger",a=e.targets;r.on("scroll",(function(n){var i=ea(t,e,{scrollContainer:n.container,direction:n.direction}),r=a?"onScrollGroup":"onScroll";a&&(i.targets=a),ia(t,r,i)})).on("move",(function(n){t[o].scrollBy(n.offsetX,n.offsetY,e.inputEvent,!1)})),r.dragStart(e,{container:i})},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var i=t.props,r=i.scrollContainer,o=void 0===r?t.getContainer():r,a=i.scrollThreshold,s=i.getScrollPosition,c=void 0===s?As:s;return n.drag(e,{container:o,threshold:void 0===a?0:a,getScrollPosition:function(t){return c({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,Nr({},e,{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,Nr({},e,{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,Nr({},e,{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,Nr({},e,{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,Nr({},e,{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,Nr({},e,{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,Nr({},e,{targets:t.props.targets}))}},Bs={name:"",props:{target:Object,dragTarget:Object,container:Object,rootContainer:Object,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"}},js=["nw","ne","se","sw"];function Gs(t,e){var n=t[0]+t[1],i=n>e?e/n:1;return t[0]*=i,t[1]=e-t[1]*i,t}var Hs=[1,2,5,6],Fs=[0,3,4,7],Xs=[1,-1,-1,1],Us=[1,1,-1,-1];function Ws(t,e,n,i,r,o,a,s,c){void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=i),void 0===c&&(c=r);var l=[],u=!1,h=t.map((function(t,h){var p=e[h],d=p.horizontal,f=p.vertical;if(f&&!u&&(u=!0,l.push("/")),u){var g=Math.max(0,1===f?t[1]-a:c-t[1]);return l.push(ma(g,r,n)),g}return g=Math.max(0,1===d?t[0]-o:s-t[0]),l.push(ma(g,i,n)),g}));return{styles:l,raws:h}}function Ys(t){for(var e=[0,0],n=[0,0],i=t.length,r=0;r<i;++r){var o=t[r];o.sub&&(o.horizontal&&(0===e[1]&&(e[0]=r),e[1]=r-e[0]+1,n[0]=r+1),o.vertical&&(0===n[1]&&(n[0]=r),n[1]=r-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function qs(t,e,n,i,r){var o,a,s,c,l=t.indexOf("/"),u=(l>-1?t.slice(0,l):t).length,h=t.slice(0,u),p=t.slice(u+1),d=h[0],f=void 0===d?"0":d,g=h[1],b=void 0===g?f:g,m=h[2],v=h[3],y=p[0],x=void 0===y?f:y,S=p[1],E=void 0===S?x:S,O=p[2],C=void 0===O?x:O,w=p[3],T=void 0===w?E:w,P=[f,b,void 0===m?f:m,void 0===v?b:v].map((function(t){return ba(t,e)})),I=[x,E,C,T].map((function(t){return ba(t,n)})),k=P.slice(),_=I.slice();o=Gs([k[0],k[1]],e),k[0]=o[0],k[1]=o[1],a=Gs([k[3],k[2]],e),k[3]=a[0],k[2]=a[1],s=Gs([_[0],_[3]],n),_[0]=s[0],_[3]=s[1],c=Gs([_[1],_[2]],n),_[1]=c[0],_[2]=c[1];var M=k.slice(0,h.length),z=_.slice(0,p.length);return M.map((function(t,e){return{horizontal:Xs[e],vertical:0,pos:[i+t,r+(-1===Us[e]?n:0)],sub:!0,raw:P[e],direction:js[e]}})).concat(z.map((function(t,n){return{horizontal:0,vertical:Us[n],pos:[i+(-1===Xs[n]?e:0),r+t],sub:!0,raw:I[n],direction:js[n]}})))}function Vs(t,e,n,i,r){void 0===r&&(r=e.length);var o=Ys(t.slice(i)),a=o.horizontalRange,s=o.verticalRange,c=n-i,l=0;if(0===c)l=r;else if(c>0&&c<a[1])l=a[1]-c;else{if(!(c>=s[0]))return;l=s[0]+s[1]-c}t.splice(n,l),e.splice(n,l)}function Qs(t,e,n,i,r,o,a,s,c,l,u){void 0===l&&(l=0),void 0===u&&(u=0);var h=Ys(t.slice(n)),p=h.horizontalRange,d=h.verticalRange;if(i>-1)for(var f=1===Xs[i]?o-l:s-o,g=p[1];g<=i;++g){var b=0;if(i===g?b=o:0===g?b=l+f:-1===Xs[g]&&(b=s-(e[n][0]-l)),t.splice(n+g,0,{horizontal:Xs[g],vertical:0,pos:[b,x=1===Us[g]?u:c]}),e.splice(n+g,0,[b,x]),0===g)break}else if(r>-1){var m=1===Us[r]?a-u:c-a;if(0===p[1]&&0===d[1]){var v=[l+m,u];t.push({horizontal:Xs[0],vertical:0,pos:v}),e.push(v)}var y=d[0];for(g=d[1];g<=r;++g){var x=0;if(r===g?x=a:0===g?x=u+m:1===Us[g]?x=e[n+y][1]:-1===Us[g]&&(x=c-(e[n+y][1]-u)),t.push({horizontal:0,vertical:Us[g],pos:[b=1===Xs[g]?l:s,x]}),e.push([b,x]),0===g)break}}}function $s(t,e){return void 0===e&&(e=t.map((function(t){return t.raw}))),{horizontals:t.map((function(t,n){return t.horizontal?e[n]:null})).filter((function(t){return null!=t})),verticals:t.map((function(t,n){return t.vertical?e[n]:null})).filter((function(t){return null!=t}))}}var Ks=[[0,-1,"n"],[1,0,"e"]],Js=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Zs(t,e,n){var i=t.props.clipRelative,r=t.state,o=r.width,a=r.height,s=e.type,c=e.poses,l="rect"===s,u="circle"===s;if("polygon"===s)return n.map((function(t){return ma(t[0],o,i)+" "+ma(t[1],a,i)}));if(l||"inset"===s){var h=n[1][1],p=n[3][0],d=n[7][0],f=n[5][1];if(l)return[h,p,f,d].map((function(t){return t+"px"}));var g=[h,o-p,a-f,d].map((function(t,e){return ma(t,e%2?o:a,i)}));if(n.length>8){var b=ao(n[4],n[0]),m=b[0],v=b[1];g.push.apply(g,["round"].concat(Ws(n.slice(8),c.slice(8),i,m,v,d,h,p,f).styles))}return g}if(u||"ellipse"===s){var y=n[0],x=ma(Math.abs(n[1][1]-y[1]),u?Math.sqrt((o*o+a*a)/2):a,i);return(g=u?[x]:[ma(Math.abs(n[2][0]-y[0]),o,i),x]).push("at",ma(y[0],o,i),ma(y[1],a,i)),g}}function tc(t,e,n,i){var r=[i,(i+e)/2,e],o=[t,(t+n)/2,n];return Js.map((function(t){var e=t[0],n=t[1],i=t[2],a=r[e+1],s=o[n+1];return{vertical:Math.abs(n),horizontal:Math.abs(e),direction:i,pos:[a,s]}}))}function ec(t,e,n,i,r){var o,a,s,c,l,u,h,p=r;if(!p){var d=getComputedStyle(t),f=d.clipPath;p="none"!==f?f:d.clip}if(p&&"none"!==p&&"auto"!==p||(p=i)){var g=si(p),b=g.prefix,m=void 0===b?p:b,v=g.value,y=void 0===v?"":v,x="circle"===m,S=" ";if("polygon"===m)return S=",",{type:m,clipText:p,poses:k=(P=ai(y||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(t){var i=t.split(" "),r=i[1];return{vertical:1,horizontal:1,pos:[ba(i[0],e),ba(r,n)]}})),splitter:S};if(x||"ellipse"===m){var E,O="",C="",w=0,T=0,P=oi(y);x?(O=void 0===(a=P[2])?"50%":a,C=void 0===(s=P[3])?"50%":s,w=ba(void 0===(o=P[0])?"50%":o,Math.sqrt((e*e+n*n)/2)),T=w):(E=void 0===(l=P[1])?"50%":l,O=void 0===(u=P[3])?"50%":u,C=void 0===(h=P[4])?"50%":h,w=ba(void 0===(c=P[0])?"50%":c,e),T=ba(E,n));var I=[ba(O,e),ba(C,n)],k=[{vertical:1,horizontal:1,pos:I,direction:"nesw"}].concat(Ks.slice(0,x?1:2).map((function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[I[0]+t[0]*w,I[1]+t[1]*T]}})));return{type:m,clipText:p,radiusX:w,radiusY:T,left:I[0]-w,top:I[1]-T,poses:k,splitter:S}}if("inset"===m){var _=(P=oi(y||"0 0 0 0")).indexOf("round"),M=(_>-1?P.slice(0,_):P).length,z=P.slice(M+1),R=P.slice(0,M),D=R[0],N=R[1],A=void 0===N?D:N,L=R[2],B=R[3],j=void 0===B?A:B,G=[D,void 0===L?D:L].map((function(t){return ba(t,n)})),H=G[0],F=G[1],X=[j,A].map((function(t){return ba(t,e)})),U=e-(q=X[1]),W=n-F,Y=qs(z,U-(V=X[0]),W-H,V,H);return{type:"inset",clipText:p,poses:k=tc(H,U,W,V).concat(Y),top:H,left:V,right:U,bottom:W,radius:z,splitter:S}}if("rect"===m){S=",";var q,V,Q=(P=ai(y||"0px, "+e+"px, "+n+"px, 0px")).map((function(t,e){return ci(t).value}));return{type:"rect",clipText:p,poses:k=tc(H=Q[0],q=Q[1],F=Q[2],V=Q[3]),top:H,right:q,bottom:F,left:V,values:P,splitter:S}}}}var nc={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}"],render:function(t,e){var n=t.props,i=n.clipArea,r=n.zoom,o=t.state,a=o.target,s=o.matrix,c=o.is3d,l=o.left,u=o.top,h=o.pos1,p=o.pos2,d=o.pos3,f=o.pos4;if(!a)return[];var g=ec(a,o.width,o.height,n.defaultClipPath||"inset",o.clipPathState||n.customClipPath);if(!g)return[];var b=c?4:3,m=g.type,v=g.poses.map((function(t){var e=No(s,t.pos,b);return[e[0]-l,e[1]-u]})),y=[],x=[],S="rect"===m,E="inset"===m,O="polygon"===m;if(S||E||O){var C=E?v.slice(0,8):v;x=C.map((function(t,n){var i=0===n?C[C.length-1]:C[n-1],r=Zr(i,t),o=Ho(i,t);return e.createElement("div",{key:"clipLine"+n,className:wo("line","clip-line"),"data-clip-index":n,style:{width:o+"px",transform:"translate("+i[0]+"px, "+i[1]+"px) rotate("+r+"rad)"}})}))}if(y=v.map((function(t,n){return e.createElement("div",{key:"clipControl"+n,className:wo("control","clip-control"),"data-clip-index":n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px)"}})})),E&&y.push.apply(y,v.slice(8).map((function(t,n){return e.createElement("div",{key:"clipRadiusControl"+n,className:wo("control","clip-control","clip-radius"),"data-clip-index":8+n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px)"}})}))),"circle"===m||"ellipse"===m){var w=g.radiusX,T=g.radiusY,P=ao(No(s,[g.left,g.top],b),No(s,[0,0],b)),I=P[0],k=P[1],_="none";if(!i){for(var M=Math.max(10,w/5,T/5),z=[],R=0;R<=M;++R){var D=2*Math.PI/M*R;z.push([w+(w-r)*Math.cos(D),T+(T-r)*Math.sin(D)])}z.push([w,-2]),z.push([-2,-2]),z.push([-2,2*T+2]),z.push([2*w+2,2*T+2]),z.push([2*w+2,-2]),z.push([w,-2]),_="polygon("+z.map((function(t){return t[0]+"px "+t[1]+"px"})).join(", ")+")"}y.push(e.createElement("div",{key:"clipEllipse",className:wo("clip-ellipse"),style:{width:2*w+"px",height:2*T+"px",clipPath:_,transform:"translate("+(-l+I)+"px, "+(-u+k)+"px) "+zo(s)}}))}if(i){var N=Lo([h,p,d,f].concat(v)),A=N.width,L=N.height,B=N.left,j=N.top;(O||S||E)&&(z=E?v.slice(0,8):v,y.push(e.createElement("div",{key:"clipArea",className:wo("clip-area"),style:{width:A+"px",height:L+"px",transform:"translate("+B+"px, "+j+"px)",clipPath:"polygon("+z.map((function(t){return t[0]-B+"px "+(t[1]-j)+"px"})).join(", ")+")"}})))}return y.concat(x)},dragControlCondition:function(t){return t.inputEvent&&(t.inputEvent.target.className||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props.dragWithClip;return!(void 0===n||n)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,e)},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,i=t.props,r=e.inputEvent?e.inputEvent.target:null,o=r?r.className:"",a=e.datas,s=ec(n.target,n.width,n.height,i.defaultClipPath||"inset",i.customClipPath);if(!s)return!1;var c=s.clipText;return!1===ia(t,"onClipStart",ea(t,e,{clipType:s.type,clipStyle:c,poses:s.poses.map((function(t){return t.pos}))}))?(a.isClipStart=!1,!1):(a.isControl=o.indexOf("clip-control")>-1,a.isLine=o.indexOf("clip-line")>-1,a.isArea=o.indexOf("clip-area")>-1||o.indexOf("clip-ellipse")>-1,a.index=r?parseInt(r.getAttribute("data-clip-index"),10):-1,a.clipPath=s,a.isClipStart=!0,n.clipPathState=c,go(t,e),!0)},dragControl:function(t,e){var n=e.datas,i=e.originalDatas;if(!n.isClipStart)return!1;var r=i&&i.draggable||{},o=n.isControl,a=n.isLine,s=n.isArea,c=n.index,l=n.clipPath;if(!l)return!1;var u=r.isDrag?r.prevDist:bo(e),h=u[0],p=u[1],d=t.state,f=!s&&!o&&!a,g=l.type,b=l.poses,m=l.splitter,v=b.map((function(t){return t.pos})),y=v.map((function(t){return t.slice()}));f&&(h=-h,p=-p);var x=!o||"nesw"===b[c].direction;o&&!x&&va(b,y,c,h,p),x&&v.forEach((function(t,e){y[e]=oo(t,[h,p])}));var S=Zs(t,l,y),E=g+"("+S.join(m)+")";return d.clipPathState=E,ia(t,"onClip",ea(t,e,{clipEventType:"changed",clipType:g,poses:y,clipStyle:E,clipStyles:S,distX:h,distY:p})),!0},dragControlEnd:function(t,e){t.state.clipPathState="";var n=e.isDrag,i=e.datas,r=e.isDouble,o=i.isLine,a=i.isControl;return!!i.isClipStart&&(ia(t,"onClipEnd",na(t,e,{})),r&&(a?function(t,e){var n=e.datas,i=n.clipPath,r=n.index,o=i.type,a=i.poses,s=i.splitter,c=a.map((function(t){return t.pos})),l=c.length;if("polygon"===o)a.splice(r,1),c.splice(r,1);else{if("inset"!==o)return;if(r<8)return;if(Vs(a,c,r,8,l),l===a.length)return}var u=Zs(t,i,c);ia(t,"onClip",ea(t,e,{clipEventType:"removed",clipType:o,poses:c,clipStyles:u,clipStyle:o+"("+u.join(s)+")",distX:0,distY:0}))}(t,e):o&&function(t,e){var n=ya(t,e),i=n[0],r=n[1],o=e.datas,a=o.clipPath,s=o.index,c=a.type,l=a.poses,u=a.splitter,h=l.map((function(t){return t.pos}));if("polygon"===c)h.splice(s,0,[i,r]);else{if("inset"!==c)return;var p=Hs.indexOf(s),d=Fs.indexOf(s),f=l.length;if(Qs(l,h,8,p,d,i,r,h[4][0],h[4][1],h[0][0],h[0][1]),f===l.length)return}var g=Zs(t,a,h);ia(t,"onClip",ea(t,e,{clipEventType:"added",clipType:c,poses:h,clipStyles:g,clipStyle:c+"("+g.join(u)+")",distX:0,distY:0}))}(t,e)),r||n)},unset:function(t){t.state.clipPathState=""}},ic={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t){return t.isRequest?"originDraggable"===t.requestAble:di(t.inputEvent.target,wo("origin"))},dragControlStart:function(t,e){var n=e.inputEvent,i=e.datas;go(t,e);var r=ea(t,e,{dragStart:ds.dragStart(t,(new Ta).dragStart([0,0],n))}),o=ia(t,"onDragOriginStart",r);return i.startOrigin=t.state.transformOrigin,i.startTargetOrigin=t.state.targetOrigin,i.prevOrigin=[0,0],i.isDragOrigin=!0,!1===o?(i.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,i=e.inputEvent,r=e.isPinch,o=e.isRequest;if(!n.isDragOrigin)return!1;var a=bo(e),s=t.state,c=s.width,l=s.height,u=s.offsetMatrix,h=s.targetMatrix,p=t.props.originRelative,d=void 0===p||p,f=s.is3d?4:3,g=[a[0],a[1]];if(o){var b=e.distOrigin;(b[0]||b[1])&&(g=b)}var m=oo(n.startOrigin,g),v=oo(n.startTargetOrigin,g),y=ao(g,n.prevOrigin),x=Eo(u,h,m,f),S=t.getRect(),E=Lo(Ao(x,c,l,f)),O=[S.left-E.left,S.top-E.top];n.prevOrigin=g;var C=ea(t,e,{width:c,height:l,origin:m,dist:g,delta:y,transformOrigin:[ma(v[0],c,d),ma(v[1],l,d)].join(" "),drag:ds.drag(t,wa(t.state,O,i,!!r,!1))});return ia(t,"onDragOrigin",C),C},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(ia(t,"onDragOriginEnd",na(t,e,{})),!0)},dragGroupControlCondition:function(t){return this.dragControlCondition(t)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return!!n&&(t.transformOrigin=n.transformOrigin,!0)},request:function(t){var e={},n=t.getRect(),i=0,r=0,o=n.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?i=t.x-n.left:"deltaX"in t&&(i+=t.deltaX),"y"in t?r=t.y-n.top:"deltaY"in t&&(r+=t.deltaY)),{datas:e,distX:i,distY:r,distOrigin:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function rc(t,e,n,i){var r;if(i)r=i;else{var o=window.getComputedStyle(t);if(!o)return null;r=o.borderRadius||""}return!r||!i&&"0px"===r?null:qs(oi(r),e,n,0,0)}function oc(t,e,n,i,r,o){var a=t.state,s=a.width,c=a.height,l=Ws(o,r,t.props.roundRelative,s,c),u=l.styles,h=$s(r,l.raws),p=h.horizontals,d=h.verticals,f=u.join(" ");a.borderRadiusState=f,ia(t,"onRound",ea(t,e,{horizontals:p,verticals:d,borderRadius:f,width:s,height:c,delta:i,dist:n}))}var ac={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,e){var n=t.state,i=n.target,r=n.matrix,o=n.left,a=n.top;if(!i)return null;var s=n.is3d?4:3,c=rc(i,n.width,n.height,n.borderRadiusState);return c?c.map((function(t,n){var i=ao(No(r,t.pos,s),[o,a]);return e.createElement("div",{key:"borderRadiusControl"+n,className:wo("control","border-radius"),"data-radius-index":n,style:{transform:"translate("+i[0]+"px, "+i[1]+"px)"}})})):null},dragControlCondition:function(t){if(!t.inputEvent||t.isRequest)return!1;var e=t.inputEvent.target.className||"";return e.indexOf("border-radius")>-1||e.indexOf("moveable-line")>-1&&e.indexOf("moveable-direction")>-1},dragControlStart:function(t,e){var n=e.datas,i=e.inputEvent.target,r=i.className||"",o=r.indexOf("border-radius")>-1,a=r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1,s=o?parseInt(i.getAttribute("data-radius-index"),10):-1,c=a?parseInt(i.getAttribute("data-line-index"),10):-1;if(!o&&!a)return!1;if(!1===ia(t,"onRoundStart",ea(t,e,{})))return!1;n.lineIndex=c,n.controlIndex=s,n.isControl=o,n.isLine=a,go(t,e);var l=t.props.roundRelative,u=t.state,h=u.target,p=u.width,d=u.height;n.isRound=!0,n.prevDist=[0,0];var f=rc(h,p,d)||[];return n.controlPoses=f,u.borderRadiusState=Ws(f.map((function(t){return t.pos})),f,l,p,d).styles.join(" "),!0},dragControl:function(t,e){var n=e.datas;if(!n.isRound||!n.isControl||!n.controlPoses.length)return!1;var i=n.controlIndex,r=n.controlPoses,o=r.map((function(t){return t.pos.slice()})),a=bo(e),s=a[0],c=a[1],l=[s,c],u=ao(l,n.prevDist);return va(r,o,i,s,c),n.prevDist=[s,c],oc(t,e,l,u,r,o),!0},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var i=e.datas,r=e.isDouble;if(!i.isRound)return!1;var o=n.width,a=n.height,s=i.isControl,c=i.controlIndex,l=i.isLine,u=i.lineIndex,h=i.controlPoses,p=h.map((function(t){return t.pos})),d=p.length;if(r){if(s)Vs(h,p,c,0);else if(l){var f=ya(t,e);!function(t,e,n,i,r,o,a){var s=$s(t),c=s.horizontals.length,l=s.verticals.length,u=-1,h=-1;0===n?0===c?u=0:1===c&&(u=1):3===n&&(c<=2?u=2:c<=3&&(u=3)),2===n?0===l?h=0:l<4&&(h=3):1===n&&(l<=1?h=1:l<=2&&(h=2)),Qs(t,e,0,u,h,i,r,o,a)}(h,p,u,f[0],f[1],o,a)}d!==h.length&&oc(t,e,[0,0],[0,0],h,p),ia(t,"onRoundEnd",na(t,e,{}))}return n.borderRadiusState="",!0},unset:function(t){t.state.borderRadiusState=""}},sc={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(t,e){var n=t.props.targets||[];t.moveables=[];var i=t.state,r={left:i.left,top:i.top};return n.map((function(n,i){return e.createElement(vc,{key:"moveable"+i,ref:Fn(t,"moveables",i),target:n,origin:!1,parentMoveable:t,parentPosition:r})}))}},cc=[Bs,ps,Ca,ds,ys,Os,Cs,Ps,Ls,Ds,{name:"padding",props:{padding:Object},events:{},render:function(t,e){var n=t.props;if(n.dragArea)return[];var i=n.padding||{},r=i.left,o=i.top,a=void 0===o?0:o,s=i.right,c=void 0===s?0:s,l=i.bottom,u=void 0===l?0:l,h=t.state,p=h.renderPoses,d=[h.pos1,h.pos2,h.pos3,h.pos4],f=[];return(void 0===r?0:r)>0&&f.push([0,2]),a>0&&f.push([0,1]),c>0&&f.push([1,3]),u>0&&f.push([2,3]),f.map((function(t,n){var i=t[0],r=t[1],o=fo([0,0],[100,0],[0,100],[100,100],d[i],d[r],p[i],p[r]);if(o.length)return e.createElement("div",{key:"padding"+n,className:wo("padding"),style:{transform:zo(o,!0)}})}))}},Ns,ic,nc,ac,sc],lc=cc.reduce((function(t,e){return Nr({},t,e.events)}),{}),uc=cc.reduce((function(t,e){return Nr({},t,e.props)}),{}),hc=function(t){var e={};for(var n in t)e[t[n]]=n;return e}(lc),pc=Object.keys(hc),dc=Object.keys(uc),fc={};cc.forEach((function(t){var e=t.css;e&&e.forEach((function(t){fc[t]=!0}))}));var gc=Object.keys(fc).join("\n"),bc=function(t,e){var n,i=function(t){var e,n="rCS"+function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0}(t).toString(36),i=0;return{className:n,inject:function(r,o){void 0===o&&(o={});var a,s=function(t){if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(r),c=0===i;return(s||c)&&(a=function(t,e,n,i){var r=document.createElement("style");r.setAttribute("type","text/css"),r.setAttribute("data-styled-id",t),n.nonce&&r.setAttribute("nonce",n.nonce);var o=e;return n.original||(o=e.replace(/([^}{]*){/gm,(function(e,n){return ai(n).map((function(e){return e.indexOf(":global")>-1?e.replace(/\:global/g,""):e.indexOf(":host")>-1?""+e.replace(/\:host/g,"."+t):"."+t+" "+e})).join(", ")+"{"}))),r.innerHTML=o,(i||document.head||document.body).appendChild(r),r}(n,t,o,s)),c&&(e=a),s||++i,{destroy:function(){s?(r.removeChild(a),a=null):(i>0&&--i,0===i&&e&&(e.parentNode.removeChild(e),e=null))}}}}}(e);return(n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){function n(){this.constructor=t}lr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["className","cspNonce"]),o=i.className;return ki("div",ur({ref:Hn(this,"element"),"data-styled-id":o,className:n+" "+o},r))},e.prototype.componentDidMount=function(){this.injectResult=i.inject(this.element,{nonce:this.props.cspNonce})},e.prototype.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},e.prototype.getElement=function(){return this.element},e}(Bi)).injector=i,n}(0,function(t,e){return e.replace(/([^}{]*){/gm,(function(e,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"}))}(jr,Gr+gc));function mc(t,e,n,i){var r=Zr(e,n),o=t?Ko(r/Math.PI*180,15)%180:-1;return ki("div",{key:"line"+i,className:wo("line","direction",t),"data-rotation":o,"data-line-index":i,"data-direction":t,style:Fo(e,n,r)})}var vc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={container:null,target:null,beforeMatrix:To(),matrix:To(),targetMatrix:To(),offsetMatrix:To(),targetTransform:"",is3d:!1,left:0,top:0,width:0,height:0,transformOrigin:[0,0],direction:1,beforeDirection:1,beforeOrigin:[0,0],origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],renderPoses:[[0,0],[0,0],[0,0],[0,0]],targetClientRect:{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},containerClientRect:{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},moveableClientRect:{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},rotation:0},e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isUnmounted=!1,e}Dr(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=this.state,n=t.edge,i=t.parentPosition,r=t.className,o=t.target,a=t.zoom,s=t.cspNonce;this.checkUpdate(),this.updateRenderPoses();var c=i||{left:0,top:0},l=c.left,u=c.top,h=e.left,p=e.top,d=e.direction,f=e.renderPoses,g=t.targets,b=(g&&g.length||o)&&e.target,m=this.isDragging(),v={};return this.getEnabledAbles().forEach((function(t){v["data-able-"+t.name.toLowerCase()]=!0})),ki(bc,Nr({cspNonce:s,ref:Hn(this,"controlBox"),className:wo("control-box",-1===d?"reverse":"",m?"dragging":"")+" "+r},v,{style:{position:"absolute",display:b?"block":"none",transform:"translate("+(h-l)+"px, "+(p-u)+"px) translateZ(50px)","--zoom":a,"--zoompx":a+"px"}}),this.renderAbles(),mc(n?"n":"",f[0],f[1],0),mc(n?"e":"",f[1],f[3],1),mc(n?"w":"",f[0],f[2],2),mc(n?"s":"",f[2],f[3],3))},n.componentDidMount=function(){this.controlBox.getElement();var t=this.props,e=t.parentMoveable,n=t.container;this.updateEvent(t),n||e||this.updateRect("End",!1,!0),this.updateCheckInput()},n.componentDidUpdate=function(t){this.updateEvent(t),this.updateCheckInput()},n.componentWillUnmount=function(){this.isUnmounted=!0,Zo(this,"targetDragger"),Zo(this,"controlDragger")},n.getContainer=function(){var t=this.props,e=t.parentMoveable;return t.container||e&&e.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(t){return t&&(t.getAttribute("class")||"").indexOf(jr)>-1},n.dragStart=function(t){return this.targetDragger&&this.targetDragger.triggerDragStart(t),this},n.hitTest=function(t){var e;if(t instanceof Element){var n=t.getBoundingClientRect();e={left:n.left,top:n.top,width:n.width,height:n.height}}else e=Nr({width:0,height:0},t);var i=this.state.targetClientRect,r=i.left,o=i.top,a=e.left,s=e.top,c=a+e.width,l=s+e.height,u=r+i.width,h=o+i.height,p=Math.max(r,a),d=Math.min(u,c),f=Math.max(o,s),g=Math.min(h,l);if(d<p||g<f)return 0;var b=(Math.min(u,c)-Math.max(a,r))*(Math.min(h,l)-Math.max(o,s));return Math.min(100,(d-p)*(g-f)/b*100)},n.isInside=function(t,e){var n,i,r,o,a,s,c,l=this.state,u=l.targetClientRect;return!!l.target&&(o=l.pos3,a=l.pos4,s=[ta(n=[t-u.left,e-u.top],i=l.pos1,r=l.pos2),ta(n,r,o),ta(n,o,i)],c=[ta(n,r,o),ta(n,o,a),ta(n,a,r)],!!(s.every((function(t){return t>=0}))||s.every((function(t){return t<=0}))||c.every((function(t){return t>=0}))||c.every((function(t){return t<=0}))))},n.updateRect=function(t,e,n){void 0===n&&(n=!0);var i=this.props,r=i.parentMoveable,o=this.state,a=o.target||this.props.target,s=this.getContainer(),c=r?r.props.rootContainer:i.rootContainer;this.updateState(Yo(this.controlBox&&this.controlBox.getElement(),a,s,s,c||s,e?o:void 0),!r&&n)},n.updateEvent=function(t){var e=this.controlBox.getElement(),n=this.targetAbles.length,i=this.controlAbles.length,r=this.props,o=r.dragTarget||r.target,a=r.dragArea,s=!n&&this.targetDragger||!a&&(t.dragTarget||t.target)!==o||t.dragArea!==a;s&&(Zo(this,"targetDragger"),this.updateState({dragger:null})),i||Zo(this,"controlDragger"),o&&n&&!this.targetDragger&&(this.targetDragger=Ea(this,o,"")),!this.controlDragger&&i&&(this.controlDragger=Oa(this,e,"controlAbles","Control")),s&&this.unsetAbles()},n.isDragging=function(){return!!this.targetDragger&&this.targetDragger.isFlag()||!!this.controlDragger&&this.controlDragger.isFlag()},n.updateTarget=function(t){this.updateRect(t,!0)},n.getRect=function(){var t=this.state,e=$o(this.state),n=e[0],i=e[1],r=e[2],o=e[3],a=Lo(e),s=t.width,c=t.height,l=a.width,u=a.height,h=a.left,p=a.top,d=[t.left,t.top],f=oo(d,t.origin);return{width:l,height:u,left:h,top:p,pos1:n,pos2:i,pos3:r,pos4:o,offsetWidth:s,offsetHeight:c,beforeOrigin:oo(d,t.beforeOrigin),origin:f,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},n.getRotation=function(){var t=this.state,e=t.direction,n=Zr(t.pos1,t.pos2)/Math.PI*180;return(n=e>=0?n:180-n)>=0?n:360+n},n.request=function(t,e,n){void 0===e&&(e={});var i=this.props,r=i.groupable,o=i.ables.filter((function(e){return e.name===t}))[0];if(this.isDragging()||!o||!o.request)return{request:function(){return this},requestEnd:function(){return this}};var a=this,s=o.request(this),c=n||e.isInstant,l=s.isControl?"controlAbles":"targetAbles",u=(r?"Group":"")+(s.isControl?"Control":""),h={request:function(e){return Sa(a,l,"drag",u,"",Nr({},s.request(e),{requestAble:t,isRequest:!0}),c),this},requestEnd:function(){return Sa(a,l,"drag",u,"End",Nr({},s.requestEnd(),{requestAble:t,isRequest:!0}),c),this}};return Sa(a,l,"drag",u,"Start",Nr({},s.requestStart(e),{requestAble:t,isRequest:!0}),c),c?h.request(e).requestEnd():h},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var t=this.state,e=this.props,n=t.beforeOrigin,i=t.transformOrigin,r=t.matrix,o=t.pos1,a=t.pos2,s=t.pos3,c=t.pos4,l=e.padding||{},u=l.left,h=void 0===u?0:u,p=l.top,d=void 0===p?0:p,f=l.bottom,g=void 0===f?0:f,b=l.right,m=void 0===b?0:b,v=t.is3d?4:3,y=e.groupable?n:oo(n,[t.left,t.top]);t.renderPoses=[oo(o,fa(r,[-h,-d],i,y,v)),oo(a,fa(r,[m,-d],i,y,v)),oo(s,fa(r,[-h,g],i,y,v)),oo(c,fa(r,[m,g],i,y,v))]},n.checkUpdate=function(){var t=this.props,e=t.target,n=t.container,i=t.parentMoveable,r=this.state,o=r.target,a=r.container;(o||e)&&(this.updateAbles(),(!ca(o,e)||!ca(a,n))&&(this.updateState({target:e,container:n}),i||!n&&!this.controlBox||this.updateRect("End",!1,!1)))},n.triggerEvent=function(t,e){var n=this.props[t];return n&&n(e)},n.unsetAbles=function(){var t=this;this.targetAbles.filter((function(e){return!!e.unset&&(e.unset(t),!0)})).length&&this.forceUpdate()},n.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props,i=n.triggerAblesSimultaneously,r=t.filter((function(t){return t&&n[t.name]})),o="drag"+e+"ControlStart",a=oa(r,["drag"+e+"Start","pinch"+e+"Start"],i),s=oa(r,[o],i);this.targetAbles=a,this.controlAbles=s},n.updateState=function(t,e){if(e)this.setState(t);else{var n=this.state;for(var i in t)n[i]=t[i]}},n.getEnabledAbles=function(){var t=this.props;return t.ables.filter((function(e){return e&&t[e.name]}))},n.renderAbles=function(){var t,e,n,i,r=this,o=this.props.triggerAblesSimultaneously,a={createElement:ki};return(t=ua(oa(this.getEnabledAbles(),["render"],o).map((function(t){return(0,t.render)(r,a)||[]}))).filter((function(t){return t})),e=function(t){return t.key},n=[],i={},t.forEach((function(t,r){var o=e(t),a=i[o];a||(i[o]=a=[],n.push(a)),a.push(t)})),n).map((function(t){return t[0]}))},n.updateCheckInput=function(){this.targetDragger&&(this.targetDragger.options.checkInput=this.props.checkInput)},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,cspNonce:""},e}(ji);function yc(t,e){return Math.max.apply(Math,t.map((function(t){return Math.max(t[0][e],t[1][e],t[2][e],t[3][e])})))}function xc(t,e){return Math.min.apply(Math,t.map((function(t){return Math.min(t[0][e],t[1][e],t[2][e],t[3][e])})))}var Sc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new zr,e.moveables=[],e.transformOrigin="50% 50%",e}Dr(e,t);var n=e.prototype;return n.updateEvent=function(t){var e=this.state,n=this.props;e.target||(e.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetDragger=Ea(this,e.target,"Group"),this.controlDragger=Oa(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var i=!ca(t.container,n.container);i&&(e.container=n.container);var r=this.differ.update(n.targets);(i||r.added.length||r.changed.length||r.removed.length)&&this.updateRect()},n.checkUpdate=function(){this.updateAbles()},n.updateRect=function(t,e,n){var i;if(void 0===n&&(n=!0),this.controlBox){this.moveables.forEach((function(e){e.updateRect(t,!1,!1)}));var r=this.state,o=this.props,a=r.target||o.target;(!e||""!==t&&o.updateGroup)&&(this.rotation=o.defaultGroupRotate,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]);var s=this.rotation,c=this.scale,l=function(t,e){if(!t.length)return[0,0,0,0];var n=t.map((function(t){return $o(t.state)})),i=Fr,r=Fr,o=0,a=0,s=Ko(e,1e-7);if(s%90){var c=e/180*Math.PI,l=Math.tan(c),u=-1/l,h=[Xr,Fr],p=[Xr,Fr];n.forEach((function(t){t.forEach((function(t){var e=t[1]-l*t[0],n=t[1]-u*t[0];h[0]=Math.max(h[0],e),h[1]=Math.min(h[1],e),p[0]=Math.max(p[0],n),p[1]=Math.min(p[1],n)}))})),h.forEach((function(t){p.forEach((function(e){var n=(e-t)/(l-u),o=l*n+t;i=Math.min(i,n),r=Math.min(r,o)}))}));var d=n.map((function(t){var e=t[1],n=t[2],i=t[3];return[co(t[0],-c),co(e,-c),co(n,-c),co(i,-c)]}));o=yc(d,0)-xc(d,0),a=yc(d,1)-xc(d,1)}else if(i=xc(n,0),r=xc(n,1),o=yc(n,0)-i,a=yc(n,1)-r,s%180){var f=o;o=a,a=f}return[i,r,o,a]}(this.moveables,s),u=l[0],h=l[1],p=l[2],d=l[3];a.style.cssText+="left:0px;top:0px; transform-origin: "+this.transformOrigin+"; width:"+p+"px; height:"+d+"px;transform:rotate("+s+"deg) scale("+(c[0]>=0?1:-1)+", "+(c[1]>=0?1:-1)+")",r.width=p,r.height=d;var f=this.getContainer(),g=Yo(this.controlBox.getElement(),a,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||f,r),b=[g.left,g.top];i=$o(g),g.pos1=i[0],g.pos2=i[1],g.pos3=i[2],g.pos4=i[3],g.origin=oo(b,g.origin),g.beforeOrigin=oo(b,g.beforeOrigin);var m=g.targetClientRect;m.top+=h-g.top-r.top,m.left+=u-g.left-r.left;var v=c[0]*c[1]>0?1:-1;this.updateState(Nr({},g,{direction:v,beforeDirection:v,left:u-g.left,top:h-g.top}),n)}},n.triggerEvent=function(e,n){if(e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,n)},n.updateAbles=function(){t.prototype.updateAbles.call(this,this.props.ables.concat([sc]),"Group")},e.defaultProps=Nr({},vc.defaultProps,{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(vc),Ec=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dr(e,t),e.prototype.render=function(){var t=this.props.ables||[],e=this.props.target||this.props.targets,n=ei(e);if(n&&e.length>1){var i=Nr({},this.props,{target:null,targets:e,ables:cc.concat([sc],t)});return ki(Sc,Nr({key:"group",ref:Hn(this,"moveable")},i))}var r=n?e[0]:e;return ki(vc,Nr({key:"single",ref:Hn(this,"moveable")},Nr({},this.props,{target:r,ables:cc.concat(t)})))},function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);o>3&&a&&Object.defineProperty(e,n,a)}([Un(qr)],e.prototype,"moveable"),e}(ji),Oc=function(t,e){return(Oc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Cc(t,e){function n(){this.constructor=t}Oc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var wc=function(){return(wc=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Tc=function(t){function e(e){var n=t.call(this,e)||this;return n.state={},n.state=n.props,n}return Cc(e,t),e.prototype.render=function(){return t=ki(Ec,wc({ref:Hn(this,"moveable")},this.state)),ki(Gi,{element:t,container:this.state.parentElement});var t},e}(Bi),Pc=dc,Ic=qr,kc=pc,_c=function(t){function e(e,n){void 0===n&&(n={});var i=t.call(this)||this;i.tempElement=document.createElement("div");var r=wc({container:e},n),o={};kc.forEach((function(t){o[li("on "+t)]=function(e){return i.trigger(t,e)}})),Xi(ki(Tc,wc({ref:Hn(i,"innerMoveable"),parentElement:e},r,o)),i.tempElement);var a=r.target;return ei(a)&&a.length>1&&i.updateRect(),i}Cc(e,t);var n=e.prototype;return n.setState=function(t,e){this.innerMoveable.setState(t,e)},n.destroy=function(){Xi(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Xn(Ic,(function(t,e){t[e]||(t[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.getMoveable();if(i&&i[e])return i[e].apply(i,t)})})),Xn(Pc,(function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var n;this.setState(((n={})[e]=t,n))},enumerable:!0,configurable:!0})}))],e)}(jn);function Mc(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function zc(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}let Rc=(()=>{class t{}return Mc([Un(Ic,{dragStart:"ngDragStart"}),zc("design:type",_c)],t.prototype,"moveable",void 0),t})(),Dc=(()=>{class t extends Rc{constructor(){super(),kc.forEach(t=>{this[t]=new o.n})}ngOnInit(){const t={},e={};Pc.forEach(e=>{t[e]=this[e]}),kc.forEach(t=>{e[t]=e=>{this[t].emit(e)}}),this.moveable=new _c(this.container||document.body,t),this.moveable.on(e)}ngOnChanges(t){const e=this.moveable;if(e)for(const n in t){const{previousValue:i,currentValue:r}=t[n];i!==r&&(e[n]=r)}}ngOnDestroy(){this.moveable.destroy()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["ngx-moveable"]],inputs:{draggable:"draggable",resizable:"resizable",scalable:"scalable",rotatable:"rotatable",warpable:"warpable",pinchable:"pinchable",snappable:"snappable",origin:"origin",target:"target",container:"container",throttleDrag:"throttleDrag",throttleDragRotate:"throttleDragRotate",throttleResize:"throttleResize",throttleScale:"throttleScale",throttleRotate:"throttleRotate",keepRatio:"keepRatio",edge:"edge",pinchThreshold:"pinchThreshold",snapCenter:"snapCenter",snapVertical:"snapVertical",snapElement:"snapElement",snapHorizontal:"snapHorizontal",snapThreshold:"snapThreshold",horizontalGuidelines:"horizontalGuidelines",verticalGuidelines:"verticalGuidelines",elementGuidelines:"elementGuidelines",bounds:"bounds",dragArea:"dragArea",rotationPosition:"rotationPosition",baseDirection:"baseDirection",defaultGroupRotate:"defaultGroupRotate",ables:"ables",className:"className",renderDirections:"renderDirections",scrollable:"scrollable",scrollContainer:"scrollContainer",scrollThreshold:"scrollThreshold",getScrollPosition:"getScrollPosition",rootContainer:"rootContainer",zoom:"zoom",transformOrigin:"transformOrigin",snapDigit:"snapDigit",isDisplaySnapDigit:"isDisplaySnapDigit",innerBounds:"innerBounds",triggerAblesSimultaneously:"triggerAblesSimultaneously",snapGap:"snapGap",pinchOutside:"pinchOutside",padding:"padding",snapDistFormat:"snapDistFormat",dragTarget:"dragTarget",checkInput:"checkInput",cspNonce:"cspNonce",startDragRotate:"startDragRotate",originDraggable:"originDraggable",originRelative:"originRelative",defaultGroupOrigin:"defaultGroupOrigin",groupable:"groupable",clippable:"clippable",customClipPath:"customClipPath",defaultClipPath:"defaultClipPath",clipRelative:"clipRelative",dragWithClip:"dragWithClip",clipArea:"clipArea",roundable:"roundable",roundRelative:"roundRelative"},outputs:{dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",dragGroupStart:"dragGroupStart",dragGroup:"dragGroup",dragGroupEnd:"dragGroupEnd",resizeStart:"resizeStart",resize:"resize",resizeEnd:"resizeEnd",resizeGroupStart:"resizeGroupStart",resizeGroup:"resizeGroup",resizeGroupEnd:"resizeGroupEnd",scaleStart:"scaleStart",scale:"scale",scaleEnd:"scaleEnd",scaleGroupStart:"scaleGroupStart",scaleGroup:"scaleGroup",scaleGroupEnd:"scaleGroupEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",rotateGroupStart:"rotateGroupStart",rotateGroup:"rotateGroup",rotateGroupEnd:"rotateGroupEnd",warpStart:"warpStart",warp:"warp",warpEnd:"warpEnd",pinchStart:"pinchStart",pinch:"pinch",pinchEnd:"pinchEnd",pinchGroupStart:"pinchGroupStart",pinchGroup:"pinchGroup",pinchGroupEnd:"pinchGroupEnd",click:"click",clickGroup:"clickGroup",renderStart:"renderStart",render:"render",renderEnd:"renderEnd",renderGroupStart:"renderGroupStart",renderGroup:"renderGroup",renderGroupEnd:"renderGroupEnd",scroll:"scroll",scrollGroup:"scrollGroup",snap:"snap",clipStart:"clipStart",clip:"clip",clipEnd:"clipEnd",roundStart:"roundStart",round:"round",roundEnd:"roundEnd",dragOriginStart:"dragOriginStart",dragOrigin:"dragOrigin",dragOriginEnd:"dragOriginEnd"},features:[o.yb,o.zb()],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),Nc=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[]]}),t})();const Ac=["moveable"],Lc=["moveableLabel"],Bc=function(){return[]},jc=function(){return[0,250,500]};let Gc=(()=>{class t{constructor(t,e,n,i){this.cd=t,this.resizeEventer=e,this.eventerService=n,this.undoService=i,this.selectedNodes=[],this.guidingElements=[],this.selectedCanvasElements=[],this.defaultGroupRotate=0,this.dimention=new C,this.resizeHanles=[],this.directionHandles=[],this.keepRatio=!1,this.resiable=!0,this.rotatable=!0,this.oldStyles=[],this.MOVE_WITH_KEY=2,this.resizeEventer.get().subscribe(t=>{this.moveable.updateRect()}),this.eventerService.get().subscribe(t=>{t.type===h.a.UPDATE_DIRECTION_HANLDES&&this.updateDirectionHandle()})}ngOnChanges(t){t.selectedNodes&&this.selectedNodes&&this.selectedNodes.length&&this.init()}init(){this.updateDirectionHandle()}updateDirectionHandle(){if(this.isMultipleItems())this.directionHandles=We[l.MULTIPLE_SELECTION],this.keepRatio=Ye[l.MULTIPLE_SELECTION],this.resiable=qe[l.MULTIPLE_SELECTION];else{const t=this.getFirstCanvasElement();t.locked?(this.directionHandles=[],this.rotatable=!1):(this.directionHandles=We[t.type],this.keepRatio=Ye[t.type],this.resiable=qe[t.type],this.rotatable=!0)}}startCustomDrag(t){setTimeout(()=>{this.moveable.isMoveableElement(t.target)||1!==this.selectedNodes.length||this.moveable.ngDragStart(t)})}onKeyDown(t){this.handleCustomDrag(t),this.handleUndoRedo(t)}handleCustomDrag(t){if(Ln.includes(t.key)){const e=t.key;this.moveable.request("draggable",{deltaX:"ArrowLeft"===e?-this.MOVE_WITH_KEY:"ArrowRight"===e?this.MOVE_WITH_KEY:0,deltaY:"ArrowUp"===e?-this.MOVE_WITH_KEY:"ArrowDown"===e?this.MOVE_WITH_KEY:0},!0),t.preventDefault()}}handleUndoRedo(t){(t.metaKey||t.ctrlKey)&&"z"===t.key&&(t.shiftKey&&"z"===t.key?this.undoService.redo():this.undoService.undo(),this.moveable.updateRect())}getFirstCanvasElement(){return this.selectedCanvasElements[0]}getFirstNode(){return this.selectedNodes[0]}isMultipleItems(){return this.selectedCanvasElements.length>1}onResizeStart(t){this.manualResize=!0,t.setOrigin(["%","%"]),this.onStart()}onResize(t){console.log(t);const{width:e,height:n}=t;this.updateNodeCss({width:e,height:n,transform:t.drag.transform}),this.setDisplayLabel(t.clientX,t.clientY,`W : ${e}<br>H : ${n}`)}onScaling(t){this.updateNodeCss({transform:t.drag.transform+` scale(${t.scale[0]}, ${t.scale[1]})`}),this.setDisplayLabel(t.clientX,t.clientY,`X : ${t.scale[0].toFixed(2)}<br>Y : ${t.scale[1].toFixed(2)}`)}onElementClick(t){t.isDouble&&this.editTextElement(t.inputTarget)}editTextElement(t){const e=this.getFirstCanvasElement();if(e.locked||e.type!==l.TEXT)return;t.setAttribute("contentEditable","true"),t.focus(),document.execCommand("selectAll",!1,null);const n=()=>{setTimeout(()=>{this.moveable.updateRect()})},i=()=>{e.locked||(t.removeAttribute("contentEditable"),e.children[0].innerText=t.innerText,t.removeEventListener("blur",i),t.removeEventListener("keydown",n))};t.addEventListener("blur",i),t.addEventListener("keydown",n)}dragging(t){console.log(t),this.updateNodeCss({transform:t.transform})}rotating(t){this.updateNodeCss({transform:t.transform});const e=Xe.getRotationValue(this.getFirstNode());this.setDisplayLabel(t.clientX,t.clientY,`${e} Deg`)}updateNodeCss(t,e=0){const n=this.selectedCanvasElements[e];n.locked||(this.preProcessStyles(n,t),Ue.applyCss(this.selectedNodes[e],n,t,!0))}preProcessStyles(t,e){[l.TEXT,l.LINE].includes(t.type)&&delete e[w.HEIGHT]}onGroupDrag({events:t}){t.forEach((t,e)=>{this.updateNodeCss({transform:t.transform},e)})}onGroupResizeStart({events:t}){t.forEach(t=>{t.setOrigin(["%","%"])}),this.onStart()}onGroupResize(t){t.events.forEach((t,e)=>{this.updateNodeCss({width:t.width,height:t.height,transform:t.drag.transform},e)}),this.setDisplayLabel(t.clientX,t.clientY,`W : ${t.target.offsetWidth}<br>H : ${t.target.offsetHeight}`)}onGroupScale(t){t.events.forEach((t,e)=>{this.updateNodeCss({transform:t.drag.transform+` scale(${t.scale[0]}, ${t.scale[1]})`},e)}),this.setDisplayLabel(t.clientX,t.clientY,`W : ${t.target.offsetWidth}<br>H : ${t.target.offsetHeight}`)}onGroupRotate(t){t.events.forEach((t,e)=>{this.updateNodeCss({transform:t.drag.transform+` rotate(${t.rotate}deg)`},e)});const e=Xe.getRotationValue(document.getElementsByClassName("moveable-area")[0]);this.setDisplayLabel(t.clientX,t.clientY,`${e} Deg`)}setDisplayLabel(t,e,n){this.moveableLabel.nativeElement.style.cssText=`display: block; transform: translate(${t}px,\n      ${e-10}px) translate(-100%, -100%) translateZ(-100px);`,this.moveableLabel.nativeElement.innerHTML=n}onStart(){this.oldStyles=Ue.getClonedStylesAsText(this.selectedCanvasElements)}onEnd(t){this.sendToUndoList(),this.moveableLabel.nativeElement.style.display="none"}sendToUndoList(){const t=Ue.getClonedStylesAsText(this.selectedCanvasElements);this.oldStyles.toString()!==t.toString()&&this.undoService.add({canvasElements:this.selectedCanvasElements,nodes:this.selectedNodes,type:Qe.STYLE,oldStyle:this.oldStyles,newStyle:t})}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.h),o.Ob(en),o.Ob(h.b),o.Ob($e))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-select-element"]],viewQuery:function(t,e){var n;1&t&&(o.Cc(Ac,!0),o.Cc(Lc,!0)),2&t&&(o.nc(n=o.cc())&&(e.moveable=n.first),o.nc(n=o.cc())&&(e.moveableLabel=n.first))},hostBindings:function(t,e){1&t&&o.bc("keydown",(function(t){return e.onKeyDown(t)}),!1,o.qc)},inputs:{selectedNodes:"selectedNodes",guidingElements:"guidingElements",selectedCanvasElements:"selectedCanvasElements",container:"container",defaultGroupRotate:"defaultGroupRotate"},features:[o.zb()],decls:4,vars:28,consts:[[1,"moveable-label"],["moveableLabel",""],[3,"target","edge","renderDirections","dragArea","throttleRotate","throttleScale","throttleDrag","elementGuidelines","draggable","container","origin","rotatable","resizable","scalable","warpable","pinchable","keepRatio","defaultGroupRotate","throttleResize","horizontalGuidelines","snappable","snapCenter","verticalGuidelines","resizeStart","resize","drag","dragGroup","resizeGroupStart","dragStart","dragGroupStart","scaleStart","scaleGroupStart","resizeGroup","scaleGroup","rotateGroup","rotateStart","rotateGroupStart","rotate","scale","click","dragEnd","rotateEnd","resizeEnd","scaleEnd","dragGroupEnd","rotateGroupEnd","resizeGroupEnd","scaleGroupEnd"],["moveable",""]],template:function(t,e){1&t&&(o.Pb(0,"div",0,1),o.Tb(2,"ngx-moveable",2,3),o.bc("resizeStart",(function(t){return e.onResizeStart(t)}))("resize",(function(t){return e.onResize(t)}))("drag",(function(t){return e.dragging(t)}))("dragGroup",(function(t){return e.onGroupDrag(t)}))("resizeGroupStart",(function(t){return e.onGroupResizeStart(t)}))("dragStart",(function(){return e.onStart()}))("dragGroupStart",(function(){return e.onStart()}))("scaleStart",(function(){return e.onStart()}))("scaleGroupStart",(function(){return e.onStart()}))("resizeGroup",(function(t){return e.onGroupResize(t)}))("scaleGroup",(function(t){return e.onGroupScale(t)}))("rotateGroup",(function(t){return e.onGroupRotate(t)}))("rotateStart",(function(){return e.onStart()}))("rotateGroupStart",(function(){return e.onStart()}))("rotate",(function(t){return e.rotating(t)}))("scale",(function(t){return e.onScaling(t)}))("click",(function(t){return e.onElementClick(t)}))("dragEnd",(function(t){return e.onEnd(t)}))("rotateEnd",(function(t){return e.onEnd(t)}))("resizeEnd",(function(t){return e.onEnd(t)}))("scaleEnd",(function(t){return e.onEnd(t)}))("dragGroupEnd",(function(t){return e.onEnd(t)}))("rotateGroupEnd",(function(t){return e.onEnd(t)}))("resizeGroupEnd",(function(t){return e.onEnd(t)}))("scaleGroupEnd",(function(t){return e.onEnd(t)})),o.Sb()),2&t&&(o.Bb(2),o.jc("target",e.selectedNodes)("edge",!0)("renderDirections",e.directionHandles)("dragArea",!0)("throttleRotate",1)("throttleScale",.01)("throttleDrag",1)("elementGuidelines",o.kc(25,Bc))("draggable",!0)("container",e.container)("origin",!1)("rotatable",e.rotatable)("resizable",e.resiable)("scalable",!1)("warpable",!1)("pinchable",!1)("keepRatio",e.keepRatio)("defaultGroupRotate",e.defaultGroupRotate)("elementGuidelines",e.guidingElements)("throttleResize",1)("horizontalGuidelines",o.kc(26,jc))("scalable",!0)("snappable",!0)("snapCenter",!0)("verticalGuidelines",o.kc(27,jc)))},directives:[Dc],styles:[".moveable-label{display:none;position:fixed;top:0;left:0;padding:5px;border-radius:3px;background:#333;color:#fff;font-weight:700;font-size:12px;transform:translate(-100%,-100%);z-index:9999;opacity:.6}",".toolbar-icon-size{width:32px;line-height:32px;height:32px}.my-resize-handle-e .my-resize-handle-inner,.my-resize-handle-n .my-resize-handle-inner,.my-resize-handle-s .my-resize-handle-inner,.my-resize-handle-w .my-resize-handle-inner,.resizable-props,ew .my-resize-handle-inner,ns .my-resize-handle-inner{border:1px solid #a9a9a9;background:#fff}.my-resize-handle{position:absolute}.my-resize-handle-e,.my-resize-handle-w,ew{top:50%}.my-resize-handle-e .my-resize-handle-inner,.my-resize-handle-w .my-resize-handle-inner,ew .my-resize-handle-inner{margin-top:-10px;width:6px;height:20px}.my-resize-handle-e{right:-3px}.my-resize-handle-w{left:-3px}.my-resize-handle-n,.my-resize-handle-s,ns{left:50%}.my-resize-handle-n .my-resize-handle-inner,.my-resize-handle-s .my-resize-handle-inner,ns .my-resize-handle-inner{margin-left:-10px;width:20px;height:6px}.my-resize-handle-n{top:-3px}.my-resize-handle-s{bottom:-3px}"],encapsulation:2}),t})();var Hc=function(){return(Hc=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function Fc(t){return 180*(e=[t[0].clientX,t[0].clientY],n=[t[1].clientX,t[1].clientY],((i=Math.atan2(n[1]-e[1],n[0]-e[0]))>=0?i:i+2*Math.PI)/Math.PI);var e,n,i}function Xc(t,e,n,i){var r=$c(t),o=$c(e),a=$c(i);return Wc(Kc(i[0],Jc(r,a)),Kc(i[0],Jc(o,a)),n[0])}function Uc(t){return t.touches?Vc(t.touches):[Qc(t)]}function Wc(t,e,n){var i=t.clientX,r=t.clientY;return{clientX:i,clientY:r,deltaX:i-e.clientX,deltaY:r-e.clientY,distX:i-n.clientX,distY:r-n.clientY}}function Yc(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function qc(t,e,n){return t.map((function(t,i){return Wc(t,e[i],n[i])}))}function Vc(t){for(var e=Math.min(t.length,2),n=[],i=0;i<e;++i)n.push(Qc(t[i]));return n}function Qc(t){return{clientX:t.clientX,clientY:t.clientY}}function $c(t){return 1===t.length?t[0]:{clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function Kc(t,e){return{clientX:t.clientX+e.clientX,clientY:t.clientY+e.clientY}}function Jc(t,e){return{clientX:t.clientX-e.clientX,clientY:t.clientY-e.clientY}}var Zc=["textarea","input"],tl=function(){function t(t,e){var n=this;void 0===e&&(e={}),this.options={},this.flag=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.targets=[],this.prevTime=0,this.isDouble=!1,this.startRotate=0,this.onDragStart=function(t,e){if(void 0===e&&(e=!0),n.flag||!1!==t.cancelable){var i=n.options,r=i.container,o=i.pinchOutside,a=i.dragstart,s=i.preventRightClick,c=i.preventDefault,l=i.checkInput,u=n.isTouch;if(!n.flag){var h=document.activeElement,p=t.target,d=p.tagName.toLowerCase(),f=Zc.indexOf(d)>-1,g=p.isContentEditable;if(f||g){if(l||h===p)return!1;if(h&&g&&h.isContentEditable&&h.contains(p))return!1}else(c||"touchstart"===t.type)&&h&&(h.isContentEditable||Zc.indexOf(h.tagName)>-1)&&h.blur()}var b=0;if(!n.flag&&u&&o&&(b=setTimeout((function(){gi(r,"touchstart",n.onDragStart,{passive:!1})}))),n.flag&&u&&o&&bi(r,"touchstart",n.onDragStart),function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(b),!n.flag&&t.touches.length!==t.changedTouches.length)return;n.pinchFlag||n.onPinchStart(t)}if(!n.flag){var m=n.startClients[0]?n.startClients:Uc(t);n.customDist=[0,0],n.flag=!0,n.isDrag=!1,n.startClients=m,n.prevClients=m,n.datas={},n.movement=0;var v=Wc(m[0],n.prevClients[0],n.startClients[0]);if(s&&(3===t.which||2===t.button))return clearTimeout(b),n.initDrag(),!1;!1===(a&&a(Hc({type:"dragstart",datas:n.datas,inputEvent:t,isTrusted:e},v)))&&(clearTimeout(b),n.initDrag()),n.isDouble=hi()-n.prevTime<200,n.flag&&c&&t.preventDefault()}}},this.onDrag=function(t,e){if(n.flag){var i=Uc(t);n.pinchFlag&&n.onPinch(t,i);var r=n.move([0,0],t,i);if(r&&(r.deltaX||r.deltaY)){var o=n.options.drag;o&&o(Hc({},r,{isScroll:!!e,inputEvent:t}))}}},this.onDragEnd=function(t){if(n.flag){var e=n.options,i=e.dragend;n.isTouch&&e.pinchOutside&&bi(e.container,"touchstart",n.onDragStart),n.pinchFlag&&n.onPinchEnd(t),n.flag=!1;var r=n.prevClients,o=n.startClients,a=n.pinchFlag?Xc(r,r,o,n.startPinchClients):Wc(r[0],r[0],o[0]),s=hi(),c=!n.isDrag&&n.isDouble;n.prevTime=n.isDrag||c?0:s,n.startClients=[],n.prevClients=[],i&&i(Hc({type:"dragend",datas:n.datas,isDouble:c,isDrag:n.isDrag,inputEvent:t},a))}};var i=[].concat(t);this.options=Hc({checkInput:!1,container:i.length>1?window:i[0],preventRightClick:!0,preventDefault:!0,pinchThreshold:0,events:["touch","mouse"]},e);var r=this.options,o=r.container,a=r.events;if(this.isTouch=a.indexOf("touch")>-1,this.isMouse=a.indexOf("mouse")>-1,this.customDist=[0,0],this.targets=i,this.isMouse&&(i.forEach((function(t){gi(t,"mousedown",n.onDragStart)})),gi(o,"mousemove",this.onDrag),gi(o,"mouseup",this.onDragEnd),gi(o,"contextmenu",this.onDragEnd)),this.isTouch){var s={passive:!1};i.forEach((function(t){gi(t,"touchstart",n.onDragStart,s)})),gi(o,"touchmove",this.onDrag,s),gi(o,"touchend",this.onDragEnd,s),gi(o,"touchcancel",this.onDragEnd,s)}}var e=t.prototype;return e.isDragging=function(){return this.isDrag},e.isFlag=function(){return this.flag},e.isPinchFlag=function(){return this.pinchFlag},e.isPinching=function(){return this.isPinch},e.scrollBy=function(t,e,n,i){void 0===i&&(i=!0),this.flag&&(this.startClients.forEach((function(n){n.clientX-=t,n.clientY-=e})),this.prevClients.forEach((function(n){n.clientX-=t,n.clientY-=e})),i&&this.onDrag(n,!0))},e.move=function(t,e,n){var i=t[0],r=t[1];void 0===n&&(n=this.prevClients);var o=this.customDist,a=this.prevClients,s=this.startClients,c=this.pinchFlag?Xc(n,a,s,this.startPinchClients):Wc(n[0],a[0],s[0]);o[0]+=i,o[1]+=r,c.deltaX+=i,c.deltaY+=r;var l=c.deltaX,u=c.deltaY;return c.distX+=o[0],c.distY+=o[1],this.movement+=Math.sqrt(l*l+u*u),this.prevClients=n,this.isDrag=!0,Hc({type:"drag",datas:this.datas},c,{movement:this.movement,isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},e.onPinchStart=function(t){var e,n,i=this.options,r=i.pinchstart;if(!(this.isDrag&&this.movement>i.pinchThreshold)){var o=Vc(t.changedTouches);if(this.pinchFlag=!0,(e=this.startClients).push.apply(e,o),(n=this.prevClients).push.apply(n,o),this.startDistance=Yc(this.prevClients),this.startPinchClients=this.prevClients.slice(),r){var a=this.prevClients,s=$c(a),c=Wc(s,s,s);this.startRotate=Fc(a),r(Hc({type:"pinchstart",datas:this.datas,angle:this.startRotate,touches:qc(a,a,a)},c,{inputEvent:t}))}}},e.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){this.isPinch=!0;var n=this.options.pinch;if(n){var i=this.prevClients,r=this.startClients,o=Wc($c(e),$c(i),$c(r)),a=Fc(e),s=Yc(e);n(Hc({type:"pinch",datas:this.datas,movement:this.movement,angle:a,rotation:a-this.startRotate,touches:qc(e,i,r),scale:s/this.startDistance,distance:s},o,{inputEvent:t}))}}},e.onPinchEnd=function(t){if(this.flag&&this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.options.pinchend;if(n){var i=this.prevClients,r=this.startClients,o=Wc($c(i),$c(i),$c(r));n(Hc({type:"pinchend",datas:this.datas,isPinch:e,touches:qc(i,i,r)},o,{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}}},e.triggerDragStart=function(t){this.onDragStart(t,!1)},e.unset=function(){var t=this,e=this.targets,n=this.options.container;this.isMouse&&(e.forEach((function(e){bi(e,"mousedown",t.onDragStart)})),bi(n,"mousemove",this.onDrag),bi(n,"mouseup",this.onDragEnd),bi(n,"contextmenu",this.onDragEnd)),this.isTouch&&(e.forEach((function(e){bi(e,"touchstart",t.onDragStart)})),bi(n,"touchstart",this.onDragStart),bi(n,"touchmove",this.onDrag),bi(n,"touchend",this.onDragEnd),bi(n,"touchcancel",this.onDragEnd))},e.initDrag=function(){this.startClients=[],this.prevClients=[],this.flag=!1},t}(),el=function(t,e){return(el=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},nl=function(t,e){return function(t,e){function n(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return a[t];var n,o=String(t);return(n=i[o.toLowerCase()])?n:(n=r[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}n.isEventKey=function(t,e){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;if(null==n)return!1;if("string"==typeof e){var o;if(o=i[e.toLowerCase()])return o===n;if(o=r[e.toLowerCase()])return o===n}else if("number"==typeof e)return e===n;return!1}};var i=(e=t.exports=n).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=e.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)i[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)i[o-48]=o;for(o=1;o<13;o++)i["f"+o]=o+111;for(o=0;o<10;o++)i["numpad "+o]=o+96;var a=e.names=e.title={};for(o in i)a[i[o]]=o;for(var s in r)i[s]=r[s]}(e={exports:{}},e.exports),e.exports}().names;function il(t){return Array.isArray(t)}function rl(t){return"string"==typeof t}function ol(t,e,n,i){t.addEventListener(e,n,i)}function al(t,e,n){t.removeEventListener(e,n)}var sl,cl={"+":"plus","left command":"meta","right command":"meta"},ll={shift:1,ctrl:2,alt:3,meta:4};function ul(t){var e=nl[t]||"";for(var n in cl)e=e.replace(n,cl[n]);return e.replace(/\s/g,"")}function hl(t,e){void 0===e&&(e=ul(t.keyCode));var n=[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"];return-1===n.indexOf(e)&&n.push(e),n.filter(Boolean)}function pl(t){var e=t.slice();return e.sort((function(t,e){return(ll[t]||5)-(ll[e]||5)})),e}var dl=function(t){function e(e){void 0===e&&(e=window);var n=t.call(this)||this;return n.container=e,n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n.clear=function(){return n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n},n.keydownEvent=function(t){n.triggerEvent("keydown",t)},n.keyupEvent=function(t){n.triggerEvent("keyup",t)},n.blur=function(){n.clear(),n.trigger("blur")},ol(e,"blur",n.blur),ol(e,"keydown",n.keydownEvent),ol(e,"keyup",n.keyupEvent),n}!function(t,e){function n(){this.constructor=t}el(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return Object.defineProperty(e,"global",{get:function(){return sl||(sl=new e)},enumerable:!0,configurable:!0}),e.setGlobal=function(){return this.global},n.destroy=function(){var t=this.container;this.clear(),this.off(),al(t,"blur",this.blur),al(t,"keydown",this.keydownEvent),al(t,"keyup",this.keyupEvent)},n.keydown=function(t,e){return this.addEvent("keydown",t,e)},n.offKeydown=function(t,e){return this.removeEvent("keydown",t,e)},n.offKeyup=function(t,e){return this.removeEvent("keyup",t,e)},n.keyup=function(t,e){return this.addEvent("keyup",t,e)},n.addEvent=function(t,e,n){return il(e)?this.on(t+"."+pl(e).join("."),n):rl(e)?this.on(t+"."+e,n):this.on(t,e),this},n.removeEvent=function(t,e,n){return il(e)?this.off(t+"."+pl(e).join("."),n):rl(e)?this.off(t+"."+e,n):this.off(t,e),this},n.triggerEvent=function(t,e){this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;var n=ul(e.keyCode),i={key:n,isToggle:"ctrl"===n||"shift"===n||"meta"===n||"alt"===n,inputEvent:e,keyCode:e.keyCode,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey};this.trigger(t,i),this.trigger(t+"."+n,i);var r=hl(e,n);r.length>1&&this.trigger(t+"."+r.join("."),i)},e}(jn),fl=function(t,e){return(fl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},gl=function(){return(gl=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function bl(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function ml(t,e,n){t!==e&&n(t,e)}function vl(t){var e=t.distX,n=void 0===e?0:e,i=t.distY,r=void 0===i?0:i,o=t.datas,a=o.startX,s=o.startY,c=Math.min(0,n),l=Math.min(0,r),u=Math.abs(n),h=Math.abs(r),p=a+c,d=s+l;return{left:p,top:d,right:p+u,bottom:d+h,width:u,height:h}}var yl,xl,Sl,El=(xl="rCS"+function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0}("\n:host {\n    position: fixed;\n    display: none;\n    border: 1px solid #4af;\n    background: rgba(68, 170, 255, 0.5);\n    z-index: 100;\n}\n").toString(36),Sl=0,{className:xl,inject:function(t,e){void 0===e&&(e={});var n,i=function(t){if(t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(t),r=0===Sl;return(i||r)&&(n=function(t,e,n,i){var r=document.createElement("style");r.setAttribute("type","text/css"),r.setAttribute("data-styled-id",t),n.nonce&&r.setAttribute("nonce",n.nonce);var o=e;return n.original||(o=e.replace(/([^}{]*){/gm,(function(e,n){return ai(n).map((function(e){return e.indexOf(":global")>-1?e.replace(/\:global/g,""):e.indexOf(":host")>-1?""+e.replace(/\:host/g,"."+t):"."+t+" "+e})).join(", ")+"{"}))),r.innerHTML=o,(i||document.head||document.body).appendChild(r),r}(xl,"\n:host {\n    position: fixed;\n    display: none;\n    border: 1px solid #4af;\n    background: rgba(68, 170, 255, 0.5);\n    z-index: 100;\n}\n",e,i)),r&&(yl=n),i||++Sl,{destroy:function(){i?(t.removeChild(n),n=null):(Sl>0&&--Sl,0===Sl&&yl&&(yl.parentNode.removeChild(yl),yl=null))}}}}),Ol="selecto-selection "+El.className,Cl=["selectableTargets","selectByClick","selectFromInside","continueSelect","toggleContinueSelect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault"],wl=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}(["dragContainer","cspNonce"],Cl),Tl=(Boolean,Boolean,Boolean,Boolean,Boolean,["dragStart","drag","dragEnd","selectStart","select","selectEnd","keydown","keyup","scroll"]),Pl=["clickTarget","setSelectedTargets","triggerDragStart"],Il=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;return n.selectedTargets=[],n.differ=new zr,n.dragScroll=new Ir,n.onDragStart=function(t,e){var i=t.datas,r=t.clientX,o=t.clientY,a=t.inputEvent,s=n.options,c=s.continueSelect,l=s.selectFromInside,u=s.selectByClick,h=n.getSelectableTargets(),p=h.map((function(t){var e=t.getBoundingClientRect(),n=e.left,i=e.top,r=e.width,o=e.height;return{left:n,top:i,right:n+r,bottom:i+o,width:r,height:o}}));i.selectableTargets=h,i.selectableRects=p,i.startSelectedTargets=n.selectedTargets;for(var d=e||document.elementFromPoint(r,o),f={left:r,top:o,right:r,bottom:o,width:0,height:0};d&&!(h.indexOf(d)>-1);)d=d.parentElement;var g=d?[d]:[],b=!l&&g.length>0;if(b&&!u)return!1;var m=a.type;if(!("mousedown"!==m&&"touchstart"!==m||n.trigger("dragStart",t)))return!1;if(c?g=n.getSelectedTargets(g):n.selectedTargets=[],n.select(g,f,a,!0),i.startX=r,i.startY=o,i.selectedTargets=g,n.target.style.cssText+="left:0px;top:0px;transform: translate("+r+"px, "+o+"px)",b&&u)return n.onDragEnd(t),a.preventDefault(),!1;"touchstart"===m&&a.preventDefault();var v=n.options.scrollOptions;return v&&v.container&&n.dragScroll.dragStart(t,v),!0},n.onDrag=function(t){var e=n.options.scrollOptions;e&&e.container&&n.dragScroll.drag(t,e)||n.check(t)},n.onDragEnd=function(t){var e=t.datas,i=vl(t);n.dragScroll.dragEnd(),n.target.style.cssText+="display: none;",n.trigger("dragEnd",gl(gl({},t),{rect:i})),n.selectEnd(e.startSelectedTargets,e.selectedTargets,i,t),n.selectedTargets=e.selectedTargets},n.onKeyDown=function(t){n.sameCombiKey(t)&&(n.continueSelect=!0,n.trigger("keydown",{}))},n.onKeyUp=function(t){n.sameCombiKey(t)&&(n.continueSelect=!1,n.trigger("keyup",{}))},n.onBlur=function(){n.toggleContinueSelect&&n.continueSelect&&n.trigger("keyup",{})},n.onDocumentSelectStart=function(t){if(n.dragger.isFlag()){var e=n.dragContainer;e===window&&(e=document.documentElement);var i=e instanceof Element?[e]:[].slice.call(e),r=t.target;i.some((function(e){if(e===r||e.contains(r))return t.preventDefault(),!0}))}},n.target=e.target,n.container=e.container,n.options=gl({target:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,hitRate:100,continueSelect:!1,toggleContinueSelect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,cspNonce:""},e),n.initElement(),n.initDragScroll(),n.setKeyController(),n}!function(t,e){function n(){this.constructor=t}fl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.setSelectedTargets=function(t){return this.selectedTargets=t,this.differ=new zr(t),this},n.setKeyContainer=function(t){var e=this,n=this.options;ml(n.keyContainer,t,(function(){n.keyContainer=t,e.setKeyController()}))},n.setToggleContinueSelect=function(t){var e=this,n=this.options;ml(n.toggleContinueSelect,t,(function(){n.toggleContinueSelect=t,e.setKeyEvent()}))},n.setPreventDefault=function(t){this.dragger.options.preventDefault=t},n.setCheckInput=function(t){this.dragger.options.checkInput=t},n.triggerDragStart=function(t){return this.dragger.triggerDragStart(t),this},n.destroy=function(){this.off(),this.keycon&&this.keycon.destroy(),this.dragger.unset(),this.injectResult.destroy(),bi(document,"selectstart",this.onDocumentSelectStart),this.keycon=null,this.dragger=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.clickTarget=function(t,e){var n=function(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}return{clientX:t.clientX,clientY:t.clientY}}(t),i={datas:{},clientX:n.clientX,clientY:n.clientY,inputEvent:t};return this.onDragStart(i,e)&&this.onDragEnd(i),this},n.setKeyController=function(){var t=this.options,e=t.keyContainer,n=t.toggleContinueSelect;this.keycon&&(this.keycon.destroy(),this.keycon=null),n&&(this.keycon=new dl(e||window),this.keycon.keydown(this.onKeyDown).keyup(this.onKeyUp).on("blur",this.onBlur))},n.setKeyEvent=function(){this.options.toggleContinueSelect&&!this.keycon&&this.setKeyController()},n.initElement=function(){this.target=function t(e,n,i){var r=e.children,o=e.attributes,a=e.className,s=e.style,c=n||document.createElement(e.tag);for(var l in o)c.setAttribute(l,o[l]);var u=c.children;if(r.forEach((function(e,n){t(e,u[n],c)})),a&&a.split(" ").forEach((function(t){di(c,t)||fi(c,t)})),s){var h=c.style;for(var l in s)h[l]=s[l]}return!n&&i&&i.appendChild(c),c}(function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=e||{},o=r.className,a=void 0===o?"":o,s=r.style,c=void 0===s?{}:s,l=bl(r,["className","style"]);return{tag:t,className:a,style:c,attributes:l,children:n}}("div",{className:Ol}),this.target,this.container);var t=this.target,e=this.options,n=e.dragContainer,i=e.checkInput,r=e.preventDefault;this.dragContainer="string"==typeof n?[].slice.call(document.querySelectorAll(n)):this.options.dragContainer||this.target.parentNode,this.dragger=new tl(this.dragContainer,{container:window,checkInput:i,preventDefault:r,dragstart:this.onDragStart,drag:this.onDrag,dragend:this.onDragEnd}),gi(document,"selectstart",this.onDocumentSelectStart),this.injectResult=El.inject(t,{nonce:this.options.cspNonce})},n.hitTest=function(t,e,n,i,r){var o=this.options,a=o.hitRate,s=o.selectByClick,c=t.left,l=t.top,u=t.right,h=t.bottom,p=[];return r.forEach((function(t,r){var o=t.left,d=t.top,f=t.right,g=t.bottom,b=o<=e&&e<=f&&d<=n&&n<=g,m=(f-o)*(g-d),v=Math.max(o,c),y=Math.min(f,u),x=Math.max(d,l),S=Math.min(g,h);s&&b?p.push(i[r]):y<v||S<x||Math.round((y-v)*(S-x)/m*100)>=a&&p.push(i[r])})),p},n.initDragScroll=function(){var t=this;this.dragScroll.on("scroll",(function(e){t.trigger("scroll",{container:e.container,direction:e.direction})})).on("move",(function(e){var n=e.offsetX,i=e.offsetY,r=e.inputEvent,o=r.datas;o.startX-=n,o.startY-=i,o.selectableRects.forEach((function(t){t.top-=i,t.bottom-=i,t.left-=n,t.right-=n})),t.dragger.scrollBy(n,i,r.inputEvent,!1),r.distX+=n,r.distY+=i,t.check(r)}))},n.getSelectableTargets=function(){var t=[];return this.options.selectableTargets.forEach((function(e){ti(e)?t.push(e):[].slice.call(document.querySelectorAll(e)).forEach((function(e){t.push(e)}))})),t},n.getSelectedTargets=function(t){var e=Mr(this.selectedTargets,t),n=e.list,i=e.prevList,r=e.removed;return e.added.map((function(t){return n[t]})).concat(r.map((function(t){return i[t]})))},n.select=function(t,e,n,i){var r=this.differ.update(t),o=r.added,a=r.removed,s=r.prevList,c=r.list;i&&this.trigger("selectStart",{selected:t,added:o.map((function(t){return c[t]})),removed:a.map((function(t){return s[t]})),rect:e,inputEvent:n}),(o.length||a.length)&&this.trigger("select",{selected:t,added:o.map((function(t){return c[t]})),removed:a.map((function(t){return s[t]})),rect:e,inputEvent:n})},n.selectEnd=function(t,e,n,i){var r=i.inputEvent,o=i.isDouble,a=Mr(t,e),s=a.added,c=a.removed,l=a.prevList,u=a.list,h=Mr(this.selectedTargets,e),p=h.added,d=h.removed,f=h.prevList,g=h.list,b=r.type,m="mousedown"===b||"touchstart"===b;this.trigger("selectEnd",{selected:e,added:s.map((function(t){return u[t]})),removed:c.map((function(t){return l[t]})),afterAdded:p.map((function(t){return g[t]})),afterRemoved:d.map((function(t){return f[t]})),isDragStart:m,isDouble:!!o,rect:n,inputEvent:r})},n.check=function(t){var e=t.datas,n=t.inputEvent,i=vl(t);this.target.style.cssText+="display: block;left:0px;top:0px;transform: translate("+i.left+"px, "+i.top+"px);width:"+i.width+"px;height:"+i.height+"px;";var r=this.hitTest(i,e.startX,e.startY,e.selectableTargets,e.selectableRects),o=this.getSelectedTargets(r);this.trigger("drag",gl(gl({},t),{rect:i})),this.select(o,i,n),e.selectedTargets=o},n.sameCombiKey=function(t){var e=[].concat(this.options.toggleContinueSelect),n=hl(t.inputEvent,t.key);return e.every((function(t){return n.indexOf(t)>-1}))},function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Xn(Cl,(function(t,e){var n={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},i=li("set "+e);n.set=t[i]?function(t){this[i](t)}:function(t){this.options[e]=t},Object.defineProperty(t,e,n)}))],e)}(jn);const kl=["el"];let _l=(()=>{class t{}return Mc([Un(Pl),zc("design:type",Il)],t.prototype,"selecto",void 0),t})(),Ml=(()=>{class t extends _l{constructor(){super(),this.selectionClassName=Ol,Tl.forEach(t=>{this[t]=new o.n})}ngAfterViewInit(){const t={};wl.forEach(e=>{e in this&&(t[e]=this[e])}),this.selecto=new Il(Object.assign({},t,{target:this.elRef.nativeElement}));const e=this.selecto;Tl.forEach(t=>{e.on(t,e=>{this[t].emit(e)})})}ngOnChanges(t){const e=this.selecto;if(e)for(const n in t){if(Cl.indexOf(n)<-1)continue;const{previousValue:i,currentValue:r}=t[n];i!==r&&(e[n]=r)}}ngOnDestroy(){this.selecto.destroy()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["ngx-selecto"]],viewQuery:function(t,e){var n;1&t&&o.Cc(kl,!0),2&t&&o.nc(n=o.cc())&&(e.elRef=n.first)},inputs:{target:"target",container:"container",dragContainer:"dragContainer",selectableTargets:"selectableTargets",selectByClick:"selectByClick",selectFromInside:"selectFromInside",continueSelect:"continueSelect",toggleContinueSelect:"toggleContinueSelect",keyContainer:"keyContainer",hitRate:"hitRate",scrollOptions:"scrollOptions",checkInput:"checkInput",preventDefault:"preventDefault",cspNonce:"cspNonce"},outputs:{dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",selectStart:"selectStart",select:"select",selectEnd:"selectEnd",keydown:"keydown",keyup:"keyup",scroll:"scroll"},features:[o.yb,o.zb()],decls:2,vars:2,consts:[["el",""]],template:function(t,e){1&t&&o.Pb(0,"div",null,0),2&t&&o.Db(e.selectionClassName)},encapsulation:2}),t})(),zl=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[]]}),t})();const Rl=["*"];let Dl=(()=>{class t{constructor(){this.centerAlign=!0,this.backdropClass="dark-backdrop"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["app-popup"]],inputs:{centerAlign:"centerAlign",backdropClass:"backdropClass"},ngContentSelectors:Rl,decls:3,vars:3,consts:[["id","myModal",1,"my-modal",3,"ngClass"],[1,"my-modal-content"]],template:function(t,e){1&t&&(o.ic(),o.Tb(0,"div",0),o.Tb(1,"div",1),o.hc(2),o.Sb(),o.Sb()),2&t&&(o.Fb("my-modal-center",e.centerAlign),o.jc("ngClass",e.backdropClass))},directives:[i.i],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.my-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:10000;display:flex;justify-content:center;width:100%;height:100%;overflow:hidden;outline:0}.my-modal-center[_ngcontent-%COMP%]{align-items:center}.light-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.2)}.medium-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.5)}.dark-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.8)}.my-modal-content[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;pointer-events:auto;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.2);border-radius:.3rem;margin:1rem;outline:0;padding:10px}"]}),t})(),Nl=(()=>{class t{constructor(){this.selectedScaleIndex=100,this.scaleOptions=[{label:50,value:.5},{label:75,value:.75},{label:100,value:1},{label:125,value:1.25},{label:150,value:1.5},{label:200,value:2}]}ngOnChanges(t){this.selectedScaleIndex=2}setIntialScale(){}zoomIn(){this.selectedScaleIndex!==this.scaleOptions.length-1&&(this.selectedScaleIndex++,this.changeScale())}changeScale(){this.node.style.cssText="transition: transform ease .3s;"+`transform: scale(${this.scaleOptions[this.selectedScaleIndex].value});`}zoomOut(){0!==this.selectedScaleIndex&&(this.selectedScaleIndex--,this.changeScale())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["app-canvas-scale"]],inputs:{node:"node"},features:[o.zb()],decls:12,vars:2,consts:[[1,"canvas-scaler"],["mat-icon-button","","matTooltip","Zoom in","matTooltipPosition","left",3,"autofocus","click"],[1,"scale-value"],[1,"m-0"],["mat-icon-button","","isIconButton","true","matTooltip","Zoom out","matTooltipPosition","left",3,"click"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"div"),o.Tb(2,"button",1),o.bc("click",(function(){return e.zoomIn()})),o.Tb(3,"mat-icon"),o.zc(4,"add"),o.Sb(),o.Sb(),o.Sb(),o.Tb(5,"div",2),o.Tb(6,"label",3),o.zc(7),o.Sb(),o.Sb(),o.Tb(8,"div"),o.Tb(9,"button",4),o.bc("click",(function(){return e.zoomOut()})),o.Tb(10,"mat-icon"),o.zc(11,"remove"),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Bb(2),o.jc("autofocus",!1),o.Bb(5),o.Bc("",null==e.scaleOptions[e.selectedScaleIndex]?null:e.scaleOptions[e.selectedScaleIndex].label,"%"))},directives:[F.a,tn.a,Be.a],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.canvas-scaler[_ngcontent-%COMP%]{position:fixed;bottom:60px;right:60px;background-color:rgba(83,47,47,.6);border-radius:3px;z-index:10001}.canvas-scaler[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center}.canvas-scaler[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.scale-value[_ngcontent-%COMP%]{color:#dedede;font-size:.625rem}.mat-icon-button[_ngcontent-%COMP%]{color:#f5f5f5}.mat-icon-button[_ngcontent-%COMP%]:hover{background:#a9a9a9}"]}),t})();const Al=["canvasPreview"];let Ll=(()=>{class t{constructor(){this.closePreview=new o.n}ngOnInit(){this.canvasElement.style[w.OVERFLOW]=T.OVERFLOW_HIDDEN,this.canvasPreview.nativeElement.appendChild(Ue.buildDom(this.canvasElement))}close(){this.closePreview.emit()}print(){Ue.print(this.canvasPreview.nativeElement.innerHTML)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["app-canvas-preview"]],viewQuery:function(t,e){var n;1&t&&o.vc(Al,!0),2&t&&o.nc(n=o.cc())&&(e.canvasPreview=n.first)},inputs:{canvasElement:"canvasElement"},outputs:{closePreview:"closePreview"},decls:14,vars:1,consts:[[1,"my-modal-header"],[1,"modal-title"],["mat-icon-button","","matTooltip","Close","matTooltipPosition","above",3,"click"],[1,"material-icons"],[1,"canvas-preview-container"],[1,"canvas-preview","fit-content"],["canvasPreview",""],[3,"node"]],template:function(t,e){if(1&t&&(o.Tb(0,"div",0),o.Tb(1,"h5",1),o.zc(2,"Preview"),o.Sb(),o.Tb(3,"div"),o.Tb(4,"button",2),o.bc("click",(function(){return e.print()})),o.Tb(5,"i",3),o.zc(6,"print"),o.Sb(),o.Sb(),o.Tb(7,"button",2),o.bc("click",(function(){return e.close()})),o.Tb(8,"i",3),o.zc(9,"close"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Tb(10,"div",4),o.Pb(11,"div",5,6),o.Sb(),o.Pb(13,"app-canvas-scale",7)),2&t){const t=o.oc(12);o.Bb(13),o.jc("node",t)}},directives:[F.a,tn.a,Nl],styles:[".my-modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.canvas-preview-container[_ngcontent-%COMP%]{width:calc(100vw - 60px);height:calc(100vh - 100px);overflow-y:auto;background-color:#f5f5f5;border:1px solid #dcdcdc;display:flex;justify-content:center}.canvas-preview[_ngcontent-%COMP%]{transform-origin:top;margin:30px}"]}),t})();const Bl=["canvas"],jl=["canvasContainer"],Gl=["selectElementRef"];function Hl(t,e){if(1&t){const t=o.Ub();o.Tb(0,"app-popup"),o.Tb(1,"app-canvas-preview",13),o.bc("closePreview",(function(){return o.sc(t),o.ec().showPreview=!1})),o.Sb(),o.Sb()}if(2&t){const t=o.ec();o.Bb(1),o.jc("canvasElement",null==t.project?null:t.project.canvasElement)}}function Fl(t,e){if(1&t&&o.Pb(0,"app-canvas-scale",14),2&t){o.ec();const t=o.oc(7);o.jc("node",t)}}let Xl=(()=>{class t{constructor(t,e){this.eventer=t,this.undoService=e,this.CANVAS_EVENTS=[h.a.CANVAS_PREVIEW,h.a.CANVAS_DOWNLOAD,h.a.CANVAS_ADD_ITEM],this.body=document.body,this.toolbarOptions=[],this.project=Ve,this.showPreview=!1,this.defaultGroupRotate=0,this.guidingElements=[]}ngOnInit(){this.createInitialView(),this.subscribeEventer()}ngAfterViewInit(){}drop(t){t.preventDefault();const e=t.dataTransfer.getData("pickerItem");if(!e)return;const n=JSON.parse(e),i=n.item.canvasElement,r=this.projectNode.getBoundingClientRect();Ue.setInitialNodeLocation(t,n,r),this.addNewNode(i)}onDuplicateSelectedItem({canvasElements:t}){t.forEach(t=>{const e=p.cloneDeep(t);Ue.setDuplicateNodeLocation(e),this.addNewNode(e)})}addNewNode(t){switch(t.type){case l.BACKGROUND:this.handleBackgroundChange(t);break;default:this.handleGenericElements(t)}}handleBackgroundChange(t){const e={[w.BG]:this.project.canvasElement.style[w.BG]},n={[w.BG]:t.style[w.BG]};Ue.applyCss(this.projectNode,this.project.canvasElement,n,!0),this.undoService.add({canvasElements:[this.project.canvasElement],nodes:[this.projectNode],type:Qe.STYLE,oldStyle:[JSON.stringify(e)],newStyle:[JSON.stringify(n)]})}handleGenericElements(t){this.adjustWidthHeight(t);const e=Ue.buildDom(t);this.attachEventListner(e,t),this.addItemInProject(t,e),this.addToUndoList([t],[e],Qe.ADD)}addToUndoList(t,e,n){this.undoService.add({canvasElements:t,nodes:e,type:n})}adjustWidthHeight(t){t.type===l.PHOTO&&Fe.setInitialWidthAndHeight(this.getProjectWidthHeight(),t)}onSelectionStart(t){}onSelection(t){t.removed.forEach(t=>t.classList.remove("selected-item-guide")),t.selected.forEach(t=>t.classList.add("selected-item-guide"))}selectoDragStart(t){const e=t.inputEvent.target.classList;(e.contains("moveable-area")||e.contains("moveable-control")||e.contains("moveable-line"))&&t.stop()}selectoDragEnd(t){}clearItemSelection(){if(this.selectedNodes)for(const t of this.selectedNodes)t.classList.remove("selected-item-guide");this.selectedNodes=[],this.selectedCanvasElements=[]}onSelectionEnd(t){const e=t.selected;e.forEach(t=>t.style.outline="");const n=this.projectNode.children,i=[],r=[],o=[];for(let a=0;a<n.length;a++)if(e.includes(n[a])){const t=this.project.canvasElement.children[a];1!==e.length&&t.locked||(r.push(n[a]),i.push(t))}else o.push(n[a]);1===r.length&&this.addZIndex(r[0],i[0]),this.setInitialGroupRotate(i[0]),this.selectedNodes=r,this.selectedCanvasElements=i,this.guidingElements=o,t.isDragStart&&this.selectElementRef.startCustomDrag(t.inputEvent)}setInitialGroupRotate(t){this.defaultGroupRotate=t?Xe.getTransformValue(t.style[w.TRANSFORM],"rotate"):0}onSelectEnd(t){}getProjectWidthHeight(){return{width:this.project.canvasElement.dimention.width,height:this.project.canvasElement.dimention.height}}addItemInProject(t,e){this.projectNode.appendChild(e),this.project.canvasElement.children.push(t)}setNodeLocation(t,e,n){n.dimention.translateX=t.x,n.dimention.translateY=t.y,Ue.applyDimention(e,n,n.dimention,!0)}allowDrop(t){t.preventDefault()}createInitialView(){const t=Ue.buildDom(this.project.canvasElement);this.projectNode=t,this.canvas.nativeElement.appendChild(t),this.undoService.init(this.projectNode,this.project.canvasElement)}onCanvasClick(t){t.target&&t.target.classList.contains("canvas-template")&&(this.selectedNode=null,this.selectedCanvasElement=null)}attachEventListner(t,e,n=!0){this.selectElement(t,e,n),this.addZIndex(t,e)}selectElement(t,e,n){this.selectedNodes=[t],this.selectedCanvasElements=[e],this.guidingElements=Array.from(this.projectNode.children)}getInitialRotateDeg(){const t=this.selectedNode.style.transform;return t?parseInt(t.split("rotate(")[1],10):0}addZIndex(t,e){e.locked||e.style[w.Z_INDEX]===this.project.currentZindex-1||Ue.applyCss(t,e,{[w.Z_INDEX]:this.project.currentZindex++},!0)}onItemRemove({canvasElements:t,nodes:e},n=!0){const i=this.project.canvasElement.children.filter(e=>!t.includes(e));if(this.project.canvasElement.children=i,this.addToUndoList(t,e,Qe.DELETE),e.forEach(t=>{t.remove()}),n){const t=this.projectNode.children;this.selectedCanvasElements=i.length?[i[i.length-1]]:[],this.selectedNodes=t.length?[t[t.length-1]]:[]}}onItemGroup(t){const e=new O("div",{},{position:"absolute"},t.canvasElements);e.type=l.GROUP,Ue.setGroupNodeLocation(t.nodes,e,this.canvas.nativeElement),this.onItemRemove(t,!1),this.addNewNode(e)}onItemUnGroup(t){const e=t.canvasElements[0],n=Xe.getTransformValue(e.style.transform,"translate");e.children.forEach(t=>{const e=Xe.getTransformValue(t.style.transform,"translate");Xe.updateTransformValue(t.style,"translate",`translate(${n.x+e.x}px,${n.y+e.y}px)`),this.addNewNode(t)}),Ue.setUnGroupNodeLocation(t.nodes[0],t.canvasElements[0]),this.onItemRemove(t,!1)}subscribeEventer(){this.eventer.get().pipe(Object(He.a)(t=>this.CANVAS_EVENTS.includes(t.type))).subscribe(t=>{this.processEventer(t)})}processEventer(t){switch(t.type){case h.a.CANVAS_PREVIEW:this.showPreview=!0;break;case h.a.CANVAS_ADD_ITEM:this.addNewNode(t.value.item)}}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(h.b),o.Ob($e))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-canvas"]],viewQuery:function(t,e){var n;1&t&&(o.vc(Bl,!0),o.vc(jl,!0),o.vc(Gl,!0)),2&t&&(o.nc(n=o.cc())&&(e.canvas=n.first),o.nc(n=o.cc())&&(e.canvasContainer=n.first),o.nc(n=o.cc())&&(e.selectElementRef=n.first))},decls:14,vars:19,consts:[[1,"tool-bar"],[3,"selectedNodes","selectedCanvasElements","clearSelectedElements","duplicateSelectedItem","removeSelectedItem","unGroupSelectedItem","groupSelectedItem"],[1,"canvas-container"],["canvasContainer",""],[1,"canvas-wrapper","position-relative"],[2,"width","100%","height","50px"],[1,"canvas",3,"drop","dragover","click"],["canvas",""],[3,"selectedNodes","defaultGroupRotate","guidingElements","selectedCanvasElements","container"],["selectElementRef",""],[3,"container","dragContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","toggleContinueSelect","keyContainer","hitRate","preventDefault","selectEnd","select","dragStart","dragEnd"],[4,"ngIf"],[3,"node",4,"ngIf"],[3,"canvasElement","closePreview"],[3,"node"]],template:function(t,e){if(1&t&&(o.Tb(0,"div",0),o.Tb(1,"app-toolbar",1),o.bc("clearSelectedElements",(function(){return e.clearItemSelection()}))("duplicateSelectedItem",(function(t){return e.onDuplicateSelectedItem(t)}))("removeSelectedItem",(function(t){return e.onItemRemove(t)}))("unGroupSelectedItem",(function(t){return e.onItemUnGroup(t)}))("groupSelectedItem",(function(t){return e.onItemGroup(t)})),o.Sb(),o.Sb(),o.Tb(2,"div",2,3),o.Tb(4,"div",4),o.Pb(5,"div",5),o.Tb(6,"div",6,7),o.bc("drop",(function(t){return e.drop(t)}))("dragover",(function(t){return e.allowDrop(t)}))("click",(function(t){return e.onCanvasClick(t)})),o.Sb(),o.Pb(8,"div",5),o.Pb(9,"app-select-element",8,9),o.Tb(11,"ngx-selecto",10),o.bc("selectEnd",(function(t){return e.onSelectionEnd(t)}))("select",(function(t){return e.onSelection(t)}))("dragStart",(function(t){return e.selectoDragStart(t)}))("dragEnd",(function(t){return e.selectoDragEnd(t)})),o.Sb(),o.Sb(),o.Sb(),o.yc(12,Hl,2,1,"app-popup",11),o.yc(13,Fl,1,1,"app-canvas-scale",12)),2&t){const t=o.oc(3),n=o.oc(7);o.Bb(1),o.jc("selectedNodes",e.selectedNodes)("selectedCanvasElements",e.selectedCanvasElements),o.Bb(8),o.jc("selectedNodes",e.selectedNodes)("defaultGroupRotate",e.defaultGroupRotate)("guidingElements",e.guidingElements)("selectedCanvasElements",e.selectedCanvasElements)("container",n),o.Bb(2),o.jc("container",n)("dragContainer",t)("selectableTargets",e.projectNode.childNodes)("selectByClick",!0)("selectFromInside",!1)("continueSelect",!1)("toggleContinueSelect","shift")("keyContainer",n)("hitRate",1)("preventDefault",!1),o.Bb(1),o.jc("ngIf",e.showPreview),o.Bb(1),o.jc("ngIf",!e.showPreview)}},directives:[An,Gc,Ml,i.k,Dl,Ll,Nl],styles:[".toolbar-icon-size{width:32px;line-height:32px;height:32px}.tool-bar{height:50px;z-index:9999;box-shadow:0 1px 1px grey}.canvas-container,.tool-bar{position:relative;width:100%;background-color:#f5f5f5}.canvas-container{height:calc(100vh - 110px);display:flex;justify-content:center;overflow:auto}.canvas-wrapper{outline:none}.canvas{position:relative;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;transform-origin:top;box-shadow:0 0 4px grey}.canvas img{-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none}.resize-handler{position:absolute;width:15px;height:15px;border-bottom:5px solid rgba(0,0,0,.842);border-right:5px solid rgba(0,0,0,.842);right:-5px;bottom:-5px;cursor:nwse-resize!important}.rotate-handler{position:absolute;left:calc(50% - 10px);top:-40px;color:rgba(0,0,0,.842);cursor:ew-resize}.selected-item-guide{outline:1px dashed silver}"],encapsulation:2}),t})();const Ul=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Ib({type:t,selectors:[["app-builder"]],decls:5,vars:0,consts:[[1,"builder-container"],[1,"pickers-container"],[1,"builder-canvas"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Pb(2,"app-pickers"),o.Sb(),o.Tb(3,"div",2),o.Pb(4,"app-canvas"),o.Sb(),o.Sb())},directives:[Ge,Xl],styles:[".toolbar-icon-size[_ngcontent-%COMP%]{width:32px;line-height:32px;height:32px}.builder-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.builder-canvas[_ngcontent-%COMP%]{width:100%;background-color:#fdfff8}"]}),t})()}];let Wl=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[r.a.forChild(Ul)],r.a]}),t})();var Yl=n("vvyD");let ql=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[i.c,H.b,H.g,Yl.a],H.b,H.g]}),t})(),Vl=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[]]}),t})(),Ql=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[i.c]]}),t})(),$l=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[i.c,Wl,ql,se,Yl.a,Vl,Nc,zl,Ql]]}),t})()}}]);